      
      
      
      

      <!DOCTYPE html>
      <html lang="en">

      <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="description" content="perlfaq6 - perldoc.perl.org">
        <link rel="icon" href="/public/img/favicon.ico">
        <title>perlfaq6 - perldoc.perl.org</title>
        <link href="/public/css/main.min.css" rel="stylesheet">
        <link rel="canonical" href="/perlfaq6.html">
        <link
          href='https://fonts.googleapis.com/css?family=Lato:400,100,300,700,900'
          rel='stylesheet' type='text/css'>
        <script>
          window.ga = window.ga || function () {
            (ga.q = ga.q || []).push(arguments)
          };
          ga.l = +new Date;
          ga('create', 'UA-1892152-2', 'auto'); // JJ's account
          ga('create', 'UA-50555-3', 'auto', 'perlOrg'); // perl.org account
          ga('require', 'outboundLinkTracker', {
            events: ['click', 'auxclick', 'contextmenu'],
          });
          ga('require', 'maxScrollTracker');
          ga('send', 'pageview');
          ga('perlOrg.send', 'pageview');
        </script>
        <script async src="https://www.google-analytics.com/analytics.js">
        </script>
        <script async src="/public/js/tracking.min.js"></script>
      </head>

      <body class="body container-fluid ">
        <div class="wrapper">

          <nav
    class="navbar navbar-dark bg-primary bg-perl fixed-top justify-content-between navbar-expand-lg">
    <a href="#content" class="skippy sr-only sr-only-focusable">
        <span class=' skippy-text'>Skip to main content</span>
    </a>
    <a class="navbar-brand" href="/">
        <img class="logo" src="/public/img/logo_perl_doc.svg"
            alt="Perl Documentation Logo" />
    </a>
    <button class="navbar-toggler" type="button" data-toggle="collapse"
        data-target="#navbar" aria-controls="navbar" aria-expanded="false"
        aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
    </button>
    <div id="navbar" class="collapse navbar-collapse ">
        <ul class="navbar-nav ml-auto navbar-right">
            <form class="nav-item dropdown search-wrapper">
                <input type="text" id='searchinput' aria-describedby='navbarDropdown5'
                    placeholder="Type query" class='search-input-field' value=''>

                <button href="#" data-toggle='dropdown' type="button"
                    aria-haspopup="true" aria-expanded='false' id="navbarDropdown5"
                    class="nav-link dropdown-toggle search-link">
                    <object tabindex='-1' focusable="false" class='search-icon'
                        data="/public/img/search.svg" type="image/svg+xml"
                        name='search icon'>search
                        icon</object>
                </button>
                <div class="dropdown-menu" aria-labelledby="navbarDropdown5"
                    id='search-results'>
                    <p class='dropdown-item major-version'>
                        No results
                    </p>
                </div>
            </form>
            <li class="nav-item dropdown">
                <a id="navbarDropdown" href="#" class="nav-link dropdown-toggle"
                    data-toggle="dropdown" role="button" aria-haspopup="true"
                    aria-expanded="false">Perl versions</a>
                <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                    
                        <p class='dropdown-item major-version'>
                            5.32
                        </p>
                        
                        <a class='dropdown-item minor-version' href="/5.32.0/">5.32.0</a>
                        
                        
                        <div class="dropdown-divider"></div>
                        
                    
                        <p class='dropdown-item major-version'>
                            5.30
                        </p>
                        
                        <a class='dropdown-item minor-version' href="/5.30.3/">5.30.3</a>
                        
                        <a class='dropdown-item minor-version' href="/5.30.2/">5.30.2</a>
                        
                        <a class='dropdown-item minor-version' href="/5.30.1/">5.30.1</a>
                        
                        <a class='dropdown-item minor-version' href="/5.30.0/">5.30.0</a>
                        
                        
                        <div class="dropdown-divider"></div>
                        
                    
                        <p class='dropdown-item major-version'>
                            5.28
                        </p>
                        
                        <a class='dropdown-item minor-version' href="/5.28.3/">5.28.3</a>
                        
                        <a class='dropdown-item minor-version' href="/5.28.2/">5.28.2</a>
                        
                        <a class='dropdown-item minor-version' href="/5.28.1/">5.28.1</a>
                        
                        <a class='dropdown-item minor-version' href="/5.28.0/">5.28.0</a>
                        
                        
                        <div class="dropdown-divider"></div>
                        
                    
                        <p class='dropdown-item major-version'>
                            5.26
                        </p>
                        
                        <a class='dropdown-item minor-version' href="/5.26.3/">5.26.3</a>
                        
                        <a class='dropdown-item minor-version' href="/5.26.2/">5.26.2</a>
                        
                        <a class='dropdown-item minor-version' href="/5.26.1/">5.26.1</a>
                        
                        <a class='dropdown-item minor-version' href="/5.26.0/">5.26.0</a>
                        
                        
                        <div class="dropdown-divider"></div>
                        
                    
                        <p class='dropdown-item major-version'>
                            5.24
                        </p>
                        
                        <a class='dropdown-item minor-version' href="/5.24.4/">5.24.4</a>
                        
                        <a class='dropdown-item minor-version' href="/5.24.3/">5.24.3</a>
                        
                        <a class='dropdown-item minor-version' href="/5.24.2/">5.24.2</a>
                        
                        <a class='dropdown-item minor-version' href="/5.24.1/">5.24.1</a>
                        
                        <a class='dropdown-item minor-version' href="/5.24.0/">5.24.0</a>
                        
                        
                        <div class="dropdown-divider"></div>
                        
                    
                        <p class='dropdown-item major-version'>
                            5.22
                        </p>
                        
                        <a class='dropdown-item minor-version' href="/5.22.4/">5.22.4</a>
                        
                        <a class='dropdown-item minor-version' href="/5.22.3/">5.22.3</a>
                        
                        <a class='dropdown-item minor-version' href="/5.22.2/">5.22.2</a>
                        
                        <a class='dropdown-item minor-version' href="/5.22.1/">5.22.1</a>
                        
                        <a class='dropdown-item minor-version' href="/5.22.0/">5.22.0</a>
                        
                        
                        <div class="dropdown-divider"></div>
                        
                    
                        <p class='dropdown-item major-version'>
                            5.20
                        </p>
                        
                        <a class='dropdown-item minor-version' href="/5.20.3/">5.20.3</a>
                        
                        <a class='dropdown-item minor-version' href="/5.20.2/">5.20.2</a>
                        
                        <a class='dropdown-item minor-version' href="/5.20.1/">5.20.1</a>
                        
                        <a class='dropdown-item minor-version' href="/5.20.0/">5.20.0</a>
                        
                        
                        <div class="dropdown-divider"></div>
                        
                    
                        <p class='dropdown-item major-version'>
                            5.18
                        </p>
                        
                        <a class='dropdown-item minor-version' href="/5.18.4/">5.18.4</a>
                        
                        <a class='dropdown-item minor-version' href="/5.18.3/">5.18.3</a>
                        
                        <a class='dropdown-item minor-version' href="/5.18.2/">5.18.2</a>
                        
                        <a class='dropdown-item minor-version' href="/5.18.1/">5.18.1</a>
                        
                        <a class='dropdown-item minor-version' href="/5.18.0/">5.18.0</a>
                        
                        
                        <div class="dropdown-divider"></div>
                        
                    
                        <p class='dropdown-item major-version'>
                            5.16
                        </p>
                        
                        <a class='dropdown-item minor-version' href="/5.16.3/">5.16.3</a>
                        
                        <a class='dropdown-item minor-version' href="/5.16.2/">5.16.2</a>
                        
                        <a class='dropdown-item minor-version' href="/5.16.1/">5.16.1</a>
                        
                        <a class='dropdown-item minor-version' href="/5.16.0/">5.16.0</a>
                        
                        
                        <div class="dropdown-divider"></div>
                        
                    
                        <p class='dropdown-item major-version'>
                            5.14
                        </p>
                        
                        <a class='dropdown-item minor-version' href="/5.14.4/">5.14.4</a>
                        
                        <a class='dropdown-item minor-version' href="/5.14.3/">5.14.3</a>
                        
                        <a class='dropdown-item minor-version' href="/5.14.2/">5.14.2</a>
                        
                        <a class='dropdown-item minor-version' href="/5.14.1/">5.14.1</a>
                        
                        <a class='dropdown-item minor-version' href="/5.14.0/">5.14.0</a>
                        
                        
                        <div class="dropdown-divider"></div>
                        
                    
                        <p class='dropdown-item major-version'>
                            5.12
                        </p>
                        
                        <a class='dropdown-item minor-version' href="/5.12.5/">5.12.5</a>
                        
                        <a class='dropdown-item minor-version' href="/5.12.4/">5.12.4</a>
                        
                        <a class='dropdown-item minor-version' href="/5.12.3/">5.12.3</a>
                        
                        <a class='dropdown-item minor-version' href="/5.12.2/">5.12.2</a>
                        
                        <a class='dropdown-item minor-version' href="/5.12.1/">5.12.1</a>
                        
                        <a class='dropdown-item minor-version' href="/5.12.0/">5.12.0</a>
                        
                        
                        <div class="dropdown-divider"></div>
                        
                    
                        <p class='dropdown-item major-version'>
                            5.10
                        </p>
                        
                        <a class='dropdown-item minor-version' href="/5.10.1/">5.10.1</a>
                        
                        <a class='dropdown-item minor-version' href="/5.10.0/">5.10.0</a>
                        
                        
                        <div class="dropdown-divider"></div>
                        
                    
                        <p class='dropdown-item major-version'>
                            5.8
                        </p>
                        
                        <a class='dropdown-item minor-version' href="/5.8.9/">5.8.9</a>
                        
                        <a class='dropdown-item minor-version' href="/5.8.8/">5.8.8</a>
                        
                        <a class='dropdown-item minor-version' href="/5.8.7/">5.8.7</a>
                        
                        <a class='dropdown-item minor-version' href="/5.8.6/">5.8.6</a>
                        
                        <a class='dropdown-item minor-version' href="/5.8.5/">5.8.5</a>
                        
                        <a class='dropdown-item minor-version' href="/5.8.4/">5.8.4</a>
                        
                        <a class='dropdown-item minor-version' href="/5.8.3/">5.8.3</a>
                        
                        <a class='dropdown-item minor-version' href="/5.8.2/">5.8.2</a>
                        
                        <a class='dropdown-item minor-version' href="/5.8.1/">5.8.1</a>
                        
                        <a class='dropdown-item minor-version' href="/5.8.0/">5.8.0</a>
                        
                        
                        <div class="dropdown-divider"></div>
                        
                    
                        <p class='dropdown-item major-version'>
                            5.6
                        </p>
                        
                        <a class='dropdown-item minor-version' href="/5.6.2/">5.6.2</a>
                        
                        <a class='dropdown-item minor-version' href="/5.6.1/">5.6.1</a>
                        
                        <a class='dropdown-item minor-version' href="/5.6.0/">5.6.0</a>
                        
                        
                    
                </div>
            </li>
            <li class="nav-item dropdown">
                <a id="navbarDropdown1" href="#" class="dropdown-toggle nav-link"
                    data-toggle="dropdown" role="button" aria-haspopup="true"
                    aria-expanded="false">Manuals</a>
                <div class="dropdown-menu" aria-labelledby="navbarDropdown1">
                    <a class="dropdown-item"
                        href="/5.8.0/index-overview.html">Overview</a>
                    <a class="dropdown-item"
                        href="/5.8.0/index-tutorials.html">Tutorials</a>
                    <a class="dropdown-item"
                        href="/5.8.0/index-faq.html">FAQs</a>
                    <a class="dropdown-item"
                        href="/5.8.0/index-history.html">Changes</a>
                    <a class="dropdown-item"
                        href="/5.8.0/index-licence.html">License</a>
                    <a class="dropdown-item"
                        href="/5.8.0/index-language.html">Language</a>
                    <a class="dropdown-item"
                        href="/5.8.0/index-functions.html">Functions</a>
                    <a class="dropdown-item"
                        href="/5.8.0/perlop.html">Operators</a>
                    <a class="dropdown-item"
                        href="/5.8.0/perlvar.html">Variables</a>
                    <a class="dropdown-item"
                        href="/5.8.0/index-pragmas.html">Pragmas</a>
                    <a class="dropdown-item"
                        href="/5.8.0/index-utilities.html">Utilities</a>
                    <a class="dropdown-item"
                        href="/5.8.0/index-internals.html">Internals</a>
                    <a class="dropdown-item"
                        href="/5.8.0/index-platforms.html">Platforms</a>
                </div>
            </li>
            <li class="nav-item dropdown">
                <a id="navbarDropdown3" href="#" class="nav-link dropdown-toggle "
                    data-toggle="dropdown" role="button" aria-haspopup="true"
                    aria-expanded="false">Modules</a>
                <div aria-labelledby="navbarDropdown3"
                    class="dropdown-menu letters-wrap">
                    <!--<a class="dropdown-item"
                        href="/5.8.0/index-modules.html">A-Z</a>
                    <a class="dropdown-item"
                        href="/5.8.0/index-modules-by-cat.html">By
                        Category</a>-->
                    <div class="dropdown-divider"></div>
                    <div class="letter-container">
                        <a class="dropdown-item letters"
                            href="/5.8.0/index-modules-A.html">A</a>
                        <a class="dropdown-item letters"
                            href="/5.8.0/index-modules-B.html">B</a>
                        <a class="dropdown-item letters"
                            href="/5.8.0/index-modules-C.html">C</a>
                        <a class="dropdown-item letters"
                            href="/5.8.0/index-modules-D.html">D</a>
                        <a class="dropdown-item letters"
                            href="/5.8.0/index-modules-E.html">E</a>
                        <a class="dropdown-item letters"
                            href="/5.8.0/index-modules-F.html">F</a>
                        <a class="dropdown-item letters"
                            href="/5.8.0/index-modules-G.html">G</a>
                        <a class="dropdown-item letters"
                            href="/5.8.0/index-modules-H.html">H</a>
                        <a class="dropdown-item letters"
                            href="/5.8.0/index-modules-I.html">I</a>
                        <a class="dropdown-item letters"
                            href="/5.8.0/index-modules-J.html">J</a>
                        <a class="dropdown-item letters"
                            href="/5.8.0/index-modules-K.html">K</a>
                        <a class="dropdown-item letters"
                            href="/5.8.0/index-modules-L.html">L</a>
                        <a class="dropdown-item letters"
                            href="/5.8.0/index-modules-M.html">M</a>
                        <a class="dropdown-item letters"
                            href="/5.8.0/index-modules-N.html">N</a>
                        <a class="dropdown-item letters"
                            href="/5.8.0/index-modules-O.html">O</a>
                        <a class="dropdown-item letters"
                            href="/5.8.0/index-modules-P.html">P</a>
                        <a class="dropdown-item letters"
                            href="/5.8.0/index-modules-Q.html">Q</a>
                        <a class="dropdown-item letters"
                            href="/5.8.0/index-modules-R.html">R</a>
                        <a class="dropdown-item letters"
                            href="/5.8.0/index-modules-S.html">S</a>
                        <a class="dropdown-item letters"
                            href="/5.8.0/index-modules-T.html">T</a>
                        <a class="dropdown-item letters"
                            href="/5.8.0/index-modules-U.html">U</a>
                        <a class="dropdown-item letters"
                            href="/5.8.0/index-modules-V.html">V</a>
                        <a class="dropdown-item letters"
                            href="/5.8.0/index-modules-W.html">W</a>
                        <a class="dropdown-item letters"
                            href="/5.8.0/index-modules-X.html">X</a>
                        <a class="dropdown-item letters"
                            href="/5.8.0/index-modules-Y.html">Y</a>
                        <a class="dropdown-item letters"
                            href="/5.8.0/index-modules-Z.html">Z</a>
                    </div>
                </div>
            </li>
            <li class="nav-item dropdown">
                <a id="navbarDropdown4" href="#" class="nav-link dropdown-toggle "
                    data-toggle="dropdown" role="button" aria-haspopup="true"
                    aria-expanded="false">Functions</a>
                <div aria-labelledby="navbarDropdown4"
                    class="dropdown-menu letters-wrap">
                    <a class="dropdown-item"
                        href="/5.8.0/index-functions.html">A-Z</a>
                    <a class="dropdown-item"
                        href="/5.8.0/index-functions-by-cat.html">By
                        Category</a>
                    <div class="dropdown-divider"></div>
                    <div class="letter-container">
                        <a class="dropdown-item letters"
                            href="/5.8.0/index-functions.html#A">A</a>
                        <a class="dropdown-item letters"
                            href="/5.8.0/index-functions.html#B">B</a>
                        <a class="dropdown-item letters"
                            href="/5.8.0/index-functions.html#C">C</a>
                        <a class="dropdown-item letters"
                            href="/5.8.0/index-functions.html#D">D</a>
                        <a class="dropdown-item letters"
                            href="/5.8.0/index-functions.html#E">E</a>
                        <a class="dropdown-item letters"
                            href="/5.8.0/index-functions.html#F">F</a>
                        <a class="dropdown-item letters"
                            href="/5.8.0/index-functions.html#G">G</a>
                        <a class="dropdown-item letters"
                            href="/5.8.0/index-functions.html#H">H</a>
                        <a class="dropdown-item letters"
                            href="/5.8.0/index-functions.html#I">I</a>
                        <a class="dropdown-item letters"
                            href="/5.8.0/index-functions.html#J">J</a>
                        <a class="dropdown-item letters"
                            href="/5.8.0/index-functions.html#K">K</a>
                        <a class="dropdown-item letters"
                            href="/5.8.0/index-functions.html#L">L</a>
                        <a class="dropdown-item letters"
                            href="/5.8.0/index-functions.html#M">M</a>
                        <a class="dropdown-item letters"
                            href="/5.8.0/index-functions.html#N">N</a>
                        <a class="dropdown-item letters"
                            href="/5.8.0/index-functions.html#O">O</a>
                        <a class="dropdown-item letters"
                            href="/5.8.0/index-functions.html#P">P</a>
                        <a class="dropdown-item letters"
                            href="/5.8.0/index-functions.html#Q">Q</a>
                        <a class="dropdown-item letters"
                            href="/5.8.0/index-functions.html#R">R</a>
                        <a class="dropdown-item letters"
                            href="/5.8.0/index-functions.html#S">S</a>
                        <a class="dropdown-item letters"
                            href="/5.8.0/index-functions.html#T">T</a>
                        <a class="dropdown-item letters"
                            href="/5.8.0/index-functions.html#U">U</a>
                        <a class="dropdown-item letters"
                            href="/5.8.0/index-functions.html#V">V</a>
                        <a class="dropdown-item letters"
                            href="/5.8.0/index-functions.html#W">W</a>
                        <a class="dropdown-item letters"
                            href="/5.8.0/index-functions.html#X">X</a>
                        <a class="dropdown-item letters"
                            href="/5.8.0/index-functions.html#Y">Y</a>
                        <a class="dropdown-item letters"
                            href="/5.8.0/index-functions.html#Z">Z</a>
                    </div>
                </div>
            </li>
        </ul>
    </div>
    <!--/.nav-collapse -->
</nav>


          <main class="row main-content pb-5 pt-5" id='content'>
            <div class="col-sm-10 offset-sm-1 col-xl-8 offset-xl-2">
              <div class="row">
                <div class="col-sm-12">
                  <div id="breadcrumbs">
                      
    <a href="index.html">Home</a>&nbsp; &gt;
    
      
        <a href="index-faq.html">FAQs</a> &gt;
      
    
    perlfaq6
  

                  </div>
                </div>
              </div>
              <div class="row">
                <article class="col-sm-12 content">
                  <div class="documentation-wrapper">
                    <div id="perl_version">
                      <h7 class='page-title'> Perl 5 version 8.0
                        documentation</h7>
                    </div>
                    <h1>perlfaq6</h1>


  <!--    -->
<ul><li><a href="#NAME">NAME</a></li><li><a href="#DESCRIPTION">DESCRIPTION</a></li><ul><li><a href="#How-can-I-hope-to-use-regular-expressions-without-creating-illegible-and-unmaintainable-code%3f">How can I hope to use regular expressions without creating illegible and unmaintainable code?</a></li><li><a href="#I'm-having-trouble-matching-over-more-than-one-line.--What's-wrong%3f">I'm having trouble matching over more than one line.  What's wrong?</a></li><li><a href="#How-can-I-pull-out-lines-between-two-patterns-that-are-themselves-on-different-lines%3f">How can I pull out lines between two patterns that are themselves on different lines?</a></li><li><a href="#I-put-a-regular-expression-into-%24%2f-but-it-didn't-work.-What's-wrong%3f">I put a regular expression into $/ but it didn't work. What's wrong?</a></li><li><a href="#How-do-I-substitute-case-insensitively-on-the-LHS-while-preserving-case-on-the-RHS%3f">How do I substitute case insensitively on the LHS while preserving case on the RHS?</a></li><li><a href="#How-can-I-make-%5cw-match-national-character-sets%3f">How can I make \w match national character sets?</a></li><li><a href="#How-can-I-match-a-locale-smart-version-of-%2f%5ba-zA-Z%5d%2f%3f">How can I match a locale-smart version of /[a-zA-Z]/?</a></li><li><a href="#How-can-I-quote-a-variable-to-use-in-a-regex%3f">How can I quote a variable to use in a regex?</a></li><li><a href="#What-is-%2fo-really-for%3f">What is /o really for?</a></li><li><a href="#How-do-I-use-a-regular-expression-to-strip-C-style-comments-from-a-file%3f">How do I use a regular expression to strip C style comments from a file?</a></li><li><a href="#Can-I-use-Perl-regular-expressions-to-match-balanced-text%3f">Can I use Perl regular expressions to match balanced text?</a></li><li><a href="#What-does-it-mean-that-regexes-are-greedy%3f--How-can-I-get-around-it%3f">What does it mean that regexes are greedy?  How can I get around it?</a></li><li><a href="#How-do-I-process-each-word-on-each-line%3f">How do I process each word on each line?</a></li><li><a href="#How-can-I-print-out-a-word-frequency-or-line-frequency-summary%3f">How can I print out a word-frequency or line-frequency summary?</a></li><li><a href="#How-can-I-do-approximate-matching%3f">How can I do approximate matching?</a></li><li><a href="#How-do-I-efficiently-match-many-regular-expressions-at-once%3f">How do I efficiently match many regular expressions at once?</a></li><li><a href="#Why-don't-word-boundary-searches-with-%5cb-work-for-me%3f">Why don't word-boundary searches with \b work for me?</a></li><li><a href="#Why-does-using-%24%26%2c-%24%60%2c-or-%24'-slow-my-program-down%3f">Why does using $&, $`, or $' slow my program down?</a></li><li><a href="#What-good-is-%5cG-in-a-regular-expression%3f">What good is \G in a regular expression?</a></li><li><a href="#Are-Perl-regexes-DFAs-or-NFAs%3f--Are-they-POSIX-compliant%3f">Are Perl regexes DFAs or NFAs?  Are they POSIX compliant?</a></li><li><a href="#What's-wrong-with-using-grep-or-map-in-a-void-context%3f">What's wrong with using grep or map in a void context?</a></li><li><a href="#How-can-I-match-strings-with-multibyte-characters%3f">How can I match strings with multibyte characters?</a></li><li><a href="#How-do-I-match-a-pattern-that-is-supplied-by-the-user%3f">How do I match a pattern that is supplied by the user?</a></li></ul><li><a href="#AUTHOR-AND-COPYRIGHT">AUTHOR AND COPYRIGHT</a></li></ul><a class='view-head1' id="NAME"></a><h2 class='h2' >NAME</h2>
<p>perlfaq6 - Regular Expressions ($Revision: 1.12 $, $Date: 2002/06/01 22:31:09 $)</p>
<a class='view-head1' id="DESCRIPTION"></a><h2 class='h2' >DESCRIPTION</h2>
<p>This section is surprisingly small because the rest of the FAQ is
littered with answers involving regular expressions.  For example,
decoding a URL and checking whether something is a number are handled
with regular expressions, but those answers are found elsewhere in
this document (in <a href="perlfaq9.html">perlfaq9</a>: ``How do I decode or create those %-encodings 
on the web'' and <a href="perlfaq4.html">perlfaq4</a>: ``How do I determine whether a scalar is
a number/whole/integer/float'', to be precise).</p>
<a class='view-head2' id="How-can-I-hope-to-use-regular-expressions-without-creating-illegible-and-unmaintainable-code%3f"></a><h3 class='h3' >How can I hope to use regular expressions without creating illegible and unmaintainable code?</h3>
<p>Three techniques can make regular expressions maintainable and
understandable.</p>
<ul>
<li><a class='view-title' id="Comments-Outside-the-Regex"></a><strong>Comments Outside the Regex</strong>
<p>Describe what you're doing and how you're doing it, using normal Perl
comments.</p>
<pre class="verbatim"><ol><li>    <span class="c"># turn the line into the first word, a colon, and the</span></li><li>    <span class="c"># number of characters on the rest of the line</span></li><li>    <span class="q">s/^(\w+)(.*)/ lc($1) . &quot;:&quot; . length($2) /meg</span><span class="sc">;</span></li></ol></pre></li>
<li><a class='view-title' id="Comments-Inside-the-Regex"></a><strong>Comments Inside the Regex</strong>
<p>The <code class="inline"><span class="q">/x</span></code>
 modifier causes whitespace to be ignored in a regex pattern
(except in a character class), and also allows you to use normal
comments there, too.  As you can imagine, whitespace and comments help
a lot.</p>
<p><code class="inline"><span class="q">/x</span></code>
 lets you turn this:</p>
<pre class="verbatim"><ol><li>    <span class="q">s{&lt;(?:[^&gt;&#39;&quot;]*|&quot;.*?&quot;|&#39;.*?&#39;)+&gt;}{}gs</span><span class="sc">;</span></li></ol></pre><p>into this:</p>
<pre class="verbatim"><ol><li>    <span class="q">s{ &lt;                    # opening angle bracket</span></li><li>        <span class="q">        (?:                 # Non-backreffing grouping paren</span></li><li>             <span class="q">             [^&gt;&#39;&quot;] *       # 0 or more things that are neither &gt; nor &#39; nor &quot;</span></li><li>                <span class="q">                |           #    or else</span></li><li>             <span class="q">             &quot;.*?&quot;          # a section between double quotes (stingy match)</span></li><li>                <span class="q">                |           #    or else</span></li><li>             <span class="q">             &#39;.*?&#39;          # a section between single quotes (stingy match)</span></li><li>        <span class="q">        ) +                 #   all occurring one or more times</span></li><li>       <span class="q">       &gt;                    # closing angle bracket</span></li><li>    <span class="q">    }{}gsx</span><span class="sc">;</span>                 <span class="c"># replace with nothing, i.e. delete</span></li></ol></pre><p>It's still not quite so clear as prose, but it is very useful for
describing the meaning of each part of the pattern.</p>
</li>
<li><a class='view-title' id="Different-Delimiters"></a><strong>Different Delimiters</strong>
<p>While we normally think of patterns as being delimited with <code class="inline"><span class="q">/</span></code>

characters, they can be delimited by almost any character.  <a href="perlre.html">perlre</a>
describes this.  For example, the <code class="inline"><a class="l_k" href="functions/s.html">s///</a></code> above uses braces as
delimiters.  Selecting another delimiter can avoid quoting the
delimiter within the pattern:</p>
<pre class="verbatim"><ol><li>    <span class="q">s/\/usr\/local/\/usr\/share/g</span><span class="sc">;</span>	<span class="c"># bad delimiter choice</span></li><li>    <span class="q">s#/usr/local#/usr/share#g</span><span class="sc">;</span>		<span class="c"># better</span></li></ol></pre></li>
</ul>
<a class='view-head2' id="I'm-having-trouble-matching-over-more-than-one-line.--What's-wrong%3f"></a><h3 class='h3' >I'm having trouble matching over more than one line.  What's wrong?</h3>
<p>Either you don't have more than one line in the string you're looking
at (probably), or else you aren't using the correct modifier(s) on
your pattern (possibly).</p>
<p>There are many ways to get multiline data into a string.  If you want
it to happen automatically while reading input, you'll want to set $/
(probably to '' for paragraphs or <code class="inline"><a class="l_k" href="functions/undef.html">undef</a></code> for the whole file) to
allow you to read more than one line at a time.</p>
<p>Read <a href="perlre.html">perlre</a> to help you decide which of <code class="inline"><span class="q">/s</span></code>
 and <code class="inline"><span class="q">/m</span></code>
 (or both)
you might want to use: <code class="inline"><span class="q">/s</span></code>
 allows dot to include newline, and <code class="inline"><span class="q">/m</span></code>

allows caret and dollar to match next to a newline, not just at the
end of the string.  You do need to make sure that you've actually
got a multiline string in there.</p>
<p>For example, this program detects duplicate words, even when they span
line breaks (but not paragraph ones).  For this example, we don't need
<code class="inline"><span class="q">/s</span></code>
 because we aren't using dot in a regular expression that we want
to cross line boundaries.  Neither do we need <code class="inline"><span class="q">/m</span></code>
 because we aren't
wanting caret or dollar to match at any point inside the record next
to newlines.  But it's imperative that $/ be set to something other
than the default, or else we won't actually ever have a multiline
record read in.</p>
<pre class="verbatim"><ol><li>    <span class="i">$/</span> = <span class="q">&#39;&#39;</span><span class="sc">;</span>  		<span class="c"># read in more whole paragraph, not just one line</span></li><li>    while <span class="s">(</span> &lt;&gt; <span class="s">)</span> <span class="s">{</span></li><li>	while <span class="s">(</span> <span class="q">/\b([\w&#39;-]+)(\s+\1)+\b/gi</span> <span class="s">)</span> <span class="s">{</span>  	<span class="c"># word starts alpha</span></li><li>	    <a class="l_k" href="functions/print.html">print</a> <span class="q">&quot;Duplicate $1 at paragraph $.\n&quot;</span><span class="sc">;</span></li><li>	<span class="s">}</span></li><li>    <span class="s">}</span></li></ol></pre><p>Here's code that finds sentences that begin with "From " (which would
be mangled by many mailers):</p>
<pre class="verbatim"><ol><li>    <span class="i">$/</span> = <span class="q">&#39;&#39;</span><span class="sc">;</span>  		<span class="c"># read in more whole paragraph, not just one line</span></li><li>    while <span class="s">(</span> &lt;&gt; <span class="s">)</span> <span class="s">{</span></li><li>	while <span class="s">(</span> <span class="q">/^From /gm</span> <span class="s">)</span> <span class="s">{</span> <span class="c"># /m makes ^ match next to \n</span></li><li>	    <a class="l_k" href="functions/print.html">print</a> <span class="q">&quot;leading from in paragraph $.\n&quot;</span><span class="sc">;</span></li><li>	<span class="s">}</span></li><li>    <span class="s">}</span></li></ol></pre><p>Here's code that finds everything between START and END in a paragraph:</p>
<pre class="verbatim"><ol><li>    <a class="l_k" href="functions/undef.html">undef</a> <span class="i">$/</span><span class="sc">;</span>  		<span class="c"># read in whole file, not just one line or paragraph</span></li><li>    while <span class="s">(</span> &lt;&gt; <span class="s">)</span> <span class="s">{</span></li><li>	while <span class="s">(</span> <span class="q">/START(.*?)END/sgm</span> <span class="s">)</span> <span class="s">{</span> <span class="c"># /s makes . cross line boundaries</span></li><li>	    <a class="l_k" href="functions/print.html">print</a> <span class="q">&quot;$1\n&quot;</span><span class="sc">;</span></li><li>	<span class="s">}</span></li><li>    <span class="s">}</span></li></ol></pre><a class='view-head2' id="How-can-I-pull-out-lines-between-two-patterns-that-are-themselves-on-different-lines%3f"></a><h3 class='h3' >How can I pull out lines between two patterns that are themselves on different lines?</h3>
<p>You can use Perl's somewhat exotic <code class="inline">..</code>
 operator (documented in
<a href="perlop.html">perlop</a>):</p>
<pre class="verbatim"><ol><li>    <span class="w">perl</span> -ne <span class="q">&#39;print if /START/ .. /END/&#39;</span> <span class="w">file1</span> <span class="w">file2</span> ...</li></ol></pre><p>If you wanted text and not lines, you would use</p>
<pre class="verbatim"><ol><li>    <span class="w">perl</span> -<span class="n">0777</span> -ne <span class="q">&#39;print &quot;$1\n&quot; while /START(.*?)END/gs&#39;</span> <span class="w">file1</span> <span class="w">file2</span> ...</li></ol></pre><p>But if you want nested occurrences of <code class="inline"><span class="w">START</span></code>
 through <code class="inline">END</code>
, you'll
run up against the problem described in the question in this section
on matching balanced text.</p>
<p>Here's another example of using <code class="inline">..</code>
:</p>
<pre class="verbatim"><ol><li>    while <span class="s">(</span>&lt;&gt;<span class="s">)</span> <span class="s">{</span></li><li>        <span class="i">$in_header</span> =   <span class="n">1</span>  .. <span class="q">/^$/</span><span class="sc">;</span></li><li>        <span class="i">$in_body</span>   = <span class="q">/^$/</span> .. <a class="l_k" href="functions/eof.html">eof</a><span class="s">(</span><span class="s">)</span><span class="sc">;</span></li><li>	<span class="c"># now choose between them</span></li><li>    <span class="s">}</span> <a class="l_k" href="functions/continue.html">continue</a> <span class="s">{</span></li><li>	<a class="l_k" href="functions/reset.html">reset</a> if <a class="l_k" href="functions/eof.html">eof</a><span class="s">(</span><span class="s">)</span><span class="sc">;</span>		<span class="c"># fix $.</span></li><li>    <span class="s">}</span></li></ol></pre><a class='view-head2' id="I-put-a-regular-expression-into-%24%2f-but-it-didn't-work.-What's-wrong%3f"></a><h3 class='h3' >I put a regular expression into $/ but it didn't work. What's wrong?</h3>
<p>$/ must be a string, not a regular expression.  Awk has to be better
for something. :-)</p>
<p>Actually, you could do this if you don't mind reading the whole file
into memory:</p>
<pre class="verbatim"><ol><li>    <a class="l_k" href="functions/undef.html">undef</a> <span class="i">$/</span><span class="sc">;</span></li><li>    <span class="i">@records</span> = <a class="l_k" href="functions/split.html">split</a> <span class="q">/your_pattern/</span><span class="cm">,</span> <span class="q">&lt;FH&gt;</span><span class="sc">;</span></li></ol></pre><p>The Net::Telnet module (available from CPAN) has the capability to
wait for a pattern in the input stream, or timeout if it doesn't
appear within a certain time.</p>
<pre class="verbatim"><ol><li>    <span class="c">## Create a file with three lines.</span></li><li>    <a class="l_k" href="functions/open.html">open</a> <span class="w">FH</span><span class="cm">,</span> <span class="q">&quot;&gt;file&quot;</span><span class="sc">;</span></li><li>    <a class="l_k" href="functions/print.html">print</a> <span class="i">FH</span> <span class="q">&quot;The first line\nThe second line\nThe third line\n&quot;</span><span class="sc">;</span></li><li>    <a class="l_k" href="functions/close.html">close</a> <span class="w">FH</span><span class="sc">;</span></li><li></li><li>    <span class="c">## Get a read/write filehandle to it.</span></li><li>    <span class="i">$fh</span> = <span class="w">new</span> <span class="w">IO::File</span> <span class="q">&quot;+&lt;file&quot;</span><span class="sc">;</span></li><li></li><li>    <span class="c">## Attach it to a &quot;stream&quot; object.</span></li><li>    <a class="l_k" href="functions/use.html">use</a> <span class="w">Net::Telnet</span><span class="sc">;</span></li><li>    <span class="i">$file</span> = <span class="w">new</span> <span class="w">Net::Telnet</span> <span class="s">(</span>-<span class="w">fhopen</span> <span class="cm">=&gt;</span> <span class="i">$fh</span><span class="s">)</span><span class="sc">;</span></li><li></li><li>    <span class="c">## Search for the second line and print out the third.</span></li><li>    <span class="i">$file</span><span class="i">-&gt;waitfor</span><span class="s">(</span><span class="q">&#39;/second line\n/&#39;</span><span class="s">)</span><span class="sc">;</span></li><li>    <a class="l_k" href="functions/print.html">print</a> <span class="i">$file</span><span class="i">-&gt;getline</span><span class="sc">;</span></li></ol></pre><a class='view-head2' id="How-do-I-substitute-case-insensitively-on-the-LHS-while-preserving-case-on-the-RHS%3f"></a><h3 class='h3' >How do I substitute case insensitively on the LHS while preserving case on the RHS?</h3>
<p>Here's a lovely Perlish solution by Larry Rosler.  It exploits
properties of bitwise xor on ASCII strings.</p>
<pre class="verbatim"><ol><li>    <span class="i">$_</span>= <span class="q">&quot;this is a TEsT case&quot;</span><span class="sc">;</span></li><li></li><li>    <span class="i">$old</span> = <span class="q">&#39;test&#39;</span><span class="sc">;</span></li><li>    <span class="i">$new</span> = <span class="q">&#39;success&#39;</span><span class="sc">;</span></li><li></li><li>    <span class="q">s{(\Q$old\E)}</span></li><li>     <span class="q">     { uc $new | (uc $1 ^ $1) .</span></li><li>	<span class="q">	(uc(substr $1, -1) ^ substr $1, -1) x</span></li><li>	    <span class="q">	    (length($new) - length $1)</span></li><li>     <span class="q">     }egi</span><span class="sc">;</span></li><li></li><li>    <a class="l_k" href="functions/print.html">print</a><span class="sc">;</span></li></ol></pre><p>And here it is as a subroutine, modeled after the above:</p>
<pre class="verbatim"><ol><li><a name="preserve_case"></a>    sub <span class="m">preserve_case($$)</span> <span class="s">{</span></li><li>	<a class="l_k" href="functions/my.html">my</a> <span class="s">(</span><span class="i">$old</span><span class="cm">,</span> <span class="i">$new</span><span class="s">)</span> = <span class="i">@_</span><span class="sc">;</span></li><li>	<a class="l_k" href="functions/my.html">my</a> <span class="i">$mask</span> = <a class="l_k" href="functions/uc.html">uc</a> <span class="i">$old</span> ^ <span class="i">$old</span><span class="sc">;</span></li><li></li><li>	<a class="l_k" href="functions/uc.html">uc</a> <span class="i">$new</span> | <span class="i">$mask</span> .</li><li>	    <a class="l_k" href="functions/substr.html">substr</a><span class="s">(</span><span class="i">$mask</span><span class="cm">,</span> <span class="n">-1</span><span class="s">)</span> x <span class="s">(</span><a class="l_k" href="functions/length.html">length</a><span class="s">(</span><span class="i">$new</span><span class="s">)</span> - <a class="l_k" href="functions/length.html">length</a><span class="s">(</span><span class="i">$old</span><span class="s">)</span><span class="s">)</span>        </li><li>    <span class="s">}</span></li><li></li><li>    <span class="i">$a</span> = <span class="q">&quot;this is a TEsT case&quot;</span><span class="sc">;</span></li><li>    <span class="i">$a</span> =~ <span class="q">s/(test)/preserve_case($1, &quot;success&quot;)/egi</span><span class="sc">;</span></li><li>    <a class="l_k" href="functions/print.html">print</a> <span class="q">&quot;$a\n&quot;</span><span class="sc">;</span></li></ol></pre><p>This prints:</p>
<pre class="verbatim"><ol><li>    <span class="w">this</span> <span class="w">is</span> <span class="w">a</span> <span class="w">SUcCESS</span> case</li></ol></pre><p>As an alternative, to keep the case of the replacement word if it is
longer than the original, you can use this code, by Jeff Pinyan:</p>
<pre class="verbatim"><ol><li><a name="preserve_case"></a>  sub <span class="m">preserve_case</span> <span class="s">{</span></li><li>    <a class="l_k" href="functions/my.html">my</a> <span class="s">(</span><span class="i">$from</span><span class="cm">,</span> <span class="i">$to</span><span class="s">)</span> = <span class="i">@_</span><span class="sc">;</span></li><li>    <a class="l_k" href="functions/my.html">my</a> <span class="s">(</span><span class="i">$lf</span><span class="cm">,</span> <span class="i">$lt</span><span class="s">)</span> = <a class="l_k" href="functions/map.html">map</a> <a class="l_k" href="functions/length.html">length</a><span class="cm">,</span> <span class="i">@_</span><span class="sc">;</span></li><li></li><li>    if <span class="s">(</span><span class="i">$lt</span> &lt; <span class="i">$lf</span><span class="s">)</span> <span class="s">{</span> <span class="i">$from</span> = <a class="l_k" href="functions/substr.html">substr</a> <span class="i">$from</span><span class="cm">,</span> <span class="n">0</span><span class="cm">,</span> <span class="i">$lt</span> <span class="s">}</span></li><li>    else <span class="s">{</span> <span class="i">$from</span> .= <a class="l_k" href="functions/substr.html">substr</a> <span class="i">$to</span><span class="cm">,</span> <span class="i">$lf</span> <span class="s">}</span></li><li></li><li>    <a class="l_k" href="functions/return.html">return</a> <a class="l_k" href="functions/uc.html">uc</a> <span class="i">$to</span> | <span class="s">(</span><span class="i">$from</span> ^ <a class="l_k" href="functions/uc.html">uc</a> <span class="i">$from</span><span class="s">)</span><span class="sc">;</span></li><li>  <span class="s">}</span></li></ol></pre><p>This changes the sentence to "this is a SUcCess case."</p>
<p>Just to show that C programmers can write C in any programming language,
if you prefer a more C-like solution, the following script makes the
substitution have the same case, letter by letter, as the original.
(It also happens to run about 240% slower than the Perlish solution runs.)
If the substitution has more characters than the string being substituted,
the case of the last character is used for the rest of the substitution.</p>
<pre class="verbatim"><ol><li>    <span class="c"># Original by Nathan Torkington, massaged by Jeffrey Friedl</span></li><li>    <span class="c">#</span></li><li><a name="preserve_case"></a>    sub <span class="m">preserve_case($$)</span></li><li>    <span class="s">{</span></li><li>        <a class="l_k" href="functions/my.html">my</a> <span class="s">(</span><span class="i">$old</span><span class="cm">,</span> <span class="i">$new</span><span class="s">)</span> = <span class="i">@_</span><span class="sc">;</span></li><li>        <a class="l_k" href="functions/my.html">my</a> <span class="s">(</span><span class="i">$state</span><span class="s">)</span> = <span class="n">0</span><span class="sc">;</span> <span class="c"># 0 = no change; 1 = lc; 2 = uc</span></li><li>        <a class="l_k" href="functions/my.html">my</a> <span class="s">(</span><span class="i">$i</span><span class="cm">,</span> <span class="i">$oldlen</span><span class="cm">,</span> <span class="i">$newlen</span><span class="cm">,</span> <span class="i">$c</span><span class="s">)</span> = <span class="s">(</span><span class="n">0</span><span class="cm">,</span> <a class="l_k" href="functions/length.html">length</a><span class="s">(</span><span class="i">$old</span><span class="s">)</span><span class="cm">,</span> <a class="l_k" href="functions/length.html">length</a><span class="s">(</span><span class="i">$new</span><span class="s">)</span><span class="s">)</span><span class="sc">;</span></li><li>        <a class="l_k" href="functions/my.html">my</a> <span class="s">(</span><span class="i">$len</span><span class="s">)</span> = <span class="i">$oldlen</span> &lt; <span class="i">$newlen</span> ? <span class="i">$oldlen</span> <span class="co">:</span> <span class="i">$newlen</span><span class="sc">;</span></li><li></li><li>        for <span class="s">(</span><span class="i">$i</span> = <span class="n">0</span><span class="sc">;</span> <span class="i">$i</span> &lt; <span class="i">$len</span><span class="sc">;</span> <span class="i">$i</span>++<span class="s">)</span> <span class="s">{</span></li><li>            if <span class="s">(</span><span class="i">$c</span> = <a class="l_k" href="functions/substr.html">substr</a><span class="s">(</span><span class="i">$old</span><span class="cm">,</span> <span class="i">$i</span><span class="cm">,</span> <span class="n">1</span><span class="s">)</span><span class="cm">,</span> <span class="i">$c</span> =~ <span class="q">/[\W\d_]/</span><span class="s">)</span> <span class="s">{</span></li><li>                <span class="i">$state</span> = <span class="n">0</span><span class="sc">;</span></li><li>            <span class="s">}</span> elsif <span class="s">(</span><a class="l_k" href="functions/lc.html">lc</a> <span class="i">$c</span> eq <span class="i">$c</span><span class="s">)</span> <span class="s">{</span></li><li>                <a class="l_k" href="functions/substr.html">substr</a><span class="s">(</span><span class="i">$new</span><span class="cm">,</span> <span class="i">$i</span><span class="cm">,</span> <span class="n">1</span><span class="s">)</span> = <a class="l_k" href="functions/lc.html">lc</a><span class="s">(</span><a class="l_k" href="functions/substr.html">substr</a><span class="s">(</span><span class="i">$new</span><span class="cm">,</span> <span class="i">$i</span><span class="cm">,</span> <span class="n">1</span><span class="s">)</span><span class="s">)</span><span class="sc">;</span></li><li>                <span class="i">$state</span> = <span class="n">1</span><span class="sc">;</span></li><li>            <span class="s">}</span> else <span class="s">{</span></li><li>                <a class="l_k" href="functions/substr.html">substr</a><span class="s">(</span><span class="i">$new</span><span class="cm">,</span> <span class="i">$i</span><span class="cm">,</span> <span class="n">1</span><span class="s">)</span> = <a class="l_k" href="functions/uc.html">uc</a><span class="s">(</span><a class="l_k" href="functions/substr.html">substr</a><span class="s">(</span><span class="i">$new</span><span class="cm">,</span> <span class="i">$i</span><span class="cm">,</span> <span class="n">1</span><span class="s">)</span><span class="s">)</span><span class="sc">;</span></li><li>                <span class="i">$state</span> = <span class="n">2</span><span class="sc">;</span></li><li>            <span class="s">}</span></li><li>        <span class="s">}</span></li><li>        <span class="c"># finish up with any remaining new (for when new is longer than old)</span></li><li>        if <span class="s">(</span><span class="i">$newlen</span> &gt; <span class="i">$oldlen</span><span class="s">)</span> <span class="s">{</span></li><li>            if <span class="s">(</span><span class="i">$state</span> == <span class="n">1</span><span class="s">)</span> <span class="s">{</span></li><li>                <a class="l_k" href="functions/substr.html">substr</a><span class="s">(</span><span class="i">$new</span><span class="cm">,</span> <span class="i">$oldlen</span><span class="s">)</span> = <a class="l_k" href="functions/lc.html">lc</a><span class="s">(</span><a class="l_k" href="functions/substr.html">substr</a><span class="s">(</span><span class="i">$new</span><span class="cm">,</span> <span class="i">$oldlen</span><span class="s">)</span><span class="s">)</span><span class="sc">;</span></li><li>            <span class="s">}</span> elsif <span class="s">(</span><span class="i">$state</span> == <span class="n">2</span><span class="s">)</span> <span class="s">{</span></li><li>                <a class="l_k" href="functions/substr.html">substr</a><span class="s">(</span><span class="i">$new</span><span class="cm">,</span> <span class="i">$oldlen</span><span class="s">)</span> = <a class="l_k" href="functions/uc.html">uc</a><span class="s">(</span><a class="l_k" href="functions/substr.html">substr</a><span class="s">(</span><span class="i">$new</span><span class="cm">,</span> <span class="i">$oldlen</span><span class="s">)</span><span class="s">)</span><span class="sc">;</span></li><li>            <span class="s">}</span></li><li>        <span class="s">}</span></li><li>        <a class="l_k" href="functions/return.html">return</a> <span class="i">$new</span><span class="sc">;</span></li><li>    <span class="s">}</span></li></ol></pre><a class='view-head2' id="How-can-I-make-%5cw-match-national-character-sets%3f"></a><h3 class='h3' >How can I make <code class="inline">\<span class="w">w</span></code>
 match national character sets?</h3>
<p>See <a href="perllocale.html">perllocale</a>.</p>
<a class='view-head2' id="How-can-I-match-a-locale-smart-version-of-%2f%5ba-zA-Z%5d%2f%3f"></a><h3 class='h3' >How can I match a locale-smart version of <code class="inline"><span class="q">/[a-zA-Z]/</span></code>
?</h3>
<p>One alphabetic character would be <code class="inline"><span class="q">/[^\W\d_]/</span></code>
, no matter what locale
you're in.  Non-alphabetics would be <code class="inline"><span class="q">/[\W\d_]/</span></code>
 (assuming you don't
consider an underscore a letter).</p>
<a class='view-head2' id="How-can-I-quote-a-variable-to-use-in-a-regex%3f"></a><h3 class='h3' >How can I quote a variable to use in a regex?</h3>
<p>The Perl parser will expand $variable and @variable references in
regular expressions unless the delimiter is a single quote.  Remember,
too, that the right-hand side of a <code class="inline"><a class="l_k" href="functions/s.html">s///</a></code> substitution is considered
a double-quoted string (see <a href="perlop.html">perlop</a> for more details).  Remember
also that any regex special characters will be acted on unless you
precede the substitution with \Q.  Here's an example:</p>
<pre class="verbatim"><ol><li>    <span class="i">$string</span> = <span class="q">&quot;to die?&quot;</span><span class="sc">;</span></li><li>    <span class="i">$lhs</span> = <span class="q">&quot;die?&quot;</span><span class="sc">;</span></li><li>    <span class="i">$rhs</span> = <span class="q">&quot;sleep, no more&quot;</span><span class="sc">;</span></li><li></li><li>    <span class="i">$string</span> =~ <span class="q">s/\Q$lhs/$rhs/</span><span class="sc">;</span></li><li>    <span class="c"># $string is now &quot;to sleep no more&quot;</span></li></ol></pre><p>Without the \Q, the regex would also spuriously match "di".</p>
<a class='view-head2' id="What-is-%2fo-really-for%3f"></a><h3 class='h3' >What is <code class="inline"><span class="q">/o</span></code>
 really for?</h3>
<p>Using a variable in a regular expression match forces a re-evaluation
(and perhaps recompilation) each time the regular expression is
encountered.  The <code class="inline"><span class="q">/o</span></code>
 modifier locks in the regex the first time
it's used.  This always happens in a constant regular expression, and
in fact, the pattern was compiled into the internal format at the same
time your entire program was.</p>
<p>Use of <code class="inline"><span class="q">/o</span></code>
 is irrelevant unless variable interpolation is used in
the pattern, and if so, the regex engine will neither know nor care
whether the variables change after the pattern is evaluated the <i>very
first</i> time.</p>
<p><code class="inline"><span class="q">/o</span></code>
 is often used to gain an extra measure of efficiency by not
performing subsequent evaluations when you know it won't matter
(because you know the variables won't change), or more rarely, when
you don't want the regex to notice if they do.</p>
<p>For example, here's a "paragrep" program:</p>
<pre class="verbatim"><ol><li>    <span class="i">$/</span> = <span class="q">&#39;&#39;</span><span class="sc">;</span>  <span class="c"># paragraph mode</span></li><li>    <span class="i">$pat</span> = <a class="l_k" href="functions/shift.html">shift</a><span class="sc">;</span></li><li>    while <span class="s">(</span>&lt;&gt;<span class="s">)</span> <span class="s">{</span></li><li>        <a class="l_k" href="functions/print.html">print</a> if <span class="q">/$pat/o</span><span class="sc">;</span></li><li>    <span class="s">}</span></li></ol></pre><a class='view-head2' id="How-do-I-use-a-regular-expression-to-strip-C-style-comments-from-a-file%3f"></a><h3 class='h3' >How do I use a regular expression to strip C style comments from a file?</h3>
<p>While this actually can be done, it's much harder than you'd think.
For example, this one-liner</p>
<pre class="verbatim"><ol><li>    <span class="w">perl</span> -<span class="n">0777</span> -<span class="w">pe</span> <span class="q">&#39;s{/\*.*?\*/}{}gs&#39;</span> <span class="w">foo</span>.<span class="w">c</span></li></ol></pre><p>will work in many but not all cases.  You see, it's too simple-minded for
certain kinds of C programs, in particular, those with what appear to be
comments in quoted strings.  For that, you'd need something like this,
created by Jeffrey Friedl and later modified by Fred Curtis.</p>
<pre class="verbatim"><ol><li>    <span class="i">$/</span> = <a class="l_k" href="functions/undef.html">undef</a><span class="sc">;</span></li><li>    <span class="i">$_</span> = &lt;&gt;<span class="sc">;</span></li><li>    <span class="q">s#/\*[^*]*\*+([^/*][^*]*\*+)*/|(&quot;(\\.|[^&quot;\\])*&quot;|&#39;(\\.|[^&#39;\\])*&#39;|.[^/&quot;&#39;\\]*)#$2#gs</span></li><li>    <a class="l_k" href="functions/print.html">print</a><span class="sc">;</span></li></ol></pre><p>This could, of course, be more legibly written with the <code class="inline"><span class="q">/x</span></code>
 modifier, adding
whitespace and comments.  Here it is expanded, courtesy of Fred Curtis.</p>
<pre class="verbatim"><ol><li>    <span class="q">s{</span></li><li>       <span class="q">       /\*         ##  Start of /* ... */ comment</span></li><li>       <span class="q">       [^*]*\*+    ##  Non-* followed by 1-or-more *&#39;s</span></li><li>       <span class="q">       (</span></li><li>         <span class="q">         [^/*][^*]*\*+</span></li><li>       <span class="q">       )*          ##  0-or-more things which don&#39;t start with /</span></li><li>                   <span class="q">                   ##    but do end with &#39;*&#39;</span></li><li>       <span class="q">       /           ##  End of /* ... */ comment</span></li><li></li><li>     <span class="q">     |         ##     OR  various things which aren&#39;t comments:</span></li><li></li><li>       <span class="q">       (</span></li><li>         <span class="q">         &quot;           ##  Start of &quot; ... &quot; string</span></li><li>         <span class="q">         (</span></li><li>           <span class="q">           \\.           ##  Escaped char</span></li><li>         <span class="q">         |               ##    OR</span></li><li>           <span class="q">           [^&quot;\\]        ##  Non &quot;\</span></li><li>         <span class="q">         )*</span></li><li>         <span class="q">         &quot;           ##  End of &quot; ... &quot; string</span></li><li></li><li>       <span class="q">       |         ##     OR</span></li><li></li><li>         <span class="q">         &#39;           ##  Start of &#39; ... &#39; string</span></li><li>         <span class="q">         (</span></li><li>           <span class="q">           \\.           ##  Escaped char</span></li><li>         <span class="q">         |               ##    OR</span></li><li>           <span class="q">           [^&#39;\\]        ##  Non &#39;\</span></li><li>         <span class="q">         )*</span></li><li>         <span class="q">         &#39;           ##  End of &#39; ... &#39; string</span></li><li></li><li>       <span class="q">       |         ##     OR</span></li><li></li><li>         <span class="q">         .           ##  Anything other char</span></li><li>         <span class="q">         [^/&quot;&#39;\\]*   ##  Chars which doesn&#39;t start a comment, string or escape</span></li><li>       <span class="q">       )</span></li><li>     <span class="q">     }{$2}gxs</span><span class="sc">;</span></li></ol></pre><p>A slight modification also removes C++ comments:</p>
<pre class="verbatim"><ol><li>    <span class="q">s#/\*[^*]*\*+([^/*][^*]*\*+)*/|//[^\n]*|(&quot;(\\.|[^&quot;\\])*&quot;|&#39;(\\.|[^&#39;\\])*&#39;|.[^/&quot;&#39;\\]*)#$2#gs</span><span class="sc">;</span></li></ol></pre><a class='view-head2' id="Can-I-use-Perl-regular-expressions-to-match-balanced-text%3f"></a><h3 class='h3' >Can I use Perl regular expressions to match balanced text?</h3>
<p>Historically, Perl regular expressions were not capable of matching
balanced text.  As of more recent versions of perl including 5.6.1
experimental features have been added that make it possible to do this.
Look at the documentation for the (??{ }) construct in recent perlre manual
pages to see an example of matching balanced parentheses.  Be sure to take
special notice of the  warnings present in the manual before making use
of this feature.</p>
<p>CPAN contains many modules that can be useful for matching text
depending on the context.  Damian Conway provides some useful
patterns in Regexp::Common.  The module Text::Balanced provides a
general solution to this problem.</p>
<p>One of the common applications of balanced text matching is working
with XML and HTML.  There are many modules available that support
these needs.  Two examples are HTML::Parser and XML::Parser. There
are many others.</p>
<p>An elaborate subroutine (for 7-bit ASCII only) to pull out balanced
and possibly nested single chars, like <code class="inline"><span class="q">`</span></code>
 and <code class="inline"><span class="q">&#39;</span></code>
, <code class="inline"><span class="s">{</span></code>
 and <code class="inline"><span class="s">}</span></code>
,
or <code class="inline"><span class="s">(</span></code>
 and <code class="inline"><span class="p">)</span></code>
 can be found in
<a href="http://www.cpan.org/authors/id/TOMC/scripts/pull_quotes.gz">http://www.cpan.org/authors/id/TOMC/scripts/pull_quotes.gz</a> .</p>
<p>The C::Scan module from CPAN also contains such subs for internal use,
but they are undocumented.</p>
<a class='view-head2' id="What-does-it-mean-that-regexes-are-greedy%3f--How-can-I-get-around-it%3f"></a><h3 class='h3' >What does it mean that regexes are greedy?  How can I get around it?</h3>
<p>Most people mean that greedy regexes match as much as they can.
Technically speaking, it's actually the quantifiers (<code class="inline"><span class="q">?</span></code>
, <code class="inline"><span class="i">*</span></code>
, <code class="inline">+</code>
,
<code class="inline"><span class="s">{</span><span class="s">}</span></code>
) that are greedy rather than the whole pattern; Perl prefers local
greed and immediate gratification to overall greed.  To get non-greedy
versions of the same quantifiers, use (<code class="inline"><span class="q">??</span></code>
, <code class="inline"><span class="i">*?</span></code>
, <code class="inline">+<span class="q">?</span></code>
, <code class="inline"><span class="s">{</span><span class="s">}</span><span class="q">?</span></code>
).</p>
<p>An example:</p>
<pre class="verbatim"><ol><li>        <span class="i">$s1</span> = <span class="i">$s2</span> = <span class="q">&quot;I am very very cold&quot;</span><span class="sc">;</span></li><li>        <span class="i">$s1</span> =~ <span class="q">s/ve.*y //</span><span class="sc">;</span>      <span class="c"># I am cold</span></li><li>        <span class="i">$s2</span> =~ <span class="q">s/ve.*?y //</span><span class="sc">;</span>     <span class="c"># I am very cold</span></li></ol></pre><p>Notice how the second substitution stopped matching as soon as it
encountered "y ".  The <code class="inline"><span class="i">*?</span></code>
 quantifier effectively tells the regular
expression engine to find a match as quickly as possible and pass
control on to whatever is next in line, like you would if you were
playing hot potato.</p>
<a class='view-head2' id="How-do-I-process-each-word-on-each-line%3f"></a><h3 class='h3' >How do I process each word on each line?</h3>
<p>Use the split function:</p>
<pre class="verbatim"><ol><li>    while <span class="s">(</span>&lt;&gt;<span class="s">)</span> <span class="s">{</span></li><li>	foreach <span class="i">$word</span> <span class="s">(</span> <a class="l_k" href="functions/split.html">split</a> <span class="s">)</span> <span class="s">{</span> </li><li>	    <span class="c"># do something with $word here</span></li><li>	<span class="s">}</span> </li><li>    <span class="s">}</span></li></ol></pre><p>Note that this isn't really a word in the English sense; it's just
chunks of consecutive non-whitespace characters.</p>
<p>To work with only alphanumeric sequences (including underscores), you
might consider</p>
<pre class="verbatim"><ol><li>    while <span class="s">(</span>&lt;&gt;<span class="s">)</span> <span class="s">{</span></li><li>	foreach <span class="i">$word</span> <span class="s">(</span><span class="q">m/(\w+)/g</span><span class="s">)</span> <span class="s">{</span></li><li>	    <span class="c"># do something with $word here</span></li><li>	<span class="s">}</span></li><li>    <span class="s">}</span></li></ol></pre><a class='view-head2' id="How-can-I-print-out-a-word-frequency-or-line-frequency-summary%3f"></a><h3 class='h3' >How can I print out a word-frequency or line-frequency summary?</h3>
<p>To do this, you have to parse out each word in the input stream.  We'll
pretend that by word you mean chunk of alphabetics, hyphens, or
apostrophes, rather than the non-whitespace chunk idea of a word given
in the previous question:</p>
<pre class="verbatim"><ol><li>    while <span class="s">(</span>&lt;&gt;<span class="s">)</span> <span class="s">{</span></li><li>	while <span class="s">(</span> <span class="q">/(\b[^\W_\d][\w&#39;-]+\b)/g</span> <span class="s">)</span> <span class="s">{</span>   <span class="c"># misses &quot;`sheep&#39;&quot;</span></li><li>	    <span class="i">$seen</span>{<span class="i">$1</span>}++<span class="sc">;</span></li><li>	<span class="s">}</span></li><li>    <span class="s">}</span></li><li>    while <span class="s">(</span> <span class="s">(</span><span class="i">$word</span><span class="cm">,</span> <span class="i">$count</span><span class="s">)</span> = <a class="l_k" href="functions/each.html">each</a> <span class="i">%seen</span> <span class="s">)</span> <span class="s">{</span></li><li>	<a class="l_k" href="functions/print.html">print</a> <span class="q">&quot;$count $word\n&quot;</span><span class="sc">;</span></li><li>    <span class="s">}</span></li></ol></pre><p>If you wanted to do the same thing for lines, you wouldn't need a
regular expression:</p>
<pre class="verbatim"><ol><li>    while <span class="s">(</span>&lt;&gt;<span class="s">)</span> <span class="s">{</span> </li><li>	<span class="i">$seen</span>{<span class="i">$_</span>}++<span class="sc">;</span></li><li>    <span class="s">}</span></li><li>    while <span class="s">(</span> <span class="s">(</span><span class="i">$line</span><span class="cm">,</span> <span class="i">$count</span><span class="s">)</span> = <a class="l_k" href="functions/each.html">each</a> <span class="i">%seen</span> <span class="s">)</span> <span class="s">{</span></li><li>	<a class="l_k" href="functions/print.html">print</a> <span class="q">&quot;$count $line&quot;</span><span class="sc">;</span></li><li>    <span class="s">}</span></li></ol></pre><p>If you want these output in a sorted order, see <a href="perlfaq4.html">perlfaq4</a>: ``How do I
sort a hash (optionally by value instead of key)?''.</p>
<a class='view-head2' id="How-can-I-do-approximate-matching%3f"></a><h3 class='h3' >How can I do approximate matching?</h3>
<p>See the module String::Approx available from CPAN.</p>
<a class='view-head2' id="How-do-I-efficiently-match-many-regular-expressions-at-once%3f"></a><h3 class='h3' >How do I efficiently match many regular expressions at once?</h3>
<p>The following is extremely inefficient:</p>
<pre class="verbatim"><ol><li>    <span class="c"># slow but obvious way</span></li><li>    <span class="i">@popstates</span> = <span class="q">qw(CO ON MI WI MN)</span><span class="sc">;</span></li><li>    while <span class="s">(</span><a class="l_k" href="functions/defined.html">defined</a><span class="s">(</span><span class="i">$line</span> = &lt;&gt;<span class="s">)</span><span class="s">)</span> <span class="s">{</span></li><li>	for <span class="i">$state</span> <span class="s">(</span><span class="i">@popstates</span><span class="s">)</span> <span class="s">{</span></li><li>	    if <span class="s">(</span><span class="i">$line</span> =~ <span class="q">/\b$state\b/i</span><span class="s">)</span> <span class="s">{</span>  </li><li>		<a class="l_k" href="functions/print.html">print</a> <span class="i">$line</span><span class="sc">;</span></li><li>		<a class="l_k" href="functions/last.html">last</a><span class="sc">;</span></li><li>	    <span class="s">}</span></li><li>	<span class="s">}</span></li><li>    <span class="s">}</span></li></ol></pre><p>That's because Perl has to recompile all those patterns for each of
the lines of the file.  As of the 5.005 release, there's a much better
approach, one which makes use of the new <code class="inline"><a class="l_k" href="functions/qr.html">qr//</a></code> operator:</p>
<pre class="verbatim"><ol><li>    <span class="c"># use spiffy new qr// operator, with /i flag even</span></li><li>    <a class="l_k" href="functions/use.html">use</a> <span class="n">5.005</span><span class="sc">;</span></li><li>    <span class="i">@popstates</span> = <span class="q">qw(CO ON MI WI MN)</span><span class="sc">;</span></li><li>    <span class="i">@poppats</span>   = <a class="l_k" href="functions/map.html">map</a> <span class="s">{</span> <span class="q">qr/\b$_\b/i</span> <span class="s">}</span> <span class="i">@popstates</span><span class="sc">;</span></li><li>    while <span class="s">(</span><a class="l_k" href="functions/defined.html">defined</a><span class="s">(</span><span class="i">$line</span> = &lt;&gt;<span class="s">)</span><span class="s">)</span> <span class="s">{</span></li><li>	for <span class="i">$patobj</span> <span class="s">(</span><span class="i">@poppats</span><span class="s">)</span> <span class="s">{</span></li><li>	    <a class="l_k" href="functions/print.html">print</a> <span class="i">$line</span> if <span class="i">$line</span> =~ <span class="q">/$patobj/</span><span class="sc">;</span></li><li>	<span class="s">}</span></li><li>    <span class="s">}</span></li></ol></pre><a class='view-head2' id="Why-don't-word-boundary-searches-with-%5cb-work-for-me%3f"></a><h3 class='h3' >Why don't word-boundary searches with <code class="inline">\<span class="w">b</span></code>
 work for me?</h3>
<p>Two common misconceptions are that <code class="inline">\<span class="w">b</span></code>
 is a synonym for <code class="inline">\<span class="q">s+</span></code>
 and
that it's the edge between whitespace characters and non-whitespace
characters.  Neither is correct.  <code class="inline">\<span class="w">b</span></code>
 is the place between a <code class="inline">\<span class="w">w</span></code>

character and a <code class="inline">\<span class="w">W</span></code>
 character (that is, <code class="inline">\<span class="w">b</span></code>
 is the edge of a
"word").  It's a zero-width assertion, just like <code class="inline">^</code>
, <code class="inline"><span class="i">$</span></code>
, and all
the other anchors, so it doesn't consume any characters.  <a href="perlre.html">perlre</a>
describes the behavior of all the regex metacharacters.</p>
<p>Here are examples of the incorrect application of <code class="inline">\<span class="w">b</span></code>
, with fixes:</p>
<pre class="verbatim"><ol><li>    <span class="q">&quot;two words&quot;</span> =~ <span class="q">/(\w+)\b(\w+)/</span><span class="sc">;</span>	    <span class="c"># WRONG</span></li><li>    <span class="q">&quot;two words&quot;</span> =~ <span class="q">/(\w+)\s+(\w+)/</span><span class="sc">;</span>	    <span class="c"># right</span></li><li></li><li>    <span class="q">&quot; =matchless= text&quot;</span> =~ <span class="q">/\b=(\w+)=\b/</span><span class="sc">;</span>   <span class="c"># WRONG</span></li><li>    <span class="q">&quot; =matchless= text&quot;</span> =~ <span class="q">/=(\w+)=/</span><span class="sc">;</span>       <span class="c"># right</span></li></ol></pre><p>Although they may not do what you thought they did, <code class="inline">\<span class="w">b</span></code>
 and <code class="inline">\<span class="w">B</span></code>

can still be quite useful.  For an example of the correct use of
<code class="inline">\<span class="w">b</span></code>
, see the example of matching duplicate words over multiple
lines.</p>
<p>An example of using <code class="inline">\<span class="w">B</span></code>
 is the pattern <code class="inline">\<span class="w">Bis</span>\<span class="w">B</span></code>
.  This will find
occurrences of "is" on the insides of words only, as in "thistle", but
not "this" or "island".</p>
<a class='view-head2' id="Why-does-using-%24%26%2c-%24%60%2c-or-%24'-slow-my-program-down%3f"></a><h3 class='h3' >Why does using $&amp;, $`, or $' slow my program down?</h3>
<p>Once Perl sees that you need one of these variables anywhere in
the program, it provides them on each and every pattern match.
The same mechanism that handles these provides for the use of $1, $2,
etc., so you pay the same price for each regex that contains capturing
parentheses.  If you never use $&amp;, etc., in your script, then regexes
<i>without</i> capturing parentheses won't be penalized. So avoid $&amp;, $',
and $` if you can, but if you can't, once you've used them at all, use
them at will because you've already paid the price.  Remember that some
algorithms really appreciate them.  As of the 5.005 release.  the $&amp;
variable is no longer "expensive" the way the other two are.</p>
<a class='view-head2' id="What-good-is-%5cG-in-a-regular-expression%3f"></a><h3 class='h3' >What good is <code class="inline">\<span class="w">G</span></code>
 in a regular expression?</h3>
<p>The notation <code class="inline">\<span class="w">G</span></code>
 is used in a match or substitution in conjunction with
the <code class="inline"><span class="q">/g</span></code>
 modifier to anchor the regular expression to the point just past
where the last match occurred, i.e. the pos() point.  A failed match resets
the position of <code class="inline">\<span class="w">G</span></code>
 unless the <code class="inline"><span class="q">/c</span></code>
 modifier is in effect. <code class="inline">\<span class="w">G</span></code>
 can be
used in a match without the <code class="inline"><span class="q">/g</span></code>
 modifier; it acts the same (i.e. still
anchors at the pos() point) but of course only matches once and does not
update pos(), as non-<code class="inline"><span class="q">/g</span></code>
 expressions never do. <code class="inline">\<span class="w">G</span></code>
 in an expression
applied to a target string that has never been matched against a <code class="inline"><span class="q">/g</span></code>

expression before or has had its pos() reset is functionally equivalent to
<code class="inline">\<span class="w">A</span></code>
, which matches at the beginning of the string.</p>
<p>For example, suppose you had a line of text quoted in standard mail
and Usenet notation, (that is, with leading <code class="inline">&gt;</code>
 characters), and
you want change each leading <code class="inline">&gt;</code>
 into a corresponding <code class="inline"><span class="j">:</span></code>
.  You
could do so in this way:</p>
<pre class="verbatim"><ol><li>     <span class="q">s/^(&gt;+)/&#39;:&#39; x length($1)/gem</span><span class="sc">;</span></li></ol></pre><p>Or, using <code class="inline">\<span class="w">G</span></code>
, the much simpler (and faster):</p>
<pre class="verbatim"><ol><li>    <span class="q">s/\G&gt;/:/g</span><span class="sc">;</span></li></ol></pre><p>A more sophisticated use might involve a tokenizer.  The following
lex-like example is courtesy of Jeffrey Friedl.  It did not work in
5.003 due to bugs in that release, but does work in 5.004 or better.
(Note the use of <code class="inline"><span class="q">/c</span></code>
, which prevents a failed match with <code class="inline"><span class="q">/g</span></code>
 from
resetting the search position back to the beginning of the string.)</p>
<pre class="verbatim"><ol><li>    while <span class="s">(</span>&lt;&gt;<span class="s">)</span> <span class="s">{</span></li><li>      <a class="l_k" href="functions/chomp.html">chomp</a><span class="sc">;</span></li><li>      <span class="j">PARSER:</span> <span class="s">{</span></li><li>           <span class="q">m/ \G( \d+\b    )/gcx</span>    &amp;&amp; <a class="l_k" href="functions/do.html">do</a> <span class="s">{</span> <a class="l_k" href="functions/print.html">print</a> <span class="q">&quot;number: $1\n&quot;</span><span class="sc">;</span>  <a class="l_k" href="functions/redo.html">redo</a><span class="sc">;</span> <span class="s">}</span><span class="sc">;</span></li><li>           <span class="q">m/ \G( \w+      )/gcx</span>    &amp;&amp; <a class="l_k" href="functions/do.html">do</a> <span class="s">{</span> <a class="l_k" href="functions/print.html">print</a> <span class="q">&quot;word:   $1\n&quot;</span><span class="sc">;</span>  <a class="l_k" href="functions/redo.html">redo</a><span class="sc">;</span> <span class="s">}</span><span class="sc">;</span></li><li>           <span class="q">m/ \G( \s+      )/gcx</span>    &amp;&amp; <a class="l_k" href="functions/do.html">do</a> <span class="s">{</span> <a class="l_k" href="functions/print.html">print</a> <span class="q">&quot;space:  $1\n&quot;</span><span class="sc">;</span>  <a class="l_k" href="functions/redo.html">redo</a><span class="sc">;</span> <span class="s">}</span><span class="sc">;</span></li><li>           <span class="q">m/ \G( [^\w\d]+ )/gcx</span>    &amp;&amp; <a class="l_k" href="functions/do.html">do</a> <span class="s">{</span> <a class="l_k" href="functions/print.html">print</a> <span class="q">&quot;other:  $1\n&quot;</span><span class="sc">;</span>  <a class="l_k" href="functions/redo.html">redo</a><span class="sc">;</span> <span class="s">}</span><span class="sc">;</span></li><li>      <span class="s">}</span></li><li>    <span class="s">}</span></li></ol></pre><p>Of course, that could have been written as</p>
<pre class="verbatim"><ol><li>    while <span class="s">(</span>&lt;&gt;<span class="s">)</span> <span class="s">{</span></li><li>      <a class="l_k" href="functions/chomp.html">chomp</a><span class="sc">;</span></li><li>      <span class="j">PARSER:</span> <span class="s">{</span></li><li>	   if <span class="s">(</span> <span class="q">/\G( \d+\b    )/gcx</span>  <span class="s">{</span></li><li>		<a class="l_k" href="functions/print.html">print</a> <span class="q">&quot;number: $1\n&quot;</span><span class="sc">;</span></li><li>		<a class="l_k" href="functions/redo.html">redo</a> <span class="j">PARSER</span><span class="sc">;</span></li><li>	   <span class="s">}</span></li><li>	   if <span class="s">(</span> <span class="q">/\G( \w+      )/gcx</span>  <span class="s">{</span></li><li>		<a class="l_k" href="functions/print.html">print</a> <span class="q">&quot;word: $1\n&quot;</span><span class="sc">;</span></li><li>		<a class="l_k" href="functions/redo.html">redo</a> <span class="j">PARSER</span><span class="sc">;</span></li><li>	   <span class="s">}</span></li><li>	   if <span class="s">(</span> <span class="q">/\G( \s+      )/gcx</span>  <span class="s">{</span></li><li>		<a class="l_k" href="functions/print.html">print</a> <span class="q">&quot;space: $1\n&quot;</span><span class="sc">;</span></li><li>		<a class="l_k" href="functions/redo.html">redo</a> <span class="j">PARSER</span><span class="sc">;</span></li><li>	   <span class="s">}</span></li><li>	   if <span class="s">(</span> <span class="q">/\G( [^\w\d]+ )/gcx</span>  <span class="s">{</span></li><li>		<a class="l_k" href="functions/print.html">print</a> <span class="q">&quot;other: $1\n&quot;</span><span class="sc">;</span></li><li>		<a class="l_k" href="functions/redo.html">redo</a> <span class="j">PARSER</span><span class="sc">;</span></li><li>	   <span class="s">}</span></li><li>      <span class="s">}</span></li><li>    <span class="s">}</span></li></ol></pre><p>but then you lose the vertical alignment of the regular expressions.</p>
<a class='view-head2' id="Are-Perl-regexes-DFAs-or-NFAs%3f--Are-they-POSIX-compliant%3f"></a><h3 class='h3' >Are Perl regexes DFAs or NFAs?  Are they POSIX compliant?</h3>
<p>While it's true that Perl's regular expressions resemble the DFAs
(deterministic finite automata) of the egrep(1) program, they are in
fact implemented as NFAs (non-deterministic finite automata) to allow
backtracking and backreferencing.  And they aren't POSIX-style either,
because those guarantee worst-case behavior for all cases.  (It seems
that some people prefer guarantees of consistency, even when what's
guaranteed is slowness.)  See the book "Mastering Regular Expressions"
(from O'Reilly) by Jeffrey Friedl for all the details you could ever
hope to know on these matters (a full citation appears in
<a href="perlfaq2.html">perlfaq2</a>).</p>
<a class='view-head2' id="What's-wrong-with-using-grep-or-map-in-a-void-context%3f"></a><h3 class='h3' >What's wrong with using grep or map in a void context?</h3>
<p>The problem is that both grep and map build a return list,
regardless of the context.  This means you're making Perl go
to the trouble of building a list that you then just throw away.
If the list is large, you waste both time and space.  If your
intent is to iterate over the list then use a for loop for this
purpose.</p>
<a class='view-head2' id="How-can-I-match-strings-with-multibyte-characters%3f"></a><h3 class='h3' >How can I match strings with multibyte characters?</h3>
<p>Starting from Perl 5.6 Perl has had some level of multibyte character
support.  Perl 5.8 or later is recommended.  Supported multibyte
character repertoires include Unicode, and legacy encodings
through the Encode module.  See <a href="perluniintro.html">perluniintro</a>, <a href="perlunicode.html">perlunicode</a>,
and <a href="Encode.html">Encode</a>.</p>
<p>If you are stuck with older Perls, you can do Unicode with the
<code class="inline"><span class="w">Unicode::String</span></code>
 module, and character conversions using the
<code class="inline"><span class="w">Unicode::Map8</span></code>
 and <code class="inline"><span class="w">Unicode::Map</span></code>
 modules.  If you are using
Japanese encodings, you might try using the jperl 5.005_03.</p>
<p>Finally, the following set of approaches was offered by Jeffrey
Friedl, whose article in issue #5 of The Perl Journal talks about
this very matter.</p>
<p>Let's suppose you have some weird Martian encoding where pairs of
ASCII uppercase letters encode single Martian letters (i.e. the two
bytes "CV" make a single Martian letter, as do the two bytes "SG",
"VS", "XX", etc.). Other bytes represent single characters, just like
ASCII.</p>
<p>So, the string of Martian "I am CVSGXX!" uses 12 bytes to encode the
nine characters 'I', ' ', 'a', 'm', ' ', 'CV', 'SG', 'XX', '!'.</p>
<p>Now, say you want to search for the single character <code class="inline"><span class="q">/GX/</span></code>
. Perl
doesn't know about Martian, so it'll find the two bytes "GX" in the "I
am CVSGXX!"  string, even though that character isn't there: it just
looks like it is because "SG" is next to "XX", but there's no real
"GX".  This is a big problem.</p>
<p>Here are a few ways, all painful, to deal with it:</p>
<pre class="verbatim"><ol><li>   <span class="i">$martian</span> =~ <span class="q">s/([A-Z][A-Z])/ $1 /g</span><span class="sc">;</span> <span class="c"># Make sure adjacent ``martian&#39;&#39; bytes</span></li><li>                                      <span class="c"># are no longer adjacent.</span></li><li>   <a class="l_k" href="functions/print.html">print</a> <span class="q">&quot;found GX!\n&quot;</span> if <span class="i">$martian</span> =~ <span class="q">/GX/</span><span class="sc">;</span></li></ol></pre><p>Or like this:</p>
<pre class="verbatim"><ol><li>   <span class="i">@chars</span> = <span class="i">$martian</span> =~ <span class="q">m/([A-Z][A-Z]|[^A-Z])/g</span><span class="sc">;</span></li><li>   <span class="c"># above is conceptually similar to:     @chars = $text =~ m/(.)/g;</span></li><li>   <span class="c">#</span></li><li>   foreach <span class="i">$char</span> <span class="s">(</span><span class="i">@chars</span><span class="s">)</span> <span class="s">{</span></li><li>       <a class="l_k" href="functions/print.html">print</a> <span class="q">&quot;found GX!\n&quot;</span><span class="cm">,</span> <a class="l_k" href="functions/last.html">last</a> if <span class="i">$char</span> eq <span class="q">&#39;GX&#39;</span><span class="sc">;</span></li><li>   <span class="s">}</span></li></ol></pre><p>Or like this:</p>
<pre class="verbatim"><ol><li>   while <span class="s">(</span><span class="i">$martian</span> =~ <span class="q">m/\G([A-Z][A-Z]|.)/gs</span><span class="s">)</span> <span class="s">{</span>  <span class="c"># \G probably unneeded</span></li><li>       <a class="l_k" href="functions/print.html">print</a> <span class="q">&quot;found GX!\n&quot;</span><span class="cm">,</span> <a class="l_k" href="functions/last.html">last</a> if <span class="i">$1</span> eq <span class="q">&#39;GX&#39;</span><span class="sc">;</span></li><li>   <span class="s">}</span></li></ol></pre><p>Or like this:</p>
<pre class="verbatim"><ol><li>    <a class="l_k" href="functions/die.html">die</a> <span class="q">&quot;sorry, Perl doesn&#39;t (yet) have Martian support )-:\n&quot;</span><span class="sc">;</span></li></ol></pre><p>There are many double- (and multi-) byte encodings commonly used these
days.  Some versions of these have 1-, 2-, 3-, and 4-byte characters,
all mixed.</p>
<a class='view-head2' id="How-do-I-match-a-pattern-that-is-supplied-by-the-user%3f"></a><h3 class='h3' >How do I match a pattern that is supplied by the user?</h3>
<p>Well, if it's really a pattern, then just use</p>
<pre class="verbatim"><ol><li>    <a class="l_k" href="functions/chomp.html">chomp</a><span class="s">(</span><span class="i">$pattern</span> = <span class="q">&lt;STDIN&gt;</span><span class="s">)</span><span class="sc">;</span></li><li>    if <span class="s">(</span><span class="i">$line</span> =~ <span class="q">/$pattern/</span><span class="s">)</span> <span class="s">{</span> <span class="s">}</span></li></ol></pre><p>Alternatively, since you have no guarantee that your user entered
a valid regular expression, trap the exception this way:</p>
<pre class="verbatim"><ol><li>    if <span class="s">(</span><a class="l_k" href="functions/eval.html">eval</a> <span class="s">{</span> <span class="i">$line</span> =~ <span class="q">/$pattern/</span> <span class="s">}</span><span class="s">)</span> <span class="s">{</span> <span class="s">}</span></li></ol></pre><p>If all you really want to search for a string, not a pattern,
then you should either use the index() function, which is made for
string searching, or if you can't be disabused of using a pattern
match on a non-pattern, then be sure to use <code class="inline">\<span class="w">Q</span></code>
...<code class="inline">\<span class="w">E</span></code>
, documented
in <a href="perlre.html">perlre</a>.</p>
<pre class="verbatim"><ol><li>    <span class="i">$pattern</span> = <span class="q">&lt;STDIN&gt;</span><span class="sc">;</span></li><li></li><li>    <a class="l_k" href="functions/open.html">open</a> <span class="s">(</span><span class="w">FILE</span><span class="cm">,</span> <span class="i">$input</span><span class="s">)</span> or <a class="l_k" href="functions/die.html">die</a> <span class="q">&quot;Couldn&#39;t open input $input: $!; aborting&quot;</span><span class="sc">;</span></li><li>    while <span class="s">(</span><span class="q">&lt;FILE&gt;</span><span class="s">)</span> <span class="s">{</span></li><li>	<a class="l_k" href="functions/print.html">print</a> if <span class="q">/\Q$pattern\E/</span><span class="sc">;</span></li><li>    <span class="s">}</span></li><li>    <a class="l_k" href="functions/close.html">close</a> <span class="w">FILE</span><span class="sc">;</span></li></ol></pre><a class='view-head1' id="AUTHOR-AND-COPYRIGHT"></a><h2 class='h2' >AUTHOR AND COPYRIGHT</h2>
<p>Copyright (c) 1997-2002 Tom Christiansen and Nathan Torkington.
All rights reserved.</p>
<p>This documentation is free; you can redistribute it and/or modify it
under the same terms as Perl itself.</p>
<p>Irrespective of its distribution, all code examples in this file
are hereby placed into the public domain.  You are permitted and
encouraged to use this code in your own programs for fun
or for profit as you see fit.  A simple comment in the code giving
credit would be courteous but is not required.</p>




      <ul><li><a href="#NAME">NAME</a></li><li><a href="#DESCRIPTION">DESCRIPTION</a></li><ul><li><a href="#How-can-I-hope-to-use-regular-expressions-without-creating-illegible-and-unmaintainable-code%3f">How can I hope to use regular expressions without creating illegible and unmaintainable code?</a></li><li><a href="#I'm-having-trouble-matching-over-more-than-one-line.--What's-wrong%3f">I'm having trouble matching over more than one line.  What's wrong?</a></li><li><a href="#How-can-I-pull-out-lines-between-two-patterns-that-are-themselves-on-different-lines%3f">How can I pull out lines between two patterns that are themselves on different lines?</a></li><li><a href="#I-put-a-regular-expression-into-%24%2f-but-it-didn't-work.-What's-wrong%3f">I put a regular expression into $/ but it didn't work. What's wrong?</a></li><li><a href="#How-do-I-substitute-case-insensitively-on-the-LHS-while-preserving-case-on-the-RHS%3f">How do I substitute case insensitively on the LHS while preserving case on the RHS?</a></li><li><a href="#How-can-I-make-%5cw-match-national-character-sets%3f">How can I make \w match national character sets?</a></li><li><a href="#How-can-I-match-a-locale-smart-version-of-%2f%5ba-zA-Z%5d%2f%3f">How can I match a locale-smart version of /[a-zA-Z]/?</a></li><li><a href="#How-can-I-quote-a-variable-to-use-in-a-regex%3f">How can I quote a variable to use in a regex?</a></li><li><a href="#What-is-%2fo-really-for%3f">What is /o really for?</a></li><li><a href="#How-do-I-use-a-regular-expression-to-strip-C-style-comments-from-a-file%3f">How do I use a regular expression to strip C style comments from a file?</a></li><li><a href="#Can-I-use-Perl-regular-expressions-to-match-balanced-text%3f">Can I use Perl regular expressions to match balanced text?</a></li><li><a href="#What-does-it-mean-that-regexes-are-greedy%3f--How-can-I-get-around-it%3f">What does it mean that regexes are greedy?  How can I get around it?</a></li><li><a href="#How-do-I-process-each-word-on-each-line%3f">How do I process each word on each line?</a></li><li><a href="#How-can-I-print-out-a-word-frequency-or-line-frequency-summary%3f">How can I print out a word-frequency or line-frequency summary?</a></li><li><a href="#How-can-I-do-approximate-matching%3f">How can I do approximate matching?</a></li><li><a href="#How-do-I-efficiently-match-many-regular-expressions-at-once%3f">How do I efficiently match many regular expressions at once?</a></li><li><a href="#Why-don't-word-boundary-searches-with-%5cb-work-for-me%3f">Why don't word-boundary searches with \b work for me?</a></li><li><a href="#Why-does-using-%24%26%2c-%24%60%2c-or-%24'-slow-my-program-down%3f">Why does using $&, $`, or $' slow my program down?</a></li><li><a href="#What-good-is-%5cG-in-a-regular-expression%3f">What good is \G in a regular expression?</a></li><li><a href="#Are-Perl-regexes-DFAs-or-NFAs%3f--Are-they-POSIX-compliant%3f">Are Perl regexes DFAs or NFAs?  Are they POSIX compliant?</a></li><li><a href="#What's-wrong-with-using-grep-or-map-in-a-void-context%3f">What's wrong with using grep or map in a void context?</a></li><li><a href="#How-can-I-match-strings-with-multibyte-characters%3f">How can I match strings with multibyte characters?</a></li><li><a href="#How-do-I-match-a-pattern-that-is-supplied-by-the-user%3f">How do I match a pattern that is supplied by the user?</a></li></ul><li><a href="#AUTHOR-AND-COPYRIGHT">AUTHOR AND COPYRIGHT</a></li></ul>


                  </div>
                </article>
              </div>
            </div>
          </main>
        </div>
           <footer class="footer row bg-light pt-5 pb-5">
       <div class="col-sm-10 offset-sm-1 col-xl-8 offset-xl-2">
           <div class="row">
               <div class="col-md-4">
                   <ul class="list-unstyled">
                       <li>
                           <h4>Site info</h4>
                       </li>
                       <li>Docs mantained by
                           <a href="//lists.perl.org/list/perl5-porters.html"
                               rel="noopener">Perl 5 Porters</a>
                       </li>
                       <li>Perldoc site development sponsored by
                           <a href="//opusvl.com" rel="noopener">
                           <img style="margin: 20px 20px 5px 10px" class="opus-logo" src="/public/img/opusvl_logo.svg" alt="OpusVL Logo">
                        </a>
                    <li><span class="about_perldoc"><a href="//about.html">About PerlDOC</a></span>
                    </li>
                       </li>
                   </ul>
               </div>
               <div class="col-md-8">
                   <div class="row">
                       <div class="col-md-6 col-lg-3">
                           <ul class=" list-unstyled">
                               <li>
                                   <h4>Manuals</h4>
                               </li>
                               <li>
                                   <a
                                       href="/5.8.0/index-overview.html">Overview</a>
                               </li>
                               <li>
                                   <a
                                       href="/5.8.0/index-tutorials.html">Tutorials</a>
                               </li>
                               <li>
                                   <a href="/5.8.0/index-faq.html">FAQs</a>
                               </li>
                               <li>
                                   <a
                                       href="/5.8.0/index-history.html">Changes</a>
                               </li>
                           </ul>
                       </div>
                       <div class="col-md-6 col-lg-3">
                           <ul class=" list-unstyled">
                               <li>
                                   <h4>Reference</h4>
                               </li>
                               <li>
                                   <a
                                       href="/5.8.0/index-language.html">Language</a>
                               </li>
                               <li>
                                   <a
                                       href="/5.8.0/index-functions.html">Functions</a>
                               </li>
                               <li>
                                   <a
                                       href="/5.8.0/perlop.html">Operators</a>
                               </li>
                               <li>
                                   <a
                                       href="/5.8.0/perlvar.html">Variables</a>
                               </li>
                           </ul>
                       </div>
                       <div class="col-md-6 col-lg-3">
                           <ul class=" list-unstyled">
                               <li>
                                   <h4>Modules</h4>
                               </li>
                               <li>
                                   <a
                                       href="/5.8.0/index-modules-A.html">Modules</a>
                               </li>
                               <li>
                                   <a
                                       href="/5.8.0/index-pragmas.html">Pragmas</a>
                               </li>
                               <li>
                                   <a
                                       href="/5.8.0/index-utilities.html">Utilities</a>
                               </li>
                           </ul>
                       </div>
                       <div class="col-md-6 col-lg-3">
                           <ul class=" list-unstyled">
                               <li>
                                   <h4>Misc</h4>
                               </li>
                               <li>
                                   <a
                                       href="/5.8.0/index-licence.html">License</a>
                               </li>
                               <li>
                                   <a
                                       href="/5.8.0/index-internals.html">Internals</a>
                               </li>
                               <li>
                                   <a
                                       href="/5.8.0/index-platforms.html">Platforms</a>
                               </li>
                            <li>
                                <a
                                    href="/5.8.0/index-about.html">About</a>
                            </li>
                           </ul>
                       </div>
                   </div>
               </div>
               <div class=" col-12 footer-inf text-center">
                   <small>perldoc.perl.org - Official documentation for the Perl
                       programming language</small>
               </div>
           </div>
       </div>
   </footer>

        	<div class="beta-wrapper beta-bottom-right ">
		<div class="beta beta-blue  ">
			<a class="beta-link "
				href="//github.com/OpusVL/perldoc.perl.org/issues/new" rel="noopener">
				<span class="beta-text">
					This website is a Beta release.
				</span>
				<span class="beta-text">
					For any issues please raise a ticket on GitHub
				</span>
			</a>
		</div>
	</div>

        <script src="/public/js/main.min.js"></script>
      </body>

      </html>
