      
      
      
      

      <!DOCTYPE html>
      <html lang="en">

      <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="description" content="perlpragma - perldoc.perl.org">
        <link rel="icon" href="/public/img/favicon.ico">
        <title>perlpragma - perldoc.perl.org</title>
        <link href="/public/css/main.min.css" rel="stylesheet">
        <link rel="canonical" href="/perlpragma.html">
        <link
          href='https://fonts.googleapis.com/css?family=Lato:400,100,300,700,900'
          rel='stylesheet' type='text/css'>
        <script>
          window.ga = window.ga || function () {
            (ga.q = ga.q || []).push(arguments)
          };
          ga.l = +new Date;
          ga('create', 'UA-1892152-2', 'auto'); // JJ's account
          ga('create', 'UA-50555-3', 'auto', 'perlOrg'); // perl.org account
          ga('require', 'outboundLinkTracker', {
            events: ['click', 'auxclick', 'contextmenu'],
          });
          ga('require', 'maxScrollTracker');
          ga('send', 'pageview');
          ga('perlOrg.send', 'pageview');
        </script>
        <script async src="https://www.google-analytics.com/analytics.js">
        </script>
        <script async src="/public/js/tracking.min.js"></script>
      </head>

      <body class="body container-fluid ">
        <div class="wrapper">

          <nav
    class="navbar navbar-dark bg-primary bg-perl fixed-top justify-content-between navbar-expand-lg">
    <a href="#content" class="skippy sr-only sr-only-focusable">
        <span class=' skippy-text'>Skip to main content</span>
    </a>
    <a class="navbar-brand" href="/">
        <img class="logo" src="/public/img/logo_perl_doc.svg"
            alt="Perl Documentation Logo" />
    </a>
    <button class="navbar-toggler" type="button" data-toggle="collapse"
        data-target="#navbar" aria-controls="navbar" aria-expanded="false"
        aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
    </button>
    <div id="navbar" class="collapse navbar-collapse ">
        <ul class="navbar-nav ml-auto navbar-right">
            <form class="nav-item dropdown search-wrapper">
                <input type="text" id='searchinput' aria-describedby='navbarDropdown5'
                    placeholder="Type query" class='search-input-field' value=''>

                <button href="#" data-toggle='dropdown' type="button"
                    aria-haspopup="true" aria-expanded='false' id="navbarDropdown5"
                    class="nav-link dropdown-toggle search-link">
                    <object tabindex='-1' focusable="false" class='search-icon'
                        data="/public/img/search.svg" type="image/svg+xml"
                        name='search icon'>search
                        icon</object>
                </button>
                <div class="dropdown-menu" aria-labelledby="navbarDropdown5"
                    id='search-results'>
                    <p class='dropdown-item major-version'>
                        No results
                    </p>
                </div>
            </form>
            <li class="nav-item dropdown">
                <a id="navbarDropdown" href="#" class="nav-link dropdown-toggle"
                    data-toggle="dropdown" role="button" aria-haspopup="true"
                    aria-expanded="false">Perl versions</a>
                <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                    
                        <p class='dropdown-item major-version'>
                            5.32
                        </p>
                        
                        <a class='dropdown-item minor-version' href="/5.32.0/">5.32.0</a>
                        
                        
                        <div class="dropdown-divider"></div>
                        
                    
                        <p class='dropdown-item major-version'>
                            5.30
                        </p>
                        
                        <a class='dropdown-item minor-version' href="/5.30.3/">5.30.3</a>
                        
                        <a class='dropdown-item minor-version' href="/5.30.2/">5.30.2</a>
                        
                        <a class='dropdown-item minor-version' href="/5.30.1/">5.30.1</a>
                        
                        <a class='dropdown-item minor-version' href="/5.30.0/">5.30.0</a>
                        
                        
                        <div class="dropdown-divider"></div>
                        
                    
                        <p class='dropdown-item major-version'>
                            5.28
                        </p>
                        
                        <a class='dropdown-item minor-version' href="/5.28.3/">5.28.3</a>
                        
                        <a class='dropdown-item minor-version' href="/5.28.2/">5.28.2</a>
                        
                        <a class='dropdown-item minor-version' href="/5.28.1/">5.28.1</a>
                        
                        <a class='dropdown-item minor-version' href="/5.28.0/">5.28.0</a>
                        
                        
                        <div class="dropdown-divider"></div>
                        
                    
                        <p class='dropdown-item major-version'>
                            5.26
                        </p>
                        
                        <a class='dropdown-item minor-version' href="/5.26.3/">5.26.3</a>
                        
                        <a class='dropdown-item minor-version' href="/5.26.2/">5.26.2</a>
                        
                        <a class='dropdown-item minor-version' href="/5.26.1/">5.26.1</a>
                        
                        <a class='dropdown-item minor-version' href="/5.26.0/">5.26.0</a>
                        
                        
                        <div class="dropdown-divider"></div>
                        
                    
                        <p class='dropdown-item major-version'>
                            5.24
                        </p>
                        
                        <a class='dropdown-item minor-version' href="/5.24.4/">5.24.4</a>
                        
                        <a class='dropdown-item minor-version' href="/5.24.3/">5.24.3</a>
                        
                        <a class='dropdown-item minor-version' href="/5.24.2/">5.24.2</a>
                        
                        <a class='dropdown-item minor-version' href="/5.24.1/">5.24.1</a>
                        
                        <a class='dropdown-item minor-version' href="/5.24.0/">5.24.0</a>
                        
                        
                        <div class="dropdown-divider"></div>
                        
                    
                        <p class='dropdown-item major-version'>
                            5.22
                        </p>
                        
                        <a class='dropdown-item minor-version' href="/5.22.4/">5.22.4</a>
                        
                        <a class='dropdown-item minor-version' href="/5.22.3/">5.22.3</a>
                        
                        <a class='dropdown-item minor-version' href="/5.22.2/">5.22.2</a>
                        
                        <a class='dropdown-item minor-version' href="/5.22.1/">5.22.1</a>
                        
                        <a class='dropdown-item minor-version' href="/5.22.0/">5.22.0</a>
                        
                        
                        <div class="dropdown-divider"></div>
                        
                    
                        <p class='dropdown-item major-version'>
                            5.20
                        </p>
                        
                        <a class='dropdown-item minor-version' href="/5.20.3/">5.20.3</a>
                        
                        <a class='dropdown-item minor-version' href="/5.20.2/">5.20.2</a>
                        
                        <a class='dropdown-item minor-version' href="/5.20.1/">5.20.1</a>
                        
                        <a class='dropdown-item minor-version' href="/5.20.0/">5.20.0</a>
                        
                        
                        <div class="dropdown-divider"></div>
                        
                    
                        <p class='dropdown-item major-version'>
                            5.18
                        </p>
                        
                        <a class='dropdown-item minor-version' href="/5.18.4/">5.18.4</a>
                        
                        <a class='dropdown-item minor-version' href="/5.18.3/">5.18.3</a>
                        
                        <a class='dropdown-item minor-version' href="/5.18.2/">5.18.2</a>
                        
                        <a class='dropdown-item minor-version' href="/5.18.1/">5.18.1</a>
                        
                        <a class='dropdown-item minor-version' href="/5.18.0/">5.18.0</a>
                        
                        
                        <div class="dropdown-divider"></div>
                        
                    
                        <p class='dropdown-item major-version'>
                            5.16
                        </p>
                        
                        <a class='dropdown-item minor-version' href="/5.16.3/">5.16.3</a>
                        
                        <a class='dropdown-item minor-version' href="/5.16.2/">5.16.2</a>
                        
                        <a class='dropdown-item minor-version' href="/5.16.1/">5.16.1</a>
                        
                        <a class='dropdown-item minor-version' href="/5.16.0/">5.16.0</a>
                        
                        
                        <div class="dropdown-divider"></div>
                        
                    
                        <p class='dropdown-item major-version'>
                            5.14
                        </p>
                        
                        <a class='dropdown-item minor-version' href="/5.14.4/">5.14.4</a>
                        
                        <a class='dropdown-item minor-version' href="/5.14.3/">5.14.3</a>
                        
                        <a class='dropdown-item minor-version' href="/5.14.2/">5.14.2</a>
                        
                        <a class='dropdown-item minor-version' href="/5.14.1/">5.14.1</a>
                        
                        <a class='dropdown-item minor-version' href="/5.14.0/">5.14.0</a>
                        
                        
                        <div class="dropdown-divider"></div>
                        
                    
                        <p class='dropdown-item major-version'>
                            5.12
                        </p>
                        
                        <a class='dropdown-item minor-version' href="/5.12.5/">5.12.5</a>
                        
                        <a class='dropdown-item minor-version' href="/5.12.4/">5.12.4</a>
                        
                        <a class='dropdown-item minor-version' href="/5.12.3/">5.12.3</a>
                        
                        <a class='dropdown-item minor-version' href="/5.12.2/">5.12.2</a>
                        
                        <a class='dropdown-item minor-version' href="/5.12.1/">5.12.1</a>
                        
                        <a class='dropdown-item minor-version' href="/5.12.0/">5.12.0</a>
                        
                        
                        <div class="dropdown-divider"></div>
                        
                    
                        <p class='dropdown-item major-version'>
                            5.10
                        </p>
                        
                        <a class='dropdown-item minor-version' href="/5.10.1/">5.10.1</a>
                        
                        <a class='dropdown-item minor-version' href="/5.10.0/">5.10.0</a>
                        
                        
                        <div class="dropdown-divider"></div>
                        
                    
                        <p class='dropdown-item major-version'>
                            5.8
                        </p>
                        
                        <a class='dropdown-item minor-version' href="/5.8.9/">5.8.9</a>
                        
                        <a class='dropdown-item minor-version' href="/5.8.8/">5.8.8</a>
                        
                        <a class='dropdown-item minor-version' href="/5.8.7/">5.8.7</a>
                        
                        <a class='dropdown-item minor-version' href="/5.8.6/">5.8.6</a>
                        
                        <a class='dropdown-item minor-version' href="/5.8.5/">5.8.5</a>
                        
                        <a class='dropdown-item minor-version' href="/5.8.4/">5.8.4</a>
                        
                        <a class='dropdown-item minor-version' href="/5.8.3/">5.8.3</a>
                        
                        <a class='dropdown-item minor-version' href="/5.8.2/">5.8.2</a>
                        
                        <a class='dropdown-item minor-version' href="/5.8.1/">5.8.1</a>
                        
                        <a class='dropdown-item minor-version' href="/5.8.0/">5.8.0</a>
                        
                        
                        <div class="dropdown-divider"></div>
                        
                    
                        <p class='dropdown-item major-version'>
                            5.6
                        </p>
                        
                        <a class='dropdown-item minor-version' href="/5.6.2/">5.6.2</a>
                        
                        <a class='dropdown-item minor-version' href="/5.6.1/">5.6.1</a>
                        
                        <a class='dropdown-item minor-version' href="/5.6.0/">5.6.0</a>
                        
                        
                    
                </div>
            </li>
            <li class="nav-item dropdown">
                <a id="navbarDropdown1" href="#" class="dropdown-toggle nav-link"
                    data-toggle="dropdown" role="button" aria-haspopup="true"
                    aria-expanded="false">Manuals</a>
                <div class="dropdown-menu" aria-labelledby="navbarDropdown1">
                    <a class="dropdown-item"
                        href="/5.24.3/index-overview.html">Overview</a>
                    <a class="dropdown-item"
                        href="/5.24.3/index-tutorials.html">Tutorials</a>
                    <a class="dropdown-item"
                        href="/5.24.3/index-faq.html">FAQs</a>
                    <a class="dropdown-item"
                        href="/5.24.3/index-history.html">Changes</a>
                    <a class="dropdown-item"
                        href="/5.24.3/index-licence.html">License</a>
                    <a class="dropdown-item"
                        href="/5.24.3/index-language.html">Language</a>
                    <a class="dropdown-item"
                        href="/5.24.3/index-functions.html">Functions</a>
                    <a class="dropdown-item"
                        href="/5.24.3/perlop.html">Operators</a>
                    <a class="dropdown-item"
                        href="/5.24.3/perlvar.html">Variables</a>
                    <a class="dropdown-item"
                        href="/5.24.3/index-pragmas.html">Pragmas</a>
                    <a class="dropdown-item"
                        href="/5.24.3/index-utilities.html">Utilities</a>
                    <a class="dropdown-item"
                        href="/5.24.3/index-internals.html">Internals</a>
                    <a class="dropdown-item"
                        href="/5.24.3/index-platforms.html">Platforms</a>
                </div>
            </li>
            <li class="nav-item dropdown">
                <a id="navbarDropdown3" href="#" class="nav-link dropdown-toggle "
                    data-toggle="dropdown" role="button" aria-haspopup="true"
                    aria-expanded="false">Modules</a>
                <div aria-labelledby="navbarDropdown3"
                    class="dropdown-menu letters-wrap">
                    <!--<a class="dropdown-item"
                        href="/5.24.3/index-modules.html">A-Z</a>
                    <a class="dropdown-item"
                        href="/5.24.3/index-modules-by-cat.html">By
                        Category</a>-->
                    <div class="dropdown-divider"></div>
                    <div class="letter-container">
                        <a class="dropdown-item letters"
                            href="/5.24.3/index-modules-A.html">A</a>
                        <a class="dropdown-item letters"
                            href="/5.24.3/index-modules-B.html">B</a>
                        <a class="dropdown-item letters"
                            href="/5.24.3/index-modules-C.html">C</a>
                        <a class="dropdown-item letters"
                            href="/5.24.3/index-modules-D.html">D</a>
                        <a class="dropdown-item letters"
                            href="/5.24.3/index-modules-E.html">E</a>
                        <a class="dropdown-item letters"
                            href="/5.24.3/index-modules-F.html">F</a>
                        <a class="dropdown-item letters"
                            href="/5.24.3/index-modules-G.html">G</a>
                        <a class="dropdown-item letters"
                            href="/5.24.3/index-modules-H.html">H</a>
                        <a class="dropdown-item letters"
                            href="/5.24.3/index-modules-I.html">I</a>
                        <a class="dropdown-item letters"
                            href="/5.24.3/index-modules-J.html">J</a>
                        <a class="dropdown-item letters"
                            href="/5.24.3/index-modules-K.html">K</a>
                        <a class="dropdown-item letters"
                            href="/5.24.3/index-modules-L.html">L</a>
                        <a class="dropdown-item letters"
                            href="/5.24.3/index-modules-M.html">M</a>
                        <a class="dropdown-item letters"
                            href="/5.24.3/index-modules-N.html">N</a>
                        <a class="dropdown-item letters"
                            href="/5.24.3/index-modules-O.html">O</a>
                        <a class="dropdown-item letters"
                            href="/5.24.3/index-modules-P.html">P</a>
                        <a class="dropdown-item letters"
                            href="/5.24.3/index-modules-Q.html">Q</a>
                        <a class="dropdown-item letters"
                            href="/5.24.3/index-modules-R.html">R</a>
                        <a class="dropdown-item letters"
                            href="/5.24.3/index-modules-S.html">S</a>
                        <a class="dropdown-item letters"
                            href="/5.24.3/index-modules-T.html">T</a>
                        <a class="dropdown-item letters"
                            href="/5.24.3/index-modules-U.html">U</a>
                        <a class="dropdown-item letters"
                            href="/5.24.3/index-modules-V.html">V</a>
                        <a class="dropdown-item letters"
                            href="/5.24.3/index-modules-W.html">W</a>
                        <a class="dropdown-item letters"
                            href="/5.24.3/index-modules-X.html">X</a>
                        <a class="dropdown-item letters"
                            href="/5.24.3/index-modules-Y.html">Y</a>
                        <a class="dropdown-item letters"
                            href="/5.24.3/index-modules-Z.html">Z</a>
                    </div>
                </div>
            </li>
            <li class="nav-item dropdown">
                <a id="navbarDropdown4" href="#" class="nav-link dropdown-toggle "
                    data-toggle="dropdown" role="button" aria-haspopup="true"
                    aria-expanded="false">Functions</a>
                <div aria-labelledby="navbarDropdown4"
                    class="dropdown-menu letters-wrap">
                    <a class="dropdown-item"
                        href="/5.24.3/index-functions.html">A-Z</a>
                    <a class="dropdown-item"
                        href="/5.24.3/index-functions-by-cat.html">By
                        Category</a>
                    <div class="dropdown-divider"></div>
                    <div class="letter-container">
                        <a class="dropdown-item letters"
                            href="/5.24.3/index-functions.html#A">A</a>
                        <a class="dropdown-item letters"
                            href="/5.24.3/index-functions.html#B">B</a>
                        <a class="dropdown-item letters"
                            href="/5.24.3/index-functions.html#C">C</a>
                        <a class="dropdown-item letters"
                            href="/5.24.3/index-functions.html#D">D</a>
                        <a class="dropdown-item letters"
                            href="/5.24.3/index-functions.html#E">E</a>
                        <a class="dropdown-item letters"
                            href="/5.24.3/index-functions.html#F">F</a>
                        <a class="dropdown-item letters"
                            href="/5.24.3/index-functions.html#G">G</a>
                        <a class="dropdown-item letters"
                            href="/5.24.3/index-functions.html#H">H</a>
                        <a class="dropdown-item letters"
                            href="/5.24.3/index-functions.html#I">I</a>
                        <a class="dropdown-item letters"
                            href="/5.24.3/index-functions.html#J">J</a>
                        <a class="dropdown-item letters"
                            href="/5.24.3/index-functions.html#K">K</a>
                        <a class="dropdown-item letters"
                            href="/5.24.3/index-functions.html#L">L</a>
                        <a class="dropdown-item letters"
                            href="/5.24.3/index-functions.html#M">M</a>
                        <a class="dropdown-item letters"
                            href="/5.24.3/index-functions.html#N">N</a>
                        <a class="dropdown-item letters"
                            href="/5.24.3/index-functions.html#O">O</a>
                        <a class="dropdown-item letters"
                            href="/5.24.3/index-functions.html#P">P</a>
                        <a class="dropdown-item letters"
                            href="/5.24.3/index-functions.html#Q">Q</a>
                        <a class="dropdown-item letters"
                            href="/5.24.3/index-functions.html#R">R</a>
                        <a class="dropdown-item letters"
                            href="/5.24.3/index-functions.html#S">S</a>
                        <a class="dropdown-item letters"
                            href="/5.24.3/index-functions.html#T">T</a>
                        <a class="dropdown-item letters"
                            href="/5.24.3/index-functions.html#U">U</a>
                        <a class="dropdown-item letters"
                            href="/5.24.3/index-functions.html#V">V</a>
                        <a class="dropdown-item letters"
                            href="/5.24.3/index-functions.html#W">W</a>
                        <a class="dropdown-item letters"
                            href="/5.24.3/index-functions.html#X">X</a>
                        <a class="dropdown-item letters"
                            href="/5.24.3/index-functions.html#Y">Y</a>
                        <a class="dropdown-item letters"
                            href="/5.24.3/index-functions.html#Z">Z</a>
                    </div>
                </div>
            </li>
        </ul>
    </div>
    <!--/.nav-collapse -->
</nav>


          <main class="row main-content pb-5 pt-5" id='content'>
            <div class="col-sm-10 offset-sm-1 col-xl-8 offset-xl-2">
              <div class="row">
                <div class="col-sm-12">
                  <div id="breadcrumbs">
                      
    <a href="index.html">Home</a>&nbsp; &gt;
    
      
        <a href="index-tutorials.html">Tutorials</a> &gt;
      
    
    perlpragma
  

                  </div>
                </div>
              </div>
              <div class="row">
                <article class="col-sm-12 content">
                  <div class="documentation-wrapper">
                    <div id="perl_version">
                      <h7 class='page-title'> Perl 5 version 24.3
                        documentation</h7>
                    </div>
                    <h1>perlpragma</h1>


  <!--    -->
<ul><li><a href="#NAME">NAME</a></li><li><a href="#DESCRIPTION">DESCRIPTION</a></li><li><a href="#A-basic-example">A basic example</a></li><li><a href="#Key-naming">Key naming</a></li><li><a href="#Implementation-details">Implementation details</a></li></ul><a class='view-head1' id="NAME"></a><h2 class='h2' >NAME</h2>
<p>perlpragma - how to write a user pragma</p>
<a class='view-head1' id="DESCRIPTION"></a><h2 class='h2' >DESCRIPTION</h2>
<p>A pragma is a module which influences some aspect of the compile time or run
time behaviour of Perl, such as <code class="inline"><span class="w">strict</span></code>
 or <code class="inline"><span class="w">warnings</span></code>
. With Perl 5.10 you
are no longer limited to the built in pragmata; you can now create user
pragmata that modify the behaviour of user functions within a lexical scope.</p>
<a class='view-head1' id="A-basic-example"></a><h2 class='h2' >A basic example</h2>
<p>For example, say you need to create a class implementing overloaded
mathematical operators, and would like to provide your own pragma that
functions much like <code class="inline"><a class="l_k" href="functions/use.html">use</a> <span class="w">integer</span><span class="sc">;</span></code>
 You'd like this code</p>
<pre class="verbatim"><ol><li>    <a class="l_k" href="functions/use.html">use</a> <span class="w">MyMaths</span><span class="sc">;</span></li><li></li><li>    <a class="l_k" href="functions/my.html">my</a> <span class="i">$l</span> = <span class="w">MyMaths</span><span class="w">-&gt;new</span><span class="s">(</span><span class="n">1.2</span><span class="s">)</span><span class="sc">;</span></li><li>    <a class="l_k" href="functions/my.html">my</a> <span class="i">$r</span> = <span class="w">MyMaths</span><span class="w">-&gt;new</span><span class="s">(</span><span class="n">3.4</span><span class="s">)</span><span class="sc">;</span></li><li></li><li>    <a class="l_k" href="functions/print.html">print</a> <span class="q">&quot;A: &quot;</span><span class="cm">,</span> <span class="i">$l</span> + <span class="i">$r</span><span class="cm">,</span> <span class="q">&quot;\n&quot;</span><span class="sc">;</span></li><li></li><li>    <a class="l_k" href="functions/use.html">use</a> <span class="w">myint</span><span class="sc">;</span></li><li>    <a class="l_k" href="functions/print.html">print</a> <span class="q">&quot;B: &quot;</span><span class="cm">,</span> <span class="i">$l</span> + <span class="i">$r</span><span class="cm">,</span> <span class="q">&quot;\n&quot;</span><span class="sc">;</span></li><li></li><li>    <span class="s">{</span></li><li>        <a class="l_k" href="functions/no.html">no</a> <span class="w">myint</span><span class="sc">;</span></li><li>        <a class="l_k" href="functions/print.html">print</a> <span class="q">&quot;C: &quot;</span><span class="cm">,</span> <span class="i">$l</span> + <span class="i">$r</span><span class="cm">,</span> <span class="q">&quot;\n&quot;</span><span class="sc">;</span></li><li>    <span class="s">}</span></li><li></li><li>    <a class="l_k" href="functions/print.html">print</a> <span class="q">&quot;D: &quot;</span><span class="cm">,</span> <span class="i">$l</span> + <span class="i">$r</span><span class="cm">,</span> <span class="q">&quot;\n&quot;</span><span class="sc">;</span></li><li></li><li>    <a class="l_k" href="functions/no.html">no</a> <span class="w">myint</span><span class="sc">;</span></li><li>    <a class="l_k" href="functions/print.html">print</a> <span class="q">&quot;E: &quot;</span><span class="cm">,</span> <span class="i">$l</span> + <span class="i">$r</span><span class="cm">,</span> <span class="q">&quot;\n&quot;</span><span class="sc">;</span></li></ol></pre><p>to give the output</p>
<pre class="verbatim"><ol><li>    <span class="j">A:</span> <span class="n">4.6</span></li><li>    <span class="w">B</span><span class="co">:</span> <span class="n">4</span></li><li>    <span class="w">C</span><span class="co">:</span> <span class="n">4.6</span></li><li>    <span class="w">D</span><span class="co">:</span> <span class="n">4</span></li><li>    <span class="w">E</span><span class="co">:</span> <span class="n">4.6</span></li></ol></pre><p><i>i.e.</i>, where <code class="inline"><a class="l_k" href="functions/use.html">use</a> <span class="w">myint</span><span class="sc">;</span></code>
 is in effect, addition operations are forced
to integer, whereas by default they are not, with the default behaviour being
restored via <code class="inline"><a class="l_k" href="functions/no.html">no</a> <span class="w">myint</span><span class="sc">;</span></code>
</p>
<p>The minimal implementation of the package <code class="inline"><span class="w">MyMaths</span></code>
 would be something like
this:</p>
<pre class="verbatim"><ol><li><a name="package-MyMaths"></a>    package <span class="i">MyMaths</span><span class="sc">;</span></li><li>    <a class="l_k" href="functions/use.html">use</a> <span class="w">warnings</span><span class="sc">;</span></li><li>    <a class="l_k" href="functions/use.html">use</a> <span class="w">strict</span><span class="sc">;</span></li><li>    <a class="l_k" href="functions/use.html">use</a> <span class="i">myint</span><span class="s">(</span><span class="s">)</span><span class="sc">;</span></li><li>    <a class="l_k" href="functions/use.html">use</a> <span class="w">overload</span> <span class="q">&#39;+&#39;</span> <span class="cm">=&gt;</span> <a class="l_k" href="functions/sub.html">sub</a> <span class="s">{</span></li><li>        <a class="l_k" href="functions/my.html">my</a> <span class="s">(</span><span class="i">$l</span><span class="cm">,</span> <span class="i">$r</span><span class="s">)</span> = <span class="i">@_</span><span class="sc">;</span></li><li>	<span class="c"># Pass 1 to check up one call level from here</span></li><li>        <a class="l_k" href="functions/if.html">if</a> <span class="s">(</span><span class="i">myint::in_effect</span><span class="s">(</span><span class="n">1</span><span class="s">)</span><span class="s">)</span> <span class="s">{</span></li><li>            <a class="l_k" href="functions/int.html">int</a><span class="s">(</span><span class="i">$$l</span><span class="s">)</span> + <a class="l_k" href="functions/int.html">int</a><span class="s">(</span><span class="i">$$r</span><span class="s">)</span><span class="sc">;</span></li><li>        <span class="s">}</span> <a class="l_k" href="functions/else.html">else</a> <span class="s">{</span></li><li>            <span class="i">$$l</span> + <span class="i">$$r</span><span class="sc">;</span></li><li>        <span class="s">}</span></li><li>    <span class="s">}</span><span class="sc">;</span></li><li></li><li><a name="new"></a>    sub <span class="m">new</span> <span class="s">{</span></li><li>        <a class="l_k" href="functions/my.html">my</a> <span class="s">(</span><span class="i">$class</span><span class="cm">,</span> <span class="i">$value</span><span class="s">)</span> = <span class="i">@_</span><span class="sc">;</span></li><li>        <a class="l_k" href="functions/bless.html">bless</a> \<span class="i">$value</span><span class="cm">,</span> <span class="i">$class</span><span class="sc">;</span></li><li>    <span class="s">}</span></li><li></li><li>    <span class="n">1</span><span class="sc">;</span></li></ol></pre><p>Note how we load the user pragma <code class="inline"><span class="w">myint</span></code>
 with an empty list <code class="inline"><span class="s">(</span><span class="s">)</span></code>
 to
prevent its <code class="inline"><a class="l_k" href="functions/import.html">import</a></code> being called.</p>
<p>The interaction with the Perl compilation happens inside package <code class="inline"><span class="w">myint</span></code>
:</p>
<pre class="verbatim"><ol><li><a name="package-myint"></a>    package <span class="i">myint</span><span class="sc">;</span></li><li></li><li>    <a class="l_k" href="functions/use.html">use</a> <span class="w">strict</span><span class="sc">;</span></li><li>    <a class="l_k" href="functions/use.html">use</a> <span class="w">warnings</span><span class="sc">;</span></li><li></li><li><a name="import"></a>    sub <span class="m">import</span> <span class="s">{</span></li><li>        <span class="i">$^H</span>{<span class="q">&quot;myint/in_effect&quot;</span>} = <span class="n">1</span><span class="sc">;</span></li><li>    <span class="s">}</span></li><li></li><li><a name="unimport"></a>    sub <span class="m">unimport</span> <span class="s">{</span></li><li>        <span class="i">$^H</span>{<span class="q">&quot;myint/in_effect&quot;</span>} = <span class="n">0</span><span class="sc">;</span></li><li>    <span class="s">}</span></li><li></li><li><a name="in_effect"></a>    sub <span class="m">in_effect</span> <span class="s">{</span></li><li>        <a class="l_k" href="functions/my.html">my</a> <span class="i">$level</span> = <a class="l_k" href="functions/shift.html">shift</a> // <span class="n">0</span><span class="sc">;</span></li><li>        <a class="l_k" href="functions/my.html">my</a> <span class="i">$hinthash</span> = <span class="s">(</span><a class="l_k" href="functions/caller.html">caller</a><span class="s">(</span><span class="i">$level</span><span class="s">)</span><span class="s">)</span>[<span class="n">10</span>]<span class="sc">;</span></li><li>        <a class="l_k" href="functions/return.html">return</a> <span class="i">$hinthash</span>-&gt;{<span class="q">&quot;myint/in_effect&quot;</span>}<span class="sc">;</span></li><li>    <span class="s">}</span></li><li></li><li>    <span class="n">1</span><span class="sc">;</span></li></ol></pre><p>As pragmata are implemented as modules, like any other module, <code class="inline"><a class="l_k" href="functions/use.html">use</a> <span class="w">myint</span><span class="sc">;</span></code>

becomes</p>
<pre class="verbatim"><ol><li>    <a class="l_k" href="functions/BEGIN.html">BEGIN</a> <span class="s">{</span></li><li>        <a class="l_k" href="functions/require.html">require</a> <span class="w">myint</span><span class="sc">;</span></li><li>        <span class="w">myint</span><span class="w">-&gt;import</span><span class="s">(</span><span class="s">)</span><span class="sc">;</span></li><li>    <span class="s">}</span></li></ol></pre><p>and <code class="inline"><a class="l_k" href="functions/no.html">no</a> <span class="w">myint</span><span class="sc">;</span></code>
 is</p>
<pre class="verbatim"><ol><li>    <a class="l_k" href="functions/BEGIN.html">BEGIN</a> <span class="s">{</span></li><li>        <a class="l_k" href="functions/require.html">require</a> <span class="w">myint</span><span class="sc">;</span></li><li>        <span class="w">myint</span><span class="w">-&gt;unimport</span><span class="s">(</span><span class="s">)</span><span class="sc">;</span></li><li>    <span class="s">}</span></li></ol></pre><p>Hence the <code class="inline"><a class="l_k" href="functions/import.html">import</a></code> and <code class="inline"><span class="w">unimport</span></code>
 routines are called at <strong>compile time</strong>
for the user's code.</p>
<p>User pragmata store their state by writing to the magical hash <code class="inline"><span class="i">%^H</span></code>
,
hence these two routines manipulate it. The state information in <code class="inline"><span class="i">%^H</span></code>
 is
stored in the optree, and can be retrieved read-only at runtime with <code class="inline"><a class="l_k" href="functions/caller.html">caller()</a></code>,
at index 10 of the list of returned results. In the example pragma, retrieval
is encapsulated into the routine <code class="inline"><span class="i">in_effect</span><span class="s">(</span><span class="s">)</span></code>
, which takes as parameter
the number of call frames to go up to find the value of the pragma in the
user's script. This uses <code class="inline"><a class="l_k" href="functions/caller.html">caller()</a></code> to determine the value of
<code class="inline"><span class="i">$^H</span>{<span class="q">&quot;myint/in_effect&quot;</span>}</code>
 when each line of the user's script was called, and
therefore provide the correct semantics in the subroutine implementing the
overloaded addition.</p>
<a class='view-head1' id="Key-naming"></a><h2 class='h2' >Key naming</h2>
<p>There is only a single <code class="inline"><span class="i">%^H</span></code>
, but arbitrarily many modules that want
to use its scoping semantics.  To avoid stepping on each other's toes,
they need to be sure to use different keys in the hash.  It is therefore
conventional for a module to use only keys that begin with the module's
name (the name of its main package) and a "/" character.  After this
module-identifying prefix, the rest of the key is entirely up to the
module: it may include any characters whatsoever.  For example, a module
<code class="inline"><span class="w">Foo::Bar</span></code>
 should use keys such as <code class="inline"><span class="w">Foo::Bar</span>/<span class="w">baz</span></code>
 and <code class="inline"><span class="w">Foo::Bar</span>/<span class="i">$%</span>/<span class="w">_</span>!</code>
.
Modules following this convention all play nicely with each other.</p>
<p>The Perl core uses a handful of keys in <code class="inline"><span class="i">%^H</span></code>
 which do not follow this
convention, because they predate it.  Keys that follow the convention
won't conflict with the core's historical keys.</p>
<a class='view-head1' id="Implementation-details"></a><h2 class='h2' >Implementation details</h2>
<p>The optree is shared between threads.  This means there is a possibility that
the optree will outlive the particular thread (and therefore the interpreter
instance) that created it, so true Perl scalars cannot be stored in the
optree.  Instead a compact form is used, which can only store values that are
integers (signed and unsigned), strings or <code class="inline"><a class="l_k" href="functions/undef.html">undef</a></code> - references and
floating point values are stringified.  If you need to store multiple values
or complex structures, you should serialise them, for example with <code class="inline"><a class="l_k" href="functions/pack.html">pack</a></code>.
The deletion of a hash key from <code class="inline"><span class="i">%^H</span></code>
 is recorded, and as ever can be
distinguished from the existence of a key with value <code class="inline"><a class="l_k" href="functions/undef.html">undef</a></code> with
<code class="inline"><a class="l_k" href="functions/exists.html">exists</a></code>.</p>
<p><strong>Don't</strong> attempt to store references to data structures as integers which
are retrieved via <code class="inline"><a class="l_k" href="functions/caller.html">caller</a></code> and converted back, as this will not be threadsafe.
Accesses would be to the structure without locking (which is not safe for
Perl's scalars), and either the structure has to leak, or it has to be
freed when its creating thread terminates, which may be before the optree
referencing it is deleted, if other threads outlive it.</p>




      <ul><li><a href="#NAME">NAME</a></li><li><a href="#DESCRIPTION">DESCRIPTION</a></li><li><a href="#A-basic-example">A basic example</a></li><li><a href="#Key-naming">Key naming</a></li><li><a href="#Implementation-details">Implementation details</a></li></ul>


                  </div>
                </article>
              </div>
            </div>
          </main>
        </div>
           <footer class="footer row bg-light pt-5 pb-5">
       <div class="col-sm-10 offset-sm-1 col-xl-8 offset-xl-2">
           <div class="row">
               <div class="col-md-4">
                   <ul class="list-unstyled">
                       <li>
                           <h4>Site info</h4>
                       </li>
                       <li>Docs mantained by
                           <a href="//lists.perl.org/list/perl5-porters.html"
                               rel="noopener">Perl 5 Porters</a>
                       </li>
                       <li>Perldoc site development sponsored by
                           <a href="//opusvl.com" rel="noopener">
                           <img style="margin: 20px 20px 5px 10px" class="opus-logo" src="/public/img/opusvl_logo.svg" alt="OpusVL Logo">
                        </a>
                    <li><span class="about_perldoc"><a href="//about.html">About PerlDOC</a></span>
                    </li>
                       </li>
                   </ul>
               </div>
               <div class="col-md-8">
                   <div class="row">
                       <div class="col-md-6 col-lg-3">
                           <ul class=" list-unstyled">
                               <li>
                                   <h4>Manuals</h4>
                               </li>
                               <li>
                                   <a
                                       href="/5.24.3/index-overview.html">Overview</a>
                               </li>
                               <li>
                                   <a
                                       href="/5.24.3/index-tutorials.html">Tutorials</a>
                               </li>
                               <li>
                                   <a href="/5.24.3/index-faq.html">FAQs</a>
                               </li>
                               <li>
                                   <a
                                       href="/5.24.3/index-history.html">Changes</a>
                               </li>
                           </ul>
                       </div>
                       <div class="col-md-6 col-lg-3">
                           <ul class=" list-unstyled">
                               <li>
                                   <h4>Reference</h4>
                               </li>
                               <li>
                                   <a
                                       href="/5.24.3/index-language.html">Language</a>
                               </li>
                               <li>
                                   <a
                                       href="/5.24.3/index-functions.html">Functions</a>
                               </li>
                               <li>
                                   <a
                                       href="/5.24.3/perlop.html">Operators</a>
                               </li>
                               <li>
                                   <a
                                       href="/5.24.3/perlvar.html">Variables</a>
                               </li>
                           </ul>
                       </div>
                       <div class="col-md-6 col-lg-3">
                           <ul class=" list-unstyled">
                               <li>
                                   <h4>Modules</h4>
                               </li>
                               <li>
                                   <a
                                       href="/5.24.3/index-modules-A.html">Modules</a>
                               </li>
                               <li>
                                   <a
                                       href="/5.24.3/index-pragmas.html">Pragmas</a>
                               </li>
                               <li>
                                   <a
                                       href="/5.24.3/index-utilities.html">Utilities</a>
                               </li>
                           </ul>
                       </div>
                       <div class="col-md-6 col-lg-3">
                           <ul class=" list-unstyled">
                               <li>
                                   <h4>Misc</h4>
                               </li>
                               <li>
                                   <a
                                       href="/5.24.3/index-licence.html">License</a>
                               </li>
                               <li>
                                   <a
                                       href="/5.24.3/index-internals.html">Internals</a>
                               </li>
                               <li>
                                   <a
                                       href="/5.24.3/index-platforms.html">Platforms</a>
                               </li>
                            <li>
                                <a
                                    href="/5.24.3/index-about.html">About</a>
                            </li>
                           </ul>
                       </div>
                   </div>
               </div>
               <div class=" col-12 footer-inf text-center">
                   <small>perldoc.perl.org - Official documentation for the Perl
                       programming language</small>
               </div>
           </div>
       </div>
   </footer>

        	<div class="beta-wrapper beta-bottom-right ">
		<div class="beta beta-blue  ">
			<a class="beta-link "
				href="//github.com/OpusVL/perldoc.perl.org/issues/new" rel="noopener">
				<span class="beta-text">
					This website is a Beta release.
				</span>
				<span class="beta-text">
					For any issues please raise a ticket on GitHub
				</span>
			</a>
		</div>
	</div>

        <script src="/public/js/main.min.js"></script>
      </body>

      </html>
