      
      
      
      

      <!DOCTYPE html>
      <html lang="en">

      <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="description" content="perl5004delta - perldoc.perl.org">
        <link rel="icon" href="/public/img/favicon.ico">
        <title>perl5004delta - perldoc.perl.org</title>
        <link href="/public/css/main.min.css" rel="stylesheet">
        <link rel="canonical" href="/perl5004delta.html">
        <link
          href='https://fonts.googleapis.com/css?family=Lato:400,100,300,700,900'
          rel='stylesheet' type='text/css'>
        <script>
          window.ga = window.ga || function () {
            (ga.q = ga.q || []).push(arguments)
          };
          ga.l = +new Date;
          ga('create', 'UA-1892152-2', 'auto'); // JJ's account
          ga('create', 'UA-50555-3', 'auto', 'perlOrg'); // perl.org account
          ga('require', 'outboundLinkTracker', {
            events: ['click', 'auxclick', 'contextmenu'],
          });
          ga('require', 'maxScrollTracker');
          ga('send', 'pageview');
          ga('perlOrg.send', 'pageview');
        </script>
        <script async src="https://www.google-analytics.com/analytics.js">
        </script>
        <script async src="/public/js/tracking.min.js"></script>
      </head>

      <body class="body container-fluid ">
        <div class="wrapper">

          <nav
    class="navbar navbar-dark bg-primary bg-perl fixed-top justify-content-between navbar-expand-lg">
    <a href="#content" class="skippy sr-only sr-only-focusable">
        <span class=' skippy-text'>Skip to main content</span>
    </a>
    <a class="navbar-brand" href="/">
        <img class="logo" src="/public/img/logo_perl_doc.svg"
            alt="Perl Documentation Logo" />
    </a>
    <button class="navbar-toggler" type="button" data-toggle="collapse"
        data-target="#navbar" aria-controls="navbar" aria-expanded="false"
        aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
    </button>
    <div id="navbar" class="collapse navbar-collapse ">
        <ul class="navbar-nav ml-auto navbar-right">
            <form class="nav-item dropdown search-wrapper">
                <input type="text" id='searchinput' aria-describedby='navbarDropdown5'
                    placeholder="Type query" class='search-input-field' value=''>

                <button href="#" data-toggle='dropdown' type="button"
                    aria-haspopup="true" aria-expanded='false' id="navbarDropdown5"
                    class="nav-link dropdown-toggle search-link">
                    <object tabindex='-1' focusable="false" class='search-icon'
                        data="/public/img/search.svg" type="image/svg+xml"
                        name='search icon'>search
                        icon</object>
                </button>
                <div class="dropdown-menu" aria-labelledby="navbarDropdown5"
                    id='search-results'>
                    <p class='dropdown-item major-version'>
                        No results
                    </p>
                </div>
            </form>
            <li class="nav-item dropdown">
                <a id="navbarDropdown" href="#" class="nav-link dropdown-toggle"
                    data-toggle="dropdown" role="button" aria-haspopup="true"
                    aria-expanded="false">Perl versions</a>
                <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                    
                        <p class='dropdown-item major-version'>
                            5.32
                        </p>
                        
                        <a class='dropdown-item minor-version' href="/5.32.0/">5.32.0</a>
                        
                        
                        <div class="dropdown-divider"></div>
                        
                    
                        <p class='dropdown-item major-version'>
                            5.30
                        </p>
                        
                        <a class='dropdown-item minor-version' href="/5.30.3/">5.30.3</a>
                        
                        <a class='dropdown-item minor-version' href="/5.30.2/">5.30.2</a>
                        
                        <a class='dropdown-item minor-version' href="/5.30.1/">5.30.1</a>
                        
                        <a class='dropdown-item minor-version' href="/5.30.0/">5.30.0</a>
                        
                        
                        <div class="dropdown-divider"></div>
                        
                    
                        <p class='dropdown-item major-version'>
                            5.28
                        </p>
                        
                        <a class='dropdown-item minor-version' href="/5.28.3/">5.28.3</a>
                        
                        <a class='dropdown-item minor-version' href="/5.28.2/">5.28.2</a>
                        
                        <a class='dropdown-item minor-version' href="/5.28.1/">5.28.1</a>
                        
                        <a class='dropdown-item minor-version' href="/5.28.0/">5.28.0</a>
                        
                        
                        <div class="dropdown-divider"></div>
                        
                    
                        <p class='dropdown-item major-version'>
                            5.26
                        </p>
                        
                        <a class='dropdown-item minor-version' href="/5.26.3/">5.26.3</a>
                        
                        <a class='dropdown-item minor-version' href="/5.26.2/">5.26.2</a>
                        
                        <a class='dropdown-item minor-version' href="/5.26.1/">5.26.1</a>
                        
                        <a class='dropdown-item minor-version' href="/5.26.0/">5.26.0</a>
                        
                        
                        <div class="dropdown-divider"></div>
                        
                    
                        <p class='dropdown-item major-version'>
                            5.24
                        </p>
                        
                        <a class='dropdown-item minor-version' href="/5.24.4/">5.24.4</a>
                        
                        <a class='dropdown-item minor-version' href="/5.24.3/">5.24.3</a>
                        
                        <a class='dropdown-item minor-version' href="/5.24.2/">5.24.2</a>
                        
                        <a class='dropdown-item minor-version' href="/5.24.1/">5.24.1</a>
                        
                        <a class='dropdown-item minor-version' href="/5.24.0/">5.24.0</a>
                        
                        
                        <div class="dropdown-divider"></div>
                        
                    
                        <p class='dropdown-item major-version'>
                            5.22
                        </p>
                        
                        <a class='dropdown-item minor-version' href="/5.22.4/">5.22.4</a>
                        
                        <a class='dropdown-item minor-version' href="/5.22.3/">5.22.3</a>
                        
                        <a class='dropdown-item minor-version' href="/5.22.2/">5.22.2</a>
                        
                        <a class='dropdown-item minor-version' href="/5.22.1/">5.22.1</a>
                        
                        <a class='dropdown-item minor-version' href="/5.22.0/">5.22.0</a>
                        
                        
                        <div class="dropdown-divider"></div>
                        
                    
                        <p class='dropdown-item major-version'>
                            5.20
                        </p>
                        
                        <a class='dropdown-item minor-version' href="/5.20.3/">5.20.3</a>
                        
                        <a class='dropdown-item minor-version' href="/5.20.2/">5.20.2</a>
                        
                        <a class='dropdown-item minor-version' href="/5.20.1/">5.20.1</a>
                        
                        <a class='dropdown-item minor-version' href="/5.20.0/">5.20.0</a>
                        
                        
                        <div class="dropdown-divider"></div>
                        
                    
                        <p class='dropdown-item major-version'>
                            5.18
                        </p>
                        
                        <a class='dropdown-item minor-version' href="/5.18.4/">5.18.4</a>
                        
                        <a class='dropdown-item minor-version' href="/5.18.3/">5.18.3</a>
                        
                        <a class='dropdown-item minor-version' href="/5.18.2/">5.18.2</a>
                        
                        <a class='dropdown-item minor-version' href="/5.18.1/">5.18.1</a>
                        
                        <a class='dropdown-item minor-version' href="/5.18.0/">5.18.0</a>
                        
                        
                        <div class="dropdown-divider"></div>
                        
                    
                        <p class='dropdown-item major-version'>
                            5.16
                        </p>
                        
                        <a class='dropdown-item minor-version' href="/5.16.3/">5.16.3</a>
                        
                        <a class='dropdown-item minor-version' href="/5.16.2/">5.16.2</a>
                        
                        <a class='dropdown-item minor-version' href="/5.16.1/">5.16.1</a>
                        
                        <a class='dropdown-item minor-version' href="/5.16.0/">5.16.0</a>
                        
                        
                        <div class="dropdown-divider"></div>
                        
                    
                        <p class='dropdown-item major-version'>
                            5.14
                        </p>
                        
                        <a class='dropdown-item minor-version' href="/5.14.4/">5.14.4</a>
                        
                        <a class='dropdown-item minor-version' href="/5.14.3/">5.14.3</a>
                        
                        <a class='dropdown-item minor-version' href="/5.14.2/">5.14.2</a>
                        
                        <a class='dropdown-item minor-version' href="/5.14.1/">5.14.1</a>
                        
                        <a class='dropdown-item minor-version' href="/5.14.0/">5.14.0</a>
                        
                        
                        <div class="dropdown-divider"></div>
                        
                    
                        <p class='dropdown-item major-version'>
                            5.12
                        </p>
                        
                        <a class='dropdown-item minor-version' href="/5.12.5/">5.12.5</a>
                        
                        <a class='dropdown-item minor-version' href="/5.12.4/">5.12.4</a>
                        
                        <a class='dropdown-item minor-version' href="/5.12.3/">5.12.3</a>
                        
                        <a class='dropdown-item minor-version' href="/5.12.2/">5.12.2</a>
                        
                        <a class='dropdown-item minor-version' href="/5.12.1/">5.12.1</a>
                        
                        <a class='dropdown-item minor-version' href="/5.12.0/">5.12.0</a>
                        
                        
                        <div class="dropdown-divider"></div>
                        
                    
                        <p class='dropdown-item major-version'>
                            5.10
                        </p>
                        
                        <a class='dropdown-item minor-version' href="/5.10.1/">5.10.1</a>
                        
                        <a class='dropdown-item minor-version' href="/5.10.0/">5.10.0</a>
                        
                        
                        <div class="dropdown-divider"></div>
                        
                    
                        <p class='dropdown-item major-version'>
                            5.8
                        </p>
                        
                        <a class='dropdown-item minor-version' href="/5.8.9/">5.8.9</a>
                        
                        <a class='dropdown-item minor-version' href="/5.8.8/">5.8.8</a>
                        
                        <a class='dropdown-item minor-version' href="/5.8.7/">5.8.7</a>
                        
                        <a class='dropdown-item minor-version' href="/5.8.6/">5.8.6</a>
                        
                        <a class='dropdown-item minor-version' href="/5.8.5/">5.8.5</a>
                        
                        <a class='dropdown-item minor-version' href="/5.8.4/">5.8.4</a>
                        
                        <a class='dropdown-item minor-version' href="/5.8.3/">5.8.3</a>
                        
                        <a class='dropdown-item minor-version' href="/5.8.2/">5.8.2</a>
                        
                        <a class='dropdown-item minor-version' href="/5.8.1/">5.8.1</a>
                        
                        <a class='dropdown-item minor-version' href="/5.8.0/">5.8.0</a>
                        
                        
                        <div class="dropdown-divider"></div>
                        
                    
                        <p class='dropdown-item major-version'>
                            5.6
                        </p>
                        
                        <a class='dropdown-item minor-version' href="/5.6.2/">5.6.2</a>
                        
                        <a class='dropdown-item minor-version' href="/5.6.1/">5.6.1</a>
                        
                        <a class='dropdown-item minor-version' href="/5.6.0/">5.6.0</a>
                        
                        
                    
                </div>
            </li>
            <li class="nav-item dropdown">
                <a id="navbarDropdown1" href="#" class="dropdown-toggle nav-link"
                    data-toggle="dropdown" role="button" aria-haspopup="true"
                    aria-expanded="false">Manuals</a>
                <div class="dropdown-menu" aria-labelledby="navbarDropdown1">
                    <a class="dropdown-item"
                        href="/5.16.1/index-overview.html">Overview</a>
                    <a class="dropdown-item"
                        href="/5.16.1/index-tutorials.html">Tutorials</a>
                    <a class="dropdown-item"
                        href="/5.16.1/index-faq.html">FAQs</a>
                    <a class="dropdown-item"
                        href="/5.16.1/index-history.html">Changes</a>
                    <a class="dropdown-item"
                        href="/5.16.1/index-licence.html">License</a>
                    <a class="dropdown-item"
                        href="/5.16.1/index-language.html">Language</a>
                    <a class="dropdown-item"
                        href="/5.16.1/index-functions.html">Functions</a>
                    <a class="dropdown-item"
                        href="/5.16.1/perlop.html">Operators</a>
                    <a class="dropdown-item"
                        href="/5.16.1/perlvar.html">Variables</a>
                    <a class="dropdown-item"
                        href="/5.16.1/index-pragmas.html">Pragmas</a>
                    <a class="dropdown-item"
                        href="/5.16.1/index-utilities.html">Utilities</a>
                    <a class="dropdown-item"
                        href="/5.16.1/index-internals.html">Internals</a>
                    <a class="dropdown-item"
                        href="/5.16.1/index-platforms.html">Platforms</a>
                </div>
            </li>
            <li class="nav-item dropdown">
                <a id="navbarDropdown3" href="#" class="nav-link dropdown-toggle "
                    data-toggle="dropdown" role="button" aria-haspopup="true"
                    aria-expanded="false">Modules</a>
                <div aria-labelledby="navbarDropdown3"
                    class="dropdown-menu letters-wrap">
                    <!--<a class="dropdown-item"
                        href="/5.16.1/index-modules.html">A-Z</a>
                    <a class="dropdown-item"
                        href="/5.16.1/index-modules-by-cat.html">By
                        Category</a>-->
                    <div class="dropdown-divider"></div>
                    <div class="letter-container">
                        <a class="dropdown-item letters"
                            href="/5.16.1/index-modules-A.html">A</a>
                        <a class="dropdown-item letters"
                            href="/5.16.1/index-modules-B.html">B</a>
                        <a class="dropdown-item letters"
                            href="/5.16.1/index-modules-C.html">C</a>
                        <a class="dropdown-item letters"
                            href="/5.16.1/index-modules-D.html">D</a>
                        <a class="dropdown-item letters"
                            href="/5.16.1/index-modules-E.html">E</a>
                        <a class="dropdown-item letters"
                            href="/5.16.1/index-modules-F.html">F</a>
                        <a class="dropdown-item letters"
                            href="/5.16.1/index-modules-G.html">G</a>
                        <a class="dropdown-item letters"
                            href="/5.16.1/index-modules-H.html">H</a>
                        <a class="dropdown-item letters"
                            href="/5.16.1/index-modules-I.html">I</a>
                        <a class="dropdown-item letters"
                            href="/5.16.1/index-modules-J.html">J</a>
                        <a class="dropdown-item letters"
                            href="/5.16.1/index-modules-K.html">K</a>
                        <a class="dropdown-item letters"
                            href="/5.16.1/index-modules-L.html">L</a>
                        <a class="dropdown-item letters"
                            href="/5.16.1/index-modules-M.html">M</a>
                        <a class="dropdown-item letters"
                            href="/5.16.1/index-modules-N.html">N</a>
                        <a class="dropdown-item letters"
                            href="/5.16.1/index-modules-O.html">O</a>
                        <a class="dropdown-item letters"
                            href="/5.16.1/index-modules-P.html">P</a>
                        <a class="dropdown-item letters"
                            href="/5.16.1/index-modules-Q.html">Q</a>
                        <a class="dropdown-item letters"
                            href="/5.16.1/index-modules-R.html">R</a>
                        <a class="dropdown-item letters"
                            href="/5.16.1/index-modules-S.html">S</a>
                        <a class="dropdown-item letters"
                            href="/5.16.1/index-modules-T.html">T</a>
                        <a class="dropdown-item letters"
                            href="/5.16.1/index-modules-U.html">U</a>
                        <a class="dropdown-item letters"
                            href="/5.16.1/index-modules-V.html">V</a>
                        <a class="dropdown-item letters"
                            href="/5.16.1/index-modules-W.html">W</a>
                        <a class="dropdown-item letters"
                            href="/5.16.1/index-modules-X.html">X</a>
                        <a class="dropdown-item letters"
                            href="/5.16.1/index-modules-Y.html">Y</a>
                        <a class="dropdown-item letters"
                            href="/5.16.1/index-modules-Z.html">Z</a>
                    </div>
                </div>
            </li>
            <li class="nav-item dropdown">
                <a id="navbarDropdown4" href="#" class="nav-link dropdown-toggle "
                    data-toggle="dropdown" role="button" aria-haspopup="true"
                    aria-expanded="false">Functions</a>
                <div aria-labelledby="navbarDropdown4"
                    class="dropdown-menu letters-wrap">
                    <a class="dropdown-item"
                        href="/5.16.1/index-functions.html">A-Z</a>
                    <a class="dropdown-item"
                        href="/5.16.1/index-functions-by-cat.html">By
                        Category</a>
                    <div class="dropdown-divider"></div>
                    <div class="letter-container">
                        <a class="dropdown-item letters"
                            href="/5.16.1/index-functions.html#A">A</a>
                        <a class="dropdown-item letters"
                            href="/5.16.1/index-functions.html#B">B</a>
                        <a class="dropdown-item letters"
                            href="/5.16.1/index-functions.html#C">C</a>
                        <a class="dropdown-item letters"
                            href="/5.16.1/index-functions.html#D">D</a>
                        <a class="dropdown-item letters"
                            href="/5.16.1/index-functions.html#E">E</a>
                        <a class="dropdown-item letters"
                            href="/5.16.1/index-functions.html#F">F</a>
                        <a class="dropdown-item letters"
                            href="/5.16.1/index-functions.html#G">G</a>
                        <a class="dropdown-item letters"
                            href="/5.16.1/index-functions.html#H">H</a>
                        <a class="dropdown-item letters"
                            href="/5.16.1/index-functions.html#I">I</a>
                        <a class="dropdown-item letters"
                            href="/5.16.1/index-functions.html#J">J</a>
                        <a class="dropdown-item letters"
                            href="/5.16.1/index-functions.html#K">K</a>
                        <a class="dropdown-item letters"
                            href="/5.16.1/index-functions.html#L">L</a>
                        <a class="dropdown-item letters"
                            href="/5.16.1/index-functions.html#M">M</a>
                        <a class="dropdown-item letters"
                            href="/5.16.1/index-functions.html#N">N</a>
                        <a class="dropdown-item letters"
                            href="/5.16.1/index-functions.html#O">O</a>
                        <a class="dropdown-item letters"
                            href="/5.16.1/index-functions.html#P">P</a>
                        <a class="dropdown-item letters"
                            href="/5.16.1/index-functions.html#Q">Q</a>
                        <a class="dropdown-item letters"
                            href="/5.16.1/index-functions.html#R">R</a>
                        <a class="dropdown-item letters"
                            href="/5.16.1/index-functions.html#S">S</a>
                        <a class="dropdown-item letters"
                            href="/5.16.1/index-functions.html#T">T</a>
                        <a class="dropdown-item letters"
                            href="/5.16.1/index-functions.html#U">U</a>
                        <a class="dropdown-item letters"
                            href="/5.16.1/index-functions.html#V">V</a>
                        <a class="dropdown-item letters"
                            href="/5.16.1/index-functions.html#W">W</a>
                        <a class="dropdown-item letters"
                            href="/5.16.1/index-functions.html#X">X</a>
                        <a class="dropdown-item letters"
                            href="/5.16.1/index-functions.html#Y">Y</a>
                        <a class="dropdown-item letters"
                            href="/5.16.1/index-functions.html#Z">Z</a>
                    </div>
                </div>
            </li>
        </ul>
    </div>
    <!--/.nav-collapse -->
</nav>


          <main class="row main-content pb-5 pt-5" id='content'>
            <div class="col-sm-10 offset-sm-1 col-xl-8 offset-xl-2">
              <div class="row">
                <div class="col-sm-12">
                  <div id="breadcrumbs">
                      
    <a href="index.html">Home</a>&nbsp; &gt;
    
      
        <a href="index-history.html">History / Changes</a> &gt;
      
    
    perl5004delta
  

                  </div>
                </div>
              </div>
              <div class="row">
                <article class="col-sm-12 content">
                  <div class="documentation-wrapper">
                    <div id="perl_version">
                      <h7 class='page-title'> Perl 5 version 16.1
                        documentation</h7>
                    </div>
                    <h1>perl5004delta</h1>


  <!--    -->
<ul><li><a href="#NAME">NAME</a></li><li><a href="#DESCRIPTION">DESCRIPTION</a></li><li><a href="#Supported-Environments">Supported Environments</a></li><li><a href="#Core-Changes">Core Changes</a></li><ul><li><a href="#List-assignment-to-%25ENV-works">List assignment to %ENV works</a></li><li><a href="#Change-to-%22Can't-locate-Foo.pm-in-%40INC%22-error">Change to "Can't locate Foo.pm in @INC" error</a></li><li><a href="#Compilation-option%3a-Binary-compatibility-with-5.003">Compilation option: Binary compatibility with 5.003</a></li><li><a href="#%24PERL5OPT-environment-variable">$PERL5OPT environment variable</a></li><li><a href="#Limitations-on-*-M*%2c-*-m*%2c-and-*-T*-options">Limitations on *-M*, *-m*, and *-T* options</a></li><li><a href="#More-precise-warnings">More precise warnings</a></li><li><a href="#Deprecated%3a-Inherited-AUTOLOAD-for-non-methods">Deprecated: Inherited AUTOLOAD for non-methods</a></li><li><a href="#Previously-deprecated-%25OVERLOAD-is-no-longer-usable">Previously deprecated %OVERLOAD is no longer usable</a></li><li><a href="#Subroutine-arguments-created-only-when-they're-modified">Subroutine arguments created only when they're modified</a></li><li><a href="#Group-vector-changeable-with-%24)">Group vector changeable with $)</a></li><li><a href="#Fixed-parsing-of-%24%24%3cdigit%3e%2c-%26%24%3cdigit%3e%2c-etc.">Fixed parsing of $$<digit>, &$<digit>, etc.</a></li><li><a href="#Fixed-localization-of-%24%3cdigit%3e%2c-%24%26%2c-etc.">Fixed localization of $<digit>, $&, etc.</a></li><li><a href="#No-resetting-of-%24.-on-implicit-close">No resetting of $. on implicit close</a></li><li><a href="#wantarray-may-return-undef">wantarray may return undef</a></li><li><a href="#eval-EXPR-determines-value-of-EXPR-in-scalar-context">eval EXPR determines value of EXPR in scalar context</a></li><li><a href="#Changes-to-tainting-checks">Changes to tainting checks</a></li><li><a href="#New-Opcode-module-and-revised-Safe-module">New Opcode module and revised Safe module</a></li><li><a href="#Embedding-improvements">Embedding improvements</a></li><li><a href="#Internal-change%3a-FileHandle-class-based-on-IO%3a%3a*-classes">Internal change: FileHandle class based on IO::* classes</a></li><li><a href="#Internal-change%3a-PerlIO-abstraction-interface">Internal change: PerlIO abstraction interface</a></li><li><a href="#New-and-changed-syntax">New and changed syntax</a></li><li><a href="#New-and-changed-builtin-constants">New and changed builtin constants</a></li><li><a href="#New-and-changed-builtin-variables">New and changed builtin variables</a></li><li><a href="#New-and-changed-builtin-functions">New and changed builtin functions</a></li><li><a href="#New-builtin-methods">New builtin methods</a></li><li><a href="#TIEHANDLE-now-supported">TIEHANDLE now supported</a></li><li><a href="#Malloc-enhancements">Malloc enhancements</a></li><li><a href="#Miscellaneous-efficiency-enhancements">Miscellaneous efficiency enhancements</a></li></ul><li><a href="#Support-for-More-Operating-Systems">Support for More Operating Systems</a></li><ul><li><a href="#Win32">Win32</a></li><li><a href="#Plan-9">Plan 9</a></li><li><a href="#QNX">QNX</a></li><li><a href="#AmigaOS">AmigaOS</a></li></ul><li><a href="#Pragmata">Pragmata</a></li><li><a href="#Modules">Modules</a></li><ul><li><a href="#Required-Updates">Required Updates</a></li><li><a href="#Installation-directories">Installation directories</a></li><li><a href="#Module-information-summary">Module information summary</a></li><li><a href="#Fcntl">Fcntl</a></li><li><a href="#IO">IO</a></li><li><a href="#Math%3a%3aComplex">Math::Complex</a></li><li><a href="#Math%3a%3aTrig">Math::Trig</a></li><li><a href="#DB_File">DB_File</a></li><li><a href="#Net%3a%3aPing">Net::Ping</a></li><li><a href="#Object-oriented-overrides-for-builtin-operators">Object-oriented overrides for builtin operators</a></li></ul><li><a href="#Utility-Changes">Utility Changes</a></li><ul><li><a href="#pod2html">pod2html</a></li><li><a href="#xsubpp">xsubpp</a></li></ul><li><a href="#C-Language-API-Changes">C Language API Changes</a></li><li><a href="#Documentation-Changes">Documentation Changes</a></li><li><a href="#New-Diagnostics">New Diagnostics</a></li><li><a href="#BUGS">BUGS</a></li><li><a href="#SEE-ALSO">SEE ALSO</a></li><li><a href="#HISTORY">HISTORY</a></li></ul><a class='view-head1' id="NAME"></a><h2 class='h2' >NAME</h2>
<p>perl5004delta - what's new for perl5.004</p>
<a class='view-head1' id="DESCRIPTION"></a><h2 class='h2' >DESCRIPTION</h2>
<p>This document describes differences between the 5.003 release (as
documented in <i>Programming Perl</i>, second edition--the Camel Book) and
this one.</p>
<a class='view-head1' id="Supported-Environments"></a><h2 class='h2' >Supported Environments</h2>
<p>Perl5.004 builds out of the box on Unix, Plan 9, LynxOS, VMS, OS/2,
QNX, AmigaOS, and Windows NT.  Perl runs on Windows 95 as well, but it
cannot be built there, for lack of a reasonable command interpreter.</p>
<a class='view-head1' id="Core-Changes"></a><h2 class='h2' >Core Changes</h2>
<p>Most importantly, many bugs were fixed, including several security
problems.  See the <i>Changes</i> file in the distribution for details.</p>
<a class='view-head2' id="List-assignment-to-%25ENV-works"></a><h3 class='h3' >List assignment to %ENV works</h3>
<p><code class="inline"><span class="i">%ENV</span> = <span class="s">(</span><span class="s">)</span></code>
 and <code class="inline"><span class="i">%ENV</span> = <span class="i">@list</span></code>
 now work as expected (except on VMS
where it generates a fatal error).</p>
<a class='view-head2' id="Change-to-%22Can't-locate-Foo.pm-in-%40INC%22-error"></a><h3 class='h3' >Change to "Can't locate Foo.pm in @INC" error</h3>
<p>The error "Can't locate Foo.pm in @INC" now lists the contents of @INC
for easier debugging.</p>
<a class='view-head2' id="Compilation-option%3a-Binary-compatibility-with-5.003"></a><h3 class='h3' >Compilation option: Binary compatibility with 5.003</h3>
<p>There is a new Configure question that asks if you want to maintain
binary compatibility with Perl 5.003.  If you choose binary
compatibility, you do not have to recompile your extensions, but you
might have symbol conflicts if you embed Perl in another application,
just as in the 5.003 release.  By default, binary compatibility
is preserved at the expense of symbol table pollution.</p>
<a class='view-head2' id="%24PERL5OPT-environment-variable"></a><h3 class='h3' >$PERL5OPT environment variable</h3>
<p>You may now put Perl options in the $PERL5OPT environment variable.
Unless Perl is running with taint checks, it will interpret this
variable as if its contents had appeared on a "#!perl" line at the
beginning of your script, except that hyphens are optional.  PERL5OPT
may only be used to set the following switches: <strong>-[DIMUdmw]</strong>.</p>
<a class='view-head2' id="Limitations-on-*-M*%2c-*-m*%2c-and-*-T*-options"></a><h3 class='h3' >Limitations on <strong>-M</strong>, <strong>-m</strong>, and <strong>-T</strong> options</h3>
<p>The <code class="inline">-M</code>
 and <code class="inline">-<span class="q">m</span></code>
 options are no longer allowed on the <code class="inline"><span class="c">#!</span></code>
 line of
a script.  If a script needs a module, it should invoke it with the
<code class="inline"><a class="l_k" href="functions/use.html">use</a></code> pragma.</p>
<p>The <strong>-T</strong> option is also forbidden on the <code class="inline"><span class="c">#!</span></code>
 line of a script,
unless it was present on the Perl command line.  Due to the way <code class="inline"><span class="c">#!</span></code>

works, this usually means that <strong>-T</strong> must be in the first argument.
Thus:</p>
<pre class="verbatim"><ol><li>    <span class="c">#!/usr/bin/perl -T -w</span></li></ol></pre><p>will probably work for an executable script invoked as <code class="inline"><span class="w">scriptname</span></code>
,
while:</p>
<pre class="verbatim"><ol><li>    <span class="c">#!/usr/bin/perl -w -T</span></li></ol></pre><p>will probably fail under the same conditions.  (Non-Unix systems will
probably not follow this rule.)  But <code class="inline"><span class="w">perl</span> <span class="w">scriptname</span></code>
 is guaranteed
to fail, since then there is no chance of <strong>-T</strong> being found on the
command line before it is found on the <code class="inline"><span class="c">#!</span></code>
 line.</p>
<a class='view-head2' id="More-precise-warnings"></a><h3 class='h3' >More precise warnings</h3>
<p>If you removed the <strong>-w</strong> option from your Perl 5.003 scripts because it
made Perl too verbose, we recommend that you try putting it back when
you upgrade to Perl 5.004.  Each new perl version tends to remove some
undesirable warnings, while adding new warnings that may catch bugs in
your scripts.</p>
<a class='view-head2' id="Deprecated%3a-Inherited-AUTOLOAD-for-non-methods"></a><h3 class='h3' >Deprecated: Inherited <code class="inline"><a class="l_k" href="functions/AUTOLOAD.html">AUTOLOAD</a></code> for non-methods</h3>
<p>Before Perl 5.004, <code class="inline"><a class="l_k" href="functions/AUTOLOAD.html">AUTOLOAD</a></code> functions were looked up as methods
(using the <code class="inline"><span class="i">@ISA</span></code>
 hierarchy), even when the function to be autoloaded
was called as a plain function (e.g. <code class="inline"><span class="i">Foo::bar</span><span class="s">(</span><span class="s">)</span></code>
), not a method
(e.g. <code class="inline"><span class="w">Foo</span><span class="w">-&gt;bar</span><span class="s">(</span><span class="s">)</span></code>
 or <code class="inline"><span class="i">$obj</span><span class="i">-&gt;bar</span><span class="s">(</span><span class="s">)</span></code>
).</p>
<p>Perl 5.005 will use method lookup only for methods' <code class="inline"><a class="l_k" href="functions/AUTOLOAD.html">AUTOLOAD</a></code>s.
However, there is a significant base of existing code that may be using
the old behavior.  So, as an interim step, Perl 5.004 issues an optional
warning when a non-method uses an inherited <code class="inline"><a class="l_k" href="functions/AUTOLOAD.html">AUTOLOAD</a></code>.</p>
<p>The simple rule is:  Inheritance will not work when autoloading
non-methods.  The simple fix for old code is:  In any module that used to
depend on inheriting <code class="inline"><a class="l_k" href="functions/AUTOLOAD.html">AUTOLOAD</a></code> for non-methods from a base class named
<code class="inline"><span class="w">BaseClass</span></code>
, execute <code class="inline"><span class="i">*AUTOLOAD</span> = \<span class="i">&amp;BaseClass::AUTOLOAD</span></code>
 during startup.</p>
<a class='view-head2' id="Previously-deprecated-%25OVERLOAD-is-no-longer-usable"></a><h3 class='h3' >Previously deprecated %OVERLOAD is no longer usable</h3>
<p>Using %OVERLOAD to define overloading was deprecated in 5.003.
Overloading is now defined using the overload pragma. %OVERLOAD is
still used internally but should not be used by Perl scripts. See
<a href="overload.html">overload</a> for more details.</p>
<a class='view-head2' id="Subroutine-arguments-created-only-when-they're-modified"></a><h3 class='h3' >Subroutine arguments created only when they're modified</h3>
<p>In Perl 5.004, nonexistent array and hash elements used as subroutine
parameters are brought into existence only if they are actually
assigned to (via <code class="inline"><span class="i">@_</span></code>
).</p>
<p>Earlier versions of Perl vary in their handling of such arguments.
Perl versions 5.002 and 5.003 always brought them into existence.
Perl versions 5.000 and 5.001 brought them into existence only if
they were not the first argument (which was almost certainly a bug).
Earlier versions of Perl never brought them into existence.</p>
<p>For example, given this code:</p>
<pre class="verbatim"><ol><li>     <a class="l_k" href="functions/undef.html">undef</a> <span class="i">@a</span><span class="sc">;</span> <a class="l_k" href="functions/undef.html">undef</a> <span class="i">%a</span><span class="sc">;</span></li><li><a name="show"></a>     sub <span class="m">show</span> <span class="s">{</span> <a class="l_k" href="functions/print.html">print</a> <span class="i">$_</span>[<span class="n">0</span>] <span class="s">}</span><span class="sc">;</span></li><li><a name="change"></a>     sub <span class="m">change</span> <span class="s">{</span> <span class="i">$_</span>[<span class="n">0</span>]++ <span class="s">}</span><span class="sc">;</span></li><li>     <span class="i">show</span><span class="s">(</span><span class="i">$a</span>[<span class="n">2</span>]<span class="s">)</span><span class="sc">;</span></li><li>     <span class="i">change</span><span class="s">(</span><span class="i">$a</span>{<span class="w">b</span>}<span class="s">)</span><span class="sc">;</span></li></ol></pre><p>After this code executes in Perl 5.004, $a{b} exists but $a[2] does
not.  In Perl 5.002 and 5.003, both $a{b} and $a[2] would have existed
(but $a[2]'s value would have been undefined).</p>
<a class='view-head2' id="Group-vector-changeable-with-%24)"></a><h3 class='h3' >Group vector changeable with <code class="inline"><span class="i">$)</span></code>
</h3>
<p>The <code class="inline"><span class="i">$)</span></code>
 special variable has always (well, in Perl 5, at least)
reflected not only the current effective group, but also the group list
as returned by the <code class="inline"><span class="i">getgroups</span><span class="s">(</span><span class="s">)</span></code>
 C function (if there is one).
However, until this release, there has not been a way to call the
<code class="inline"><span class="i">setgroups</span><span class="s">(</span><span class="s">)</span></code>
 C function from Perl.</p>
<p>In Perl 5.004, assigning to <code class="inline"><span class="i">$)</span></code>
 is exactly symmetrical with examining
it: The first number in its string value is used as the effective gid;
if there are any numbers after the first one, they are passed to the
<code class="inline"><span class="i">setgroups</span><span class="s">(</span><span class="s">)</span></code>
 C function (if there is one).</p>
<a class='view-head2' id="Fixed-parsing-of-%24%24%3cdigit%3e%2c-%26%24%3cdigit%3e%2c-etc."></a><h3 class='h3' >Fixed parsing of $$&lt;digit&gt;, &amp;$&lt;digit&gt;, etc.</h3>
<p>Perl versions before 5.004 misinterpreted any type marker followed by
"$" and a digit.  For example, "$$0" was incorrectly taken to mean
"${$}0" instead of "${$0}".  This bug is (mostly) fixed in Perl 5.004.</p>
<p>However, the developers of Perl 5.004 could not fix this bug completely,
because at least two widely-used modules depend on the old meaning of
"$$0" in a string.  So Perl 5.004 still interprets "$$&lt;digit&gt;" in the
old (broken) way inside strings; but it generates this message as a
warning.  And in Perl 5.005, this special treatment will cease.</p>
<a class='view-head2' id="Fixed-localization-of-%24%3cdigit%3e%2c-%24%26%2c-etc."></a><h3 class='h3' >Fixed localization of $&lt;digit&gt;, $&amp;, etc.</h3>
<p>Perl versions before 5.004 did not always properly localize the
regex-related special variables.  Perl 5.004 does localize them, as
the documentation has always said it should.  This may result in $1,
$2, etc. no longer being set where existing programs use them.</p>
<a class='view-head2' id="No-resetting-of-%24.-on-implicit-close"></a><h3 class='h3' >No resetting of $. on implicit close</h3>
<p>The documentation for Perl 5.0 has always stated that <code class="inline"><span class="i">$.</span></code>
 is <i>not</i>
reset when an already-open file handle is reopened with no intervening
call to <code class="inline"><a class="l_k" href="functions/close.html">close</a></code>.  Due to a bug, perl versions 5.000 through 5.003
<i>did</i> reset <code class="inline"><span class="i">$.</span></code>
 under that circumstance; Perl 5.004 does not.</p>
<a class='view-head2' id="wantarray-may-return-undef"></a><h3 class='h3' ><code class="inline"><a class="l_k" href="functions/wantarray.html">wantarray</a></code> may return undef</h3>
<p>The <code class="inline"><a class="l_k" href="functions/wantarray.html">wantarray</a></code> operator returns true if a subroutine is expected to
return a list, and false otherwise.  In Perl 5.004, <code class="inline"><a class="l_k" href="functions/wantarray.html">wantarray</a></code> can
also return the undefined value if a subroutine's return value will
not be used at all, which allows subroutines to avoid a time-consuming
calculation of a return value if it isn't going to be used.</p>
<a class='view-head2' id="eval-EXPR-determines-value-of-EXPR-in-scalar-context"></a><h3 class='h3' ><code class="inline"><a class="l_k" href="functions/eval.html">eval</a> <span class="w">EXPR</span></code>
 determines value of EXPR in scalar context</h3>
<p>Perl (version 5) used to determine the value of EXPR inconsistently,
sometimes incorrectly using the surrounding context for the determination.
Now, the value of EXPR (before being parsed by eval) is always determined in
a scalar context.  Once parsed, it is executed as before, by providing
the context that the scope surrounding the eval provided.  This change
makes the behavior Perl4 compatible, besides fixing bugs resulting from
the inconsistent behavior.  This program:</p>
<pre class="verbatim"><ol><li>    <span class="i">@a</span> = <span class="q">qw(time now is time)</span><span class="sc">;</span></li><li>    <a class="l_k" href="functions/print.html">print</a> <a class="l_k" href="functions/eval.html">eval</a> <span class="i">@a</span><span class="sc">;</span></li><li>    <a class="l_k" href="functions/print.html">print</a> <span class="q">&#39;|&#39;</span><span class="cm">,</span> <a class="l_k" href="functions/scalar.html">scalar</a> <a class="l_k" href="functions/eval.html">eval</a> <span class="i">@a</span><span class="sc">;</span></li></ol></pre><p>used to print something like "timenowis881399109|4", but now (and in perl4)
prints "4|4".</p>
<a class='view-head2' id="Changes-to-tainting-checks"></a><h3 class='h3' >Changes to tainting checks</h3>
<p>A bug in previous versions may have failed to detect some insecure
conditions when taint checks are turned on.  (Taint checks are used
in setuid or setgid scripts, or when explicitly turned on with the
<code class="inline">-T</code>
 invocation option.)  Although it's unlikely, this may cause a
previously-working script to now fail, which should be construed
as a blessing since that indicates a potentially-serious security
hole was just plugged.</p>
<p>The new restrictions when tainting include:</p>
<ul>
<li><a class='view-title' id="No-glob()-or-%3c*%3e"></a><strong>No glob() or &lt;*&gt;</strong>
<p>These operators may spawn the C shell (csh), which cannot be made
safe.  This restriction will be lifted in a future version of Perl
when globbing is implemented without the use of an external program.</p>
</li>
<li><a class='view-title' id="No-spawning-if-tainted-%24CDPATH%2c-%24ENV%2c-%24BASH_ENV"></a><strong>No spawning if tainted $CDPATH, $ENV, $BASH_ENV</strong>
<p>These environment variables may alter the behavior of spawned programs
(especially shells) in ways that subvert security.  So now they are
treated as dangerous, in the manner of $IFS and $PATH.</p>
</li>
<li><a class='view-title' id="No-spawning-if-tainted-%24TERM-doesn't-look-like-a-terminal-name"></a><strong>No spawning if tainted $TERM doesn't look like a terminal name</strong>
<p>Some termcap libraries do unsafe things with $TERM.  However, it would be
unnecessarily harsh to treat all $TERM values as unsafe, since only shell
metacharacters can cause trouble in $TERM.  So a tainted $TERM is
considered to be safe if it contains only alphanumerics, underscores,
dashes, and colons, and unsafe if it contains other characters (including
whitespace).</p>
</li>
</ul>
<a class='view-head2' id="New-Opcode-module-and-revised-Safe-module"></a><h3 class='h3' >New Opcode module and revised Safe module</h3>
<p>A new Opcode module supports the creation, manipulation and
application of opcode masks.  The revised Safe module has a new API
and is implemented using the new Opcode module.  Please read the new
Opcode and Safe documentation.</p>
<a class='view-head2' id="Embedding-improvements"></a><h3 class='h3' >Embedding improvements</h3>
<p>In older versions of Perl it was not possible to create more than one
Perl interpreter instance inside a single process without leaking like a
sieve and/or crashing.  The bugs that caused this behavior have all been
fixed.  However, you still must take care when embedding Perl in a C
program.  See the updated perlembed manpage for tips on how to manage
your interpreters.</p>
<a class='view-head2' id="Internal-change%3a-FileHandle-class-based-on-IO%3a%3a*-classes"></a><h3 class='h3' >Internal change: FileHandle class based on IO::* classes</h3>
<p>File handles are now stored internally as type IO::Handle.  The
FileHandle module is still supported for backwards compatibility, but
it is now merely a front end to the IO::* modules, specifically
IO::Handle, IO::Seekable, and IO::File.  We suggest, but do not
require, that you use the IO::* modules in new code.</p>
<p>In harmony with this change, <code class="inline"><span class="i">*GLOB</span>{<span class="w">FILEHANDLE</span>}</code>
 is now just a
backward-compatible synonym for <code class="inline"><span class="i">*GLOB</span>{<span class="w">IO</span>}</code>
.</p>
<a class='view-head2' id="Internal-change%3a-PerlIO-abstraction-interface"></a><h3 class='h3' >Internal change: PerlIO abstraction interface</h3>
<p>It is now possible to build Perl with AT&amp;T's sfio IO package
instead of stdio.  See <a href="perlapio.html">perlapio</a> for more details, and
the <i>INSTALL</i> file for how to use it.</p>
<a class='view-head2' id="New-and-changed-syntax"></a><h3 class='h3' >New and changed syntax</h3>
<ul>
<li><a class='view-title' id="%24coderef-%3e(PARAMS)"></a><strong>$coderef-&gt;(PARAMS)</strong>
<p>A subroutine reference may now be suffixed with an arrow and a
(possibly empty) parameter list.  This syntax denotes a call of the
referenced subroutine, with the given parameters (if any).</p>
<p>This new syntax follows the pattern of <code class="inline"><span class="i">$hashref</span>-&gt;{<span class="w">FOO</span>}</code>
 and
<code class="inline"><span class="i">$aryref</span>-&gt;[<span class="i">$foo</span>]</code>
: You may now write <code class="inline"><span class="i">&amp;$subref</span><span class="s">(</span><span class="i">$foo</span><span class="s">)</span></code>
 as
<code class="inline"><span class="i">$subref</span>-&gt;<span class="s">(</span><span class="i">$foo</span><span class="s">)</span></code>
.  All these arrow terms may be chained;
thus, <code class="inline"><span class="i">&amp;</span>{<span class="i">$table</span>-&gt;{<span class="w">FOO</span>}}<span class="s">(</span><span class="i">$bar</span><span class="s">)</span></code>
 may now be written
<code class="inline"><span class="i">$table</span>-&gt;{<span class="w">FOO</span>}-&gt;<span class="s">(</span><span class="i">$bar</span><span class="s">)</span></code>
.</p>
</li>
</ul>
<a class='view-head2' id="New-and-changed-builtin-constants"></a><h3 class='h3' >New and changed builtin constants</h3>
<ul>
<li><a class='view-title' id="__PACKAGE__"></a><strong>__PACKAGE__</strong>
<p>The current package name at compile time, or the undefined value if
there is no current package (due to a <code class="inline"><a class="l_k" href="functions/package.html">package;</a></code> directive).  Like
<code class="inline"><a class="l_k" href="functions/__FILE__.html">__FILE__</a></code> and <code class="inline"><a class="l_k" href="functions/__LINE__.html">__LINE__</a></code>, <code class="inline"><a class="l_k" href="functions/__PACKAGE__.html">__PACKAGE__</a></code> does <i>not</i> interpolate
into strings.</p>
</li>
</ul>
<a class='view-head2' id="New-and-changed-builtin-variables"></a><h3 class='h3' >New and changed builtin variables</h3>
<ul>
<li><a class='view-title' id="%24%5eE"></a><strong>$^E</strong>
<p>Extended error message on some platforms.  (Also known as
$EXTENDED_OS_ERROR if you <code class="inline"><a class="l_k" href="functions/use.html">use</a> <span class="w">English</span></code>
).</p>
</li>
<li><a class='view-title' id="%24%5eH"></a><strong>$^H</strong>
<p>The current set of syntax checks enabled by <code class="inline"><a class="l_k" href="functions/use.html">use</a> <span class="w">strict</span></code>
.  See the
documentation of <code class="inline"><span class="w">strict</span></code>
 for more details.  Not actually new, but
newly documented.
Because it is intended for internal use by Perl core components,
there is no <code class="inline"><a class="l_k" href="functions/use.html">use</a> <span class="w">English</span></code>
 long name for this variable.</p>
</li>
<li><a class='view-title' id="%24%5eM"></a><strong>$^M</strong>
<p>By default, running out of memory it is not trappable.  However, if
compiled for this, Perl may use the contents of <code class="inline"><span class="i">$^M</span></code>
 as an emergency
pool after die()ing with this message.  Suppose that your Perl were
compiled with -DPERL_EMERGENCY_SBRK and used Perl's malloc.  Then</p>
<pre class="verbatim"><ol><li>    <span class="i">$^M</span> = <span class="q">&#39;a&#39;</span> x <span class="s">(</span><span class="n">1</span>&lt;&lt;<span class="n">16</span><span class="s">)</span><span class="sc">;</span></li></ol></pre><p>would allocate a 64K buffer for use when in emergency.
See the <i>INSTALL</i> file for information on how to enable this option.
As a disincentive to casual use of this advanced feature,
there is no <code class="inline"><a class="l_k" href="functions/use.html">use</a> <span class="w">English</span></code>
 long name for this variable.</p>
</li>
</ul>
<a class='view-head2' id="New-and-changed-builtin-functions"></a><h3 class='h3' >New and changed builtin functions</h3>
<ul>
<li><a class='view-title' id="delete-on-slices"></a><strong>delete on slices</strong>
<p>This now works.  (e.g. <code class="inline"><a class="l_k" href="functions/delete.html">delete</a> <span class="i">@ENV</span>{<span class="q">&#39;PATH&#39;</span><span class="cm">,</span> <span class="q">&#39;MANPATH&#39;</span>}</code>
)</p>
</li>
<li><a class='view-title' id="flock"></a><strong>flock</strong>
<p>is now supported on more platforms, prefers fcntl to lockf when
emulating, and always flushes before (un)locking.</p>
</li>
<li><a class='view-title' id="printf-and-sprintf"></a><strong>printf and sprintf</strong>
<p>Perl now implements these functions itself; it doesn't use the C
library function sprintf() any more, except for floating-point
numbers, and even then only known flags are allowed.  As a result, it
is now possible to know which conversions and flags will work, and
what they will do.</p>
<p>The new conversions in Perl's sprintf() are:</p>
<pre class="verbatim"><ol><li>   <span class="i">%i</span>	<span class="w">a</span> <span class="w">synonym</span> <a class="l_k" href="functions/for.html">for</a> <span class="i">%d</span></li><li>   %<span class="w">p</span>	<span class="w">a</span> <span class="w">pointer</span> <span class="s">(</span><span class="w">the</span> <span class="w">address</span> <span class="w">of</span> <span class="w">the</span> <span class="w">Perl</span> <span class="w">value</span><span class="cm">,</span> <span class="w">in</span> <span class="w">hexadecimal</span><span class="s">)</span></li><li>   %<span class="w">n</span>	<span class="w">special</span><span class="co">:</span> <span class="i">*stores</span>* <span class="w">the</span> <span class="w">number</span> <span class="w">of</span> <span class="w">characters</span> <span class="w">output</span> <span class="w">so</span> <span class="w">far</span></li><li>        <span class="w">into</span> <span class="w">the</span> <a class="l_k" href="functions/next.html">next</a> <span class="j">variable</span> <span class="w">in</span> <span class="w">the</span> <span class="w">parameter</span> <span class="w">list</span></li></ol></pre><p>The new flags that go between the <code class="inline"><span class="i">%</span></code>
 and the conversion are:</p>
<pre class="verbatim"><ol><li>   <span class="c">#	prefix octal with &quot;0&quot;, hex with &quot;0x&quot;</span></li><li>   <span class="w">h</span>	<span class="w">interpret</span> <span class="w">integer</span> <span class="w">as</span> <span class="w">C</span> <span class="w">type</span> <span class="q">&quot;short&quot;</span> <a class="l_k" href="functions/or.html">or</a> <span class="q">&quot;unsigned short&quot;</span></li><li>   <span class="w">V</span>	<span class="w">interpret</span> <span class="w">integer</span> <span class="w">as</span> <span class="w">Perl&#39;s</span> <span class="w">standard</span> <span class="w">integer</span> <span class="w">type</span></li></ol></pre><p>Also, where a number would appear in the flags, an asterisk ("*") may
be used instead, in which case Perl uses the next item in the
parameter list as the given number (that is, as the field width or
precision).  If a field width obtained through "*" is negative, it has
the same effect as the '-' flag: left-justification.</p>
<p>See <a class='function-name' href="functions/sprintf.html">sprintf</a> for a complete list of conversion and flags.</p>
</li>
<li><a class='view-title' id="keys-as-an-lvalue"></a><strong>keys as an lvalue</strong>
<p>As an lvalue, <code class="inline"><a class="l_k" href="functions/keys.html">keys</a></code> allows you to increase the number of hash buckets
allocated for the given hash.  This can gain you a measure of efficiency if
you know the hash is going to get big.  (This is similar to pre-extending
an array by assigning a larger number to $#array.)  If you say</p>
<pre class="verbatim"><ol><li>    <a class="l_k" href="functions/keys.html">keys</a> <span class="i">%hash</span> = <span class="n">200</span><span class="sc">;</span></li></ol></pre><p>then <code class="inline"><span class="i">%hash</span></code>
 will have at least 200 buckets allocated for it.  These
buckets will be retained even if you do <code class="inline"><span class="i">%hash</span> = <span class="s">(</span><span class="s">)</span></code>
; use <code class="inline"><a class="l_k" href="functions/undef.html">undef</a>
<span class="i">%hash</span></code>
 if you want to free the storage while <code class="inline"><span class="i">%hash</span></code>
 is still in scope.
You can't shrink the number of buckets allocated for the hash using
<code class="inline"><a class="l_k" href="functions/keys.html">keys</a></code> in this way (but you needn't worry about doing this by accident,
as trying has no effect).</p>
</li>
<li><a class='view-title' id="my()-in-Control-Structures"></a><strong>my() in Control Structures</strong>
<p>You can now use my() (with or without the parentheses) in the control
expressions of control structures such as:</p>
<pre class="verbatim"><ol><li>    <a class="l_k" href="functions/while.html">while</a> <span class="s">(</span><a class="l_k" href="functions/defined.html">defined</a><span class="s">(</span><a class="l_k" href="functions/my.html">my</a> <span class="i">$line</span> = &lt;&gt;<span class="s">)</span><span class="s">)</span> <span class="s">{</span></li><li>        <span class="i">$line</span> = <a class="l_k" href="functions/lc.html">lc</a> <span class="i">$line</span><span class="sc">;</span></li><li>    <span class="s">}</span> <a class="l_k" href="functions/continue.html">continue</a> <span class="s">{</span></li><li>        <a class="l_k" href="functions/print.html">print</a> <span class="i">$line</span><span class="sc">;</span></li><li>    <span class="s">}</span></li><li></li><li>    <a class="l_k" href="functions/if.html">if</a> <span class="s">(</span><span class="s">(</span><a class="l_k" href="functions/my.html">my</a> <span class="i">$answer</span> = <span class="q">&lt;STDIN&gt;</span><span class="s">)</span> =~ <span class="q">/^y(es)?$/i</span><span class="s">)</span> <span class="s">{</span></li><li>        <span class="i">user_agrees</span><span class="s">(</span><span class="s">)</span><span class="sc">;</span></li><li>    <span class="s">}</span> <a class="l_k" href="functions/elsif.html">elsif</a> <span class="s">(</span><span class="i">$answer</span> =~ <span class="q">/^n(o)?$/i</span><span class="s">)</span> <span class="s">{</span></li><li>        <span class="i">user_disagrees</span><span class="s">(</span><span class="s">)</span><span class="sc">;</span></li><li>    <span class="s">}</span> <a class="l_k" href="functions/else.html">else</a> <span class="s">{</span></li><li>        <a class="l_k" href="functions/chomp.html">chomp</a> <span class="i">$answer</span><span class="sc">;</span></li><li>        <a class="l_k" href="functions/die.html">die</a> <span class="q">&quot;`$answer&#39; is neither `yes&#39; nor `no&#39;&quot;</span><span class="sc">;</span></li><li>    <span class="s">}</span></li></ol></pre><p>Also, you can declare a foreach loop control variable as lexical by
preceding it with the word "my".  For example, in:</p>
<pre class="verbatim"><ol><li>    <a class="l_k" href="functions/foreach.html">foreach</a> <a class="l_k" href="functions/my.html">my</a> <span class="i">$i</span> <span class="s">(</span><span class="n">1</span><span class="cm">,</span> <span class="n">2</span><span class="cm">,</span> <span class="n">3</span><span class="s">)</span> <span class="s">{</span></li><li>        <span class="i">some_function</span><span class="s">(</span><span class="s">)</span><span class="sc">;</span></li><li>    <span class="s">}</span></li></ol></pre><p>$i is a lexical variable, and the scope of $i extends to the end of
the loop, but not beyond it.</p>
<p>Note that you still cannot use my() on global punctuation variables
such as $_ and the like.</p>
</li>
<li><a class='view-title' id="pack()-and-unpack()"></a><strong>pack() and unpack()</strong>
<p>A new format 'w' represents a BER compressed integer (as defined in
ASN.1).  Its format is a sequence of one or more bytes, each of which
provides seven bits of the total value, with the most significant
first.  Bit eight of each byte is set, except for the last byte, in
which bit eight is clear.</p>
<p>If 'p' or 'P' are given undef as values, they now generate a NULL
pointer.</p>
<p>Both pack() and unpack() now fail when their templates contain invalid
types.  (Invalid types used to be ignored.)</p>
</li>
<li><a class='view-title' id="sysseek()"></a><strong>sysseek()</strong>
<p>The new sysseek() operator is a variant of seek() that sets and gets the
file's system read/write position, using the lseek(2) system call.  It is
the only reliable way to seek before using sysread() or syswrite().  Its
return value is the new position, or the undefined value on failure.</p>
</li>
<li><a class='view-title' id="use-VERSION"></a><strong>use VERSION</strong>
<p>If the first argument to <code class="inline"><a class="l_k" href="functions/use.html">use</a></code> is a number, it is treated as a version
number instead of a module name.  If the version of the Perl interpreter
is less than VERSION, then an error message is printed and Perl exits
immediately.  Because <code class="inline"><a class="l_k" href="functions/use.html">use</a></code> occurs at compile time, this check happens
immediately during the compilation process, unlike <code class="inline"><a class="l_k" href="functions/require.html">require</a> <span class="w">VERSION</span></code>
,
which waits until runtime for the check.  This is often useful if you
need to check the current Perl version before <code class="inline"><a class="l_k" href="functions/use.html">use</a></code>ing library modules
which have changed in incompatible ways from older versions of Perl.
(We try not to do this more than we have to.)</p>
</li>
<li><a class='view-title' id="use-Module-VERSION-LIST"></a><strong>use Module VERSION LIST</strong>
<p>If the VERSION argument is present between Module and LIST, then the
<code class="inline"><a class="l_k" href="functions/use.html">use</a></code> will call the VERSION method in class Module with the given
version as an argument.  The default VERSION method, inherited from
the UNIVERSAL class, croaks if the given version is larger than the
value of the variable $Module::VERSION.  (Note that there is not a
comma after VERSION!)</p>
<p>This version-checking mechanism is similar to the one currently used
in the Exporter module, but it is faster and can be used with modules
that don't use the Exporter.  It is the recommended method for new
code.</p>
</li>
<li><a class='view-title' id="prototype(FUNCTION)"></a><strong>prototype(FUNCTION)</strong>
<p>Returns the prototype of a function as a string (or <code class="inline"><a class="l_k" href="functions/undef.html">undef</a></code> if the
function has no prototype).  FUNCTION is a reference to or the name of the
function whose prototype you want to retrieve.
(Not actually new; just never documented before.)</p>
</li>
<li><a class='view-title' id="srand"></a><strong>srand</strong>
<p>The default seed for <code class="inline"><a class="l_k" href="functions/srand.html">srand</a></code>, which used to be <code class="inline"><a class="l_k" href="functions/time.html">time</a></code>, has been changed.
Now it's a heady mix of difficult-to-predict system-dependent values,
which should be sufficient for most everyday purposes.</p>
<p>Previous to version 5.004, calling <code class="inline"><a class="l_k" href="functions/rand.html">rand</a></code> without first calling <code class="inline"><a class="l_k" href="functions/srand.html">srand</a></code>
would yield the same sequence of random numbers on most or all machines.
Now, when perl sees that you're calling <code class="inline"><a class="l_k" href="functions/rand.html">rand</a></code> and haven't yet called
<code class="inline"><a class="l_k" href="functions/srand.html">srand</a></code>, it calls <code class="inline"><a class="l_k" href="functions/srand.html">srand</a></code> with the default seed. You should still call
<code class="inline"><a class="l_k" href="functions/srand.html">srand</a></code> manually if your code might ever be run on a pre-5.004 system,
of course, or if you want a seed other than the default.</p>
</li>
<li><a class='view-title' id="%24_-as-Default"></a><strong>$_ as Default</strong>
<p>Functions documented in the Camel to default to $_ now in
fact do, and all those that do are so documented in <a href="perlfunc.html">perlfunc</a>.</p>
</li>
<li><a class='view-title' id="m%2f%2fgc-does-not-reset-search-position-on-failure"></a><strong><code class="inline"><a class="l_k" href="functions/m.html">m//gc</a></code> does not reset search position on failure</strong>
<p>The <code class="inline"><a class="l_k" href="functions/m.html">m//g</a></code> match iteration construct has always reset its target
string's search position (which is visible through the <code class="inline"><a class="l_k" href="functions/pos.html">pos</a></code> operator)
when a match fails; as a result, the next <code class="inline"><a class="l_k" href="functions/m.html">m//g</a></code> match after a failure
starts again at the beginning of the string.  With Perl 5.004, this
reset may be disabled by adding the "c" (for "continue") modifier,
i.e. <code class="inline"><a class="l_k" href="functions/m.html">m//gc</a></code>.  This feature, in conjunction with the <code class="inline">\<span class="w">G</span></code>
 zero-width
assertion, makes it possible to chain matches together.  See <a href="perlop.html">perlop</a>
and <a href="perlre.html">perlre</a>.</p>
</li>
<li><a class='view-title' id="m%2f%2fx-ignores-whitespace-before-%3f*%2b%7b%7d"></a><strong><code class="inline"><a class="l_k" href="functions/m.html">m//x</a></code> ignores whitespace before ?*+{}</strong>
<p>The <code class="inline"><a class="l_k" href="functions/m.html">m//x</a></code> construct has always been intended to ignore all unescaped
whitespace.  However, before Perl 5.004, whitespace had the effect of
escaping repeat modifiers like "*" or "?"; for example, <code class="inline"><span class="q">/a *b/x</span></code>
 was
(mis)interpreted as <code class="inline"><span class="q">/a\*b/x</span></code>
.  This bug has been fixed in 5.004.</p>
</li>
<li><a class='view-title' id="nested-sub%7b%7d-closures-work-now"></a><strong>nested <code class="inline"><a class="l_k" href="functions/sub.html">sub{}</a></code> closures work now</strong>
<p>Prior to the 5.004 release, nested anonymous functions didn't work
right.  They do now.</p>
</li>
<li><a class='view-title' id="formats-work-right-on-changing-lexicals"></a><strong>formats work right on changing lexicals</strong>
<p>Just like anonymous functions that contain lexical variables
that change (like a lexical index variable for a <code class="inline"><a class="l_k" href="functions/foreach.html">foreach</a></code> loop),
formats now work properly.  For example, this silently failed
before (printed only zeros), but is fine now:</p>
<pre class="verbatim"><ol><li>    <a class="l_k" href="functions/my.html">my</a> <span class="i">$i</span><span class="sc">;</span></li><li>    <a class="l_k" href="functions/foreach.html">foreach</a> <span class="i">$i</span> <span class="s">(</span> <span class="n">1</span> .. <span class="n">10</span> <span class="s">)</span> <span class="s">{</span></li><li>	<a class="l_k" href="functions/write.html">write</a><span class="sc">;</span></li><li>    <span class="s">}</span></li><li>    format =</li><li><span class="hh">	my i is @#</span></li><li><span class="hh">	$i</span></li><li><span class="hh">    .</span></li></ol></pre><p>However, it still fails (without a warning) if the foreach is within a
subroutine:</p>
<pre class="verbatim"><ol><li>    <a class="l_k" href="functions/my.html">my</a> <span class="i">$i</span><span class="sc">;</span></li><li><a name="foo"></a>    sub <span class="m">foo</span> <span class="s">{</span></li><li>      <a class="l_k" href="functions/foreach.html">foreach</a> <span class="i">$i</span> <span class="s">(</span> <span class="n">1</span> .. <span class="n">10</span> <span class="s">)</span> <span class="s">{</span></li><li>	<a class="l_k" href="functions/write.html">write</a><span class="sc">;</span></li><li>      <span class="s">}</span></li><li>    <span class="s">}</span></li><li>    <span class="i">foo</span><span class="sc">;</span></li><li>    format =</li><li><span class="hh">	my i is @#</span></li><li><span class="hh">	$i</span></li><li><span class="hh">    .</span></li></ol></pre></li>
</ul>
<a class='view-head2' id="New-builtin-methods"></a><h3 class='h3' >New builtin methods</h3>
<p>The <code class="inline"><span class="w">UNIVERSAL</span></code>
 package automatically contains the following methods that
are inherited by all other classes:</p>
<ul>
<li><a class='view-title' id="isa(CLASS)"></a><strong>isa(CLASS)</strong>
<p><code class="inline"><span class="w">isa</span></code>
 returns <i>true</i> if its object is blessed into a subclass of <code class="inline"><span class="w">CLASS</span></code>
</p>
<p><code class="inline"><span class="w">isa</span></code>
 is also exportable and can be called as a sub with two arguments. This
allows the ability to check what a reference points to. Example:</p>
<pre class="verbatim"><ol><li>    <a class="l_k" href="functions/use.html">use</a> <span class="w">UNIVERSAL</span> <span class="q">qw(isa)</span><span class="sc">;</span></li><li></li><li>    <a class="l_k" href="functions/if.html">if</a><span class="s">(</span><span class="i">isa</span><span class="s">(</span><span class="i">$ref</span><span class="cm">,</span> <span class="q">&#39;ARRAY&#39;</span><span class="s">)</span><span class="s">)</span> <span class="s">{</span></li><li>       ...</li><li>    <span class="s">}</span></li></ol></pre></li>
<li><a class='view-title' id="can(METHOD)"></a><strong>can(METHOD)</strong>
<p><code class="inline"><span class="w">can</span></code>
 checks to see if its object has a method called <code class="inline"><span class="w">METHOD</span></code>
,
if it does then a reference to the sub is returned; if it does not then
<i>undef</i> is returned.</p>
</li>
<li><a class='view-title' id="VERSION(-%5bNEED%5d-)"></a><strong>VERSION( [NEED] )</strong>
<p><code class="inline"><span class="w">VERSION</span></code>
 returns the version number of the class (package).  If the
NEED argument is given then it will check that the current version (as
defined by the $VERSION variable in the given package) not less than
NEED; it will die if this is not the case.  This method is normally
called as a class method.  This method is called automatically by the
<code class="inline"><span class="w">VERSION</span></code>
 form of <code class="inline"><a class="l_k" href="functions/use.html">use</a></code>.</p>
<pre class="verbatim"><ol><li>    <a class="l_k" href="functions/use.html">use</a> <span class="w">A</span> <span class="n">1.2</span> <span class="q">qw(some imported subs)</span><span class="sc">;</span></li><li>    <span class="c"># implies:</span></li><li>    <span class="w">A</span><span class="w">-&gt;VERSION</span><span class="s">(</span><span class="n">1.2</span><span class="s">)</span><span class="sc">;</span></li></ol></pre></li>
</ul>
<p><strong>NOTE:</strong> <code class="inline"><span class="w">can</span></code>
 directly uses Perl's internal code for method lookup, and
<code class="inline"><span class="w">isa</span></code>
 uses a very similar method and caching strategy. This may cause
strange effects if the Perl code dynamically changes @ISA in any package.</p>
<p>You may add other methods to the UNIVERSAL class via Perl or XS code.
You do not need to <code class="inline"><a class="l_k" href="functions/use.html">use</a> <span class="w">UNIVERSAL</span></code>
 in order to make these methods
available to your program.  This is necessary only if you wish to
have <code class="inline"><span class="w">isa</span></code>
 available as a plain subroutine in the current package.</p>
<a class='view-head2' id="TIEHANDLE-now-supported"></a><h3 class='h3' >TIEHANDLE now supported</h3>
<p>See <a href="perltie.html">perltie</a> for other kinds of tie()s.</p>
<ul>
<li><a class='view-title' id="TIEHANDLE-classname%2c-LIST"></a><strong>TIEHANDLE classname, LIST</strong>
<p>This is the constructor for the class.  That means it is expected to
return an object of some sort. The reference can be used to
hold some internal information.</p>
<pre class="verbatim"><ol><li><a name="TIEHANDLE"></a>    sub <span class="m">TIEHANDLE</span> <span class="s">{</span></li><li>	<a class="l_k" href="functions/print.html">print</a> <span class="q">&quot;&lt;shout&gt;\n&quot;</span><span class="sc">;</span></li><li>	<a class="l_k" href="functions/my.html">my</a> <span class="i">$i</span><span class="sc">;</span></li><li>	<a class="l_k" href="functions/return.html">return</a> <a class="l_k" href="functions/bless.html">bless</a> \<span class="i">$i</span><span class="cm">,</span> <a class="l_k" href="functions/shift.html">shift</a><span class="sc">;</span></li><li>    <span class="s">}</span></li></ol></pre></li>
<li><a class='view-title' id="PRINT-this%2c-LIST"></a><strong>PRINT this, LIST</strong>
<p>This method will be triggered every time the tied handle is printed to.
Beyond its self reference it also expects the list that was passed to
the print function.</p>
<pre class="verbatim"><ol><li><a name="PRINT"></a>    sub <span class="m">PRINT</span> <span class="s">{</span></li><li>	<span class="i">$r</span> = <a class="l_k" href="functions/shift.html">shift</a><span class="sc">;</span></li><li>	<span class="i">$$r</span>++<span class="sc">;</span></li><li>	<a class="l_k" href="functions/return.html">return</a> <a class="l_k" href="functions/print.html">print</a> <a class="l_k" href="functions/join.html">join</a><span class="s">(</span> <span class="i">$,</span> <span class="cm">=&gt;</span> <a class="l_k" href="functions/map.html">map</a> <span class="s">{</span><a class="l_k" href="functions/uc.html">uc</a><span class="s">}</span> <span class="i">@_</span><span class="s">)</span><span class="cm">,</span> <span class="i">$\</span><span class="sc">;</span></li><li>    <span class="s">}</span></li></ol></pre></li>
<li><a class='view-title' id="PRINTF-this%2c-LIST"></a><strong>PRINTF this, LIST</strong>
<p>This method will be triggered every time the tied handle is printed to
with the <code class="inline"><a class="l_k" href="functions/printf.html">printf()</a></code> function.
Beyond its self reference it also expects the format and list that was
passed to the printf function.</p>
<pre class="verbatim"><ol><li><a name="PRINTF"></a>    sub <span class="m">PRINTF</span> <span class="s">{</span></li><li>        <a class="l_k" href="functions/shift.html">shift</a><span class="sc">;</span></li><li>	  <a class="l_k" href="functions/my.html">my</a> <span class="i">$fmt</span> = <a class="l_k" href="functions/shift.html">shift</a><span class="sc">;</span></li><li>        <a class="l_k" href="functions/print.html">print</a> <a class="l_k" href="functions/sprintf.html">sprintf</a><span class="s">(</span><span class="i">$fmt</span><span class="cm">,</span> <span class="i">@_</span><span class="s">)</span>.<span class="q">&quot;\n&quot;</span><span class="sc">;</span></li><li>    <span class="s">}</span></li></ol></pre></li>
<li><a class='view-title' id="READ-this-LIST"></a><strong>READ this LIST</strong>
<p>This method will be called when the handle is read from via the <code class="inline"><a class="l_k" href="functions/read.html">read</a></code>
or <code class="inline"><a class="l_k" href="functions/sysread.html">sysread</a></code> functions.</p>
<pre class="verbatim"><ol><li><a name="READ"></a>    sub <span class="m">READ</span> <span class="s">{</span></li><li>	<span class="i">$r</span> = <a class="l_k" href="functions/shift.html">shift</a><span class="sc">;</span></li><li>	<a class="l_k" href="functions/my.html">my</a><span class="s">(</span><span class="i">$buf</span><span class="cm">,</span><span class="i">$len</span><span class="cm">,</span><span class="i">$offset</span><span class="s">)</span> = <span class="i">@_</span><span class="sc">;</span></li><li>	<a class="l_k" href="functions/print.html">print</a> <span class="q">&quot;READ called, \$buf=$buf, \$len=$len, \$offset=$offset&quot;</span><span class="sc">;</span></li><li>    <span class="s">}</span></li></ol></pre></li>
<li><a class='view-title' id="READLINE-this"></a><strong>READLINE this</strong>
<p>This method will be called when the handle is read from. The method
should return undef when there is no more data.</p>
<pre class="verbatim"><ol><li><a name="READLINE"></a>    sub <span class="m">READLINE</span> <span class="s">{</span></li><li>	<span class="i">$r</span> = <a class="l_k" href="functions/shift.html">shift</a><span class="sc">;</span></li><li>	<a class="l_k" href="functions/return.html">return</a> <span class="q">&quot;PRINT called $$r times\n&quot;</span></li><li>    <span class="s">}</span></li></ol></pre></li>
<li><a class='view-title' id="GETC-this"></a><strong>GETC this</strong>
<p>This method will be called when the <code class="inline"><a class="l_k" href="functions/getc.html">getc</a></code> function is called.</p>
<pre class="verbatim"><ol><li><a name="GETC"></a>    sub <span class="m">GETC</span> <span class="s">{</span> <a class="l_k" href="functions/print.html">print</a> <span class="q">&quot;Don&#39;t GETC, Get Perl&quot;</span><span class="sc">;</span> <a class="l_k" href="functions/return.html">return</a> <span class="q">&quot;a&quot;</span><span class="sc">;</span> <span class="s">}</span></li></ol></pre></li>
<li><a class='view-title' id="DESTROY-this"></a><strong>DESTROY this</strong>
<p>As with the other types of ties, this method will be called when the
tied handle is about to be destroyed. This is useful for debugging and
possibly for cleaning up.</p>
<pre class="verbatim"><ol><li><a name="DESTROY"></a>    sub <span class="m">DESTROY</span> <span class="s">{</span></li><li>	<a class="l_k" href="functions/print.html">print</a> <span class="q">&quot;&lt;/shout&gt;\n&quot;</span><span class="sc">;</span></li><li>    <span class="s">}</span></li></ol></pre></li>
</ul>
<a class='view-head2' id="Malloc-enhancements"></a><h3 class='h3' >Malloc enhancements</h3>
<p>If perl is compiled with the malloc included with the perl distribution
(that is, if <code class="inline"><span class="w">perl</span> -<span class="w">V</span><span class="co">:</span><span class="w">d_mymalloc</span></code>
 is 'define') then you can print
memory statistics at runtime by running Perl thusly:</p>
<pre class="verbatim"><ol><li>  <span class="w">env</span> <span class="w">PERL_DEBUG_MSTATS</span>=<span class="n">2</span> <span class="w">perl</span> <span class="w">your_script_here</span></li></ol></pre><p>The value of 2 means to print statistics after compilation and on
exit; with a value of 1, the statistics are printed only on exit.
(If you want the statistics at an arbitrary time, you'll need to
install the optional module Devel::Peek.)</p>
<p>Three new compilation flags are recognized by malloc.c.  (They have no
effect if perl is compiled with system malloc().)</p>
<ul>
<li><a class='view-title' id="-DPERL_EMERGENCY_SBRK"></a><strong>-DPERL_EMERGENCY_SBRK</strong>
<p>If this macro is defined, running out of memory need not be a fatal
error: a memory pool can allocated by assigning to the special
variable <code class="inline"><span class="i">$^M</span></code>
.  See <a href="#%24%5eM">$^M</a>.</p>
</li>
<li><a class='view-title' id="-DPACK_MALLOC"></a><strong>-DPACK_MALLOC</strong>
<p>Perl memory allocation is by bucket with sizes close to powers of two.
Because of these malloc overhead may be big, especially for data of
size exactly a power of two.  If <code class="inline"><span class="w">PACK_MALLOC</span></code>
 is defined, perl uses
a slightly different algorithm for small allocations (up to 64 bytes
long), which makes it possible to have overhead down to 1 byte for
allocations which are powers of two (and appear quite often).</p>
<p>Expected memory savings (with 8-byte alignment in <code class="inline"><span class="w">alignbytes</span></code>
) is
about 20% for typical Perl usage.  Expected slowdown due to additional
malloc overhead is in fractions of a percent (hard to measure, because
of the effect of saved memory on speed).</p>
</li>
<li><a class='view-title' id="-DTWO_POT_OPTIMIZE"></a><strong>-DTWO_POT_OPTIMIZE</strong>
<p>Similarly to <code class="inline"><span class="w">PACK_MALLOC</span></code>
, this macro improves allocations of data
with size close to a power of two; but this works for big allocations
(starting with 16K by default).  Such allocations are typical for big
hashes and special-purpose scripts, especially image processing.</p>
<p>On recent systems, the fact that perl requires 2M from system for 1M
allocation will not affect speed of execution, since the tail of such
a chunk is not going to be touched (and thus will not require real
memory).  However, it may result in a premature out-of-memory error.
So if you will be manipulating very large blocks with sizes close to
powers of two, it would be wise to define this macro.</p>
<p>Expected saving of memory is 0-100% (100% in applications which
require most memory in such 2**n chunks); expected slowdown is
negligible.</p>
</li>
</ul>
<a class='view-head2' id="Miscellaneous-efficiency-enhancements"></a><h3 class='h3' >Miscellaneous efficiency enhancements</h3>
<p>Functions that have an empty prototype and that do nothing but return
a fixed value are now inlined (e.g. <code class="inline"><a name="PI"></a>sub <span class="m">PI ()</span> <span class="s">{</span> <span class="n">3.14159</span> <span class="s">}</span></code>
).</p>
<p>Each unique hash key is only allocated once, no matter how many hashes
have an entry with that key.  So even if you have 100 copies of the
same hash, the hash keys never have to be reallocated.</p>
<a class='view-head1' id="Support-for-More-Operating-Systems"></a><h2 class='h2' >Support for More Operating Systems</h2>
<p>Support for the following operating systems is new in Perl 5.004.</p>
<a class='view-head2' id="Win32"></a><h3 class='h3' >Win32</h3>
<p>Perl 5.004 now includes support for building a "native" perl under
Windows NT, using the Microsoft Visual C++ compiler (versions 2.0
and above) or the Borland C++ compiler (versions 5.02 and above).
The resulting perl can be used under Windows 95 (if it
is installed in the same directory locations as it got installed
in Windows NT).  This port includes support for perl extension
building tools like <a href="ExtUtils/MakeMaker.html">ExtUtils::MakeMaker</a> and <a href="h2xs.html">h2xs</a>, so that many extensions
available on the Comprehensive Perl Archive Network (CPAN) can now be
readily built under Windows NT.  See <a href="http://www.perl.com/">http://www.perl.com/</a> for more
information on CPAN and <i>README.win32</i> in the perl distribution for more
details on how to get started with building this port.</p>
<p>There is also support for building perl under the Cygwin32 environment.
Cygwin32 is a set of GNU tools that make it possible to compile and run
many Unix programs under Windows NT by providing a mostly Unix-like 
interface for compilation and execution.  See <i>README.cygwin32</i> in the
perl distribution for more details on this port and how to obtain the
Cygwin32 toolkit.</p>
<a class='view-head2' id="Plan-9"></a><h3 class='h3' >Plan 9</h3>
<p>See <i>README.plan9</i> in the perl distribution.</p>
<a class='view-head2' id="QNX"></a><h3 class='h3' >QNX</h3>
<p>See <i>README.qnx</i> in the perl distribution.</p>
<a class='view-head2' id="AmigaOS"></a><h3 class='h3' >AmigaOS</h3>
<p>See <i>README.amigaos</i> in the perl distribution.</p>
<a class='view-head1' id="Pragmata"></a><h2 class='h2' >Pragmata</h2>
<p>Six new pragmatic modules exist:</p>
<ul>
<li><a class='view-title' id="use-autouse-MODULE-%3d%3e-qw(sub1-sub2-sub3)"></a><strong>use autouse MODULE =&gt; qw(sub1 sub2 sub3)</strong>
<p>Defers <code class="inline"><a class="l_k" href="functions/require.html">require</a> <span class="w">MODULE</span></code>
 until someone calls one of the specified
subroutines (which must be exported by MODULE).  This pragma should be
used with caution, and only when necessary.</p>
</li>
<li><a class='view-title' id="use-blib"></a><strong>use blib</strong>
</li>
<li><a class='view-title' id="use-blib-'dir'"></a><strong>use blib 'dir'</strong>
<p>Looks for MakeMaker-like <i>'blib'</i> directory structure starting in
<i>dir</i> (or current directory) and working back up to five levels of
parent directories.</p>
<p>Intended for use on command line with <strong>-M</strong> option as a way of testing
arbitrary scripts against an uninstalled version of a package.</p>
</li>
<li><a class='view-title' id="use-constant-NAME-%3d%3e-VALUE"></a><strong>use constant NAME =&gt; VALUE</strong>
<p>Provides a convenient interface for creating compile-time constants,
See <a href="perlsub.html#Constant-Functions">Constant Functions in perlsub</a>.</p>
</li>
<li><a class='view-title' id="use-locale"></a><strong>use locale</strong>
<p>Tells the compiler to enable (or disable) the use of POSIX locales for
builtin operations.</p>
<p>When <code class="inline"><a class="l_k" href="functions/use.html">use</a> <span class="w">locale</span></code>
 is in effect, the current LC_CTYPE locale is used
for regular expressions and case mapping; LC_COLLATE for string
ordering; and LC_NUMERIC for numeric formatting in printf and sprintf
(but <strong>not</strong> in print).  LC_NUMERIC is always used in write, since
lexical scoping of formats is problematic at best.</p>
<p>Each <code class="inline"><a class="l_k" href="functions/use.html">use</a> <span class="w">locale</span></code>
 or <code class="inline"><a class="l_k" href="functions/no.html">no</a> <span class="w">locale</span></code>
 affects statements to the end of
the enclosing BLOCK or, if not inside a BLOCK, to the end of the
current file.  Locales can be switched and queried with
POSIX::setlocale().</p>
<p>See <a href="perllocale.html">perllocale</a> for more information.</p>
</li>
<li><a class='view-title' id="use-ops"></a><strong>use ops</strong>
<p>Disable unsafe opcodes, or any named opcodes, when compiling Perl code.</p>
</li>
<li><a class='view-title' id="use-vmsish"></a><strong>use vmsish</strong>
<p>Enable VMS-specific language features.  Currently, there are three
VMS-specific features available: 'status', which makes <code class="inline"><span class="i">$?</span></code>
 and
<code class="inline"><a class="l_k" href="functions/system.html">system</a></code> return genuine VMS status values instead of emulating POSIX;
'exit', which makes <code class="inline"><a class="l_k" href="functions/exit.html">exit</a></code> take a genuine VMS status value instead of
assuming that <code class="inline"><a class="l_k" href="functions/exit.html">exit</a> <span class="n">1</span></code>
 is an error; and 'time', which makes all times
relative to the local time zone, in the VMS tradition.</p>
</li>
</ul>
<a class='view-head1' id="Modules"></a><h2 class='h2' >Modules</h2>
<a class='view-head2' id="Required-Updates"></a><h3 class='h3' >Required Updates</h3>
<p>Though Perl 5.004 is compatible with almost all modules that work
with Perl 5.003, there are a few exceptions:</p>
<pre class="verbatim"><ol><li>    <span class="w">Module</span>   <span class="w">Required</span> <span class="w">Version</span> <a class="l_k" href="functions/for.html">for</a> <span class="w">Perl</span> <span class="n">5.004</span></li><li>    ------   -------------------------------</li><li>    <span class="w">Filter</span>   <span class="w">Filter</span>-<span class="n">1.12</span></li><li>    <span class="w">LWP</span>      <span class="w">libwww</span>-<span class="w">perl</span>-<span class="n">5.08</span></li><li>    <span class="w">Tk</span>       <span class="w">Tk400</span><span class="n">.202</span> <span class="s">(</span>-w <span class="w">makes</span> <span class="w">noise</span><span class="s">)</span></li></ol></pre><p>Also, the majordomo mailing list program, version 1.94.1, doesn't work
with Perl 5.004 (nor with perl 4), because it executes an invalid
regular expression.  This bug is fixed in majordomo version 1.94.2.</p>
<a class='view-head2' id="Installation-directories"></a><h3 class='h3' >Installation directories</h3>
<p>The <i>installperl</i> script now places the Perl source files for
extensions in the architecture-specific library directory, which is
where the shared libraries for extensions have always been.  This
change is intended to allow administrators to keep the Perl 5.004
library directory unchanged from a previous version, without running
the risk of binary incompatibility between extensions' Perl source and
shared libraries.</p>
<a class='view-head2' id="Module-information-summary"></a><h3 class='h3' >Module information summary</h3>
<p>Brand new modules, arranged by topic rather than strictly
alphabetically:</p>
<pre class="verbatim"><ol><li>    <span class="w">CGI</span>.<span class="w">pm</span>               <span class="w">Web</span> <span class="w">server</span> <span class="w">interface</span> <span class="s">(</span><span class="q">&quot;Common Gateway Interface&quot;</span><span class="s">)</span></li><li>    <span class="w">CGI</span>/<span class="w">Apache</span>.<span class="w">pm</span>        <span class="w">Support</span> <a class="l_k" href="functions/for.html">for</a> <span class="w">Apache&#39;s</span> <span class="w">Perl</span> <span class="w">module</span></li><li>    <span class="w">CGI</span>/<span class="w">Carp</span>.<span class="w">pm</span>          <span class="w">Log</span> <span class="w">server</span> <span class="w">errors</span> <span class="w">with</span> <span class="w">helpful</span> <span class="w">context</span></li><li>    <span class="w">CGI</span>/<span class="w">Fast</span>.<span class="w">pm</span>          <span class="w">Support</span> <a class="l_k" href="functions/for.html">for</a> <span class="w">FastCGI</span> <span class="s">(</span><span class="w">persistent</span> <span class="w">server</span> <span class="w">process</span><span class="s">)</span></li><li>    <span class="w">CGI</span>/<span class="w">Push</span>.<span class="w">pm</span>          <span class="w">Support</span> <a class="l_k" href="functions/for.html">for</a> <span class="w">server</span> <a class="l_k" href="functions/push.html">push</a></li><li>    <span class="w">CGI</span>/<span class="w">Switch</span>.<span class="w">pm</span>        <span class="w">Simple</span> <span class="w">interface</span> <a class="l_k" href="functions/for.html">for</a> <span class="w">multiple</span> <span class="w">server</span> <span class="w">types</span></li><li></li><li>    <span class="w">CPAN</span>                 <span class="w">Interface</span> <span class="w">to</span> <span class="w">Comprehensive</span> <span class="w">Perl</span> <span class="w">Archive</span> <span class="w">Network</span></li><li>    <span class="w">CPAN::FirstTime</span>      <span class="w">Utility</span> <a class="l_k" href="functions/for.html">for</a> <span class="w">creating</span> <span class="w">CPAN</span> <span class="w">configuration</span> <span class="w">file</span></li><li>    <span class="w">CPAN::Nox</span>            <span class="w">Runs</span> <span class="w">CPAN</span> <a class="l_k" href="functions/while.html">while</a> <span class="w">avoiding</span> <span class="w">compiled</span> <span class="w">extensions</span></li><li></li><li>    <span class="w">IO</span>.<span class="w">pm</span>                <span class="w">Top</span>-<span class="w">level</span> <span class="w">interface</span> <span class="w">to</span> <span class="w">IO::</span>* <span class="w">classes</span></li><li>    <span class="w">IO</span>/<span class="w">File</span>.<span class="w">pm</span>           <span class="w">IO::File</span> <span class="w">extension</span> <span class="w">Perl</span> <span class="w">module</span></li><li>    <span class="w">IO</span>/<span class="w">Handle</span>.<span class="w">pm</span>         <span class="w">IO::Handle</span> <span class="w">extension</span> <span class="w">Perl</span> <span class="w">module</span></li><li>    <span class="w">IO</span>/<span class="w">Pipe</span>.<span class="w">pm</span>           <span class="w">IO::Pipe</span> <span class="w">extension</span> <span class="w">Perl</span> <span class="w">module</span></li><li>    <span class="w">IO</span>/<span class="w">Seekable</span>.<span class="w">pm</span>       <span class="w">IO::Seekable</span> <span class="w">extension</span> <span class="w">Perl</span> <span class="w">module</span></li><li>    <span class="w">IO</span>/<span class="w">Select</span>.<span class="w">pm</span>         <span class="w">IO::Select</span> <span class="w">extension</span> <span class="w">Perl</span> <span class="w">module</span></li><li>    <span class="w">IO</span>/<span class="w">Socket</span>.<span class="w">pm</span>         <span class="w">IO::Socket</span> <span class="w">extension</span> <span class="w">Perl</span> <span class="w">module</span></li><li></li><li>    <span class="w">Opcode</span>.<span class="w">pm</span>            <span class="w">Disable</span> <span class="w">named</span> <span class="w">opcodes</span> <a class="l_k" href="functions/when.html">when</a> <span class="w">compiling</span> <span class="w">Perl</span> <span class="w">code</span></li><li></li><li>    <span class="w">ExtUtils</span>/<span class="w">Embed</span>.<span class="w">pm</span>    <span class="w">Utilities</span> <a class="l_k" href="functions/for.html">for</a> <span class="w">embedding</span> <span class="w">Perl</span> <span class="w">in</span> <span class="w">C</span> <span class="w">programs</span></li><li>    <span class="w">ExtUtils</span>/<span class="w">testlib</span>.<span class="w">pm</span>  <span class="w">Fixes</span> <span class="w">up</span> <span class="i">@INC</span> <span class="w">to</span> <a class="l_k" href="functions/use.html">use</a> <span class="w">just</span>-<span class="w">built</span> <span class="w">extension</span></li><li></li><li>    <span class="w">FindBin</span>.<span class="w">pm</span>           <span class="w">Find</span> <span class="w">path</span> <span class="w">of</span> <span class="w">currently</span> <span class="w">executing</span> <span class="w">program</span></li><li></li><li>    <span class="w">Class</span>/<span class="w">Struct</span>.<span class="w">pm</span>      <span class="w">Declare</span> <span class="w">struct</span>-<span class="w">like</span> <span class="w">datatypes</span> <span class="w">as</span> <span class="w">Perl</span> <span class="w">classes</span></li><li>    <span class="w">File</span>/<a class="l_k" href="functions/stat.html">stat</a>.<span class="w">pm</span>         <span class="w">By</span>-<span class="w">name</span> <span class="w">interface</span> <span class="w">to</span> <span class="w">Perl&#39;s</span> <span class="w">builtin</span> <a class="l_k" href="functions/stat.html">stat</a></li><li>    <span class="w">Net</span>/<span class="w">hostent</span>.<span class="w">pm</span>       <span class="w">By</span>-<span class="w">name</span> <span class="w">interface</span> <span class="w">to</span> <span class="w">Perl&#39;s</span> <span class="w">builtin</span> <span class="w">gethost</span>*</li><li>    <span class="w">Net</span>/<span class="w">netent</span>.<span class="w">pm</span>        <span class="w">By</span>-<span class="w">name</span> <span class="w">interface</span> <span class="w">to</span> <span class="w">Perl&#39;s</span> <span class="w">builtin</span> <span class="w">getnet</span>*</li><li>    <span class="w">Net</span>/<span class="w">protoent</span>.<span class="w">pm</span>      <span class="w">By</span>-<span class="w">name</span> <span class="w">interface</span> <span class="w">to</span> <span class="w">Perl&#39;s</span> <span class="w">builtin</span> <span class="w">getproto</span>*</li><li>    <span class="w">Net</span>/<span class="w">servent</span>.<span class="w">pm</span>       <span class="w">By</span>-<span class="w">name</span> <span class="w">interface</span> <span class="w">to</span> <span class="w">Perl&#39;s</span> <span class="w">builtin</span> <span class="w">getserv</span>*</li><li>    <span class="w">Time</span>/<a class="l_k" href="functions/gmtime.html">gmtime</a>.<span class="w">pm</span>       <span class="w">By</span>-<span class="w">name</span> <span class="w">interface</span> <span class="w">to</span> <span class="w">Perl&#39;s</span> <span class="w">builtin</span> <a class="l_k" href="functions/gmtime.html">gmtime</a></li><li>    <span class="w">Time</span>/<a class="l_k" href="functions/localtime.html">localtime</a>.<span class="w">pm</span>    <span class="w">By</span>-<span class="w">name</span> <span class="w">interface</span> <span class="w">to</span> <span class="w">Perl&#39;s</span> <span class="w">builtin</span> <a class="l_k" href="functions/localtime.html">localtime</a></li><li>    <span class="w">Time</span>/<span class="w">tm</span>.<span class="w">pm</span>           <span class="w">Internal</span> <span class="w">object</span> <a class="l_k" href="functions/for.html">for</a> <span class="w">Time::</span><span class="s">{</span><span class="w">gm</span><span class="cm">,</span><a class="l_k" href="functions/local.html">local</a><span class="s">}</span><a class="l_k" href="functions/time.html">time</a></li><li>    <span class="w">User</span>/<span class="w">grent</span>.<span class="w">pm</span>        <span class="w">By</span>-<span class="w">name</span> <span class="w">interface</span> <span class="w">to</span> <span class="w">Perl&#39;s</span> <span class="w">builtin</span> <span class="w">getgr</span>*</li><li>    <span class="w">User</span>/<span class="w">pwent</span>.<span class="w">pm</span>        <span class="w">By</span>-<span class="w">name</span> <span class="w">interface</span> <span class="w">to</span> <span class="w">Perl&#39;s</span> <span class="w">builtin</span> <span class="w">getpw</span>*</li><li></li><li>    <span class="w">Tie</span>/<span class="w">RefHash</span>.<span class="w">pm</span>       <span class="w">Base</span> <span class="w">class</span> <a class="l_k" href="functions/for.html">for</a> <a class="l_k" href="functions/tied.html">tied</a> <span class="w">hashes</span> <span class="w">with</span> <span class="w">references</span> <span class="w">as</span> <a class="l_k" href="functions/keys.html">keys</a></li><li></li><li>    <span class="w">UNIVERSAL</span>.<span class="w">pm</span>         <span class="w">Base</span> <span class="w">class</span> <a class="l_k" href="functions/for.html">for</a> <span class="i">*ALL</span>* <span class="w">classes</span></li></ol></pre><a class='view-head2' id="Fcntl"></a><h3 class='h3' >Fcntl</h3>
<p>New constants in the existing Fcntl modules are now supported,
provided that your operating system happens to support them:</p>
<pre class="verbatim"><ol><li>    <span class="w">F_GETOWN</span> <span class="w">F_SETOWN</span></li><li>    <span class="w">O_ASYNC</span> <span class="w">O_DEFER</span> <span class="w">O_DSYNC</span> <span class="w">O_FSYNC</span> <span class="w">O_SYNC</span></li><li>    <span class="w">O_EXLOCK</span> <span class="w">O_SHLOCK</span></li></ol></pre><p>These constants are intended for use with the Perl operators sysopen()
and fcntl() and the basic database modules like SDBM_File.  For the
exact meaning of these and other Fcntl constants please refer to your
operating system's documentation for fcntl() and open().</p>
<p>In addition, the Fcntl module now provides these constants for use
with the Perl operator flock():</p>
<pre class="verbatim"><ol><li>	<span class="w">LOCK_SH</span> <span class="w">LOCK_EX</span> <span class="w">LOCK_NB</span> <span class="w">LOCK_UN</span></li></ol></pre><p>These constants are defined in all environments (because where there is
no flock() system call, Perl emulates it).  However, for historical
reasons, these constants are not exported unless they are explicitly
requested with the ":flock" tag (e.g. <code class="inline"><a class="l_k" href="functions/use.html">use</a> <span class="w">Fcntl</span> <span class="q">&#39;:flock&#39;</span></code>
).</p>
<a class='view-head2' id="IO"></a><h3 class='h3' >IO</h3>
<p>The IO module provides a simple mechanism to load all the IO modules at one
go.  Currently this includes:</p>
<pre class="verbatim"><ol><li>     <span class="w">IO::Handle</span></li><li>     <span class="w">IO::Seekable</span></li><li>     <span class="w">IO::File</span></li><li>     <span class="w">IO::Pipe</span></li><li>     <span class="w">IO::Socket</span></li></ol></pre><p>For more information on any of these modules, please see its
respective documentation.</p>
<a class='view-head2' id="Math%3a%3aComplex"></a><h3 class='h3' >Math::Complex</h3>
<p>The Math::Complex module has been totally rewritten, and now supports
more operations.  These are overloaded:</p>
<pre class="verbatim"><ol><li>     + - <span class="i">* /</span> ** &lt;=&gt; <span class="w">neg</span> ~ <a class="l_k" href="functions/abs.html">abs</a> <a class="l_k" href="functions/sqrt.html">sqrt</a> <a class="l_k" href="functions/exp.html">exp</a> <a class="l_k" href="functions/log.html">log</a> <a class="l_k" href="functions/sin.html">sin</a> <a class="l_k" href="functions/cos.html">cos</a> <a class="l_k" href="functions/atan2.html">atan2</a> <span class="q">&quot;&quot;</span> <span class="s">(</span><span class="w">stringify</span><span class="s">)</span></li></ol></pre><p>And these functions are now exported:</p>
<pre class="verbatim"><ol><li>    <span class="w">pi</span> <span class="w">i</span> <span class="w">Re</span> <span class="w">Im</span> <span class="w">arg</span></li><li>    <span class="w">log10</span> <span class="w">logn</span> <span class="w">ln</span> <span class="w">cbrt</span> <span class="w">root</span></li><li>    <span class="w">tan</span></li><li>    <span class="w">csc</span> <span class="w">sec</span> <span class="w">cot</span></li><li>    <span class="w">asin</span> <span class="w">acos</span> <span class="w">atan</span></li><li>    <span class="w">acsc</span> <span class="w">asec</span> <span class="w">acot</span></li><li>    <span class="w">sinh</span> <span class="w">cosh</span> <span class="w">tanh</span></li><li>    <span class="w">csch</span> <span class="w">sech</span> <span class="w">coth</span></li><li>    <span class="w">asinh</span> <span class="w">acosh</span> <span class="w">atanh</span></li><li>    <span class="w">acsch</span> <span class="w">asech</span> <span class="w">acoth</span></li><li>    <span class="w">cplx</span> <span class="w">cplxe</span></li></ol></pre><a class='view-head2' id="Math%3a%3aTrig"></a><h3 class='h3' >Math::Trig</h3>
<p>This new module provides a simpler interface to parts of Math::Complex for
those who need trigonometric functions only for real numbers.</p>
<a class='view-head2' id="DB_File"></a><h3 class='h3' >DB_File</h3>
<p>There have been quite a few changes made to DB_File. Here are a few of
the highlights:</p>
<ul>
<li>
<p>Fixed a handful of bugs.</p>
</li>
<li>
<p>By public demand, added support for the standard hash function exists().</p>
</li>
<li>
<p>Made it compatible with Berkeley DB 1.86.</p>
</li>
<li>
<p>Made negative subscripts work with RECNO interface.</p>
</li>
<li>
<p>Changed the default flags from O_RDWR to O_CREAT|O_RDWR and the default
mode from 0640 to 0666.</p>
</li>
<li>
<p>Made DB_File automatically import the open() constants (O_RDWR,
O_CREAT etc.) from Fcntl, if available.</p>
</li>
<li>
<p>Updated documentation.</p>
</li>
</ul>
<p>Refer to the HISTORY section in DB_File.pm for a complete list of
changes. Everything after DB_File 1.01 has been added since 5.003.</p>
<a class='view-head2' id="Net%3a%3aPing"></a><h3 class='h3' >Net::Ping</h3>
<p>Major rewrite - support added for both udp echo and real icmp pings.</p>
<a class='view-head2' id="Object-oriented-overrides-for-builtin-operators"></a><h3 class='h3' >Object-oriented overrides for builtin operators</h3>
<p>Many of the Perl builtins returning lists now have
object-oriented overrides.  These are:</p>
<pre class="verbatim"><ol><li>    <span class="w">File::stat</span></li><li>    <span class="w">Net::hostent</span></li><li>    <span class="w">Net::netent</span></li><li>    <span class="w">Net::protoent</span></li><li>    <span class="w">Net::servent</span></li><li>    <span class="w">Time::gmtime</span></li><li>    <span class="w">Time::localtime</span></li><li>    <span class="w">User::grent</span></li><li>    <span class="w">User::pwent</span></li></ol></pre><p>For example, you can now say</p>
<pre class="verbatim"><ol><li>    <a class="l_k" href="functions/use.html">use</a> <span class="w">File::stat</span><span class="sc">;</span></li><li>    <a class="l_k" href="functions/use.html">use</a> <span class="w">User::pwent</span><span class="sc">;</span></li><li>    <span class="i">$his</span> = <span class="s">(</span><a class="l_k" href="functions/stat.html">stat</a><span class="s">(</span><span class="i">$filename</span><span class="s">)</span><span class="i">-&gt;st_uid</span> == <span class="i">pwent</span><span class="s">(</span><span class="i">$whoever</span><span class="s">)</span><span class="i">-&gt;pw_uid</span><span class="s">)</span><span class="sc">;</span></li></ol></pre><a class='view-head1' id="Utility-Changes"></a><h2 class='h2' >Utility Changes</h2>
<a class='view-head2' id="pod2html"></a><h3 class='h3' >pod2html</h3>
<ul>
<li><a class='view-title' id="Sends-converted-HTML-to-standard-output"></a><strong>Sends converted HTML to standard output</strong>
<p>The <i>pod2html</i> utility included with Perl 5.004 is entirely new.
By default, it sends the converted HTML to its standard output,
instead of writing it to a file like Perl 5.003's <i>pod2html</i> did.
Use the <strong>--outfile=FILENAME</strong> option to write to a file.</p>
</li>
</ul>
<a class='view-head2' id="xsubpp"></a><h3 class='h3' >xsubpp</h3>
<ul>
<li><a class='view-title' id="void-XSUBs-now-default-to-returning-nothing"></a><strong><code class="inline"><span class="w">void</span></code>
 XSUBs now default to returning nothing</strong>
<p>Due to a documentation/implementation bug in previous versions of
Perl, XSUBs with a return type of <code class="inline"><span class="w">void</span></code>
 have actually been
returning one value.  Usually that value was the GV for the XSUB,
but sometimes it was some already freed or reused value, which would
sometimes lead to program failure.</p>
<p>In Perl 5.004, if an XSUB is declared as returning <code class="inline"><span class="w">void</span></code>
, it
actually returns no value, i.e. an empty list (though there is a
backward-compatibility exception; see below).  If your XSUB really
does return an SV, you should give it a return type of <code class="inline"><span class="w">SV</span> *</code>
.</p>
<p>For backward compatibility, <i>xsubpp</i> tries to guess whether a
<code class="inline"><span class="w">void</span></code>
 XSUB is really <code class="inline"><span class="w">void</span></code>
 or if it wants to return an <code class="inline"><span class="w">SV</span> *</code>
.
It does so by examining the text of the XSUB: if <i>xsubpp</i> finds
what looks like an assignment to <code class="inline"><span class="i">ST</span><span class="s">(</span><span class="n">0</span><span class="s">)</span></code>
, it assumes that the
XSUB's return type is really <code class="inline"><span class="w">SV</span> *</code>
.</p>
</li>
</ul>
<a class='view-head1' id="C-Language-API-Changes"></a><h2 class='h2' >C Language API Changes</h2>
<ul>
<li><a class='view-title' id="gv_fetchmethod-and-perl_call_sv"></a><strong><code class="inline"><span class="w">gv_fetchmethod</span></code>
 and <code class="inline"><span class="w">perl_call_sv</span></code>
</strong>
<p>The <code class="inline"><span class="w">gv_fetchmethod</span></code>
 function finds a method for an object, just like
in Perl 5.003.  The GV it returns may be a method cache entry.
However, in Perl 5.004, method cache entries are not visible to users;
therefore, they can no longer be passed directly to <code class="inline"><span class="w">perl_call_sv</span></code>
.
Instead, you should use the <code class="inline"><span class="w">GvCV</span></code>
 macro on the GV to extract its CV,
and pass the CV to <code class="inline"><span class="w">perl_call_sv</span></code>
.</p>
<p>The most likely symptom of passing the result of <code class="inline"><span class="w">gv_fetchmethod</span></code>
 to
<code class="inline"><span class="w">perl_call_sv</span></code>
 is Perl's producing an "Undefined subroutine called"
error on the <i>second</i> call to a given method (since there is no cache
on the first call).</p>
</li>
<li><a class='view-title' id="perl_eval_pv"></a><strong><code class="inline"><span class="w">perl_eval_pv</span></code>
</strong>
<p>A new function handy for eval'ing strings of Perl code inside C code.
This function returns the value from the eval statement, which can
be used instead of fetching globals from the symbol table.  See
<a href="perlguts.html">perlguts</a>, <a href="perlembed.html">perlembed</a> and <a href="perlcall.html">perlcall</a> for details and examples.</p>
</li>
<li><a class='view-title' id="Extended-API-for-manipulating-hashes"></a><strong>Extended API for manipulating hashes</strong>
<p>Internal handling of hash keys has changed.  The old hashtable API is
still fully supported, and will likely remain so.  The additions to the
API allow passing keys as <code class="inline"><span class="w">SV</span>*</code>
s, so that <code class="inline"><a class="l_k" href="functions/tied.html">tied</a></code> hashes can be given
real scalars as keys rather than plain strings (nontied hashes still
can only use strings as keys).  New extensions must use the new hash
access functions and macros if they wish to use <code class="inline"><span class="w">SV</span>*</code>
 keys.  These
additions also make it feasible to manipulate <code class="inline"><span class="w">HE</span>*</code>
s (hash entries),
which can be more efficient.  See <a href="perlguts.html">perlguts</a> for details.</p>
</li>
</ul>
<a class='view-head1' id="Documentation-Changes"></a><h2 class='h2' >Documentation Changes</h2>
<p>Many of the base and library pods were updated.  These
new pods are included in section 1:</p>
<ul>
<li><a class='view-title' id="the-perldelta-manpage"></a><strong><a href="perldelta.html">perldelta</a></strong>
<p>This document.</p>
</li>
<li><a class='view-title' id="the-perlfaq-manpage"></a><strong><a href="perlfaq.html">perlfaq</a></strong>
<p>Frequently asked questions.</p>
</li>
<li><a class='view-title' id="the-perllocale-manpage"></a><strong><a href="perllocale.html">perllocale</a></strong>
<p>Locale support (internationalization and localization).</p>
</li>
<li><a class='view-title' id="the-perltoot-manpage"></a><strong><a href="perltoot.html">perltoot</a></strong>
<p>Tutorial on Perl OO programming.</p>
</li>
<li><a class='view-title' id="the-perlapio-manpage"></a><strong><a href="perlapio.html">perlapio</a></strong>
<p>Perl internal IO abstraction interface.</p>
</li>
<li><a class='view-title' id="the-perlmodlib-manpage"></a><strong><a href="perlmodlib.html">perlmodlib</a></strong>
<p>Perl module library and recommended practice for module creation.
Extracted from <a href="perlmod.html">perlmod</a> (which is much smaller as a result).</p>
</li>
<li><a class='view-title' id="the-perldebug-manpage"></a><strong><a href="perldebug.html">perldebug</a></strong>
<p>Although not new, this has been massively updated.</p>
</li>
<li><a class='view-title' id="the-perlsec-manpage"></a><strong><a href="perlsec.html">perlsec</a></strong>
<p>Although not new, this has been massively updated.</p>
</li>
</ul>
<a class='view-head1' id="New-Diagnostics"></a><h2 class='h2' >New Diagnostics</h2>
<p>Several new conditions will trigger warnings that were
silent before.  Some only affect certain platforms.
The following new warnings and errors outline these.
These messages are classified as follows (listed in
increasing order of desperation):</p>
<pre class="verbatim"><ol><li>   <span class="s">(</span><span class="w">W</span><span class="s">)</span> <span class="w">A</span> <span class="w">warning</span> <span class="s">(</span><span class="w">optional</span><span class="s">)</span>.</li><li>   <span class="s">(</span><span class="w">D</span><span class="s">)</span> <span class="w">A</span> <span class="w">deprecation</span> <span class="s">(</span><span class="w">optional</span><span class="s">)</span>.</li><li>   <span class="s">(</span><span class="w">S</span><span class="s">)</span> <span class="w">A</span> <span class="w">severe</span> <span class="w">warning</span> <span class="s">(</span><span class="w">mandatory</span><span class="s">)</span>.</li><li>   <span class="s">(</span><span class="w">F</span><span class="s">)</span> <span class="w">A</span> <span class="w">fatal</span> <span class="w">error</span> <span class="s">(</span><span class="w">trappable</span><span class="s">)</span>.</li><li>   <span class="s">(</span><span class="w">P</span><span class="s">)</span> <span class="w">An</span> <span class="w">internal</span> <span class="w">error</span> <span class="w">you</span> <span class="w">should</span> <span class="w">never</span> <span class="w">see</span> <span class="s">(</span><span class="w">trappable</span><span class="s">)</span>.</li><li>   <span class="s">(</span><span class="w">X</span><span class="s">)</span> <span class="w">A</span> <span class="w">very</span> <span class="w">fatal</span> <span class="w">error</span> <span class="s">(</span><span class="w">nontrappable</span><span class="s">)</span>.</li><li>   <span class="s">(</span><span class="w">A</span><span class="s">)</span> <span class="w">An</span> <span class="w">alien</span> <span class="w">error</span> <span class="w">message</span> <span class="s">(</span><a class="l_k" href="functions/not.html">not</a> <span class="w">generated</span> <span class="w">by</span> <span class="w">Perl</span><span class="s">)</span>.</li></ol></pre><ul>
<li><a class='view-title' id="%22my%22-variable-%25s-masks-earlier-declaration-in-same-scope"></a><strong>"my" variable %s masks earlier declaration in same scope</strong>
<p>(W) A lexical variable has been redeclared in the same scope, effectively
eliminating all access to the previous instance.  This is almost always
a typographical error.  Note that the earlier variable will still exist
until the end of the scope or until all closure referents to it are
destroyed.</p>
</li>
<li><a class='view-title' id="%25s-argument-is-not-a-HASH-element-or-slice"></a><strong>%s argument is not a HASH element or slice</strong>
<p>(F) The argument to delete() must be either a hash element, such as</p>
<pre class="verbatim"><ol><li>    <span class="i">$foo</span>{<span class="i">$bar</span>}</li><li>    <span class="i">$ref</span>-&gt;[<span class="n">12</span>]-&gt;{<span class="q">&quot;susie&quot;</span>}</li></ol></pre><p>or a hash slice, such as</p>
<pre class="verbatim"><ol><li>    <span class="i">@foo</span>{<span class="i">$bar</span><span class="cm">,</span> <span class="i">$baz</span><span class="cm">,</span> <span class="i">$xyzzy</span>}</li><li>    <span class="i">@</span>{<span class="i">$ref</span>-&gt;[<span class="n">12</span>]}{<span class="q">&quot;susie&quot;</span><span class="cm">,</span> <span class="q">&quot;queue&quot;</span>}</li></ol></pre></li>
<li><a class='view-title' id="Allocation-too-large%3a-%25lx"></a><strong>Allocation too large: %lx</strong>
<p>(X) You can't allocate more than 64K on an MS-DOS machine.</p>
</li>
<li><a class='view-title' id="Allocation-too-large"></a><strong>Allocation too large</strong>
<p>(F) You can't allocate more than 2^31+"small amount" bytes.</p>
</li>
<li><a class='view-title' id="Applying-%25s-to-%25s-will-act-on-scalar(%25s)"></a><strong>Applying %s to %s will act on scalar(%s)</strong>
<p>(W) The pattern match (//), substitution (s///), and transliteration (tr///)
operators work on scalar values.  If you apply one of them to an array
or a hash, it will convert the array or hash to a scalar value (the
length of an array or the population info of a hash) and then work on
that scalar value.  This is probably not what you meant to do.  See
<a class='function-name' href="functions/grep.html">grep</a> and <a class='function-name' href="functions/map.html">map</a> for alternatives.</p>
</li>
<li><a class='view-title' id="Attempt-to-free-nonexistent-shared-string"></a><strong>Attempt to free nonexistent shared string</strong>
<p>(P) Perl maintains a reference counted internal table of strings to
optimize the storage and access of hash keys and other strings.  This
indicates someone tried to decrement the reference count of a string
that can no longer be found in the table.</p>
</li>
<li><a class='view-title' id="Attempt-to-use-reference-as-lvalue-in-substr"></a><strong>Attempt to use reference as lvalue in substr</strong>
<p>(W) You supplied a reference as the first argument to substr() used
as an lvalue, which is pretty strange.  Perhaps you forgot to
dereference it first.  See <a class='function-name' href="functions/substr.html">substr</a>.</p>
</li>
<li><a class='view-title' id="Bareword-%22%25s%22-refers-to-nonexistent-package"></a><strong>Bareword "%s" refers to nonexistent package</strong>
<p>(W) You used a qualified bareword of the form <code class="inline"><span class="w">Foo::</span></code>
, but
the compiler saw no other uses of that namespace before that point.
Perhaps you need to predeclare a package?</p>
</li>
<li><a class='view-title' id="Can't-redefine-active-sort-subroutine-%25s"></a><strong>Can't redefine active sort subroutine %s</strong>
<p>(F) Perl optimizes the internal handling of sort subroutines and keeps
pointers into them.  You tried to redefine one such sort subroutine when it
was currently active, which is not allowed.  If you really want to do
this, you should write <code class="inline"><a class="l_k" href="functions/sort.html">sort</a> <span class="s">{</span> <span class="i">&amp;func</span> <span class="s">}</span> <span class="i">@x</span></code>
 instead of <code class="inline"><a class="l_k" href="functions/sort.html">sort</a> <span class="i">func</span> <span class="i">@x</span></code>
.</p>
</li>
<li><a class='view-title' id="Can't-use-bareword-(%22%25s%22)-as-%25s-ref-while-%22strict-refs%22-in-use"></a><strong>Can't use bareword ("%s") as %s ref while "strict refs" in use</strong>
<p>(F) Only hard references are allowed by "strict refs".  Symbolic references
are disallowed.  See <a href="perlref.html">perlref</a>.</p>
</li>
<li><a class='view-title' id="Cannot-resolve-method-%60%25s'-overloading-%60%25s'-in-package-%60%25s'"></a><strong>Cannot resolve method `%s' overloading `%s' in package `%s'</strong>
<p>(P) Internal error trying to resolve overloading specified by a method
name (as opposed to a subroutine reference).</p>
</li>
<li><a class='view-title' id="Constant-subroutine-%25s-redefined"></a><strong>Constant subroutine %s redefined</strong>
<p>(S) You redefined a subroutine which had previously been eligible for
inlining.  See <a href="perlsub.html#Constant-Functions">Constant Functions in perlsub</a> for commentary and
workarounds.</p>
</li>
<li><a class='view-title' id="Constant-subroutine-%25s-undefined"></a><strong>Constant subroutine %s undefined</strong>
<p>(S) You undefined a subroutine which had previously been eligible for
inlining.  See <a href="perlsub.html#Constant-Functions">Constant Functions in perlsub</a> for commentary and
workarounds.</p>
</li>
<li><a class='view-title' id="Copy-method-did-not-return-a-reference"></a><strong>Copy method did not return a reference</strong>
<p>(F) The method which overloads "=" is buggy. See <a href="overload.html#Copy-Constructor">Copy Constructor in overload</a>.</p>
</li>
<li><a class='view-title' id="Died"></a><strong>Died</strong>
<p>(F) You passed die() an empty string (the equivalent of <code class="inline"><a class="l_k" href="functions/die.html">die</a> <span class="q">&quot;&quot;</span></code>
) or
you called it with no args and both <code class="inline"><span class="i">$@</span></code>
 and <code class="inline"><span class="i">$_</span></code>
 were empty.</p>
</li>
<li><a class='view-title' id="Exiting-pseudo-block-via-%25s"></a><strong>Exiting pseudo-block via %s</strong>
<p>(W) You are exiting a rather special block construct (like a sort block or
subroutine) by unconventional means, such as a goto, or a loop control
statement.  See <a class='function-name' href="functions/sort.html">sort</a>.</p>
</li>
<li><a class='view-title' id="Identifier-too-long"></a><strong>Identifier too long</strong>
<p>(F) Perl limits identifiers (names for variables, functions, etc.) to
252 characters for simple names, somewhat more for compound names (like
<code class="inline"><span class="i">$A::B</span></code>
).  You've exceeded Perl's limits.  Future versions of Perl are
likely to eliminate these arbitrary limitations.</p>
</li>
<li><a class='view-title' id="Illegal-character-%25s-(carriage-return)"></a><strong>Illegal character %s (carriage return)</strong>
<p>(F) A carriage return character was found in the input.  This is an
error, and not a warning, because carriage return characters can break
multi-line strings, including here documents (e.g., <code class="inline"><a class="l_k" href="functions/print.html">print</a> <span class="h">&lt;&lt;EOF</span><span class="sc">;</span></code>
).</p>
</li>
<li><a class='view-title' id="Illegal-switch-in-PERL5OPT%3a-%25s"></a><strong>Illegal switch in PERL5OPT: %s</strong>
<p>(X) The PERL5OPT environment variable may only be used to set the
following switches: <strong>-[DIMUdmw]</strong>.</p>
</li>
<li><a class='view-title' id="Integer-overflow-in-hex-number"></a><strong>Integer overflow in hex number</strong>
<p>(S) The literal hex number you have specified is too big for your
architecture. On a 32-bit architecture the largest hex literal is
0xFFFFFFFF.</p>
</li>
<li><a class='view-title' id="Integer-overflow-in-octal-number"></a><strong>Integer overflow in octal number</strong>
<p>(S) The literal octal number you have specified is too big for your
architecture. On a 32-bit architecture the largest octal literal is
037777777777.</p>
</li>
<li><a class='view-title' id="internal-error%3a-glob-failed"></a><strong>internal error: glob failed</strong>
<p>(P) Something went wrong with the external program(s) used for <code class="inline"><a class="l_k" href="functions/glob.html">glob</a></code>
and <code class="inline"><span class="q">&lt;*.c&gt;</span></code>
.  This may mean that your csh (C shell) is
broken.  If so, you should change all of the csh-related variables in
config.sh:  If you have tcsh, make the variables refer to it as if it
were csh (e.g. <code class="inline"><span class="w">full_csh</span>=<span class="q">&#39;/usr/bin/tcsh&#39;</span></code>
); otherwise, make them all
empty (except that <code class="inline"><span class="w">d_csh</span></code>
 should be <code class="inline"><span class="q">&#39;undef&#39;</span></code>
) so that Perl will
think csh is missing.  In either case, after editing config.sh, run
<code class="inline">.<span class="q">/Configure -S</span></code>
 and rebuild Perl.</p>
</li>
<li><a class='view-title' id="Invalid-conversion-in-%25s%3a-%22%25s%22"></a><strong>Invalid conversion in %s: "%s"</strong>
<p>(W) Perl does not understand the given format conversion.
See <a class='function-name' href="functions/sprintf.html">sprintf</a>.</p>
</li>
<li><a class='view-title' id="Invalid-type-in-pack%3a-'%25s'"></a><strong>Invalid type in pack: '%s'</strong>
<p>(F) The given character is not a valid pack type.  See <a class='function-name' href="functions/pack.html">pack</a>.</p>
</li>
<li><a class='view-title' id="Invalid-type-in-unpack%3a-'%25s'"></a><strong>Invalid type in unpack: '%s'</strong>
<p>(F) The given character is not a valid unpack type.  See <a class='function-name' href="functions/unpack.html">unpack</a>.</p>
</li>
<li><a class='view-title' id="Name-%22%25s%3a%3a%25s%22-used-only-once%3a-possible-typo"></a><strong>Name "%s::%s" used only once: possible typo</strong>
<p>(W) Typographical errors often show up as unique variable names.
If you had a good reason for having a unique name, then just mention
it again somehow to suppress the message (the <code class="inline"><a class="l_k" href="functions/use.html">use</a> <span class="w">vars</span></code>
 pragma is
provided for just this purpose).</p>
</li>
<li><a class='view-title' id="Null-picture-in-formline"></a><strong>Null picture in formline</strong>
<p>(F) The first argument to formline must be a valid format picture
specification.  It was found to be empty, which probably means you
supplied it an uninitialized value.  See <a href="perlform.html">perlform</a>.</p>
</li>
<li><a class='view-title' id="Offset-outside-string"></a><strong>Offset outside string</strong>
<p>(F) You tried to do a read/write/send/recv operation with an offset
pointing outside the buffer.  This is difficult to imagine.
The sole exception to this is that <code class="inline"><a class="l_k" href="functions/sysread.html">sysread()</a></code>ing past the buffer
will extend the buffer and zero pad the new area.</p>
</li>
<li><a class='view-title' id="Out-of-memory!"></a><strong>Out of memory!</strong>
<p>(X|F) The malloc() function returned 0, indicating there was insufficient
remaining memory (or virtual memory) to satisfy the request.</p>
<p>The request was judged to be small, so the possibility to trap it
depends on the way Perl was compiled.  By default it is not trappable.
However, if compiled for this, Perl may use the contents of <code class="inline"><span class="i">$^M</span></code>
 as
an emergency pool after die()ing with this message.  In this case the
error is trappable <i>once</i>.</p>
</li>
<li><a class='view-title' id="Out-of-memory-during-request-for-%25s"></a><strong>Out of memory during request for %s</strong>
<p>(F) The malloc() function returned 0, indicating there was insufficient
remaining memory (or virtual memory) to satisfy the request. However,
the request was judged large enough (compile-time default is 64K), so
a possibility to shut down by trapping this error is granted.</p>
</li>
<li><a class='view-title' id="panic%3a-frexp"></a><strong>panic: frexp</strong>
<p>(P) The library function frexp() failed, making printf("%f") impossible.</p>
</li>
<li><a class='view-title' id="Possible-attempt-to-put-comments-in-qw()-list"></a><strong>Possible attempt to put comments in qw() list</strong>
<p>(W) qw() lists contain items separated by whitespace; as with literal
strings, comment characters are not ignored, but are instead treated
as literal data.  (You may have used different delimiters than the
parentheses shown here; braces are also frequently used.)</p>
<p>You probably wrote something like this:</p>
<pre class="verbatim"><ol><li>    <span class="i">@list</span> = <span class="q">qw(</span></li><li>        <span class="q">a # a comment</span></li><li>        <span class="q">b # another comment</span></li><li>    <span class="q">)</span><span class="sc">;</span></li></ol></pre><p>when you should have written this:</p>
<pre class="verbatim"><ol><li>    <span class="i">@list</span> = <span class="q">qw(</span></li><li>        <span class="q">a</span></li><li>        <span class="q">b</span></li><li>    <span class="q">)</span><span class="sc">;</span></li></ol></pre><p>If you really want comments, build your list the
old-fashioned way, with quotes and commas:</p>
<pre class="verbatim"><ol><li>    <span class="i">@list</span> = <span class="s">(</span></li><li>        <span class="q">&#39;a&#39;</span><span class="cm">,</span>    <span class="c"># a comment</span></li><li>        <span class="q">&#39;b&#39;</span><span class="cm">,</span>    <span class="c"># another comment</span></li><li>    <span class="s">)</span><span class="sc">;</span></li></ol></pre></li>
<li><a class='view-title' id="Possible-attempt-to-separate-words-with-commas"></a><strong>Possible attempt to separate words with commas</strong>
<p>(W) qw() lists contain items separated by whitespace; therefore commas
aren't needed to separate the items. (You may have used different
delimiters than the parentheses shown here; braces are also frequently
used.)</p>
<p>You probably wrote something like this:</p>
<pre class="verbatim"><ol><li>    <span class="q">qw! a, b, c !</span><span class="sc">;</span></li></ol></pre><p>which puts literal commas into some of the list items.  Write it without
commas if you don't want them to appear in your data:</p>
<pre class="verbatim"><ol><li>    <span class="q">qw! a b c !</span><span class="sc">;</span></li></ol></pre></li>
<li><a class='view-title' id="Scalar-value-%40%25s%7b%25s%7d-better-written-as-%24%25s%7b%25s%7d"></a><strong>Scalar value @%s{%s} better written as $%s{%s}</strong>
<p>(W) You've used a hash slice (indicated by @) to select a single element of
a hash.  Generally it's better to ask for a scalar value (indicated by $).
The difference is that <code class="inline"><span class="i">$foo</span>{<span class="i">&amp;bar</span>}</code>
 always behaves like a scalar, both when
assigning to it and when evaluating its argument, while <code class="inline"><span class="i">@foo</span>{<span class="i">&amp;bar</span>}</code>
 behaves
like a list when you assign to it, and provides a list context to its
subscript, which can do weird things if you're expecting only one subscript.</p>
</li>
<li><a class='view-title' id="Stub-found-while-resolving-method-%60%25s'-overloading-%60%25s'-in-%25s"></a><strong>Stub found while resolving method `%s' overloading `%s' in %s</strong>
<p>(P) Overloading resolution over @ISA tree may be broken by importing stubs.
Stubs should never be implicitly created, but explicit calls to <code class="inline"><span class="w">can</span></code>

may break this.</p>
</li>
<li><a class='view-title' id="Too-late-for-%22*-T*%22-option"></a><strong>Too late for "<strong>-T</strong>" option</strong>
<p>(X) The #! line (or local equivalent) in a Perl script contains the
<strong>-T</strong> option, but Perl was not invoked with <strong>-T</strong> in its argument
list.  This is an error because, by the time Perl discovers a <strong>-T</strong> in
a script, it's too late to properly taint everything from the
environment.  So Perl gives up.</p>
</li>
<li><a class='view-title' id="untie-attempted-while-%25d-inner-references-still-exist"></a><strong>untie attempted while %d inner references still exist</strong>
<p>(W) A copy of the object returned from <code class="inline"><a class="l_k" href="functions/tie.html">tie</a></code> (or <code class="inline"><a class="l_k" href="functions/tied.html">tied</a></code>) was still
valid when <code class="inline"><a class="l_k" href="functions/untie.html">untie</a></code> was called.</p>
</li>
<li><a class='view-title' id="Unrecognized-character-%25s"></a><strong>Unrecognized character %s</strong>
<p>(F) The Perl parser has no idea what to do with the specified character
in your Perl script (or eval).  Perhaps you tried to run a compressed
script, a binary program, or a directory as a Perl program.</p>
</li>
<li><a class='view-title' id="Unsupported-function-fork"></a><strong>Unsupported function fork</strong>
<p>(F) Your version of executable does not support forking.</p>
<p>Note that under some systems, like OS/2, there may be different flavors of
Perl executables, some of which may support fork, some not. Try changing
the name you call Perl by to <code class="inline"><span class="w">perl_</span></code>
, <code class="inline"><span class="w">perl__</span></code>
, and so on.</p>
</li>
<li><a class='view-title' id="Use-of-%22%24%24%3cdigit%3e%22-to-mean-%22%24%7b%24%7d%3cdigit%3e%22-is-deprecated"></a><strong>Use of "$$&lt;digit&gt;" to mean "${$}&lt;digit&gt;" is deprecated</strong>
<p>(D) Perl versions before 5.004 misinterpreted any type marker followed
by "$" and a digit.  For example, "$$0" was incorrectly taken to mean
"${$}0" instead of "${$0}".  This bug is (mostly) fixed in Perl 5.004.</p>
<p>However, the developers of Perl 5.004 could not fix this bug completely,
because at least two widely-used modules depend on the old meaning of
"$$0" in a string.  So Perl 5.004 still interprets "$$&lt;digit&gt;" in the
old (broken) way inside strings; but it generates this message as a
warning.  And in Perl 5.005, this special treatment will cease.</p>
</li>
<li><a class='view-title' id="Value-of-%25s-can-be-%220%22%3b-test-with-defined()"></a><strong>Value of %s can be "0"; test with defined()</strong>
<p>(W) In a conditional expression, you used &lt;HANDLE&gt;, &lt;*&gt; (glob), <code class="inline"><a class="l_k" href="functions/each.html">each()</a></code>,
or <code class="inline"><a class="l_k" href="functions/readdir.html">readdir()</a></code> as a boolean value.  Each of these constructs can return a
value of "0"; that would make the conditional expression false, which is
probably not what you intended.  When using these constructs in conditional
expressions, test their values with the <code class="inline"><a class="l_k" href="functions/defined.html">defined</a></code> operator.</p>
</li>
<li><a class='view-title' id="Variable-%22%25s%22-may-be-unavailable"></a><strong>Variable "%s" may be unavailable</strong>
<p>(W) An inner (nested) <i>anonymous</i> subroutine is inside a <i>named</i>
subroutine, and outside that is another subroutine; and the anonymous
(innermost) subroutine is referencing a lexical variable defined in
the outermost subroutine.  For example:</p>
<pre class="verbatim"><ol><li><a name="outermost"></a><a name="middle"></a>   sub <span class="m">outermost</span> <span class="s">{</span> <a class="l_k" href="functions/my.html">my</a> <span class="i">$a</span><span class="sc">;</span> sub <span class="m">middle</span> <span class="s">{</span> <a class="l_k" href="functions/sub.html">sub</a> <span class="s">{</span> <span class="i">$a</span> <span class="s">}</span> <span class="s">}</span> <span class="s">}</span></li></ol></pre><p>If the anonymous subroutine is called or referenced (directly or
indirectly) from the outermost subroutine, it will share the variable
as you would expect.  But if the anonymous subroutine is called or
referenced when the outermost subroutine is not active, it will see
the value of the shared variable as it was before and during the
*first* call to the outermost subroutine, which is probably not what
you want.</p>
<p>In these circumstances, it is usually best to make the middle
subroutine anonymous, using the <code class="inline"><a class="l_k" href="functions/sub.html">sub</a> <span class="s">{</span><span class="s">}</span></code>
 syntax.  Perl has specific
support for shared variables in nested anonymous subroutines; a named
subroutine in between interferes with this feature.</p>
</li>
<li><a class='view-title' id="Variable-%22%25s%22-will-not-stay-shared"></a><strong>Variable "%s" will not stay shared</strong>
<p>(W) An inner (nested) <i>named</i> subroutine is referencing a lexical
variable defined in an outer subroutine.</p>
<p>When the inner subroutine is called, it will probably see the value of
the outer subroutine's variable as it was before and during the
*first* call to the outer subroutine; in this case, after the first
call to the outer subroutine is complete, the inner and outer
subroutines will no longer share a common value for the variable.  In
other words, the variable will no longer be shared.</p>
<p>Furthermore, if the outer subroutine is anonymous and references a
lexical variable outside itself, then the outer and inner subroutines
will <i>never</i> share the given variable.</p>
<p>This problem can usually be solved by making the inner subroutine
anonymous, using the <code class="inline"><a class="l_k" href="functions/sub.html">sub</a> <span class="s">{</span><span class="s">}</span></code>
 syntax.  When inner anonymous subs that
reference variables in outer subroutines are called or referenced,
they are automatically rebound to the current values of such
variables.</p>
</li>
<li><a class='view-title' id="Warning%3a-something's-wrong"></a><strong>Warning: something's wrong</strong>
<p>(W) You passed warn() an empty string (the equivalent of <code class="inline"><a class="l_k" href="functions/warn.html">warn</a> <span class="q">&quot;&quot;</span></code>
) or
you called it with no args and <code class="inline"><span class="i">$_</span></code>
 was empty.</p>
</li>
<li><a class='view-title' id="Ill-formed-logical-name-%7c%25s%7c-in-prime_env_iter"></a><strong>Ill-formed logical name |%s| in prime_env_iter</strong>
<p>(W) A warning peculiar to VMS.  A logical name was encountered when preparing
to iterate over %ENV which violates the syntactic rules governing logical
names.  Since it cannot be translated normally, it is skipped, and will not
appear in %ENV.  This may be a benign occurrence, as some software packages
might directly modify logical name tables and introduce nonstandard names,
or it may indicate that a logical name table has been corrupted.</p>
</li>
<li><a class='view-title' id="Got-an-error-from-DosAllocMem"></a><strong>Got an error from DosAllocMem</strong>
<p>(P) An error peculiar to OS/2.  Most probably you're using an obsolete
version of Perl, and this should not happen anyway.</p>
</li>
<li><a class='view-title' id="Malformed-PERLLIB_PREFIX"></a><strong>Malformed PERLLIB_PREFIX</strong>
<p>(F) An error peculiar to OS/2.  PERLLIB_PREFIX should be of the form</p>
<pre class="verbatim"><ol><li>    <span class="w">prefix1</span><span class="sc">;</span><span class="w">prefix2</span></li></ol></pre><p>or</p>
<pre class="verbatim"><ol><li>    <span class="w">prefix1</span> <span class="w">prefix2</span></li></ol></pre><p>with nonempty prefix1 and prefix2.  If <code class="inline"><span class="w">prefix1</span></code>
 is indeed a prefix
of a builtin library search path, prefix2 is substituted.  The error
may appear if components are not found, or are too long.  See
"PERLLIB_PREFIX" in <i>README.os2</i>.</p>
</li>
<li><a class='view-title' id="PERL_SH_DIR-too-long"></a><strong>PERL_SH_DIR too long</strong>
<p>(F) An error peculiar to OS/2. PERL_SH_DIR is the directory to find the
<code class="inline"><span class="w">sh</span></code>
-shell in.  See "PERL_SH_DIR" in <i>README.os2</i>.</p>
</li>
<li><a class='view-title' id="Process-terminated-by-SIG%25s"></a><strong>Process terminated by SIG%s</strong>
<p>(W) This is a standard message issued by OS/2 applications, while *nix
applications die in silence.  It is considered a feature of the OS/2
port.  One can easily disable this by appropriate sighandlers, see
<a href="perlipc.html#Signals">Signals in perlipc</a>.  See also "Process terminated by SIGTERM/SIGINT"
in <i>README.os2</i>.</p>
</li>
</ul>
<a class='view-head1' id="BUGS"></a><h2 class='h2' >BUGS</h2>
<p>If you find what you think is a bug, you might check the headers of
recently posted articles in the comp.lang.perl.misc newsgroup.
There may also be information at <a href="http://www.perl.com/perl/">http://www.perl.com/perl/</a> , the Perl
Home Page.</p>
<p>If you believe you have an unreported bug, please run the <strong>perlbug</strong>
program included with your release.  Make sure you trim your bug down
to a tiny but sufficient test case.  Your bug report, along with the
output of <code class="inline"><span class="w">perl</span> -<span class="w">V</span></code>
, will be sent off to &lt;<i>perlbug@perl.com</i>&gt; to be
analysed by the Perl porting team.</p>
<a class='view-head1' id="SEE-ALSO"></a><h2 class='h2' >SEE ALSO</h2>
<p>The <i>Changes</i> file for exhaustive details on what changed.</p>
<p>The <i>INSTALL</i> file for how to build Perl.  This file has been
significantly updated for 5.004, so even veteran users should
look through it.</p>
<p>The <i>README</i> file for general stuff.</p>
<p>The <i>Copying</i> file for copyright information.</p>
<a class='view-head1' id="HISTORY"></a><h2 class='h2' >HISTORY</h2>
<p>Constructed by Tom Christiansen, grabbing material with permission
from innumerable contributors, with kibitzing by more than a few Perl
porters.</p>
<p>Last update: Wed May 14 11:14:09 EDT 1997</p>




      <ul><li><a href="#NAME">NAME</a></li><li><a href="#DESCRIPTION">DESCRIPTION</a></li><li><a href="#Supported-Environments">Supported Environments</a></li><li><a href="#Core-Changes">Core Changes</a></li><ul><li><a href="#List-assignment-to-%25ENV-works">List assignment to %ENV works</a></li><li><a href="#Change-to-%22Can't-locate-Foo.pm-in-%40INC%22-error">Change to "Can't locate Foo.pm in @INC" error</a></li><li><a href="#Compilation-option%3a-Binary-compatibility-with-5.003">Compilation option: Binary compatibility with 5.003</a></li><li><a href="#%24PERL5OPT-environment-variable">$PERL5OPT environment variable</a></li><li><a href="#Limitations-on-*-M*%2c-*-m*%2c-and-*-T*-options">Limitations on *-M*, *-m*, and *-T* options</a></li><li><a href="#More-precise-warnings">More precise warnings</a></li><li><a href="#Deprecated%3a-Inherited-AUTOLOAD-for-non-methods">Deprecated: Inherited AUTOLOAD for non-methods</a></li><li><a href="#Previously-deprecated-%25OVERLOAD-is-no-longer-usable">Previously deprecated %OVERLOAD is no longer usable</a></li><li><a href="#Subroutine-arguments-created-only-when-they're-modified">Subroutine arguments created only when they're modified</a></li><li><a href="#Group-vector-changeable-with-%24)">Group vector changeable with $)</a></li><li><a href="#Fixed-parsing-of-%24%24%3cdigit%3e%2c-%26%24%3cdigit%3e%2c-etc.">Fixed parsing of $$<digit>, &$<digit>, etc.</a></li><li><a href="#Fixed-localization-of-%24%3cdigit%3e%2c-%24%26%2c-etc.">Fixed localization of $<digit>, $&, etc.</a></li><li><a href="#No-resetting-of-%24.-on-implicit-close">No resetting of $. on implicit close</a></li><li><a href="#wantarray-may-return-undef">wantarray may return undef</a></li><li><a href="#eval-EXPR-determines-value-of-EXPR-in-scalar-context">eval EXPR determines value of EXPR in scalar context</a></li><li><a href="#Changes-to-tainting-checks">Changes to tainting checks</a></li><li><a href="#New-Opcode-module-and-revised-Safe-module">New Opcode module and revised Safe module</a></li><li><a href="#Embedding-improvements">Embedding improvements</a></li><li><a href="#Internal-change%3a-FileHandle-class-based-on-IO%3a%3a*-classes">Internal change: FileHandle class based on IO::* classes</a></li><li><a href="#Internal-change%3a-PerlIO-abstraction-interface">Internal change: PerlIO abstraction interface</a></li><li><a href="#New-and-changed-syntax">New and changed syntax</a></li><li><a href="#New-and-changed-builtin-constants">New and changed builtin constants</a></li><li><a href="#New-and-changed-builtin-variables">New and changed builtin variables</a></li><li><a href="#New-and-changed-builtin-functions">New and changed builtin functions</a></li><li><a href="#New-builtin-methods">New builtin methods</a></li><li><a href="#TIEHANDLE-now-supported">TIEHANDLE now supported</a></li><li><a href="#Malloc-enhancements">Malloc enhancements</a></li><li><a href="#Miscellaneous-efficiency-enhancements">Miscellaneous efficiency enhancements</a></li></ul><li><a href="#Support-for-More-Operating-Systems">Support for More Operating Systems</a></li><ul><li><a href="#Win32">Win32</a></li><li><a href="#Plan-9">Plan 9</a></li><li><a href="#QNX">QNX</a></li><li><a href="#AmigaOS">AmigaOS</a></li></ul><li><a href="#Pragmata">Pragmata</a></li><li><a href="#Modules">Modules</a></li><ul><li><a href="#Required-Updates">Required Updates</a></li><li><a href="#Installation-directories">Installation directories</a></li><li><a href="#Module-information-summary">Module information summary</a></li><li><a href="#Fcntl">Fcntl</a></li><li><a href="#IO">IO</a></li><li><a href="#Math%3a%3aComplex">Math::Complex</a></li><li><a href="#Math%3a%3aTrig">Math::Trig</a></li><li><a href="#DB_File">DB_File</a></li><li><a href="#Net%3a%3aPing">Net::Ping</a></li><li><a href="#Object-oriented-overrides-for-builtin-operators">Object-oriented overrides for builtin operators</a></li></ul><li><a href="#Utility-Changes">Utility Changes</a></li><ul><li><a href="#pod2html">pod2html</a></li><li><a href="#xsubpp">xsubpp</a></li></ul><li><a href="#C-Language-API-Changes">C Language API Changes</a></li><li><a href="#Documentation-Changes">Documentation Changes</a></li><li><a href="#New-Diagnostics">New Diagnostics</a></li><li><a href="#BUGS">BUGS</a></li><li><a href="#SEE-ALSO">SEE ALSO</a></li><li><a href="#HISTORY">HISTORY</a></li></ul>


                  </div>
                </article>
              </div>
            </div>
          </main>
        </div>
           <footer class="footer row bg-light pt-5 pb-5">
       <div class="col-sm-10 offset-sm-1 col-xl-8 offset-xl-2">
           <div class="row">
               <div class="col-md-4">
                   <ul class="list-unstyled">
                       <li>
                           <h4>Site info</h4>
                       </li>
                       <li>Docs mantained by
                           <a href="//lists.perl.org/list/perl5-porters.html"
                               rel="noopener">Perl 5 Porters</a>
                       </li>
                       <li>Perldoc site development sponsored by
                           <a href="//opusvl.com" rel="noopener">
                           <img style="margin: 20px 20px 5px 10px" class="opus-logo" src="/public/img/opusvl_logo.svg" alt="OpusVL Logo">
                        </a>
                    <li><span class="about_perldoc"><a href="//about.html">About PerlDOC</a></span>
                    </li>
                       </li>
                   </ul>
               </div>
               <div class="col-md-8">
                   <div class="row">
                       <div class="col-md-6 col-lg-3">
                           <ul class=" list-unstyled">
                               <li>
                                   <h4>Manuals</h4>
                               </li>
                               <li>
                                   <a
                                       href="/5.16.1/index-overview.html">Overview</a>
                               </li>
                               <li>
                                   <a
                                       href="/5.16.1/index-tutorials.html">Tutorials</a>
                               </li>
                               <li>
                                   <a href="/5.16.1/index-faq.html">FAQs</a>
                               </li>
                               <li>
                                   <a
                                       href="/5.16.1/index-history.html">Changes</a>
                               </li>
                           </ul>
                       </div>
                       <div class="col-md-6 col-lg-3">
                           <ul class=" list-unstyled">
                               <li>
                                   <h4>Reference</h4>
                               </li>
                               <li>
                                   <a
                                       href="/5.16.1/index-language.html">Language</a>
                               </li>
                               <li>
                                   <a
                                       href="/5.16.1/index-functions.html">Functions</a>
                               </li>
                               <li>
                                   <a
                                       href="/5.16.1/perlop.html">Operators</a>
                               </li>
                               <li>
                                   <a
                                       href="/5.16.1/perlvar.html">Variables</a>
                               </li>
                           </ul>
                       </div>
                       <div class="col-md-6 col-lg-3">
                           <ul class=" list-unstyled">
                               <li>
                                   <h4>Modules</h4>
                               </li>
                               <li>
                                   <a
                                       href="/5.16.1/index-modules-A.html">Modules</a>
                               </li>
                               <li>
                                   <a
                                       href="/5.16.1/index-pragmas.html">Pragmas</a>
                               </li>
                               <li>
                                   <a
                                       href="/5.16.1/index-utilities.html">Utilities</a>
                               </li>
                           </ul>
                       </div>
                       <div class="col-md-6 col-lg-3">
                           <ul class=" list-unstyled">
                               <li>
                                   <h4>Misc</h4>
                               </li>
                               <li>
                                   <a
                                       href="/5.16.1/index-licence.html">License</a>
                               </li>
                               <li>
                                   <a
                                       href="/5.16.1/index-internals.html">Internals</a>
                               </li>
                               <li>
                                   <a
                                       href="/5.16.1/index-platforms.html">Platforms</a>
                               </li>
                            <li>
                                <a
                                    href="/5.16.1/index-about.html">About</a>
                            </li>
                           </ul>
                       </div>
                   </div>
               </div>
               <div class=" col-12 footer-inf text-center">
                   <small>perldoc.perl.org - Official documentation for the Perl
                       programming language</small>
               </div>
           </div>
       </div>
   </footer>

        	<div class="beta-wrapper beta-bottom-right ">
		<div class="beta beta-blue  ">
			<a class="beta-link "
				href="//github.com/OpusVL/perldoc.perl.org/issues/new" rel="noopener">
				<span class="beta-text">
					This website is a Beta release.
				</span>
				<span class="beta-text">
					For any issues please raise a ticket on GitHub
				</span>
			</a>
		</div>
	</div>

        <script src="/public/js/main.min.js"></script>
      </body>

      </html>
