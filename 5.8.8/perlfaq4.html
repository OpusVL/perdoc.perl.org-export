      
      
      
      

      <!DOCTYPE html>
      <html lang="en">

      <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="description" content="perlfaq4 - perldoc.perl.org">
        <link rel="icon" href="/public/img/favicon.ico">
        <title>perlfaq4 - perldoc.perl.org</title>
        <link href="/public/css/main.min.css" rel="stylesheet">
        <link rel="canonical" href="/perlfaq4.html">
        <link
          href='https://fonts.googleapis.com/css?family=Lato:400,100,300,700,900'
          rel='stylesheet' type='text/css'>
        <script>
          window.ga = window.ga || function () {
            (ga.q = ga.q || []).push(arguments)
          };
          ga.l = +new Date;
          ga('create', 'UA-1892152-2', 'auto'); // JJ's account
          ga('create', 'UA-50555-3', 'auto', 'perlOrg'); // perl.org account
          ga('require', 'outboundLinkTracker', {
            events: ['click', 'auxclick', 'contextmenu'],
          });
          ga('require', 'maxScrollTracker');
          ga('send', 'pageview');
          ga('perlOrg.send', 'pageview');
        </script>
        <script async src="https://www.google-analytics.com/analytics.js">
        </script>
        <script async src="/public/js/tracking.min.js"></script>
      </head>

      <body class="body container-fluid ">
        <div class="wrapper">

          <nav
    class="navbar navbar-dark bg-primary bg-perl fixed-top justify-content-between navbar-expand-lg">
    <a href="#content" class="skippy sr-only sr-only-focusable">
        <span class=' skippy-text'>Skip to main content</span>
    </a>
    <a class="navbar-brand" href="/">
        <img class="logo" src="/public/img/logo_perl_doc.svg"
            alt="Perl Documentation Logo" />
    </a>
    <button class="navbar-toggler" type="button" data-toggle="collapse"
        data-target="#navbar" aria-controls="navbar" aria-expanded="false"
        aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
    </button>
    <div id="navbar" class="collapse navbar-collapse ">
        <ul class="navbar-nav ml-auto navbar-right">
            <form class="nav-item dropdown search-wrapper">
                <input type="text" id='searchinput' aria-describedby='navbarDropdown5'
                    placeholder="Type query" class='search-input-field' value=''>

                <button href="#" data-toggle='dropdown' type="button"
                    aria-haspopup="true" aria-expanded='false' id="navbarDropdown5"
                    class="nav-link dropdown-toggle search-link">
                    <object tabindex='-1' focusable="false" class='search-icon'
                        data="/public/img/search.svg" type="image/svg+xml"
                        name='search icon'>search
                        icon</object>
                </button>
                <div class="dropdown-menu" aria-labelledby="navbarDropdown5"
                    id='search-results'>
                    <p class='dropdown-item major-version'>
                        No results
                    </p>
                </div>
            </form>
            <li class="nav-item dropdown">
                <a id="navbarDropdown" href="#" class="nav-link dropdown-toggle"
                    data-toggle="dropdown" role="button" aria-haspopup="true"
                    aria-expanded="false">Perl versions</a>
                <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                    
                        <p class='dropdown-item major-version'>
                            5.32
                        </p>
                        
                        <a class='dropdown-item minor-version' href="/5.32.0/">5.32.0</a>
                        
                        
                        <div class="dropdown-divider"></div>
                        
                    
                        <p class='dropdown-item major-version'>
                            5.30
                        </p>
                        
                        <a class='dropdown-item minor-version' href="/5.30.3/">5.30.3</a>
                        
                        <a class='dropdown-item minor-version' href="/5.30.2/">5.30.2</a>
                        
                        <a class='dropdown-item minor-version' href="/5.30.1/">5.30.1</a>
                        
                        <a class='dropdown-item minor-version' href="/5.30.0/">5.30.0</a>
                        
                        
                        <div class="dropdown-divider"></div>
                        
                    
                        <p class='dropdown-item major-version'>
                            5.28
                        </p>
                        
                        <a class='dropdown-item minor-version' href="/5.28.3/">5.28.3</a>
                        
                        <a class='dropdown-item minor-version' href="/5.28.2/">5.28.2</a>
                        
                        <a class='dropdown-item minor-version' href="/5.28.1/">5.28.1</a>
                        
                        <a class='dropdown-item minor-version' href="/5.28.0/">5.28.0</a>
                        
                        
                        <div class="dropdown-divider"></div>
                        
                    
                        <p class='dropdown-item major-version'>
                            5.26
                        </p>
                        
                        <a class='dropdown-item minor-version' href="/5.26.3/">5.26.3</a>
                        
                        <a class='dropdown-item minor-version' href="/5.26.2/">5.26.2</a>
                        
                        <a class='dropdown-item minor-version' href="/5.26.1/">5.26.1</a>
                        
                        <a class='dropdown-item minor-version' href="/5.26.0/">5.26.0</a>
                        
                        
                        <div class="dropdown-divider"></div>
                        
                    
                        <p class='dropdown-item major-version'>
                            5.24
                        </p>
                        
                        <a class='dropdown-item minor-version' href="/5.24.4/">5.24.4</a>
                        
                        <a class='dropdown-item minor-version' href="/5.24.3/">5.24.3</a>
                        
                        <a class='dropdown-item minor-version' href="/5.24.2/">5.24.2</a>
                        
                        <a class='dropdown-item minor-version' href="/5.24.1/">5.24.1</a>
                        
                        <a class='dropdown-item minor-version' href="/5.24.0/">5.24.0</a>
                        
                        
                        <div class="dropdown-divider"></div>
                        
                    
                        <p class='dropdown-item major-version'>
                            5.22
                        </p>
                        
                        <a class='dropdown-item minor-version' href="/5.22.4/">5.22.4</a>
                        
                        <a class='dropdown-item minor-version' href="/5.22.3/">5.22.3</a>
                        
                        <a class='dropdown-item minor-version' href="/5.22.2/">5.22.2</a>
                        
                        <a class='dropdown-item minor-version' href="/5.22.1/">5.22.1</a>
                        
                        <a class='dropdown-item minor-version' href="/5.22.0/">5.22.0</a>
                        
                        
                        <div class="dropdown-divider"></div>
                        
                    
                        <p class='dropdown-item major-version'>
                            5.20
                        </p>
                        
                        <a class='dropdown-item minor-version' href="/5.20.3/">5.20.3</a>
                        
                        <a class='dropdown-item minor-version' href="/5.20.2/">5.20.2</a>
                        
                        <a class='dropdown-item minor-version' href="/5.20.1/">5.20.1</a>
                        
                        <a class='dropdown-item minor-version' href="/5.20.0/">5.20.0</a>
                        
                        
                        <div class="dropdown-divider"></div>
                        
                    
                        <p class='dropdown-item major-version'>
                            5.18
                        </p>
                        
                        <a class='dropdown-item minor-version' href="/5.18.4/">5.18.4</a>
                        
                        <a class='dropdown-item minor-version' href="/5.18.3/">5.18.3</a>
                        
                        <a class='dropdown-item minor-version' href="/5.18.2/">5.18.2</a>
                        
                        <a class='dropdown-item minor-version' href="/5.18.1/">5.18.1</a>
                        
                        <a class='dropdown-item minor-version' href="/5.18.0/">5.18.0</a>
                        
                        
                        <div class="dropdown-divider"></div>
                        
                    
                        <p class='dropdown-item major-version'>
                            5.16
                        </p>
                        
                        <a class='dropdown-item minor-version' href="/5.16.3/">5.16.3</a>
                        
                        <a class='dropdown-item minor-version' href="/5.16.2/">5.16.2</a>
                        
                        <a class='dropdown-item minor-version' href="/5.16.1/">5.16.1</a>
                        
                        <a class='dropdown-item minor-version' href="/5.16.0/">5.16.0</a>
                        
                        
                        <div class="dropdown-divider"></div>
                        
                    
                        <p class='dropdown-item major-version'>
                            5.14
                        </p>
                        
                        <a class='dropdown-item minor-version' href="/5.14.4/">5.14.4</a>
                        
                        <a class='dropdown-item minor-version' href="/5.14.3/">5.14.3</a>
                        
                        <a class='dropdown-item minor-version' href="/5.14.2/">5.14.2</a>
                        
                        <a class='dropdown-item minor-version' href="/5.14.1/">5.14.1</a>
                        
                        <a class='dropdown-item minor-version' href="/5.14.0/">5.14.0</a>
                        
                        
                        <div class="dropdown-divider"></div>
                        
                    
                        <p class='dropdown-item major-version'>
                            5.12
                        </p>
                        
                        <a class='dropdown-item minor-version' href="/5.12.5/">5.12.5</a>
                        
                        <a class='dropdown-item minor-version' href="/5.12.4/">5.12.4</a>
                        
                        <a class='dropdown-item minor-version' href="/5.12.3/">5.12.3</a>
                        
                        <a class='dropdown-item minor-version' href="/5.12.2/">5.12.2</a>
                        
                        <a class='dropdown-item minor-version' href="/5.12.1/">5.12.1</a>
                        
                        <a class='dropdown-item minor-version' href="/5.12.0/">5.12.0</a>
                        
                        
                        <div class="dropdown-divider"></div>
                        
                    
                        <p class='dropdown-item major-version'>
                            5.10
                        </p>
                        
                        <a class='dropdown-item minor-version' href="/5.10.1/">5.10.1</a>
                        
                        <a class='dropdown-item minor-version' href="/5.10.0/">5.10.0</a>
                        
                        
                        <div class="dropdown-divider"></div>
                        
                    
                        <p class='dropdown-item major-version'>
                            5.8
                        </p>
                        
                        <a class='dropdown-item minor-version' href="/5.8.9/">5.8.9</a>
                        
                        <a class='dropdown-item minor-version' href="/5.8.8/">5.8.8</a>
                        
                        <a class='dropdown-item minor-version' href="/5.8.7/">5.8.7</a>
                        
                        <a class='dropdown-item minor-version' href="/5.8.6/">5.8.6</a>
                        
                        <a class='dropdown-item minor-version' href="/5.8.5/">5.8.5</a>
                        
                        <a class='dropdown-item minor-version' href="/5.8.4/">5.8.4</a>
                        
                        <a class='dropdown-item minor-version' href="/5.8.3/">5.8.3</a>
                        
                        <a class='dropdown-item minor-version' href="/5.8.2/">5.8.2</a>
                        
                        <a class='dropdown-item minor-version' href="/5.8.1/">5.8.1</a>
                        
                        <a class='dropdown-item minor-version' href="/5.8.0/">5.8.0</a>
                        
                        
                        <div class="dropdown-divider"></div>
                        
                    
                        <p class='dropdown-item major-version'>
                            5.6
                        </p>
                        
                        <a class='dropdown-item minor-version' href="/5.6.2/">5.6.2</a>
                        
                        <a class='dropdown-item minor-version' href="/5.6.1/">5.6.1</a>
                        
                        <a class='dropdown-item minor-version' href="/5.6.0/">5.6.0</a>
                        
                        
                    
                </div>
            </li>
            <li class="nav-item dropdown">
                <a id="navbarDropdown1" href="#" class="dropdown-toggle nav-link"
                    data-toggle="dropdown" role="button" aria-haspopup="true"
                    aria-expanded="false">Manuals</a>
                <div class="dropdown-menu" aria-labelledby="navbarDropdown1">
                    <a class="dropdown-item"
                        href="/5.8.8/index-overview.html">Overview</a>
                    <a class="dropdown-item"
                        href="/5.8.8/index-tutorials.html">Tutorials</a>
                    <a class="dropdown-item"
                        href="/5.8.8/index-faq.html">FAQs</a>
                    <a class="dropdown-item"
                        href="/5.8.8/index-history.html">Changes</a>
                    <a class="dropdown-item"
                        href="/5.8.8/index-licence.html">License</a>
                    <a class="dropdown-item"
                        href="/5.8.8/index-language.html">Language</a>
                    <a class="dropdown-item"
                        href="/5.8.8/index-functions.html">Functions</a>
                    <a class="dropdown-item"
                        href="/5.8.8/perlop.html">Operators</a>
                    <a class="dropdown-item"
                        href="/5.8.8/perlvar.html">Variables</a>
                    <a class="dropdown-item"
                        href="/5.8.8/index-pragmas.html">Pragmas</a>
                    <a class="dropdown-item"
                        href="/5.8.8/index-utilities.html">Utilities</a>
                    <a class="dropdown-item"
                        href="/5.8.8/index-internals.html">Internals</a>
                    <a class="dropdown-item"
                        href="/5.8.8/index-platforms.html">Platforms</a>
                </div>
            </li>
            <li class="nav-item dropdown">
                <a id="navbarDropdown3" href="#" class="nav-link dropdown-toggle "
                    data-toggle="dropdown" role="button" aria-haspopup="true"
                    aria-expanded="false">Modules</a>
                <div aria-labelledby="navbarDropdown3"
                    class="dropdown-menu letters-wrap">
                    <!--<a class="dropdown-item"
                        href="/5.8.8/index-modules.html">A-Z</a>
                    <a class="dropdown-item"
                        href="/5.8.8/index-modules-by-cat.html">By
                        Category</a>-->
                    <div class="dropdown-divider"></div>
                    <div class="letter-container">
                        <a class="dropdown-item letters"
                            href="/5.8.8/index-modules-A.html">A</a>
                        <a class="dropdown-item letters"
                            href="/5.8.8/index-modules-B.html">B</a>
                        <a class="dropdown-item letters"
                            href="/5.8.8/index-modules-C.html">C</a>
                        <a class="dropdown-item letters"
                            href="/5.8.8/index-modules-D.html">D</a>
                        <a class="dropdown-item letters"
                            href="/5.8.8/index-modules-E.html">E</a>
                        <a class="dropdown-item letters"
                            href="/5.8.8/index-modules-F.html">F</a>
                        <a class="dropdown-item letters"
                            href="/5.8.8/index-modules-G.html">G</a>
                        <a class="dropdown-item letters"
                            href="/5.8.8/index-modules-H.html">H</a>
                        <a class="dropdown-item letters"
                            href="/5.8.8/index-modules-I.html">I</a>
                        <a class="dropdown-item letters"
                            href="/5.8.8/index-modules-J.html">J</a>
                        <a class="dropdown-item letters"
                            href="/5.8.8/index-modules-K.html">K</a>
                        <a class="dropdown-item letters"
                            href="/5.8.8/index-modules-L.html">L</a>
                        <a class="dropdown-item letters"
                            href="/5.8.8/index-modules-M.html">M</a>
                        <a class="dropdown-item letters"
                            href="/5.8.8/index-modules-N.html">N</a>
                        <a class="dropdown-item letters"
                            href="/5.8.8/index-modules-O.html">O</a>
                        <a class="dropdown-item letters"
                            href="/5.8.8/index-modules-P.html">P</a>
                        <a class="dropdown-item letters"
                            href="/5.8.8/index-modules-Q.html">Q</a>
                        <a class="dropdown-item letters"
                            href="/5.8.8/index-modules-R.html">R</a>
                        <a class="dropdown-item letters"
                            href="/5.8.8/index-modules-S.html">S</a>
                        <a class="dropdown-item letters"
                            href="/5.8.8/index-modules-T.html">T</a>
                        <a class="dropdown-item letters"
                            href="/5.8.8/index-modules-U.html">U</a>
                        <a class="dropdown-item letters"
                            href="/5.8.8/index-modules-V.html">V</a>
                        <a class="dropdown-item letters"
                            href="/5.8.8/index-modules-W.html">W</a>
                        <a class="dropdown-item letters"
                            href="/5.8.8/index-modules-X.html">X</a>
                        <a class="dropdown-item letters"
                            href="/5.8.8/index-modules-Y.html">Y</a>
                        <a class="dropdown-item letters"
                            href="/5.8.8/index-modules-Z.html">Z</a>
                    </div>
                </div>
            </li>
            <li class="nav-item dropdown">
                <a id="navbarDropdown4" href="#" class="nav-link dropdown-toggle "
                    data-toggle="dropdown" role="button" aria-haspopup="true"
                    aria-expanded="false">Functions</a>
                <div aria-labelledby="navbarDropdown4"
                    class="dropdown-menu letters-wrap">
                    <a class="dropdown-item"
                        href="/5.8.8/index-functions.html">A-Z</a>
                    <a class="dropdown-item"
                        href="/5.8.8/index-functions-by-cat.html">By
                        Category</a>
                    <div class="dropdown-divider"></div>
                    <div class="letter-container">
                        <a class="dropdown-item letters"
                            href="/5.8.8/index-functions.html#A">A</a>
                        <a class="dropdown-item letters"
                            href="/5.8.8/index-functions.html#B">B</a>
                        <a class="dropdown-item letters"
                            href="/5.8.8/index-functions.html#C">C</a>
                        <a class="dropdown-item letters"
                            href="/5.8.8/index-functions.html#D">D</a>
                        <a class="dropdown-item letters"
                            href="/5.8.8/index-functions.html#E">E</a>
                        <a class="dropdown-item letters"
                            href="/5.8.8/index-functions.html#F">F</a>
                        <a class="dropdown-item letters"
                            href="/5.8.8/index-functions.html#G">G</a>
                        <a class="dropdown-item letters"
                            href="/5.8.8/index-functions.html#H">H</a>
                        <a class="dropdown-item letters"
                            href="/5.8.8/index-functions.html#I">I</a>
                        <a class="dropdown-item letters"
                            href="/5.8.8/index-functions.html#J">J</a>
                        <a class="dropdown-item letters"
                            href="/5.8.8/index-functions.html#K">K</a>
                        <a class="dropdown-item letters"
                            href="/5.8.8/index-functions.html#L">L</a>
                        <a class="dropdown-item letters"
                            href="/5.8.8/index-functions.html#M">M</a>
                        <a class="dropdown-item letters"
                            href="/5.8.8/index-functions.html#N">N</a>
                        <a class="dropdown-item letters"
                            href="/5.8.8/index-functions.html#O">O</a>
                        <a class="dropdown-item letters"
                            href="/5.8.8/index-functions.html#P">P</a>
                        <a class="dropdown-item letters"
                            href="/5.8.8/index-functions.html#Q">Q</a>
                        <a class="dropdown-item letters"
                            href="/5.8.8/index-functions.html#R">R</a>
                        <a class="dropdown-item letters"
                            href="/5.8.8/index-functions.html#S">S</a>
                        <a class="dropdown-item letters"
                            href="/5.8.8/index-functions.html#T">T</a>
                        <a class="dropdown-item letters"
                            href="/5.8.8/index-functions.html#U">U</a>
                        <a class="dropdown-item letters"
                            href="/5.8.8/index-functions.html#V">V</a>
                        <a class="dropdown-item letters"
                            href="/5.8.8/index-functions.html#W">W</a>
                        <a class="dropdown-item letters"
                            href="/5.8.8/index-functions.html#X">X</a>
                        <a class="dropdown-item letters"
                            href="/5.8.8/index-functions.html#Y">Y</a>
                        <a class="dropdown-item letters"
                            href="/5.8.8/index-functions.html#Z">Z</a>
                    </div>
                </div>
            </li>
        </ul>
    </div>
    <!--/.nav-collapse -->
</nav>


          <main class="row main-content pb-5 pt-5" id='content'>
            <div class="col-sm-10 offset-sm-1 col-xl-8 offset-xl-2">
              <div class="row">
                <div class="col-sm-12">
                  <div id="breadcrumbs">
                      
    <a href="index.html">Home</a>&nbsp; &gt;
    
      
        <a href="index-faq.html">FAQs</a> &gt;
      
    
    perlfaq4
  

                  </div>
                </div>
              </div>
              <div class="row">
                <article class="col-sm-12 content">
                  <div class="documentation-wrapper">
                    <div id="perl_version">
                      <h7 class='page-title'> Perl 5 version 8.8
                        documentation</h7>
                    </div>
                    <h1>perlfaq4</h1>


  <!--    -->
<ul><li><a href="#NAME">NAME</a></li><li><a href="#DESCRIPTION">DESCRIPTION</a></li><li><a href="#Data%3a-Numbers">Data: Numbers</a></li><ul><li><a href="#Why-am-I-getting-long-decimals-(eg%2c-19.9499999999999)-instead-of-the-numbers-I-should-be-getting-(eg%2c-19.95)%3f">Why am I getting long decimals (eg, 19.9499999999999) instead of the numbers I should be getting (eg, 19.95)?</a></li><li><a href="#Why-is-int()-broken%3f">Why is int() broken?</a></li><li><a href="#Why-isn't-my-octal-data-interpreted-correctly%3f">Why isn't my octal data interpreted correctly?</a></li><li><a href="#Does-Perl-have-a-round()-function%3f--What-about-ceil()-and-floor()%3f--Trig-functions%3f">Does Perl have a round() function?  What about ceil() and floor()?  Trig functions?</a></li><li><a href="#How-do-I-convert-between-numeric-representations%2fbases%2fradixes%3f">How do I convert between numeric representations/bases/radixes?</a></li><li><a href="#Why-doesn't-%26-work-the-way-I-want-it-to%3f">Why doesn't & work the way I want it to?</a></li><li><a href="#How-do-I-multiply-matrices%3f">How do I multiply matrices?</a></li><li><a href="#How-do-I-perform-an-operation-on-a-series-of-integers%3f">How do I perform an operation on a series of integers?</a></li><li><a href="#How-can-I-output-Roman-numerals%3f">How can I output Roman numerals?</a></li><li><a href="#Why-aren't-my-random-numbers-random%3f">Why aren't my random numbers random?</a></li><li><a href="#How-do-I-get-a-random-number-between-X-and-Y%3f">How do I get a random number between X and Y?</a></li></ul><li><a href="#Data%3a-Dates">Data: Dates</a></li><ul><li><a href="#How-do-I-find-the-day-or-week-of-the-year%3f">How do I find the day or week of the year?</a></li><li><a href="#How-do-I-find-the-current-century-or-millennium%3f">How do I find the current century or millennium?</a></li><li><a href="#How-can-I-compare-two-dates-and-find-the-difference%3f">How can I compare two dates and find the difference?</a></li><li><a href="#How-can-I-take-a-string-and-turn-it-into-epoch-seconds%3f">How can I take a string and turn it into epoch seconds?</a></li><li><a href="#How-can-I-find-the-Julian-Day%3f">How can I find the Julian Day?</a></li><li><a href="#How-do-I-find-yesterday's-date%3f">How do I find yesterday's date?</a></li><li><a href="#Does-Perl-have-a-Year-2000-problem%3f--Is-Perl-Y2K-compliant%3f">Does Perl have a Year 2000 problem?  Is Perl Y2K compliant?</a></li></ul><li><a href="#Data%3a-Strings">Data: Strings</a></li><ul><li><a href="#How-do-I-validate-input%3f">How do I validate input?</a></li><li><a href="#How-do-I-unescape-a-string%3f">How do I unescape a string?</a></li><li><a href="#How-do-I-remove-consecutive-pairs-of-characters%3f">How do I remove consecutive pairs of characters?</a></li><li><a href="#How-do-I-expand-function-calls-in-a-string%3f">How do I expand function calls in a string?</a></li><li><a href="#How-do-I-find-matching%2fnesting-anything%3f">How do I find matching/nesting anything?</a></li><li><a href="#How-do-I-reverse-a-string%3f">How do I reverse a string?</a></li><li><a href="#How-do-I-expand-tabs-in-a-string%3f">How do I expand tabs in a string?</a></li><li><a href="#How-do-I-reformat-a-paragraph%3f">How do I reformat a paragraph?</a></li><li><a href="#How-can-I-access-or-change-N-characters-of-a-string%3f">How can I access or change N characters of a string?</a></li><li><a href="#How-do-I-change-the-Nth-occurrence-of-something%3f">How do I change the Nth occurrence of something?</a></li><li><a href="#How-can-I-count-the-number-of-occurrences-of-a-substring-within-a-string%3f">How can I count the number of occurrences of a substring within a string?</a></li><li><a href="#How-do-I-capitalize-all-the-words-on-one-line%3f">How do I capitalize all the words on one line?</a></li><li><a href="#How-can-I-split-a-%5bcharacter%5d-delimited-string-except-when-inside-%5bcharacter%5d%3f">How can I split a [character] delimited string except when inside [character]?</a></li><li><a href="#How-do-I-strip-blank-space-from-the-beginning%2fend-of-a-string%3f">How do I strip blank space from the beginning/end of a string?</a></li><li><a href="#How-do-I-pad-a-string-with-blanks-or-pad-a-number-with-zeroes%3f">How do I pad a string with blanks or pad a number with zeroes?</a></li><li><a href="#How-do-I-extract-selected-columns-from-a-string%3f">How do I extract selected columns from a string?</a></li><li><a href="#How-do-I-find-the-soundex-value-of-a-string%3f">How do I find the soundex value of a string?</a></li><li><a href="#How-can-I-expand-variables-in-text-strings%3f">How can I expand variables in text strings?</a></li><li><a href="#What's-wrong-with-always-quoting-%22%24vars%22%3f">What's wrong with always quoting "$vars"?</a></li><li><a href="#Why-don't-my-%3c%3cHERE-documents-work%3f">Why don't my <<HERE documents work?</a></li></ul><li><a href="#Data%3a-Arrays">Data: Arrays</a></li><ul><li><a href="#What-is-the-difference-between-a-list-and-an-array%3f">What is the difference between a list and an array?</a></li><li><a href="#What-is-the-difference-between-%24array%5b1%5d-and-%40array%5b1%5d%3f">What is the difference between $array[1] and @array[1]?</a></li><li><a href="#How-can-I-remove-duplicate-elements-from-a-list-or-array%3f">How can I remove duplicate elements from a list or array?</a></li><li><a href="#How-can-I-tell-whether-a-certain-element-is-contained-in-a-list-or-array%3f">How can I tell whether a certain element is contained in a list or array?</a></li><li><a href="#How-do-I-compute-the-difference-of-two-arrays%3f--How-do-I-compute-the-intersection-of-two-arrays%3f">How do I compute the difference of two arrays?  How do I compute the intersection of two arrays?</a></li><li><a href="#How-do-I-test-whether-two-arrays-or-hashes-are-equal%3f">How do I test whether two arrays or hashes are equal?</a></li><li><a href="#How-do-I-find-the-first-array-element-for-which-a-condition-is-true%3f">How do I find the first array element for which a condition is true?</a></li><li><a href="#How-do-I-handle-linked-lists%3f">How do I handle linked lists?</a></li><li><a href="#How-do-I-handle-circular-lists%3f">How do I handle circular lists?</a></li><li><a href="#How-do-I-shuffle-an-array-randomly%3f">How do I shuffle an array randomly?</a></li><li><a href="#How-do-I-process%2fmodify-each-element-of-an-array%3f">How do I process/modify each element of an array?</a></li><li><a href="#How-do-I-select-a-random-element-from-an-array%3f">How do I select a random element from an array?</a></li><li><a href="#How-do-I-permute-N-elements-of-a-list%3f">How do I permute N elements of a list?</a></li><li><a href="#How-do-I-sort-an-array-by-(anything)%3f">How do I sort an array by (anything)?</a></li><li><a href="#How-do-I-manipulate-arrays-of-bits%3f">How do I manipulate arrays of bits?</a></li><li><a href="#Why-does-defined()-return-true-on-empty-arrays-and-hashes%3f">Why does defined() return true on empty arrays and hashes?</a></li></ul><li><a href="#Data%3a-Hashes-(Associative-Arrays)">Data: Hashes (Associative Arrays)</a></li><ul><li><a href="#How-do-I-process-an-entire-hash%3f">How do I process an entire hash?</a></li><li><a href="#What-happens-if-I-add-or-remove-keys-from-a-hash-while-iterating-over-it%3f">What happens if I add or remove keys from a hash while iterating over it?</a></li><li><a href="#How-do-I-look-up-a-hash-element-by-value%3f">How do I look up a hash element by value?</a></li><li><a href="#How-can-I-know-how-many-entries-are-in-a-hash%3f">How can I know how many entries are in a hash?</a></li><li><a href="#How-do-I-sort-a-hash-(optionally-by-value-instead-of-key)%3f">How do I sort a hash (optionally by value instead of key)?</a></li><li><a href="#How-can-I-always-keep-my-hash-sorted%3f">How can I always keep my hash sorted?</a></li><li><a href="#What's-the-difference-between-%22delete%22-and-%22undef%22-with-hashes%3f">What's the difference between "delete" and "undef" with hashes?</a></li><li><a href="#Why-don't-my-tied-hashes-make-the-defined%2fexists-distinction%3f">Why don't my tied hashes make the defined/exists distinction?</a></li><li><a href="#How-do-I-reset-an-each()-operation-part-way-through%3f">How do I reset an each() operation part-way through?</a></li><li><a href="#How-can-I-get-the-unique-keys-from-two-hashes%3f">How can I get the unique keys from two hashes?</a></li><li><a href="#How-can-I-store-a-multidimensional-array-in-a-DBM-file%3f">How can I store a multidimensional array in a DBM file?</a></li><li><a href="#How-can-I-make-my-hash-remember-the-order-I-put-elements-into-it%3f">How can I make my hash remember the order I put elements into it?</a></li><li><a href="#Why-does-passing-a-subroutine-an-undefined-element-in-a-hash-create-it%3f">Why does passing a subroutine an undefined element in a hash create it?</a></li><li><a href="#How-can-I-make-the-Perl-equivalent-of-a-C-structure%2fC%2b%2b-class%2fhash-or-array-of-hashes-or-arrays%3f">How can I make the Perl equivalent of a C structure/C++ class/hash or array of hashes or arrays?</a></li><li><a href="#How-can-I-use-a-reference-as-a-hash-key%3f">How can I use a reference as a hash key?</a></li></ul><li><a href="#Data%3a-Misc">Data: Misc</a></li><ul><li><a href="#How-do-I-handle-binary-data-correctly%3f">How do I handle binary data correctly?</a></li><li><a href="#How-do-I-determine-whether-a-scalar-is-a-number%2fwhole%2finteger%2ffloat%3f">How do I determine whether a scalar is a number/whole/integer/float?</a></li><li><a href="#How-do-I-keep-persistent-data-across-program-calls%3f">How do I keep persistent data across program calls?</a></li><li><a href="#How-do-I-print-out-or-copy-a-recursive-data-structure%3f">How do I print out or copy a recursive data structure?</a></li><li><a href="#How-do-I-define-methods-for-every-class%2fobject%3f">How do I define methods for every class/object?</a></li><li><a href="#How-do-I-verify-a-credit-card-checksum%3f">How do I verify a credit card checksum?</a></li><li><a href="#How-do-I-pack-arrays-of-doubles-or-floats-for-XS-code%3f">How do I pack arrays of doubles or floats for XS code?</a></li></ul><li><a href="#AUTHOR-AND-COPYRIGHT">AUTHOR AND COPYRIGHT</a></li></ul><a class='view-head1' id="NAME"></a><h2 class='h2' >NAME</h2>
<p>perlfaq4 - Data Manipulation ($Revision: 1.73 $, $Date: 2005/12/31 00:54:37 $)</p>
<a class='view-head1' id="DESCRIPTION"></a><h2 class='h2' >DESCRIPTION</h2>
<p>This section of the FAQ answers questions related to manipulating
numbers, dates, strings, arrays, hashes, and miscellaneous data issues.</p>
<a class='view-head1' id="Data%3a-Numbers"></a><h2 class='h2' >Data: Numbers</h2>
<a class='view-head2' id="Why-am-I-getting-long-decimals-(eg%2c-19.9499999999999)-instead-of-the-numbers-I-should-be-getting-(eg%2c-19.95)%3f"></a><h3 class='h3' >Why am I getting long decimals (eg, 19.9499999999999) instead of the numbers I should be getting (eg, 19.95)?</h3>
<p>Internally, your computer represents floating-point numbers
in binary. Digital (as in powers of two) computers cannot
store all numbers exactly.  Some real numbers lose precision
in the process.  This is a problem with how computers store
numbers and affects all computer languages, not just Perl.</p>
<p><a href="perlnumber.html">perlnumber</a> show the gory details of number
representations and conversions.</p>
<p>To limit the number of decimal places in your numbers, you
can use the printf or sprintf function.  See the
<a href="perlop.html">Floating Point Arithmetic</a> for more details.</p>
<pre class="verbatim"><ol><li>	<a class="l_k" href="functions/printf.html">printf</a> <span class="q">&quot;%.2f&quot;</span><span class="cm">,</span> <span class="n">10</span>/<span class="n">3</span><span class="sc">;</span></li><li></li><li>	<a class="l_k" href="functions/my.html">my</a> <span class="i">$number</span> = <a class="l_k" href="functions/sprintf.html">sprintf</a> <span class="q">&quot;%.2f&quot;</span><span class="cm">,</span> <span class="n">10</span>/<span class="n">3</span><span class="sc">;</span></li></ol></pre><a class='view-head2' id="Why-is-int()-broken%3f"></a><h3 class='h3' >Why is int() broken?</h3>
<p>Your int() is most probably working just fine.  It's the numbers that
aren't quite what you think.</p>
<p>First, see the above item "Why am I getting long decimals
(eg, 19.9499999999999) instead of the numbers I should be getting
(eg, 19.95)?".</p>
<p>For example, this</p>
<pre class="verbatim"><ol><li>    <a class="l_k" href="functions/print.html">print</a> <a class="l_k" href="functions/int.html">int</a><span class="s">(</span><span class="n">0.6</span>/<span class="n">0.2</span>-<span class="n">2</span><span class="s">)</span><span class="cm">,</span> <span class="q">&quot;\n&quot;</span><span class="sc">;</span></li></ol></pre><p>will in most computers print 0, not 1, because even such simple
numbers as 0.6 and 0.2 cannot be presented exactly by floating-point
numbers.  What you think in the above as 'three' is really more like
2.9999999999999995559.</p>
<a class='view-head2' id="Why-isn't-my-octal-data-interpreted-correctly%3f"></a><h3 class='h3' >Why isn't my octal data interpreted correctly?</h3>
<p>Perl only understands octal and hex numbers as such when they occur as
literals in your program.  Octal literals in perl must start with a
leading "0" and hexadecimal literals must start with a leading "0x".
If they are read in from somewhere and assigned, no automatic
conversion takes place.  You must explicitly use oct() or hex() if you
want the values converted to decimal.  oct() interprets hex ("0x350"),
octal ("0350" or even without the leading "0", like "377") and binary
("0b1010") numbers, while hex() only converts hexadecimal ones, with
or without a leading "0x", like "0x255", "3A", "ff", or "deadbeef".
The inverse mapping from decimal to octal can be done with either the
"%o" or "%O" sprintf() formats.</p>
<p>This problem shows up most often when people try using chmod(), mkdir(),
umask(), or sysopen(), which by widespread tradition typically take
permissions in octal.</p>
<pre class="verbatim"><ol><li>    <a class="l_k" href="functions/chmod.html">chmod</a><span class="s">(</span><span class="n">644</span><span class="cm">,</span>  <span class="i">$file</span><span class="s">)</span><span class="sc">;</span>	<span class="c"># WRONG</span></li><li>    <a class="l_k" href="functions/chmod.html">chmod</a><span class="s">(</span><span class="n">0644</span><span class="cm">,</span> <span class="i">$file</span><span class="s">)</span><span class="sc">;</span>	<span class="c"># right</span></li></ol></pre><p>Note the mistake in the first line was specifying the decimal literal
644, rather than the intended octal literal 0644.  The problem can
be seen with:</p>
<pre class="verbatim"><ol><li>    <a class="l_k" href="functions/printf.html">printf</a><span class="s">(</span><span class="q">&quot;%#o&quot;</span><span class="cm">,</span><span class="n">644</span><span class="s">)</span><span class="sc">;</span> <span class="c"># prints 01204</span></li></ol></pre><p>Surely you had not intended <code class="inline"><a class="l_k" href="functions/chmod.html">chmod</a><span class="s">(</span><span class="n">01204</span><span class="cm">,</span> <span class="i">$file</span><span class="s">)</span><span class="sc">;</span></code>
 - did you?  If you
want to use numeric literals as arguments to chmod() et al. then please
try to express them as octal constants, that is with a leading zero and
with the following digits restricted to the set 0..7.</p>
<a class='view-head2' id="Does-Perl-have-a-round()-function%3f--What-about-ceil()-and-floor()%3f--Trig-functions%3f"></a><h3 class='h3' >Does Perl have a round() function?  What about ceil() and floor()?  Trig functions?</h3>
<p>Remember that int() merely truncates toward 0.  For rounding to a
certain number of digits, sprintf() or printf() is usually the easiest
route.</p>
<pre class="verbatim"><ol><li>    <a class="l_k" href="functions/printf.html">printf</a><span class="s">(</span><span class="q">&quot;%.3f&quot;</span><span class="cm">,</span> <span class="n">3.1415926535</span><span class="s">)</span><span class="sc">;</span>	<span class="c"># prints 3.142</span></li></ol></pre><p>The POSIX module (part of the standard Perl distribution) implements
ceil(), floor(), and a number of other mathematical and trigonometric
functions.</p>
<pre class="verbatim"><ol><li>    <a class="l_k" href="functions/use.html">use</a> <span class="w">POSIX</span><span class="sc">;</span></li><li>    <span class="i">$ceil</span>   = <span class="i">ceil</span><span class="s">(</span><span class="n">3.5</span><span class="s">)</span><span class="sc">;</span>			<span class="c"># 4</span></li><li>    <span class="i">$floor</span>  = <span class="i">floor</span><span class="s">(</span><span class="n">3.5</span><span class="s">)</span><span class="sc">;</span>			<span class="c"># 3</span></li></ol></pre><p>In 5.000 to 5.003 perls, trigonometry was done in the Math::Complex
module.  With 5.004, the Math::Trig module (part of the standard Perl
distribution) implements the trigonometric functions. Internally it
uses the Math::Complex module and some functions can break out from
the real axis into the complex plane, for example the inverse sine of
2.</p>
<p>Rounding in financial applications can have serious implications, and
the rounding method used should be specified precisely.  In these
cases, it probably pays not to trust whichever system rounding is
being used by Perl, but to instead implement the rounding function you
need yourself.</p>
<p>To see why, notice how you'll still have an issue on half-way-point
alternation:</p>
<pre class="verbatim"><ol><li>    for <span class="s">(</span><span class="i">$i</span> = <span class="n">0</span><span class="sc">;</span> <span class="i">$i</span> &lt; <span class="n">1.01</span><span class="sc">;</span> <span class="i">$i</span> += <span class="n">0.05</span><span class="s">)</span> <span class="s">{</span> <a class="l_k" href="functions/printf.html">printf</a> <span class="q">&quot;%.1f &quot;</span><span class="cm">,</span><span class="i">$i</span><span class="s">}</span></li><li></li><li>    <span class="n">0.0</span> <span class="n">0.1</span> <span class="n">0.1</span> <span class="n">0.2</span> <span class="n">0.2</span> <span class="n">0.2</span> <span class="n">0.3</span> <span class="n">0.3</span> <span class="n">0.4</span> <span class="n">0.4</span> <span class="n">0.5</span> <span class="n">0.5</span> <span class="n">0.6</span> <span class="n">0.7</span> <span class="n">0.7</span></li><li>    <span class="n">0.8</span> <span class="n">0.8</span> <span class="n">0.9</span> <span class="n">0.9</span> <span class="n">1.0</span> <span class="n">1.0</span></li></ol></pre><p>Don't blame Perl.  It's the same as in C.  IEEE says we have to do this.
Perl numbers whose absolute values are integers under 2**31 (on 32 bit
machines) will work pretty much like mathematical integers.  Other numbers
are not guaranteed.</p>
<a class='view-head2' id="How-do-I-convert-between-numeric-representations%2fbases%2fradixes%3f"></a><h3 class='h3' >How do I convert between numeric representations/bases/radixes?</h3>
<p>As always with Perl there is more than one way to do it.  Below
are a few examples of approaches to making common conversions
between number representations.  This is intended to be representational
rather than exhaustive.</p>
<p>Some of the examples below use the Bit::Vector module from CPAN.
The reason you might choose Bit::Vector over the perl built in
functions is that it works with numbers of ANY size, that it is
optimized for speed on some operations, and for at least some
programmers the notation might be familiar.</p>
<ul>
<li><a class='view-title' id="How-do-I-convert-hexadecimal-into-decimal"></a><strong>How do I convert hexadecimal into decimal</strong>
<p>Using perl's built in conversion of 0x notation:</p>
<pre class="verbatim"><ol><li>    <span class="i">$dec</span> = <span class="n">0xDEADBEEF</span><span class="sc">;</span></li></ol></pre><p>Using the hex function:</p>
<pre class="verbatim"><ol><li>    <span class="i">$dec</span> = <a class="l_k" href="functions/hex.html">hex</a><span class="s">(</span><span class="q">&quot;DEADBEEF&quot;</span><span class="s">)</span><span class="sc">;</span></li></ol></pre><p>Using pack:</p>
<pre class="verbatim"><ol><li>    <span class="i">$dec</span> = <a class="l_k" href="functions/unpack.html">unpack</a><span class="s">(</span><span class="q">&quot;N&quot;</span><span class="cm">,</span> <a class="l_k" href="functions/pack.html">pack</a><span class="s">(</span><span class="q">&quot;H8&quot;</span><span class="cm">,</span> <a class="l_k" href="functions/substr.html">substr</a><span class="s">(</span><span class="q">&quot;0&quot;</span> x <span class="n">8</span> . <span class="q">&quot;DEADBEEF&quot;</span><span class="cm">,</span> <span class="n">-8</span><span class="s">)</span><span class="s">)</span><span class="s">)</span><span class="sc">;</span></li></ol></pre><p>Using the CPAN module Bit::Vector:</p>
<pre class="verbatim"><ol><li>    <a class="l_k" href="functions/use.html">use</a> <span class="w">Bit::Vector</span><span class="sc">;</span></li><li>    <span class="i">$vec</span> = <span class="w">Bit::Vector</span><span class="w">-&gt;new_Hex</span><span class="s">(</span><span class="n">32</span><span class="cm">,</span> <span class="q">&quot;DEADBEEF&quot;</span><span class="s">)</span><span class="sc">;</span></li><li>    <span class="i">$dec</span> = <span class="i">$vec</span><span class="i">-&gt;to_Dec</span><span class="s">(</span><span class="s">)</span><span class="sc">;</span></li></ol></pre></li>
<li><a class='view-title' id="How-do-I-convert-from-decimal-to-hexadecimal"></a><strong>How do I convert from decimal to hexadecimal</strong>
<p>Using sprintf:</p>
<pre class="verbatim"><ol><li>    <span class="i">$hex</span> = <a class="l_k" href="functions/sprintf.html">sprintf</a><span class="s">(</span><span class="q">&quot;%X&quot;</span><span class="cm">,</span> <span class="n">3735928559</span><span class="s">)</span><span class="sc">;</span> <span class="c"># upper case A-F</span></li><li>    <span class="i">$hex</span> = <a class="l_k" href="functions/sprintf.html">sprintf</a><span class="s">(</span><span class="q">&quot;%x&quot;</span><span class="cm">,</span> <span class="n">3735928559</span><span class="s">)</span><span class="sc">;</span> <span class="c"># lower case a-f</span></li></ol></pre><p>Using unpack:</p>
<pre class="verbatim"><ol><li>    <span class="i">$hex</span> = <a class="l_k" href="functions/unpack.html">unpack</a><span class="s">(</span><span class="q">&quot;H*&quot;</span><span class="cm">,</span> <a class="l_k" href="functions/pack.html">pack</a><span class="s">(</span><span class="q">&quot;N&quot;</span><span class="cm">,</span> <span class="n">3735928559</span><span class="s">)</span><span class="s">)</span><span class="sc">;</span></li></ol></pre><p>Using Bit::Vector:</p>
<pre class="verbatim"><ol><li>    <a class="l_k" href="functions/use.html">use</a> <span class="w">Bit::Vector</span><span class="sc">;</span></li><li>    <span class="i">$vec</span> = <span class="w">Bit::Vector</span><span class="w">-&gt;new_Dec</span><span class="s">(</span><span class="n">32</span><span class="cm">,</span> <span class="n">-559038737</span><span class="s">)</span><span class="sc">;</span></li><li>    <span class="i">$hex</span> = <span class="i">$vec</span><span class="i">-&gt;to_Hex</span><span class="s">(</span><span class="s">)</span><span class="sc">;</span></li></ol></pre><p>And Bit::Vector supports odd bit counts:</p>
<pre class="verbatim"><ol><li>    <a class="l_k" href="functions/use.html">use</a> <span class="w">Bit::Vector</span><span class="sc">;</span></li><li>    <span class="i">$vec</span> = <span class="w">Bit::Vector</span><span class="w">-&gt;new_Dec</span><span class="s">(</span><span class="n">33</span><span class="cm">,</span> <span class="n">3735928559</span><span class="s">)</span><span class="sc">;</span></li><li>    <span class="i">$vec</span><span class="i">-&gt;Resize</span><span class="s">(</span><span class="n">32</span><span class="s">)</span><span class="sc">;</span> <span class="c"># suppress leading 0 if unwanted</span></li><li>    <span class="i">$hex</span> = <span class="i">$vec</span><span class="i">-&gt;to_Hex</span><span class="s">(</span><span class="s">)</span><span class="sc">;</span></li></ol></pre></li>
<li><a class='view-title' id="How-do-I-convert-from-octal-to-decimal"></a><strong>How do I convert from octal to decimal</strong>
<p>Using Perl's built in conversion of numbers with leading zeros:</p>
<pre class="verbatim"><ol><li>    <span class="i">$dec</span> = <span class="n">033653337357</span><span class="sc">;</span> <span class="c"># note the leading 0!</span></li></ol></pre><p>Using the oct function:</p>
<pre class="verbatim"><ol><li>    <span class="i">$dec</span> = <a class="l_k" href="functions/oct.html">oct</a><span class="s">(</span><span class="q">&quot;33653337357&quot;</span><span class="s">)</span><span class="sc">;</span></li></ol></pre><p>Using Bit::Vector:</p>
<pre class="verbatim"><ol><li>    <a class="l_k" href="functions/use.html">use</a> <span class="w">Bit::Vector</span><span class="sc">;</span></li><li>    <span class="i">$vec</span> = <span class="w">Bit::Vector</span><span class="w">-&gt;new</span><span class="s">(</span><span class="n">32</span><span class="s">)</span><span class="sc">;</span></li><li>    <span class="i">$vec</span><span class="i">-&gt;Chunk_List_Store</span><span class="s">(</span><span class="n">3</span><span class="cm">,</span> <a class="l_k" href="functions/split.html">split</a><span class="s">(</span><span class="q">//</span><span class="cm">,</span> <a class="l_k" href="functions/reverse.html">reverse</a> <span class="q">&quot;33653337357&quot;</span><span class="s">)</span><span class="s">)</span><span class="sc">;</span></li><li>    <span class="i">$dec</span> = <span class="i">$vec</span><span class="i">-&gt;to_Dec</span><span class="s">(</span><span class="s">)</span><span class="sc">;</span></li></ol></pre></li>
<li><a class='view-title' id="How-do-I-convert-from-decimal-to-octal"></a><strong>How do I convert from decimal to octal</strong>
<p>Using sprintf:</p>
<pre class="verbatim"><ol><li>    <span class="i">$oct</span> = <a class="l_k" href="functions/sprintf.html">sprintf</a><span class="s">(</span><span class="q">&quot;%o&quot;</span><span class="cm">,</span> <span class="n">3735928559</span><span class="s">)</span><span class="sc">;</span></li></ol></pre><p>Using Bit::Vector:</p>
<pre class="verbatim"><ol><li>    <a class="l_k" href="functions/use.html">use</a> <span class="w">Bit::Vector</span><span class="sc">;</span></li><li>    <span class="i">$vec</span> = <span class="w">Bit::Vector</span><span class="w">-&gt;new_Dec</span><span class="s">(</span><span class="n">32</span><span class="cm">,</span> <span class="n">-559038737</span><span class="s">)</span><span class="sc">;</span></li><li>    <span class="i">$oct</span> = <a class="l_k" href="functions/reverse.html">reverse</a> <a class="l_k" href="functions/join.html">join</a><span class="s">(</span><span class="q">&#39;&#39;</span><span class="cm">,</span> <span class="i">$vec</span><span class="i">-&gt;Chunk_List_Read</span><span class="s">(</span><span class="n">3</span><span class="s">)</span><span class="s">)</span><span class="sc">;</span></li></ol></pre></li>
<li><a class='view-title' id="How-do-I-convert-from-binary-to-decimal"></a><strong>How do I convert from binary to decimal</strong>
<p>Perl 5.6 lets you write binary numbers directly with
the 0b notation:</p>
<pre class="verbatim"><ol><li>    <span class="i">$number</span> = <span class="n">0b10110110</span><span class="sc">;</span></li></ol></pre><p>Using oct:</p>
<pre class="verbatim"><ol><li>    <a class="l_k" href="functions/my.html">my</a> <span class="i">$input</span> = <span class="q">&quot;10110110&quot;</span><span class="sc">;</span></li><li>    <span class="i">$decimal</span> = <a class="l_k" href="functions/oct.html">oct</a><span class="s">(</span> <span class="q">&quot;0b$input&quot;</span> <span class="s">)</span><span class="sc">;</span></li></ol></pre><p>Using pack and ord:</p>
<pre class="verbatim"><ol><li>    <span class="i">$decimal</span> = <a class="l_k" href="functions/ord.html">ord</a><span class="s">(</span><a class="l_k" href="functions/pack.html">pack</a><span class="s">(</span><span class="q">&#39;B8&#39;</span><span class="cm">,</span> <span class="q">&#39;10110110&#39;</span><span class="s">)</span><span class="s">)</span><span class="sc">;</span></li></ol></pre><p>Using pack and unpack for larger strings:</p>
<pre class="verbatim"><ol><li>    <span class="i">$int</span> = <a class="l_k" href="functions/unpack.html">unpack</a><span class="s">(</span><span class="q">&quot;N&quot;</span><span class="cm">,</span> <a class="l_k" href="functions/pack.html">pack</a><span class="s">(</span><span class="q">&quot;B32&quot;</span><span class="cm">,</span></li><li>	<a class="l_k" href="functions/substr.html">substr</a><span class="s">(</span><span class="q">&quot;0&quot;</span> x <span class="n">32</span> . <span class="q">&quot;11110101011011011111011101111&quot;</span><span class="cm">,</span> <span class="n">-32</span><span class="s">)</span><span class="s">)</span><span class="s">)</span><span class="sc">;</span></li><li>    <span class="i">$dec</span> = <a class="l_k" href="functions/sprintf.html">sprintf</a><span class="s">(</span><span class="q">&quot;%d&quot;</span><span class="cm">,</span> <span class="i">$int</span><span class="s">)</span><span class="sc">;</span></li><li></li><li>    <span class="c"># substr() is used to left pad a 32 character string with zeros.</span></li></ol></pre><p>Using Bit::Vector:</p>
<pre class="verbatim"><ol><li>    <span class="i">$vec</span> = <span class="w">Bit::Vector</span><span class="w">-&gt;new_Bin</span><span class="s">(</span><span class="n">32</span><span class="cm">,</span> <span class="q">&quot;11011110101011011011111011101111&quot;</span><span class="s">)</span><span class="sc">;</span></li><li>    <span class="i">$dec</span> = <span class="i">$vec</span><span class="i">-&gt;to_Dec</span><span class="s">(</span><span class="s">)</span><span class="sc">;</span></li></ol></pre></li>
<li><a class='view-title' id="How-do-I-convert-from-decimal-to-binary"></a><strong>How do I convert from decimal to binary</strong>
<p>Using sprintf (perl 5.6+):</p>
<pre class="verbatim"><ol><li>    <span class="i">$bin</span> = <a class="l_k" href="functions/sprintf.html">sprintf</a><span class="s">(</span><span class="q">&quot;%b&quot;</span><span class="cm">,</span> <span class="n">3735928559</span><span class="s">)</span><span class="sc">;</span></li></ol></pre><p>Using unpack:</p>
<pre class="verbatim"><ol><li>    <span class="i">$bin</span> = <a class="l_k" href="functions/unpack.html">unpack</a><span class="s">(</span><span class="q">&quot;B*&quot;</span><span class="cm">,</span> <a class="l_k" href="functions/pack.html">pack</a><span class="s">(</span><span class="q">&quot;N&quot;</span><span class="cm">,</span> <span class="n">3735928559</span><span class="s">)</span><span class="s">)</span><span class="sc">;</span></li></ol></pre><p>Using Bit::Vector:</p>
<pre class="verbatim"><ol><li>    <a class="l_k" href="functions/use.html">use</a> <span class="w">Bit::Vector</span><span class="sc">;</span></li><li>    <span class="i">$vec</span> = <span class="w">Bit::Vector</span><span class="w">-&gt;new_Dec</span><span class="s">(</span><span class="n">32</span><span class="cm">,</span> <span class="n">-559038737</span><span class="s">)</span><span class="sc">;</span></li><li>    <span class="i">$bin</span> = <span class="i">$vec</span><span class="i">-&gt;to_Bin</span><span class="s">(</span><span class="s">)</span><span class="sc">;</span></li></ol></pre><p>The remaining transformations (e.g. hex -&gt; oct, bin -&gt; hex, etc.)
are left as an exercise to the inclined reader.</p>
</li>
</ul>
<a class='view-head2' id="Why-doesn't-%26-work-the-way-I-want-it-to%3f"></a><h3 class='h3' >Why doesn't &amp; work the way I want it to?</h3>
<p>The behavior of binary arithmetic operators depends on whether they're
used on numbers or strings.  The operators treat a string as a series
of bits and work with that (the string <code class="inline"><span class="q">&quot;3&quot;</span></code>
 is the bit pattern
<code class="inline"><span class="n">00110011</span></code>
).  The operators work with the binary form of a number
(the number <code class="inline"><span class="n">3</span></code>
 is treated as the bit pattern <code class="inline"><span class="n">00000011</span></code>
).</p>
<p>So, saying <code class="inline"><span class="n">11</span> &amp; <span class="n">3</span></code>
 performs the "and" operation on numbers (yielding
<code class="inline"><span class="n">3</span></code>
).  Saying <code class="inline"><span class="q">&quot;11&quot;</span> &amp; <span class="q">&quot;3&quot;</span></code>
 performs the "and" operation on strings
(yielding <code class="inline"><span class="q">&quot;1&quot;</span></code>
).</p>
<p>Most problems with <code class="inline"><span class="i">&amp;</span></code>
 and <code class="inline">|</code>
 arise because the programmer thinks
they have a number but really it's a string.  The rest arise because
the programmer says:</p>
<pre class="verbatim"><ol><li>    if <span class="s">(</span><span class="q">&quot;\020\020&quot;</span> &amp; <span class="q">&quot;\101\101&quot;</span><span class="s">)</span> <span class="s">{</span></li><li>	<span class="c"># ...</span></li><li>    <span class="s">}</span></li></ol></pre><p>but a string consisting of two null bytes (the result of <code class="inline"><span class="q">&quot;\020\020&quot;</span>
&amp; <span class="q">&quot;\101\101&quot;</span></code>
) is not a false value in Perl.  You need:</p>
<pre class="verbatim"><ol><li>    if <span class="s">(</span> <span class="s">(</span><span class="q">&quot;\020\020&quot;</span> &amp; <span class="q">&quot;\101\101&quot;</span><span class="s">)</span> !~ <span class="q">/[^\000]/</span><span class="s">)</span> <span class="s">{</span></li><li>	<span class="c"># ...</span></li><li>    <span class="s">}</span></li></ol></pre><a class='view-head2' id="How-do-I-multiply-matrices%3f"></a><h3 class='h3' >How do I multiply matrices?</h3>
<p>Use the Math::Matrix or Math::MatrixReal modules (available from CPAN)
or the PDL extension (also available from CPAN).</p>
<a class='view-head2' id="How-do-I-perform-an-operation-on-a-series-of-integers%3f"></a><h3 class='h3' >How do I perform an operation on a series of integers?</h3>
<p>To call a function on each element in an array, and collect the
results, use:</p>
<pre class="verbatim"><ol><li>    <span class="i">@results</span> = <a class="l_k" href="functions/map.html">map</a> <span class="s">{</span> <span class="i">my_func</span><span class="s">(</span><span class="i">$_</span><span class="s">)</span> <span class="s">}</span> <span class="i">@array</span><span class="sc">;</span></li></ol></pre><p>For example:</p>
<pre class="verbatim"><ol><li>    <span class="i">@triple</span> = <a class="l_k" href="functions/map.html">map</a> <span class="s">{</span> <span class="n">3</span> * <span class="i">$_</span> <span class="s">}</span> <span class="i">@single</span><span class="sc">;</span></li></ol></pre><p>To call a function on each element of an array, but ignore the
results:</p>
<pre class="verbatim"><ol><li>    foreach <span class="i">$iterator</span> <span class="s">(</span><span class="i">@array</span><span class="s">)</span> <span class="s">{</span></li><li>        <span class="i">some_func</span><span class="s">(</span><span class="i">$iterator</span><span class="s">)</span><span class="sc">;</span></li><li>    <span class="s">}</span></li></ol></pre><p>To call a function on each integer in a (small) range, you <strong>can</strong> use:</p>
<pre class="verbatim"><ol><li>    <span class="i">@results</span> = <a class="l_k" href="functions/map.html">map</a> <span class="s">{</span> <span class="i">some_func</span><span class="s">(</span><span class="i">$_</span><span class="s">)</span> <span class="s">}</span> <span class="s">(</span><span class="n">5</span> .. <span class="n">25</span><span class="s">)</span><span class="sc">;</span></li></ol></pre><p>but you should be aware that the <code class="inline">..</code>
 operator creates an array of
all integers in the range.  This can take a lot of memory for large
ranges.  Instead use:</p>
<pre class="verbatim"><ol><li>    <span class="i">@results</span> = <span class="s">(</span><span class="s">)</span><span class="sc">;</span></li><li>    for <span class="s">(</span><span class="i">$i</span>=<span class="n">5</span><span class="sc">;</span> <span class="i">$i</span> &lt; <span class="n">500_005</span><span class="sc">;</span> <span class="i">$i</span>++<span class="s">)</span> <span class="s">{</span></li><li>        <a class="l_k" href="functions/push.html">push</a><span class="s">(</span><span class="i">@results</span><span class="cm">,</span> <span class="i">some_func</span><span class="s">(</span><span class="i">$i</span><span class="s">)</span><span class="s">)</span><span class="sc">;</span></li><li>    <span class="s">}</span></li></ol></pre><p>This situation has been fixed in Perl5.005. Use of <code class="inline">..</code>
 in a <code class="inline">for</code>

loop will iterate over the range, without creating the entire range.</p>
<pre class="verbatim"><ol><li>    for <a class="l_k" href="functions/my.html">my</a> <span class="i">$i</span> <span class="s">(</span><span class="n">5</span> .. <span class="n">500_005</span><span class="s">)</span> <span class="s">{</span></li><li>        <a class="l_k" href="functions/push.html">push</a><span class="s">(</span><span class="i">@results</span><span class="cm">,</span> <span class="i">some_func</span><span class="s">(</span><span class="i">$i</span><span class="s">)</span><span class="s">)</span><span class="sc">;</span></li><li>    <span class="s">}</span></li></ol></pre><p>will not create a list of 500,000 integers.</p>
<a class='view-head2' id="How-can-I-output-Roman-numerals%3f"></a><h3 class='h3' >How can I output Roman numerals?</h3>
<p>Get the <a href="http://www.cpan.org/modules/by-module/Roman">http://www.cpan.org/modules/by-module/Roman</a> module.</p>
<a class='view-head2' id="Why-aren't-my-random-numbers-random%3f"></a><h3 class='h3' >Why aren't my random numbers random?</h3>
<p>If you're using a version of Perl before 5.004, you must call <code class="inline"><a class="l_k" href="functions/srand.html">srand</a></code>
once at the start of your program to seed the random number generator.</p>
<pre class="verbatim"><ol><li>	 BEGIN <span class="s">{</span> <a class="l_k" href="functions/srand.html">srand</a><span class="s">(</span><span class="s">)</span> if <span class="i">$]</span> &lt; <span class="n">5.004</span> <span class="s">}</span></li></ol></pre><p>5.004 and later automatically call <code class="inline"><a class="l_k" href="functions/srand.html">srand</a></code> at the beginning.  Don't
call <code class="inline"><a class="l_k" href="functions/srand.html">srand</a></code> more than once---you make your numbers less random, rather
than more.</p>
<p>Computers are good at being predictable and bad at being random
(despite appearances caused by bugs in your programs :-).  see the
<i>random</i> article in the "Far More Than You Ever Wanted To Know"
collection in <a href="http://www.cpan.org/misc/olddoc/FMTEYEWTK.tgz">http://www.cpan.org/misc/olddoc/FMTEYEWTK.tgz</a> , courtesy of
Tom Phoenix, talks more about this.  John von Neumann said, "Anyone
who attempts to generate random numbers by deterministic means is, of
course, living in a state of sin."</p>
<p>If you want numbers that are more random than <code class="inline"><a class="l_k" href="functions/rand.html">rand</a></code> with <code class="inline"><a class="l_k" href="functions/srand.html">srand</a></code>
provides, you should also check out the Math::TrulyRandom module from
CPAN.  It uses the imperfections in your system's timer to generate
random numbers, but this takes quite a while.  If you want a better
pseudorandom generator than comes with your operating system, look at
"Numerical Recipes in C" at <a href="http://www.nr.com/">http://www.nr.com/</a> .</p>
<a class='view-head2' id="How-do-I-get-a-random-number-between-X-and-Y%3f"></a><h3 class='h3' >How do I get a random number between X and Y?</h3>
<p><code class="inline"><a class="l_k" href="functions/rand.html">rand($x)</a></code> returns a number such that
<code class="inline"><span class="n">0</span> &lt;= <a class="l_k" href="functions/rand.html">rand</a><span class="s">(</span><span class="i">$x</span><span class="s">)</span> &lt; <span class="i">$x</span></code>
. Thus what you want to have perl
figure out is a random number in the range from 0 to the
difference between your <i>X</i> and <i>Y</i>.</p>
<p>That is, to get a number between 10 and 15, inclusive, you
want a random number between 0 and 5 that you can then add
to 10.</p>
<pre class="verbatim"><ol><li>    <a class="l_k" href="functions/my.html">my</a> <span class="i">$number</span> = <span class="n">10</span> + <a class="l_k" href="functions/int.html">int</a> <a class="l_k" href="functions/rand.html">rand</a><span class="s">(</span> <span class="n">15</span>-<span class="n">10</span>+<span class="n">1</span> <span class="s">)</span><span class="sc">;</span></li></ol></pre><p>Hence you derive the following simple function to abstract
that. It selects a random integer between the two given
integers (inclusive), For example: <code class="inline"><span class="i">random_int_in</span><span class="s">(</span><span class="n">50</span><span class="cm">,</span><span class="n">120</span><span class="s">)</span></code>
.</p>
<pre class="verbatim"><ol><li><a name="random_int_in"></a>   sub <span class="m">random_int_in ($$)</span> <span class="s">{</span></li><li>     <a class="l_k" href="functions/my.html">my</a><span class="s">(</span><span class="i">$min</span><span class="cm">,</span> <span class="i">$max</span><span class="s">)</span> = <span class="i">@_</span><span class="sc">;</span></li><li>      <span class="c"># Assumes that the two arguments are integers themselves!</span></li><li>     <a class="l_k" href="functions/return.html">return</a> <span class="i">$min</span> if <span class="i">$min</span> == <span class="i">$max</span><span class="sc">;</span></li><li>     <span class="s">(</span><span class="i">$min</span><span class="cm">,</span> <span class="i">$max</span><span class="s">)</span> = <span class="s">(</span><span class="i">$max</span><span class="cm">,</span> <span class="i">$min</span><span class="s">)</span>  if  <span class="i">$min</span> &gt; <span class="i">$max</span><span class="sc">;</span></li><li>     <a class="l_k" href="functions/return.html">return</a> <span class="i">$min</span> + <a class="l_k" href="functions/int.html">int</a> <a class="l_k" href="functions/rand.html">rand</a><span class="s">(</span><span class="n">1</span> + <span class="i">$max</span> - <span class="i">$min</span><span class="s">)</span><span class="sc">;</span></li><li>   <span class="s">}</span></li></ol></pre><a class='view-head1' id="Data%3a-Dates"></a><h2 class='h2' >Data: Dates</h2>
<a class='view-head2' id="How-do-I-find-the-day-or-week-of-the-year%3f"></a><h3 class='h3' >How do I find the day or week of the year?</h3>
<p>The localtime function returns the day of the year.  Without an
argument localtime uses the current time.</p>
<pre class="verbatim"><ol><li>	<span class="i">$day_of_year</span> = <span class="s">(</span><a class="l_k" href="functions/localtime.html">localtime</a><span class="s">)</span>[<span class="n">7</span>]<span class="sc">;</span></li></ol></pre><p>The POSIX module can also format a date as the day of the year or
week of the year.</p>
<pre class="verbatim"><ol><li>	<a class="l_k" href="functions/use.html">use</a> <span class="w">POSIX</span> <span class="q">qw/strftime/</span><span class="sc">;</span></li><li>	<a class="l_k" href="functions/my.html">my</a> <span class="i">$day_of_year</span>  = <span class="w">strftime</span> <span class="q">&quot;%j&quot;</span><span class="cm">,</span> <a class="l_k" href="functions/localtime.html">localtime</a><span class="sc">;</span></li><li>	<a class="l_k" href="functions/my.html">my</a> <span class="i">$week_of_year</span> = <span class="w">strftime</span> <span class="q">&quot;%W&quot;</span><span class="cm">,</span> <a class="l_k" href="functions/localtime.html">localtime</a><span class="sc">;</span></li></ol></pre><p>To get the day of year for any date, use the Time::Local module to get
a time in epoch seconds for the argument to localtime.</p>
<pre class="verbatim"><ol><li>	<a class="l_k" href="functions/use.html">use</a> <span class="w">POSIX</span> <span class="q">qw/strftime/</span><span class="sc">;</span></li><li>	<a class="l_k" href="functions/use.html">use</a> <span class="w">Time::Local</span><span class="sc">;</span></li><li>	<a class="l_k" href="functions/my.html">my</a> <span class="i">$week_of_year</span> = <span class="w">strftime</span> <span class="q">&quot;%W&quot;</span><span class="cm">,</span></li><li>		<a class="l_k" href="functions/localtime.html">localtime</a><span class="s">(</span> <span class="i">timelocal</span><span class="s">(</span> <span class="n">0</span><span class="cm">,</span> <span class="n">0</span><span class="cm">,</span> <span class="n">0</span><span class="cm">,</span> <span class="n">18</span><span class="cm">,</span> <span class="n">11</span><span class="cm">,</span> <span class="n">1987</span> <span class="s">)</span> <span class="s">)</span><span class="sc">;</span></li></ol></pre><p>The Date::Calc module provides two functions to calculate these.</p>
<pre class="verbatim"><ol><li>	<a class="l_k" href="functions/use.html">use</a> <span class="w">Date::Calc</span><span class="sc">;</span></li><li>	<a class="l_k" href="functions/my.html">my</a> <span class="i">$day_of_year</span>  = <span class="i">Day_of_Year</span><span class="s">(</span>  <span class="n">1987</span><span class="cm">,</span> <span class="n">12</span><span class="cm">,</span> <span class="n">18</span> <span class="s">)</span><span class="sc">;</span></li><li>	<a class="l_k" href="functions/my.html">my</a> <span class="i">$week_of_year</span> = <span class="i">Week_of_Year</span><span class="s">(</span> <span class="n">1987</span><span class="cm">,</span> <span class="n">12</span><span class="cm">,</span> <span class="n">18</span> <span class="s">)</span><span class="sc">;</span></li></ol></pre><a class='view-head2' id="How-do-I-find-the-current-century-or-millennium%3f"></a><h3 class='h3' >How do I find the current century or millennium?</h3>
<p>Use the following simple functions:</p>
<pre class="verbatim"><ol><li><a name="get_century"></a>    sub <span class="m">get_century</span>    <span class="s">{</span></li><li>	<a class="l_k" href="functions/return.html">return</a> <a class="l_k" href="functions/int.html">int</a><span class="s">(</span><span class="s">(</span><span class="s">(</span><span class="s">(</span><a class="l_k" href="functions/localtime.html">localtime</a><span class="s">(</span><a class="l_k" href="functions/shift.html">shift</a> || <a class="l_k" href="functions/time.html">time</a><span class="s">)</span><span class="s">)</span>[<span class="n">5</span>] + <span class="n">1999</span><span class="s">)</span><span class="s">)</span>/<span class="n">100</span><span class="s">)</span><span class="sc">;</span></li><li>    <span class="s">}</span></li><li></li><li><a name="get_millennium"></a>    sub <span class="m">get_millennium</span> <span class="s">{</span></li><li>	<a class="l_k" href="functions/return.html">return</a> <span class="n">1</span>+<a class="l_k" href="functions/int.html">int</a><span class="s">(</span><span class="s">(</span><span class="s">(</span><span class="s">(</span><a class="l_k" href="functions/localtime.html">localtime</a><span class="s">(</span><a class="l_k" href="functions/shift.html">shift</a> || <a class="l_k" href="functions/time.html">time</a><span class="s">)</span><span class="s">)</span>[<span class="n">5</span>] + <span class="n">1899</span><span class="s">)</span><span class="s">)</span>/<span class="n">1000</span><span class="s">)</span><span class="sc">;</span></li><li>    <span class="s">}</span></li></ol></pre><p>On some systems, the POSIX module's strftime() function has
been extended in a non-standard way to use a <code class="inline"><span class="i">%C</span></code>
 format,
which they sometimes claim is the "century".  It isn't,
because on most such systems, this is only the first two
digits of the four-digit year, and thus cannot be used to
reliably determine the current century or millennium.</p>
<a class='view-head2' id="How-can-I-compare-two-dates-and-find-the-difference%3f"></a><h3 class='h3' >How can I compare two dates and find the difference?</h3>
<p>(contributed by brian d foy)</p>
<p>You could just store all your dates as a number and then subtract. Life
isn't always that simple though. If you want to work with formatted
dates, the Date::Manip, Date::Calc, or DateTime modules can help you.</p>
<a class='view-head2' id="How-can-I-take-a-string-and-turn-it-into-epoch-seconds%3f"></a><h3 class='h3' >How can I take a string and turn it into epoch seconds?</h3>
<p>If it's a regular enough string that it always has the same format,
you can split it up and pass the parts to <code class="inline"><span class="w">timelocal</span></code>
 in the standard
Time::Local module.  Otherwise, you should look into the Date::Calc
and Date::Manip modules from CPAN.</p>
<a class='view-head2' id="How-can-I-find-the-Julian-Day%3f"></a><h3 class='h3' >How can I find the Julian Day?</h3>
<p>(contributed by brian d foy and Dave Cross)</p>
<p>You can use the Time::JulianDay module available on CPAN.  Ensure that
you really want to find a Julian day, though, as many people have
different ideas about Julian days.  See
<a href="http://www.hermetic.ch/cal_stud/jdn.htm">http://www.hermetic.ch/cal_stud/jdn.htm</a> for instance.</p>
<p>You can also try the DateTime module, which can convert a date/time
to a Julian Day.</p>
<pre class="verbatim"><ol><li>  <span class="i">$ perl</span> -<span class="w">MDateTime</span> -le<span class="q">&#39;print DateTime-&gt;today-&gt;jd&#39;</span></li><li>  <span class="n">2453401.5</span></li></ol></pre><p>Or the modified Julian Day</p>
<pre class="verbatim"><ol><li>  <span class="i">$ perl</span> -<span class="w">MDateTime</span> -le<span class="q">&#39;print DateTime-&gt;today-&gt;mjd&#39;</span></li><li>  <span class="n">53401</span></li></ol></pre><p>Or even the day of the year (which is what some people think of as a
Julian day)</p>
<pre class="verbatim"><ol><li>  <span class="i">$ perl</span> -<span class="w">MDateTime</span> -le<span class="q">&#39;print DateTime-&gt;today-&gt;doy&#39;</span></li><li>  <span class="n">31</span></li></ol></pre><a class='view-head2' id="How-do-I-find-yesterday's-date%3f"></a><h3 class='h3' >How do I find yesterday's date?</h3>
<p>(contributed by brian d foy)</p>
<p>Use one of the Date modules. The <code class="inline"><span class="w">DateTime</span></code>
 module makes it simple, and
give you the same time of day, only the day before.</p>
<pre class="verbatim"><ol><li>	<a class="l_k" href="functions/use.html">use</a> <span class="w">DateTime</span><span class="sc">;</span></li><li></li><li>	<a class="l_k" href="functions/my.html">my</a> <span class="i">$yesterday</span> = <span class="w">DateTime</span><span class="w">-&gt;now</span><span class="w">-&gt;subtract</span><span class="s">(</span> <span class="w">days</span> <span class="cm">=&gt;</span> <span class="n">1</span> <span class="s">)</span><span class="sc">;</span></li><li></li><li>	<a class="l_k" href="functions/print.html">print</a> <span class="q">&quot;Yesterday was $yesterday\n&quot;</span><span class="sc">;</span></li></ol></pre><p>You can also use the <code class="inline"><span class="w">Date::Calc</span></code>
 module using its Today_and_Now
function.</p>
<pre class="verbatim"><ol><li>	<a class="l_k" href="functions/use.html">use</a> <span class="w">Date::Calc</span> <span class="q">qw( Today_and_Now Add_Delta_DHMS )</span><span class="sc">;</span></li><li></li><li>	<a class="l_k" href="functions/my.html">my</a> <span class="i">@date_time</span> = <span class="i">Add_Delta_DHMS</span><span class="s">(</span> <span class="i">Today_and_Now</span><span class="s">(</span><span class="s">)</span><span class="cm">,</span> <span class="n">-1</span><span class="cm">,</span> <span class="n">0</span><span class="cm">,</span> <span class="n">0</span><span class="cm">,</span> <span class="n">0</span> <span class="s">)</span><span class="sc">;</span></li><li></li><li>	<a class="l_k" href="functions/print.html">print</a> <span class="q">&quot;@date\n&quot;</span><span class="sc">;</span></li></ol></pre><p>Most people try to use the time rather than the calendar to figure out
dates, but that assumes that days are twenty-four hours each.  For
most people, there are two days a year when they aren't: the switch to
and from summer time throws this off. Let the modules do the work.</p>
<a class='view-head2' id="Does-Perl-have-a-Year-2000-problem%3f--Is-Perl-Y2K-compliant%3f"></a><h3 class='h3' >Does Perl have a Year 2000 problem?  Is Perl Y2K compliant?</h3>
<p>Short answer: No, Perl does not have a Year 2000 problem.  Yes, Perl is
Y2K compliant (whatever that means).  The programmers you've hired to
use it, however, probably are not.</p>
<p>Long answer: The question belies a true understanding of the issue.
Perl is just as Y2K compliant as your pencil--no more, and no less.
Can you use your pencil to write a non-Y2K-compliant memo?  Of course
you can.  Is that the pencil's fault?  Of course it isn't.</p>
<p>The date and time functions supplied with Perl (gmtime and localtime)
supply adequate information to determine the year well beyond 2000
(2038 is when trouble strikes for 32-bit machines).  The year returned
by these functions when used in a list context is the year minus 1900.
For years between 1910 and 1999 this <i>happens</i> to be a 2-digit decimal
number. To avoid the year 2000 problem simply do not treat the year as
a 2-digit number.  It isn't.</p>
<p>When gmtime() and localtime() are used in scalar context they return
a timestamp string that contains a fully-expanded year.  For example,
<code class="inline"><span class="i">$timestamp</span> = <a class="l_k" href="functions/gmtime.html">gmtime</a><span class="s">(</span><span class="n">1005613200</span><span class="s">)</span></code>
 sets $timestamp to "Tue Nov 13 01:00:00
2001".  There's no year 2000 problem here.</p>
<p>That doesn't mean that Perl can't be used to create non-Y2K compliant
programs.  It can.  But so can your pencil.  It's the fault of the user,
not the language.  At the risk of inflaming the NRA: "Perl doesn't
break Y2K, people do."  See <a href="http://www.perl.org/about/y2k.html">http://www.perl.org/about/y2k.html</a> for
a longer exposition.</p>
<a class='view-head1' id="Data%3a-Strings"></a><h2 class='h2' >Data: Strings</h2>
<a class='view-head2' id="How-do-I-validate-input%3f"></a><h3 class='h3' >How do I validate input?</h3>
<p>(contributed by brian d foy)</p>
<p>There are many ways to ensure that values are what you expect or
want to accept. Besides the specific examples that we cover in the
perlfaq, you can also look at the modules with "Assert" and "Validate"
in their names, along with other modules such as <code class="inline"><span class="w">Regexp::Common</span></code>
.</p>
<p>Some modules have validation for particular types of input, such
as <code class="inline"><span class="w">Business::ISBN</span></code>
, <code class="inline"><span class="w">Business::CreditCard</span></code>
, <code class="inline"><span class="w">Email::Valid</span></code>
,
and <code class="inline"><span class="w">Data::Validate::IP</span></code>
.</p>
<a class='view-head2' id="How-do-I-unescape-a-string%3f"></a><h3 class='h3' >How do I unescape a string?</h3>
<p>It depends just what you mean by "escape".  URL escapes are dealt
with in <a href="perlfaq9.html">perlfaq9</a>.  Shell escapes with the backslash (<code class="inline">\</code>
)
character are removed with</p>
<pre class="verbatim"><ol><li>    <span class="q">s/\\(.)/$1/g</span><span class="sc">;</span></li></ol></pre><p>This won't expand <code class="inline"><span class="q">&quot;\n&quot;</span></code>
 or <code class="inline"><span class="q">&quot;\t&quot;</span></code>
 or any other special escapes.</p>
<a class='view-head2' id="How-do-I-remove-consecutive-pairs-of-characters%3f"></a><h3 class='h3' >How do I remove consecutive pairs of characters?</h3>
<p>(contributed by brian d foy)</p>
<p>You can use the substitution operator to find pairs of characters (or
runs of characters) and replace them with a single instance. In this
substitution, we find a character in <code class="inline"><span class="s">(</span>.<span class="s">)</span></code>
. The memory parentheses
store the matched character in the back-reference <code class="inline">\<span class="n">1</span></code>
 and we use
that to require that the same thing immediately follow it. We replace
that part of the string with the character in <code class="inline"><span class="i">$1</span></code>
.</p>
<pre class="verbatim"><ol><li>    <span class="q">s/(.)\1/$1/g</span><span class="sc">;</span></li></ol></pre><p>We can also use the transliteration operator, <code class="inline"><a class="l_k" href="functions/tr.html">tr///</a></code>. In this
example, the search list side of our <code class="inline"><a class="l_k" href="functions/tr.html">tr///</a></code> contains nothing, but
the <code class="inline"><span class="w">c</span></code>
 option complements that so it contains everything. The
replacement list also contains nothing, so the transliteration is
almost a no-op since it won't do any replacements (or more exactly,
replace the character with itself). However, the <code class="inline"><a class="l_k" href="functions/s.html">s</a></code> option squashes
duplicated and consecutive characters in the string so a character
does not show up next to itself</p>
<pre class="verbatim"><ol><li>	<a class="l_k" href="functions/my.html">my</a> <span class="i">$str</span> = <span class="q">&#39;Haarlem&#39;</span><span class="sc">;</span>   <span class="c"># in the Netherlands</span></li><li>    <span class="i">$str</span> =~ <span class="q">tr///cs</span><span class="sc">;</span>       <span class="c"># Now Harlem, like in New York</span></li></ol></pre><a class='view-head2' id="How-do-I-expand-function-calls-in-a-string%3f"></a><h3 class='h3' >How do I expand function calls in a string?</h3>
<p>(contributed by brian d foy)</p>
<p>This is documented in <a href="perlref.html">perlref</a>, and although it's not the easiest
thing to read, it does work. In each of these examples, we call the
function inside the braces used to dereference a reference. If we
have a more than one return value, we can construct and dereference an
anonymous array. In this case, we call the function in list context.</p>
<pre class="verbatim"><ol><li>	<a class="l_k" href="functions/print.html">print</a> <span class="q">&quot;The time values are @{ [localtime] }.\n&quot;</span><span class="sc">;</span></li></ol></pre><p>If we want to call the function in scalar context, we have to do a bit
more work. We can really have any code we like inside the braces, so
we simply have to end with the scalar reference, although how you do
that is up to you, and you can use code inside the braces.</p>
<pre class="verbatim"><ol><li>	<a class="l_k" href="functions/print.html">print</a> <span class="q">&quot;The time is ${\(scalar localtime)}.\n&quot;</span></li><li></li><li>	<a class="l_k" href="functions/print.html">print</a> <span class="q">&quot;The time is ${ my $x = localtime; \$x }.\n&quot;</span><span class="sc">;</span></li></ol></pre><p>If your function already returns a reference, you don't need to create
the reference yourself.</p>
<pre class="verbatim"><ol><li><a name="timestamp"></a>	sub <span class="m">timestamp</span> <span class="s">{</span> <a class="l_k" href="functions/my.html">my</a> <span class="i">$t</span> = <a class="l_k" href="functions/localtime.html">localtime</a><span class="sc">;</span> \<span class="i">$t</span> <span class="s">}</span></li><li></li><li>	<a class="l_k" href="functions/print.html">print</a> <span class="q">&quot;The time is ${ timestamp() }.\n&quot;</span><span class="sc">;</span></li></ol></pre><p>The <code class="inline"><span class="w">Interpolation</span></code>
 module can also do a lot of magic for you. You can
specify a variable name, in this case <code class="inline"><span class="w">E</span></code>
, to set up a tied hash that
does the interpolation for you. It has several other methods to do this
as well.</p>
<pre class="verbatim"><ol><li>	<a class="l_k" href="functions/use.html">use</a> <span class="w">Interpolation</span> <span class="w">E</span> <span class="cm">=&gt;</span> <span class="q">&#39;eval&#39;</span><span class="sc">;</span></li><li>	<a class="l_k" href="functions/print.html">print</a> <span class="q">&quot;The time values are $E{localtime()}.\n&quot;</span><span class="sc">;</span></li></ol></pre><p>In most cases, it is probably easier to simply use string concatenation,
which also forces scalar context.</p>
<pre class="verbatim"><ol><li>	<a class="l_k" href="functions/print.html">print</a> <span class="q">&quot;The time is &quot;</span> . <a class="l_k" href="functions/localtime.html">localtime</a> . <span class="q">&quot;.\n&quot;</span><span class="sc">;</span></li></ol></pre><a class='view-head2' id="How-do-I-find-matching%2fnesting-anything%3f"></a><h3 class='h3' >How do I find matching/nesting anything?</h3>
<p>This isn't something that can be done in one regular expression, no
matter how complicated.  To find something between two single
characters, a pattern like <code class="inline"><span class="q">/x([^x]*)x/</span></code>
 will get the intervening
bits in $1. For multiple ones, then something more like
<code class="inline"><span class="q">/alpha(.*?)omega/</span></code>
 would be needed.  But none of these deals with
nested patterns.  For balanced expressions using <code class="inline"><span class="s">(</span></code>
, <code class="inline"><span class="s">{</span></code>
, <code class="inline"><span class="s">[</span></code>
 or
<code class="inline">&lt;</code>
 as delimiters, use the CPAN module Regexp::Common, or see
<a href="perlre.html#(%3f%3f%7b-code-%7d)">(??{ code }) in perlre</a>.  For other cases, you'll have to write a
parser.</p>
<p>If you are serious about writing a parser, there are a number of
modules or oddities that will make your life a lot easier.  There are
the CPAN modules Parse::RecDescent, Parse::Yapp, and Text::Balanced;
and the byacc program.   Starting from perl 5.8 the Text::Balanced is
part of the standard distribution.</p>
<p>One simple destructive, inside-out approach that you might try is to
pull out the smallest nesting parts one at a time:</p>
<pre class="verbatim"><ol><li>    while <span class="s">(</span><span class="q">s/BEGIN((?:(?!BEGIN)(?!END).)*)END//gs</span><span class="s">)</span> <span class="s">{</span></li><li>	<span class="c"># do something with $1</span></li><li>    <span class="s">}</span></li></ol></pre><p>A more complicated and sneaky approach is to make Perl's regular
expression engine do it for you.  This is courtesy Dean Inada, and
rather has the nature of an Obfuscated Perl Contest entry, but it
really does work:</p>
<pre class="verbatim"><ol><li>    <span class="c"># $_ contains the string to parse</span></li><li>    <span class="c"># BEGIN and END are the opening and closing markers for the</span></li><li>    <span class="c"># nested text.</span></li><li></li><li>    <span class="i">@(</span> = <span class="s">(</span><span class="q">&#39;(&#39;</span><span class="cm">,</span><span class="q">&#39;&#39;</span><span class="s">)</span><span class="sc">;</span></li><li>    <span class="i">@)</span> = <span class="s">(</span><span class="q">&#39;)&#39;</span><span class="cm">,</span><span class="q">&#39;&#39;</span><span class="s">)</span><span class="sc">;</span></li><li>    <span class="s">(</span><span class="i">$re</span>=<span class="i">$_</span><span class="s">)</span>=~<span class="q">s/((BEGIN)|(END)|.)/$)[!$3]\Q$1\E$([!$2]/gs</span><span class="sc">;</span></li><li>    <span class="i">@$</span> = <span class="s">(</span><a class="l_k" href="functions/eval.html">eval</a><span class="s">{</span><span class="q">/$re/</span><span class="s">}</span><span class="cm">,</span><span class="i">$@</span>!~<span class="q">/unmatched/i</span><span class="s">)</span><span class="sc">;</span></li><li>    <a class="l_k" href="functions/print.html">print</a> <a class="l_k" href="functions/join.html">join</a><span class="s">(</span><span class="q">&quot;\n&quot;</span><span class="cm">,</span><span class="i">@$</span>[<span class="n">0</span>..<span class="i">$#$</span>]<span class="s">)</span> if<span class="s">(</span> <span class="i">$$</span>[<span class="n">-1</span>] <span class="s">)</span><span class="sc">;</span></li></ol></pre><a class='view-head2' id="How-do-I-reverse-a-string%3f"></a><h3 class='h3' >How do I reverse a string?</h3>
<p>Use reverse() in scalar context, as documented in
<a class='function-name' href="functions/reverse.html">reverse</a>.</p>
<pre class="verbatim"><ol><li>    <span class="i">$reversed</span> = <a class="l_k" href="functions/reverse.html">reverse</a> <span class="i">$string</span><span class="sc">;</span></li></ol></pre><a class='view-head2' id="How-do-I-expand-tabs-in-a-string%3f"></a><h3 class='h3' >How do I expand tabs in a string?</h3>
<p>You can do it yourself:</p>
<pre class="verbatim"><ol><li>    <span class="n">1</span> while <span class="i">$string</span> =~ <span class="q">s/\t+/&#39; &#39; x (length($&amp;) * 8 - length($`) % 8)/e</span><span class="sc">;</span></li></ol></pre><p>Or you can just use the Text::Tabs module (part of the standard Perl
distribution).</p>
<pre class="verbatim"><ol><li>    <a class="l_k" href="functions/use.html">use</a> <span class="w">Text::Tabs</span><span class="sc">;</span></li><li>    <span class="i">@expanded_lines</span> = <span class="i">expand</span><span class="s">(</span><span class="i">@lines_with_tabs</span><span class="s">)</span><span class="sc">;</span></li></ol></pre><a class='view-head2' id="How-do-I-reformat-a-paragraph%3f"></a><h3 class='h3' >How do I reformat a paragraph?</h3>
<p>Use Text::Wrap (part of the standard Perl distribution):</p>
<pre class="verbatim"><ol><li>    <a class="l_k" href="functions/use.html">use</a> <span class="w">Text::Wrap</span><span class="sc">;</span></li><li>    <a class="l_k" href="functions/print.html">print</a> <span class="i">wrap</span><span class="s">(</span><span class="q">&quot;\t&quot;</span><span class="cm">,</span> <span class="q">&#39;  &#39;</span><span class="cm">,</span> <span class="i">@paragraphs</span><span class="s">)</span><span class="sc">;</span></li></ol></pre><p>The paragraphs you give to Text::Wrap should not contain embedded
newlines.  Text::Wrap doesn't justify the lines (flush-right).</p>
<p>Or use the CPAN module Text::Autoformat.  Formatting files can be easily
done by making a shell alias, like so:</p>
<pre class="verbatim"><ol><li>    <span class="w">alias</span> <span class="w">fmt</span>=<span class="q">&quot;perl -i -MText::Autoformat -n0777 \</span></li><li>        <span class="q">        -e &#39;print autoformat $_, {all=&gt;1}&#39; $*&quot;</span></li></ol></pre><p>See the documentation for Text::Autoformat to appreciate its many
capabilities.</p>
<a class='view-head2' id="How-can-I-access-or-change-N-characters-of-a-string%3f"></a><h3 class='h3' >How can I access or change N characters of a string?</h3>
<p>You can access the first characters of a string with substr().
To get the first character, for example, start at position 0
and grab the string of length 1.</p>
<pre class="verbatim"><ol><li>	<span class="i">$string</span> = <span class="q">&quot;Just another Perl Hacker&quot;</span><span class="sc">;</span></li><li>    <span class="i">$first_char</span> = <a class="l_k" href="functions/substr.html">substr</a><span class="s">(</span> <span class="i">$string</span><span class="cm">,</span> <span class="n">0</span><span class="cm">,</span> <span class="n">1</span> <span class="s">)</span><span class="sc">;</span>  <span class="c">#  &#39;J&#39;</span></li></ol></pre><p>To change part of a string, you can use the optional fourth
argument which is the replacement string.</p>
<pre class="verbatim"><ol><li>    <a class="l_k" href="functions/substr.html">substr</a><span class="s">(</span> <span class="i">$string</span><span class="cm">,</span> <span class="n">13</span><span class="cm">,</span> <span class="n">4</span><span class="cm">,</span> <span class="q">&quot;Perl 5.8.0&quot;</span> <span class="s">)</span><span class="sc">;</span></li></ol></pre><p>You can also use substr() as an lvalue.</p>
<pre class="verbatim"><ol><li>    <a class="l_k" href="functions/substr.html">substr</a><span class="s">(</span> <span class="i">$string</span><span class="cm">,</span> <span class="n">13</span><span class="cm">,</span> <span class="n">4</span> <span class="s">)</span> =  <span class="q">&quot;Perl 5.8.0&quot;</span><span class="sc">;</span></li></ol></pre><a class='view-head2' id="How-do-I-change-the-Nth-occurrence-of-something%3f"></a><h3 class='h3' >How do I change the Nth occurrence of something?</h3>
<p>You have to keep track of N yourself.  For example, let's say you want
to change the fifth occurrence of <code class="inline"><span class="q">&quot;whoever&quot;</span></code>
 or <code class="inline"><span class="q">&quot;whomever&quot;</span></code>
 into
<code class="inline"><span class="q">&quot;whosoever&quot;</span></code>
 or <code class="inline"><span class="q">&quot;whomsoever&quot;</span></code>
, case insensitively.  These
all assume that $_ contains the string to be altered.</p>
<pre class="verbatim"><ol><li>    <span class="i">$count</span> = <span class="n">0</span><span class="sc">;</span></li><li>    <span class="q">s{((whom?)ever)}{</span></li><li>	<span class="q">	++$count == 5   	# is it the 5th?</span></li><li>	    <span class="q">	    ? &quot;${2}soever&quot;	# yes, swap</span></li><li>	    <span class="q">	    : $1		# renege and leave it there</span></li><li>    <span class="q">    }ige</span><span class="sc">;</span></li></ol></pre><p>In the more general case, you can use the <code class="inline"><span class="q">/g</span></code>
 modifier in a <code class="inline">while</code>

loop, keeping count of matches.</p>
<pre class="verbatim"><ol><li>    <span class="i">$WANT</span> = <span class="n">3</span><span class="sc">;</span></li><li>    <span class="i">$count</span> = <span class="n">0</span><span class="sc">;</span></li><li>    <span class="i">$_</span> = <span class="q">&quot;One fish two fish red fish blue fish&quot;</span><span class="sc">;</span></li><li>    while <span class="s">(</span><span class="q">/(\w+)\s+fish\b/gi</span><span class="s">)</span> <span class="s">{</span></li><li>        if <span class="s">(</span>++<span class="i">$count</span> == <span class="i">$WANT</span><span class="s">)</span> <span class="s">{</span></li><li>            <a class="l_k" href="functions/print.html">print</a> <span class="q">&quot;The third fish is a $1 one.\n&quot;</span><span class="sc">;</span></li><li>        <span class="s">}</span></li><li>    <span class="s">}</span></li></ol></pre><p>That prints out: <code class="inline"><span class="q">&quot;The third fish is a red one.&quot;</span></code>
  You can also use a
repetition count and repeated pattern like this:</p>
<pre class="verbatim"><ol><li>    <span class="q">/(?:\w+\s+fish\s+){2}(\w+)\s+fish/i</span><span class="sc">;</span></li></ol></pre><a class='view-head2' id="How-can-I-count-the-number-of-occurrences-of-a-substring-within-a-string%3f"></a><h3 class='h3' >How can I count the number of occurrences of a substring within a string?</h3>
<p>There are a number of ways, with varying efficiency.  If you want a
count of a certain single character (X) within a string, you can use the
<code class="inline"><a class="l_k" href="functions/tr.html">tr///</a></code> function like so:</p>
<pre class="verbatim"><ol><li>    <span class="i">$string</span> = <span class="q">&quot;ThisXlineXhasXsomeXx&#39;sXinXit&quot;</span><span class="sc">;</span></li><li>    <span class="i">$count</span> = <span class="s">(</span><span class="i">$string</span> =~ <span class="q">tr/X//</span><span class="s">)</span><span class="sc">;</span></li><li>    <a class="l_k" href="functions/print.html">print</a> <span class="q">&quot;There are $count X characters in the string&quot;</span><span class="sc">;</span></li></ol></pre><p>This is fine if you are just looking for a single character.  However,
if you are trying to count multiple character substrings within a
larger string, <code class="inline"><a class="l_k" href="functions/tr.html">tr///</a></code> won't work.  What you can do is wrap a while()
loop around a global pattern match.  For example, let's count negative
integers:</p>
<pre class="verbatim"><ol><li>    <span class="i">$string</span> = <span class="q">&quot;-9 55 48 -2 23 -76 4 14 -44&quot;</span><span class="sc">;</span></li><li>    while <span class="s">(</span><span class="i">$string</span> =~ <span class="q">/-\d+/g</span><span class="s">)</span> <span class="s">{</span> <span class="i">$count</span>++ <span class="s">}</span></li><li>    <a class="l_k" href="functions/print.html">print</a> <span class="q">&quot;There are $count negative numbers in the string&quot;</span><span class="sc">;</span></li></ol></pre><p>Another version uses a global match in list context, then assigns the
result to a scalar, producing a count of the number of matches.</p>
<pre class="verbatim"><ol><li>	<span class="i">$count</span> = <span class="s">(</span><span class="s">)</span> = <span class="i">$string</span> =~ <span class="q">/-\d+/g</span><span class="sc">;</span></li></ol></pre><a class='view-head2' id="How-do-I-capitalize-all-the-words-on-one-line%3f"></a><h3 class='h3' >How do I capitalize all the words on one line?</h3>
<p>To make the first letter of each word upper case:</p>
<pre class="verbatim"><ol><li>        <span class="i">$line</span> =~ <span class="q">s/\b(\w)/\U$1/g</span><span class="sc">;</span></li></ol></pre><p>This has the strange effect of turning "<code class="inline"><span class="w">don&#39;t</span> <a class="l_k" href="functions/do.html">do</a> <span class="w">it</span></code>
" into "<code class="inline"><span class="w">Don&#39;T</span>
<span class="w">Do</span> <span class="w">It</span></code>
".  Sometimes you might want this.  Other times you might need a
more thorough solution (Suggested by brian d foy):</p>
<pre class="verbatim"><ol><li>    <span class="i">$string</span> =~ <span class="q">s/ (</span></li><li>                 <span class="q">                 (^\w)    #at the beginning of the line</span></li><li>                   <span class="q">                   |      # or</span></li><li>                 <span class="q">                 (\s\w)   #preceded by whitespace</span></li><li>                   <span class="q">                   )</span></li><li>                <span class="q">                /\U$1/xg</span><span class="sc">;</span></li><li>    <span class="i">$string</span> =~ <span class="q">/([\w&#39;]+)/</span>\<span class="w">u</span>\<span class="w">L</span><span class="i">$1</span>/<span class="w">g</span><span class="sc">;</span></li></ol></pre><p>To make the whole line upper case:</p>
<pre class="verbatim"><ol><li>        <span class="i">$line</span> = <a class="l_k" href="functions/uc.html">uc</a><span class="s">(</span><span class="i">$line</span><span class="s">)</span><span class="sc">;</span></li></ol></pre><p>To force each word to be lower case, with the first letter upper case:</p>
<pre class="verbatim"><ol><li>        <span class="i">$line</span> =~ <span class="q">s/(\w+)/\u\L$1/g</span><span class="sc">;</span></li></ol></pre><p>You can (and probably should) enable locale awareness of those
characters by placing a <code class="inline"><a class="l_k" href="functions/use.html">use</a> <span class="w">locale</span></code>
 pragma in your program.
See <a href="perllocale.html">perllocale</a> for endless details on locales.</p>
<p>This is sometimes referred to as putting something into "title
case", but that's not quite accurate.  Consider the proper
capitalization of the movie <i>Dr. Strangelove or: How I Learned to
Stop Worrying and Love the Bomb</i>, for example.</p>
<p>Damian Conway's <a href="https://search.cpan.org/perldoc/Text::Autoformat">Text::Autoformat</a> module provides some smart
case transformations:</p>
<pre class="verbatim"><ol><li>    <a class="l_k" href="functions/use.html">use</a> <span class="w">Text::Autoformat</span><span class="sc">;</span></li><li>    <a class="l_k" href="functions/my.html">my</a> <span class="i">$x</span> = <span class="q">&quot;Dr. Strangelove or: How I Learned to Stop &quot;</span>.</li><li>      <span class="q">&quot;Worrying and Love the Bomb&quot;</span><span class="sc">;</span></li><li></li><li>    <a class="l_k" href="functions/print.html">print</a> <span class="i">$x</span><span class="cm">,</span> <span class="q">&quot;\n&quot;</span><span class="sc">;</span></li><li>    for <a class="l_k" href="functions/my.html">my</a> <span class="i">$style</span> <span class="s">(</span><span class="q">qw( sentence title highlight )</span><span class="s">)</span></li><li>    <span class="s">{</span></li><li>        <a class="l_k" href="functions/print.html">print</a> <span class="i">autoformat</span><span class="s">(</span><span class="i">$x</span><span class="cm">,</span> <span class="s">{</span> <span class="w">case</span> <span class="cm">=&gt;</span> <span class="i">$style</span> <span class="s">}</span><span class="s">)</span><span class="cm">,</span> <span class="q">&quot;\n&quot;</span><span class="sc">;</span></li><li>    <span class="s">}</span></li></ol></pre><a class='view-head2' id="How-can-I-split-a-%5bcharacter%5d-delimited-string-except-when-inside-%5bcharacter%5d%3f"></a><h3 class='h3' >How can I split a [character] delimited string except when inside [character]?</h3>
<p>Several modules can handle this sort of pasing---Text::Balanced,
Text::CSV, Text::CSV_XS, and Text::ParseWords, among others.</p>
<p>Take the example case of trying to split a string that is
comma-separated into its different fields. You can't use <code class="inline"><a class="l_k" href="functions/split.html">split(/,/)</a></code>
because you shouldn't split if the comma is inside quotes.  For
example, take a data line like this:</p>
<pre class="verbatim"><ol><li>    <span class="w">SAR001</span><span class="cm">,</span><span class="q">&quot;&quot;</span><span class="cm">,</span><span class="q">&quot;Cimetrix, Inc&quot;</span><span class="cm">,</span><span class="q">&quot;Bob Smith&quot;</span><span class="cm">,</span><span class="q">&quot;CAM&quot;</span><span class="cm">,</span><span class="w">N</span><span class="cm">,</span><span class="n">8</span><span class="cm">,</span><span class="n">1</span><span class="cm">,</span><span class="n">0</span><span class="cm">,</span><span class="n">7</span><span class="cm">,</span><span class="q">&quot;Error, Core Dumped&quot;</span></li></ol></pre><p>Due to the restriction of the quotes, this is a fairly complex
problem.  Thankfully, we have Jeffrey Friedl, author of
<i>Mastering Regular Expressions</i>, to handle these for us.  He
suggests (assuming your string is contained in $text):</p>
<pre class="verbatim"><ol><li>     <span class="i">@new</span> = <span class="s">(</span><span class="s">)</span><span class="sc">;</span></li><li>     <a class="l_k" href="functions/push.html">push</a><span class="s">(</span><span class="i">@new</span><span class="cm">,</span> <span class="i">$+</span><span class="s">)</span> while <span class="i">$text</span> =~ <span class="q">m{</span></li><li>         <span class="q">         &quot;([^\&quot;\\]*(?:\\.[^\&quot;\\]*)*)&quot;,?  # groups the phrase inside the quotes</span></li><li>       <span class="q">       | ([^,]+),?</span></li><li>       <span class="q">       | ,</span></li><li>     <span class="q">     }gx</span><span class="sc">;</span></li><li>     <a class="l_k" href="functions/push.html">push</a><span class="s">(</span><span class="i">@new</span><span class="cm">,</span> <a class="l_k" href="functions/undef.html">undef</a><span class="s">)</span> if <a class="l_k" href="functions/substr.html">substr</a><span class="s">(</span><span class="i">$text</span><span class="cm">,</span><span class="n">-1</span><span class="cm">,</span><span class="n">1</span><span class="s">)</span> eq <span class="q">&#39;,&#39;</span><span class="sc">;</span></li></ol></pre><p>If you want to represent quotation marks inside a
quotation-mark-delimited field, escape them with backslashes (eg,
<code class="inline"><span class="q">&quot;like \&quot;this\&quot;&quot;</span></code>
.</p>
<p>Alternatively, the Text::ParseWords module (part of the standard Perl
distribution) lets you say:</p>
<pre class="verbatim"><ol><li>    <a class="l_k" href="functions/use.html">use</a> <span class="w">Text::ParseWords</span><span class="sc">;</span></li><li>    <span class="i">@new</span> = <span class="i">quotewords</span><span class="s">(</span><span class="q">&quot;,&quot;</span><span class="cm">,</span> <span class="n">0</span><span class="cm">,</span> <span class="i">$text</span><span class="s">)</span><span class="sc">;</span></li></ol></pre><p>There's also a Text::CSV (Comma-Separated Values) module on CPAN.</p>
<a class='view-head2' id="How-do-I-strip-blank-space-from-the-beginning%2fend-of-a-string%3f"></a><h3 class='h3' >How do I strip blank space from the beginning/end of a string?</h3>
<p>(contributed by brian d foy)</p>
<p>A substitution can do this for you. For a single line, you want to
replace all the leading or trailing whitespace with nothing. You
can do that with a pair of substitutions.</p>
<pre class="verbatim"><ol><li>	<span class="q">s/^\s+//</span><span class="sc">;</span></li><li>	<span class="q">s/\s+$//</span><span class="sc">;</span></li></ol></pre><p>You can also write that as a single substitution, although it turns
out the combined statement is slower than the separate ones. That
might not matter to you, though.</p>
<pre class="verbatim"><ol><li>	<span class="q">s/^\s+|\s+$//g</span><span class="sc">;</span></li></ol></pre><p>In this regular expression, the alternation matches either at the
beginning or the end of the string since the anchors have a lower
precedence than the alternation. With the <code class="inline"><span class="q">/g</span></code>
 flag, the substitution
makes all possible matches, so it gets both. Remember, the trailing
newline matches the <code class="inline">\<span class="q">s+</span></code>
, and  the <code class="inline"><span class="i">$</span></code>
 anchor can match to the
physical end of the string, so the newline disappears too. Just add
the newline to the output, which has the added benefit of preserving
"blank" (consisting entirely of whitespace) lines which the <code class="inline">^\<span class="q">s+</span></code>

would remove all by itself.</p>
<pre class="verbatim"><ol><li>	while<span class="s">(</span> &lt;&gt; <span class="s">)</span></li><li>		<span class="s">{</span></li><li>		<span class="q">s/^\s+|\s+$//g</span><span class="sc">;</span></li><li>		<a class="l_k" href="functions/print.html">print</a> <span class="q">&quot;$_\n&quot;</span><span class="sc">;</span></li><li>		<span class="s">}</span></li></ol></pre><p>For a multi-line string, you can apply the regular expression
to each logical line in the string by adding the <code class="inline"><span class="q">/m</span></code>
 flag (for
"multi-line"). With the <code class="inline"><span class="q">/m</span></code>
 flag, the <code class="inline"><span class="i">$</span></code>
 matches <i>before</i> an
embedded newline, so it doesn't remove it. It still removes the
newline at the end of the string.</p>
<pre class="verbatim"><ol><li>    <span class="i">$string</span> =~ <span class="q">s/^\s+|\s+$//gm</span><span class="sc">;</span></li></ol></pre><p>Remember that lines consisting entirely of whitespace will disappear,
since the first part of the alternation can match the entire string
and replace it with nothing. If need to keep embedded blank lines,
you have to do a little more work. Instead of matching any whitespace
(since that includes a newline), just match the other whitespace.</p>
<pre class="verbatim"><ol><li>	<span class="i">$string</span> =~ <span class="q">s/^[\t\f ]+|[\t\f ]+$//mg</span><span class="sc">;</span></li></ol></pre><a class='view-head2' id="How-do-I-pad-a-string-with-blanks-or-pad-a-number-with-zeroes%3f"></a><h3 class='h3' >How do I pad a string with blanks or pad a number with zeroes?</h3>
<p>In the following examples, <code class="inline"><span class="i">$pad_len</span></code>
 is the length to which you wish
to pad the string, <code class="inline"><span class="i">$text</span></code>
 or <code class="inline"><span class="i">$num</span></code>
 contains the string to be padded,
and <code class="inline"><span class="i">$pad_char</span></code>
 contains the padding character. You can use a single
character string constant instead of the <code class="inline"><span class="i">$pad_char</span></code>
 variable if you
know what it is in advance. And in the same way you can use an integer in
place of <code class="inline"><span class="i">$pad_len</span></code>
 if you know the pad length in advance.</p>
<p>The simplest method uses the <code class="inline"><a class="l_k" href="functions/sprintf.html">sprintf</a></code> function. It can pad on the left
or right with blanks and on the left with zeroes and it will not
truncate the result. The <code class="inline"><a class="l_k" href="functions/pack.html">pack</a></code> function can only pad strings on the
right with blanks and it will truncate the result to a maximum length of
<code class="inline"><span class="i">$pad_len</span></code>
.</p>
<pre class="verbatim"><ol><li>    <span class="c"># Left padding a string with blanks (no truncation):</span></li><li>	<span class="i">$padded</span> = <a class="l_k" href="functions/sprintf.html">sprintf</a><span class="s">(</span><span class="q">&quot;%${pad_len}s&quot;</span><span class="cm">,</span> <span class="i">$text</span><span class="s">)</span><span class="sc">;</span></li><li>	<span class="i">$padded</span> = <a class="l_k" href="functions/sprintf.html">sprintf</a><span class="s">(</span><span class="q">&quot;%*s&quot;</span><span class="cm">,</span> <span class="i">$pad_len</span><span class="cm">,</span> <span class="i">$text</span><span class="s">)</span><span class="sc">;</span>  <span class="c"># same thing</span></li><li></li><li>    <span class="c"># Right padding a string with blanks (no truncation):</span></li><li>	<span class="i">$padded</span> = <a class="l_k" href="functions/sprintf.html">sprintf</a><span class="s">(</span><span class="q">&quot;%-${pad_len}s&quot;</span><span class="cm">,</span> <span class="i">$text</span><span class="s">)</span><span class="sc">;</span></li><li>	<span class="i">$padded</span> = <a class="l_k" href="functions/sprintf.html">sprintf</a><span class="s">(</span><span class="q">&quot;%-*s&quot;</span><span class="cm">,</span> <span class="i">$pad_len</span><span class="cm">,</span> <span class="i">$text</span><span class="s">)</span><span class="sc">;</span> <span class="c"># same thing</span></li><li></li><li>    <span class="c"># Left padding a number with 0 (no truncation):</span></li><li>	<span class="i">$padded</span> = <a class="l_k" href="functions/sprintf.html">sprintf</a><span class="s">(</span><span class="q">&quot;%0${pad_len}d&quot;</span><span class="cm">,</span> <span class="i">$num</span><span class="s">)</span><span class="sc">;</span></li><li>	<span class="i">$padded</span> = <a class="l_k" href="functions/sprintf.html">sprintf</a><span class="s">(</span><span class="q">&quot;%0*d&quot;</span><span class="cm">,</span> <span class="i">$pad_len</span><span class="cm">,</span> <span class="i">$num</span><span class="s">)</span><span class="sc">;</span> <span class="c"># same thing</span></li><li></li><li>    <span class="c"># Right padding a string with blanks using pack (will truncate):</span></li><li>    <span class="i">$padded</span> = <a class="l_k" href="functions/pack.html">pack</a><span class="s">(</span><span class="q">&quot;A$pad_len&quot;</span><span class="cm">,</span><span class="i">$text</span><span class="s">)</span><span class="sc">;</span></li></ol></pre><p>If you need to pad with a character other than blank or zero you can use
one of the following methods.  They all generate a pad string with the
<code class="inline"><span class="w">x</span></code>
 operator and combine that with <code class="inline"><span class="i">$text</span></code>
. These methods do
not truncate <code class="inline"><span class="i">$text</span></code>
.</p>
<p>Left and right padding with any character, creating a new string:</p>
<pre class="verbatim"><ol><li>    <span class="i">$padded</span> = <span class="i">$pad_char</span> x <span class="s">(</span> <span class="i">$pad_len</span> - <a class="l_k" href="functions/length.html">length</a><span class="s">(</span> <span class="i">$text</span> <span class="s">)</span> <span class="s">)</span> . <span class="i">$text</span><span class="sc">;</span></li><li>    <span class="i">$padded</span> = <span class="i">$text</span> . <span class="i">$pad_char</span> x <span class="s">(</span> <span class="i">$pad_len</span> - <a class="l_k" href="functions/length.html">length</a><span class="s">(</span> <span class="i">$text</span> <span class="s">)</span> <span class="s">)</span><span class="sc">;</span></li></ol></pre><p>Left and right padding with any character, modifying <code class="inline"><span class="i">$text</span></code>
 directly:</p>
<pre class="verbatim"><ol><li>    <a class="l_k" href="functions/substr.html">substr</a><span class="s">(</span> <span class="i">$text</span><span class="cm">,</span> <span class="n">0</span><span class="cm">,</span> <span class="n">0</span> <span class="s">)</span> = <span class="i">$pad_char</span> x <span class="s">(</span> <span class="i">$pad_len</span> - <a class="l_k" href="functions/length.html">length</a><span class="s">(</span> <span class="i">$text</span> <span class="s">)</span> <span class="s">)</span><span class="sc">;</span></li><li>    <span class="i">$text</span> .= <span class="i">$pad_char</span> x <span class="s">(</span> <span class="i">$pad_len</span> - <a class="l_k" href="functions/length.html">length</a><span class="s">(</span> <span class="i">$text</span> <span class="s">)</span> <span class="s">)</span><span class="sc">;</span></li></ol></pre><a class='view-head2' id="How-do-I-extract-selected-columns-from-a-string%3f"></a><h3 class='h3' >How do I extract selected columns from a string?</h3>
<p>Use substr() or unpack(), both documented in <a href="perlfunc.html">perlfunc</a>.
If you prefer thinking in terms of columns instead of widths,
you can use this kind of thing:</p>
<pre class="verbatim"><ol><li>    <span class="c"># determine the unpack format needed to split Linux ps output</span></li><li>    <span class="c"># arguments are cut columns</span></li><li>    <a class="l_k" href="functions/my.html">my</a> <span class="i">$fmt</span> = <span class="i">cut2fmt</span><span class="s">(</span><span class="n">8</span><span class="cm">,</span> <span class="n">14</span><span class="cm">,</span> <span class="n">20</span><span class="cm">,</span> <span class="n">26</span><span class="cm">,</span> <span class="n">30</span><span class="cm">,</span> <span class="n">34</span><span class="cm">,</span> <span class="n">41</span><span class="cm">,</span> <span class="n">47</span><span class="cm">,</span> <span class="n">59</span><span class="cm">,</span> <span class="n">63</span><span class="cm">,</span> <span class="n">67</span><span class="cm">,</span> <span class="n">72</span><span class="s">)</span><span class="sc">;</span></li><li></li><li><a name="cut2fmt"></a>    sub <span class="m">cut2fmt</span> <span class="s">{</span></li><li>	<a class="l_k" href="functions/my.html">my</a><span class="s">(</span><span class="i">@positions</span><span class="s">)</span> = <span class="i">@_</span><span class="sc">;</span></li><li>	<a class="l_k" href="functions/my.html">my</a> <span class="i">$template</span>  = <span class="q">&#39;&#39;</span><span class="sc">;</span></li><li>	<a class="l_k" href="functions/my.html">my</a> <span class="i">$lastpos</span>   = <span class="n">1</span><span class="sc">;</span></li><li>	for <a class="l_k" href="functions/my.html">my</a> <span class="i">$place</span> <span class="s">(</span><span class="i">@positions</span><span class="s">)</span> <span class="s">{</span></li><li>	    <span class="i">$template</span> .= <span class="q">&quot;A&quot;</span> . <span class="s">(</span><span class="i">$place</span> - <span class="i">$lastpos</span><span class="s">)</span> . <span class="q">&quot; &quot;</span><span class="sc">;</span></li><li>	    <span class="i">$lastpos</span>   = <span class="i">$place</span><span class="sc">;</span></li><li>	<span class="s">}</span></li><li>	<span class="i">$template</span> .= <span class="q">&quot;A*&quot;</span><span class="sc">;</span></li><li>	<a class="l_k" href="functions/return.html">return</a> <span class="i">$template</span><span class="sc">;</span></li><li>    <span class="s">}</span></li></ol></pre><a class='view-head2' id="How-do-I-find-the-soundex-value-of-a-string%3f"></a><h3 class='h3' >How do I find the soundex value of a string?</h3>
<p>(contributed by brian d foy)</p>
<p>You can use the Text::Soundex module. If you want to do fuzzy or close
matching, you might also try the String::Approx, and Text::Metaphone,
and Text::DoubleMetaphone modules.</p>
<a class='view-head2' id="How-can-I-expand-variables-in-text-strings%3f"></a><h3 class='h3' >How can I expand variables in text strings?</h3>
<p>Let's assume that you have a string that contains placeholder
variables.</p>
<pre class="verbatim"><ol><li>    <span class="i">$text</span> = <span class="q">&#39;this has a $foo in it and a $bar&#39;</span><span class="sc">;</span></li></ol></pre><p>You can use a substitution with a double evaluation.  The
first /e turns <code class="inline"><span class="i">$1</span></code>
 into <code class="inline"><span class="i">$foo</span></code>
, and the second /e turns
<code class="inline"><span class="i">$foo</span></code>
 into its value.  You may want to wrap this in an
<code class="inline"><a class="l_k" href="functions/eval.html">eval</a></code>: if you try to get the value of an undeclared variable
while running under <code class="inline"><a class="l_k" href="functions/use.html">use</a> <span class="w">strict</span></code>
, you get a fatal error.</p>
<pre class="verbatim"><ol><li>    <a class="l_k" href="functions/eval.html">eval</a> <span class="s">{</span> <span class="i">$text</span> =~ <span class="q">s/(\$\w+)/$1/eeg</span> <span class="s">}</span><span class="sc">;</span></li><li>    <a class="l_k" href="functions/die.html">die</a> if <span class="i">$@</span><span class="sc">;</span></li></ol></pre><p>It's probably better in the general case to treat those
variables as entries in some special hash.  For example:</p>
<pre class="verbatim"><ol><li>    <span class="i">%user_defs</span> = <span class="s">(</span></li><li>	<span class="w">foo</span>  <span class="cm">=&gt;</span> <span class="n">23</span><span class="cm">,</span></li><li>	<span class="w">bar</span>  <span class="cm">=&gt;</span> <span class="n">19</span><span class="cm">,</span></li><li>    <span class="s">)</span><span class="sc">;</span></li><li>    <span class="i">$text</span> =~ <span class="q">s/\$(\w+)/$user_defs{$1}/g</span><span class="sc">;</span></li></ol></pre><a class='view-head2' id="What's-wrong-with-always-quoting-%22%24vars%22%3f"></a><h3 class='h3' >What's wrong with always quoting "$vars"?</h3>
<p>The problem is that those double-quotes force stringification--
coercing numbers and references into strings--even when you
don't want them to be strings.  Think of it this way: double-quote
expansion is used to produce new strings.  If you already
have a string, why do you need more?</p>
<p>If you get used to writing odd things like these:</p>
<pre class="verbatim"><ol><li>    <a class="l_k" href="functions/print.html">print</a> <span class="q">&quot;$var&quot;</span><span class="sc">;</span>   	<span class="c"># BAD</span></li><li>    <span class="i">$new</span> = <span class="q">&quot;$old&quot;</span><span class="sc">;</span>   	<span class="c"># BAD</span></li><li>    <span class="i">somefunc</span><span class="s">(</span><span class="q">&quot;$var&quot;</span><span class="s">)</span><span class="sc">;</span>	<span class="c"># BAD</span></li></ol></pre><p>You'll be in trouble.  Those should (in 99.8% of the cases) be
the simpler and more direct:</p>
<pre class="verbatim"><ol><li>    <a class="l_k" href="functions/print.html">print</a> <span class="i">$var</span><span class="sc">;</span></li><li>    <span class="i">$new</span> = <span class="i">$old</span><span class="sc">;</span></li><li>    <span class="i">somefunc</span><span class="s">(</span><span class="i">$var</span><span class="s">)</span><span class="sc">;</span></li></ol></pre><p>Otherwise, besides slowing you down, you're going to break code when
the thing in the scalar is actually neither a string nor a number, but
a reference:</p>
<pre class="verbatim"><ol><li>    <span class="i">func</span><span class="s">(</span>\<span class="i">@array</span><span class="s">)</span><span class="sc">;</span></li><li><a name="func"></a>    sub <span class="m">func</span> <span class="s">{</span></li><li>	<a class="l_k" href="functions/my.html">my</a> <span class="i">$aref</span> = <a class="l_k" href="functions/shift.html">shift</a><span class="sc">;</span></li><li>	<a class="l_k" href="functions/my.html">my</a> <span class="i">$oref</span> = <span class="q">&quot;$aref&quot;</span><span class="sc">;</span>  <span class="c"># WRONG</span></li><li>    <span class="s">}</span></li></ol></pre><p>You can also get into subtle problems on those few operations in Perl
that actually do care about the difference between a string and a
number, such as the magical <code class="inline">++</code>
 autoincrement operator or the
syscall() function.</p>
<p>Stringification also destroys arrays.</p>
<pre class="verbatim"><ol><li>    <span class="i">@lines</span> = <span class="q">`command`</span><span class="sc">;</span></li><li>    <a class="l_k" href="functions/print.html">print</a> <span class="q">&quot;@lines&quot;</span><span class="sc">;</span>		<span class="c"># WRONG - extra blanks</span></li><li>    <a class="l_k" href="functions/print.html">print</a> <span class="i">@lines</span><span class="sc">;</span>		<span class="c"># right</span></li></ol></pre><a class='view-head2' id="Why-don't-my-%3c%3cHERE-documents-work%3f"></a><h3 class='h3' >Why don't my &lt;&lt;HERE documents work?</h3>
<p>Check for these three things:</p>
<ul>
<li><a class='view-title' id="There-must-be-no-space-after-the-%3c%3c-part."></a><strong>There must be no space after the &lt;&lt; part.</strong>
</li>
<li><a class='view-title' id="There-(probably)-should-be-a-semicolon-at-the-end."></a><strong>There (probably) should be a semicolon at the end.</strong>
</li>
<li><a class='view-title' id="You-can't-(easily)-have-any-space-in-front-of-the-tag."></a><strong>You can't (easily) have any space in front of the tag.</strong>
</li>
</ul>
<p>If you want to indent the text in the here document, you
can do this:</p>
<pre class="verbatim"><ol><li>    <span class="c"># all in one</span></li><li>    <span class="s">(</span><span class="i">$VAR</span> = <span class="h">&lt;&lt;HERE_TARGET</span><span class="s">)</span> =~ <span class="q">s/^\s+//gm</span><span class="sc">;</span></li><li><span class="hh">        your text</span></li><li><span class="hh">        goes here</span></li><li><span class="hh">    HERE_TARGET</span></li></ol></pre><p>But the HERE_TARGET must still be flush against the margin.
If you want that indented also, you'll have to quote
in the indentation.</p>
<pre class="verbatim"><ol><li>    <span class="s">(</span><span class="i">$quote</span> = <span class="h">&lt;&lt;&#39;    FINIS&#39;</span><span class="s">)</span> =~ <span class="q">s/^\s+//gm</span><span class="sc">;</span></li><li><span class="hh">            ...we will have peace, when you and all your works have</span></li><li><span class="hh">            perished--and the works of your dark master to whom you</span></li><li><span class="hh">            would deliver us. You are a liar, Saruman, and a corrupter</span></li><li><span class="hh">            of men&#39;s hearts.  --Theoden in /usr/src/perl/taint.c</span></li><li><span class="hh">        FINIS</span></li><li><span class="hh">    $quote =~ s/\s+--/\n--/;</span></li></ol></pre><p>A nice general-purpose fixer-upper function for indented here documents
follows.  It expects to be called with a here document as its argument.
It looks to see whether each line begins with a common substring, and
if so, strips that substring off.  Otherwise, it takes the amount of leading
whitespace found on the first line and removes that much off each
subsequent line.</p>
<pre class="verbatim"><ol><li><a name="fix"></a>    sub <span class="m">fix</span> <span class="s">{</span></li><li>        <a class="l_k" href="functions/local.html">local</a> <span class="i">$_</span> = <a class="l_k" href="functions/shift.html">shift</a><span class="sc">;</span></li><li>        <a class="l_k" href="functions/my.html">my</a> <span class="s">(</span><span class="i">$white</span><span class="cm">,</span> <span class="i">$leader</span><span class="s">)</span><span class="sc">;</span>  <span class="c"># common whitespace and common leading string</span></li><li>        if <span class="s">(</span><span class="q">/^\s*(?:([^\w\s]+)(\s*).*\n)(?:\s*\1\2?.*\n)+$/</span><span class="s">)</span> <span class="s">{</span></li><li>            <span class="s">(</span><span class="i">$white</span><span class="cm">,</span> <span class="i">$leader</span><span class="s">)</span> = <span class="s">(</span><span class="i">$2</span><span class="cm">,</span> <a class="l_k" href="functions/quotemeta.html">quotemeta</a><span class="s">(</span><span class="i">$1</span><span class="s">)</span><span class="s">)</span><span class="sc">;</span></li><li>        <span class="s">}</span> else <span class="s">{</span></li><li>            <span class="s">(</span><span class="i">$white</span><span class="cm">,</span> <span class="i">$leader</span><span class="s">)</span> = <span class="s">(</span><span class="q">/^(\s+)/</span><span class="cm">,</span> <span class="q">&#39;&#39;</span><span class="s">)</span><span class="sc">;</span></li><li>        <span class="s">}</span></li><li>        <span class="q">s/^\s*?$leader(?:$white)?//gm</span><span class="sc">;</span></li><li>        <a class="l_k" href="functions/return.html">return</a> <span class="i">$_</span><span class="sc">;</span></li><li>    <span class="s">}</span></li></ol></pre><p>This works with leading special strings, dynamically determined:</p>
<pre class="verbatim"><ol><li>    <span class="i">$remember_the_main</span> = <span class="w">fix</span><span class="h">&lt;&lt;&#39;    MAIN_INTERPRETER_LOOP&#39;</span><span class="sc">;</span></li><li><span class="hh">	@@@ int</span></li><li><span class="hh">	@@@ runops() {</span></li><li><span class="hh">	@@@     SAVEI32(runlevel);</span></li><li><span class="hh">	@@@     runlevel++;</span></li><li><span class="hh">	@@@     while ( op = (*op-&gt;op_ppaddr)() );</span></li><li><span class="hh">	@@@     TAINT_NOT;</span></li><li><span class="hh">	@@@     return 0;</span></li><li><span class="hh">	@@@ }</span></li><li><span class="h">    MAIN_INTERPRETER_LOOP</span></li></ol></pre><p>Or with a fixed amount of leading whitespace, with remaining
indentation correctly preserved:</p>
<pre class="verbatim"><ol><li>    <span class="i">$poem</span> = <span class="w">fix</span><span class="h">&lt;&lt;EVER_ON_AND_ON</span><span class="sc">;</span></li><li><span class="hh">       Now far ahead the Road has gone,</span></li><li><span class="hh">	  And I must follow, if I can,</span></li><li><span class="hh">       Pursuing it with eager feet,</span></li><li><span class="hh">	  Until it joins some larger way</span></li><li><span class="hh">       Where many paths and errands meet.</span></li><li><span class="hh">	  And whither then? I cannot say.</span></li><li><span class="hh">		--Bilbo in /usr/src/perl/pp_ctl.c</span></li><li><span class="hh">    EVER_ON_AND_ON</span></li></ol></pre><a class='view-head1' id="Data%3a-Arrays"></a><h2 class='h2' >Data: Arrays</h2>
<a class='view-head2' id="What-is-the-difference-between-a-list-and-an-array%3f"></a><h3 class='h3' >What is the difference between a list and an array?</h3>
<p>An array has a changeable length.  A list does not.  An array is something
you can push or pop, while a list is a set of values.  Some people make
the distinction that a list is a value while an array is a variable.
Subroutines are passed and return lists, you put things into list
context, you initialize arrays with lists, and you foreach() across
a list.  <code class="inline"><span class="i">@</span></code>
 variables are arrays, anonymous arrays are arrays, arrays
in scalar context behave like the number of elements in them, subroutines
access their arguments through the array <code class="inline"><span class="i">@_</span></code>
, and push/pop/shift only work
on arrays.</p>
<p>As a side note, there's no such thing as a list in scalar context.
When you say</p>
<pre class="verbatim"><ol><li>    <span class="i">$scalar</span> = <span class="s">(</span><span class="n">2</span><span class="cm">,</span> <span class="n">5</span><span class="cm">,</span> <span class="n">7</span><span class="cm">,</span> <span class="n">9</span><span class="s">)</span><span class="sc">;</span></li></ol></pre><p>you're using the comma operator in scalar context, so it uses the scalar
comma operator.  There never was a list there at all!  This causes the
last value to be returned: 9.</p>
<a class='view-head2' id="What-is-the-difference-between-%24array%5b1%5d-and-%40array%5b1%5d%3f"></a><h3 class='h3' >What is the difference between $array[1] and @array[1]?</h3>
<p>The former is a scalar value; the latter an array slice, making
it a list with one (scalar) value.  You should use $ when you want a
scalar value (most of the time) and @ when you want a list with one
scalar value in it (very, very rarely; nearly never, in fact).</p>
<p>Sometimes it doesn't make a difference, but sometimes it does.
For example, compare:</p>
<pre class="verbatim"><ol><li>    <span class="i">$good</span>[<span class="n">0</span>] = <span class="q">`some program that outputs several lines`</span><span class="sc">;</span></li></ol></pre><p>with</p>
<pre class="verbatim"><ol><li>    <span class="i">@bad</span>[<span class="n">0</span>]  = <span class="q">`same program that outputs several lines`</span><span class="sc">;</span></li></ol></pre><p>The <code class="inline"><a class="l_k" href="functions/use.html">use</a> <span class="w">warnings</span></code>
 pragma and the <strong>-w</strong> flag will warn you about these
matters.</p>
<a class='view-head2' id="How-can-I-remove-duplicate-elements-from-a-list-or-array%3f"></a><h3 class='h3' >How can I remove duplicate elements from a list or array?</h3>
<p>(contributed by brian d foy)</p>
<p>Use a hash. When you think the words "unique" or "duplicated", think
"hash keys".</p>
<p>If you don't care about the order of the elements, you could just
create the hash then extract the keys. It's not important how you
create that hash: just that you use <code class="inline"><a class="l_k" href="functions/keys.html">keys</a></code> to get the unique
elements.</p>
<pre class="verbatim"><ol><li>   <a class="l_k" href="functions/my.html">my</a> <span class="i">%hash</span>   = <a class="l_k" href="functions/map.html">map</a> <span class="s">{</span> <span class="i">$_</span><span class="cm">,</span> <span class="n">1</span> <span class="s">}</span> <span class="i">@array</span><span class="sc">;</span></li><li>   <span class="c"># or a hash slice: @hash{ @array } = ();</span></li><li>   <span class="c"># or a foreach: $hash{$_} = 1 foreach ( @array );</span></li><li></li><li>   <a class="l_k" href="functions/my.html">my</a> <span class="i">@unique</span> = <a class="l_k" href="functions/keys.html">keys</a> <span class="i">%hash</span><span class="sc">;</span></li></ol></pre><p>You can also go through each element and skip the ones you've seen
before. Use a hash to keep track. The first time the loop sees an
element, that element has no key in <code class="inline"><span class="i">%Seen</span></code>
. The <code class="inline"><a class="l_k" href="functions/next.html">next</a></code> statement
creates the key and immediately uses its value, which is <code class="inline"><a class="l_k" href="functions/undef.html">undef</a></code>, so
the loop continues to the <code class="inline"><a class="l_k" href="functions/push.html">push</a></code> and increments the value for that
key. The next time the loop sees that same element, its key exists in
the hash <i>and</i> the value for that key is true (since it's not 0 or
undef), so the next skips that iteration and the loop goes to the next
element.</p>
<pre class="verbatim"><ol><li>	<a class="l_k" href="functions/my.html">my</a> <span class="i">@unique</span> = <span class="s">(</span><span class="s">)</span><span class="sc">;</span></li><li>	<a class="l_k" href="functions/my.html">my</a> <span class="i">%seen</span>   = <span class="s">(</span><span class="s">)</span><span class="sc">;</span></li><li></li><li>	foreach <a class="l_k" href="functions/my.html">my</a> <span class="i">$elem</span> <span class="s">(</span> <span class="i">@array</span> <span class="s">)</span></li><li>		<span class="s">{</span></li><li>		<a class="l_k" href="functions/next.html">next</a> if <span class="i">$seen</span>{ <span class="i">$elem</span> }++<span class="sc">;</span></li><li>		<a class="l_k" href="functions/push.html">push</a> <span class="i">@unique</span><span class="cm">,</span> <span class="i">$elem</span><span class="sc">;</span></li><li>		<span class="s">}</span></li></ol></pre><p>You can write this more briefly using a grep, which does the
same thing.</p>
<pre class="verbatim"><ol><li>   <a class="l_k" href="functions/my.html">my</a> <span class="i">%seen</span> = <span class="s">(</span><span class="s">)</span><span class="sc">;</span></li><li>   <a class="l_k" href="functions/my.html">my</a> <span class="i">@unique</span> = <a class="l_k" href="functions/grep.html">grep</a> <span class="s">{</span> ! <span class="i">$seen</span>{ <span class="i">$_</span> }++ <span class="s">}</span> <span class="i">@array</span><span class="sc">;</span></li></ol></pre><a class='view-head2' id="How-can-I-tell-whether-a-certain-element-is-contained-in-a-list-or-array%3f"></a><h3 class='h3' >How can I tell whether a certain element is contained in a list or array?</h3>
<p>(portions of this answer contributed by Anno Siegel)</p>
<p>Hearing the word "in" is an <i>in</i>dication that you probably should have
used a hash, not a list or array, to store your data.  Hashes are
designed to answer this question quickly and efficiently.  Arrays aren't.</p>
<p>That being said, there are several ways to approach this.  If you
are going to make this query many times over arbitrary string values,
the fastest way is probably to invert the original array and maintain a
hash whose keys are the first array's values.</p>
<pre class="verbatim"><ol><li>    <span class="i">@blues</span> = <span class="q">qw/azure cerulean teal turquoise lapis-lazuli/</span><span class="sc">;</span></li><li>    <span class="i">%is_blue</span> = <span class="s">(</span><span class="s">)</span><span class="sc">;</span></li><li>    for <span class="s">(</span><span class="i">@blues</span><span class="s">)</span> <span class="s">{</span> <span class="i">$is_blue</span>{<span class="i">$_</span>} = <span class="n">1</span> <span class="s">}</span></li></ol></pre><p>Now you can check whether $is_blue{$some_color}.  It might have been a
good idea to keep the blues all in a hash in the first place.</p>
<p>If the values are all small integers, you could use a simple indexed
array.  This kind of an array will take up less space:</p>
<pre class="verbatim"><ol><li>    <span class="i">@primes</span> = <span class="s">(</span><span class="n">2</span><span class="cm">,</span> <span class="n">3</span><span class="cm">,</span> <span class="n">5</span><span class="cm">,</span> <span class="n">7</span><span class="cm">,</span> <span class="n">11</span><span class="cm">,</span> <span class="n">13</span><span class="cm">,</span> <span class="n">17</span><span class="cm">,</span> <span class="n">19</span><span class="cm">,</span> <span class="n">23</span><span class="cm">,</span> <span class="n">29</span><span class="cm">,</span> <span class="n">31</span><span class="s">)</span><span class="sc">;</span></li><li>    <span class="i">@is_tiny_prime</span> = <span class="s">(</span><span class="s">)</span><span class="sc">;</span></li><li>    for <span class="s">(</span><span class="i">@primes</span><span class="s">)</span> <span class="s">{</span> <span class="i">$is_tiny_prime</span>[<span class="i">$_</span>] = <span class="n">1</span> <span class="s">}</span></li><li>    <span class="c"># or simply  @istiny_prime[@primes] = (1) x @primes;</span></li></ol></pre><p>Now you check whether $is_tiny_prime[$some_number].</p>
<p>If the values in question are integers instead of strings, you can save
quite a lot of space by using bit strings instead:</p>
<pre class="verbatim"><ol><li>    <span class="i">@articles</span> = <span class="s">(</span> <span class="n">1</span>..<span class="n">10</span><span class="cm">,</span> <span class="n">150</span>..<span class="n">2000</span><span class="cm">,</span> <span class="n">2017</span> <span class="s">)</span><span class="sc">;</span></li><li>    <a class="l_k" href="functions/undef.html">undef</a> <span class="i">$read</span><span class="sc">;</span></li><li>    for <span class="s">(</span><span class="i">@articles</span><span class="s">)</span> <span class="s">{</span> <a class="l_k" href="functions/vec.html">vec</a><span class="s">(</span><span class="i">$read</span><span class="cm">,</span><span class="i">$_</span><span class="cm">,</span><span class="n">1</span><span class="s">)</span> = <span class="n">1</span> <span class="s">}</span></li></ol></pre><p>Now check whether <code class="inline"><a class="l_k" href="functions/vec.html">vec($read,$n,1)</a></code> is true for some <code class="inline"><span class="i">$n</span></code>
.</p>
<p>These methods guarantee fast individual tests but require a re-organization
of the original list or array.  They only pay off if you have to test
multiple values against the same array.</p>
<p>If you are testing only once, the standard module List::Util exports
the function <code class="inline"><span class="w">first</span></code>
 for this purpose.  It works by stopping once it
finds the element. It's written in C for speed, and its Perl equivalant
looks like this subroutine:</p>
<pre class="verbatim"><ol><li><a name="first"></a>	sub <span class="m">first (&amp;@)</span> <span class="s">{</span></li><li>		<a class="l_k" href="functions/my.html">my</a> <span class="i">$code</span> = <a class="l_k" href="functions/shift.html">shift</a><span class="sc">;</span></li><li>		foreach <span class="s">(</span><span class="i">@_</span><span class="s">)</span> <span class="s">{</span></li><li>			<a class="l_k" href="functions/return.html">return</a> <span class="i">$_</span> if <span class="i">&amp;</span>{<span class="i">$code</span>}<span class="s">(</span><span class="s">)</span><span class="sc">;</span></li><li>		<span class="s">}</span></li><li>		<a class="l_k" href="functions/undef.html">undef</a><span class="sc">;</span></li><li>	<span class="s">}</span></li></ol></pre><p>If speed is of little concern, the common idiom uses grep in scalar context
(which returns the number of items that passed its condition) to traverse the
entire list. This does have the benefit of telling you how many matches it
found, though.</p>
<pre class="verbatim"><ol><li>	<a class="l_k" href="functions/my.html">my</a> <span class="i">$is_there</span> = <a class="l_k" href="functions/grep.html">grep</a> <span class="i">$_</span> eq <span class="i">$whatever</span><span class="cm">,</span> <span class="i">@array</span><span class="sc">;</span></li></ol></pre><p>If you want to actually extract the matching elements, simply use grep in
list context.</p>
<pre class="verbatim"><ol><li>	<a class="l_k" href="functions/my.html">my</a> <span class="i">@matches</span> = <a class="l_k" href="functions/grep.html">grep</a> <span class="i">$_</span> eq <span class="i">$whatever</span><span class="cm">,</span> <span class="i">@array</span><span class="sc">;</span></li></ol></pre><a class='view-head2' id="How-do-I-compute-the-difference-of-two-arrays%3f--How-do-I-compute-the-intersection-of-two-arrays%3f"></a><h3 class='h3' >How do I compute the difference of two arrays?  How do I compute the intersection of two arrays?</h3>
<p>Use a hash.  Here's code to do both and more.  It assumes that
each element is unique in a given array:</p>
<pre class="verbatim"><ol><li>    <span class="i">@union</span> = <span class="i">@intersection</span> = <span class="i">@difference</span> = <span class="s">(</span><span class="s">)</span><span class="sc">;</span></li><li>    <span class="i">%count</span> = <span class="s">(</span><span class="s">)</span><span class="sc">;</span></li><li>    foreach <span class="i">$element</span> <span class="s">(</span><span class="i">@array1</span><span class="cm">,</span> <span class="i">@array2</span><span class="s">)</span> <span class="s">{</span> <span class="i">$count</span>{<span class="i">$element</span>}++ <span class="s">}</span></li><li>    foreach <span class="i">$element</span> <span class="s">(</span><a class="l_k" href="functions/keys.html">keys</a> <span class="i">%count</span><span class="s">)</span> <span class="s">{</span></li><li>	<a class="l_k" href="functions/push.html">push</a> <span class="i">@union</span><span class="cm">,</span> <span class="i">$element</span><span class="sc">;</span></li><li>	<a class="l_k" href="functions/push.html">push</a> <span class="i">@</span>{ <span class="i">$count</span>{<span class="i">$element</span>} &gt; <span class="n">1</span> ? \<span class="i">@intersection</span> <span class="co">:</span> \<span class="i">@difference</span> }<span class="cm">,</span> <span class="i">$element</span><span class="sc">;</span></li><li>    <span class="s">}</span></li></ol></pre><p>Note that this is the <i>symmetric difference</i>, that is, all elements in
either A or in B but not in both.  Think of it as an xor operation.</p>
<a class='view-head2' id="How-do-I-test-whether-two-arrays-or-hashes-are-equal%3f"></a><h3 class='h3' >How do I test whether two arrays or hashes are equal?</h3>
<p>The following code works for single-level arrays.  It uses a stringwise
comparison, and does not distinguish defined versus undefined empty
strings.  Modify if you have other needs.</p>
<pre class="verbatim"><ol><li>    <span class="i">$are_equal</span> = <span class="i">compare_arrays</span><span class="s">(</span>\<span class="i">@frogs</span><span class="cm">,</span> \<span class="i">@toads</span><span class="s">)</span><span class="sc">;</span></li><li></li><li><a name="compare_arrays"></a>    sub <span class="m">compare_arrays</span> <span class="s">{</span></li><li>	<a class="l_k" href="functions/my.html">my</a> <span class="s">(</span><span class="i">$first</span><span class="cm">,</span> <span class="i">$second</span><span class="s">)</span> = <span class="i">@_</span><span class="sc">;</span></li><li>	<a class="l_k" href="functions/no.html">no</a> <span class="w">warnings</span><span class="sc">;</span>  <span class="c"># silence spurious -w undef complaints</span></li><li>	<a class="l_k" href="functions/return.html">return</a> <span class="n">0</span> unless <span class="i">@$first</span> == <span class="i">@$second</span><span class="sc">;</span></li><li>	for <span class="s">(</span><a class="l_k" href="functions/my.html">my</a> <span class="i">$i</span> = <span class="n">0</span><span class="sc">;</span> <span class="i">$i</span> &lt; <span class="i">@$first</span><span class="sc">;</span> <span class="i">$i</span>++<span class="s">)</span> <span class="s">{</span></li><li>	    <a class="l_k" href="functions/return.html">return</a> <span class="n">0</span> if <span class="i">$first</span>-&gt;[<span class="i">$i</span>] ne <span class="i">$second</span>-&gt;[<span class="i">$i</span>]<span class="sc">;</span></li><li>	<span class="s">}</span></li><li>	<a class="l_k" href="functions/return.html">return</a> <span class="n">1</span><span class="sc">;</span></li><li>    <span class="s">}</span></li></ol></pre><p>For multilevel structures, you may wish to use an approach more
like this one.  It uses the CPAN module FreezeThaw:</p>
<pre class="verbatim"><ol><li>    <a class="l_k" href="functions/use.html">use</a> <span class="w">FreezeThaw</span> <span class="q">qw(cmpStr)</span><span class="sc">;</span></li><li>    <span class="i">@a</span> = <span class="i">@b</span> = <span class="s">(</span> <span class="q">&quot;this&quot;</span><span class="cm">,</span> <span class="q">&quot;that&quot;</span><span class="cm">,</span> <span class="s">[</span> <span class="q">&quot;more&quot;</span><span class="cm">,</span> <span class="q">&quot;stuff&quot;</span> <span class="s">]</span> <span class="s">)</span><span class="sc">;</span></li><li></li><li>    <a class="l_k" href="functions/printf.html">printf</a> <span class="q">&quot;a and b contain %s arrays\n&quot;</span><span class="cm">,</span></li><li>        <span class="i">cmpStr</span><span class="s">(</span>\<span class="i">@a</span><span class="cm">,</span> \<span class="i">@b</span><span class="s">)</span> == <span class="n">0</span></li><li>	    ? <span class="q">&quot;the same&quot;</span></li><li>	    <span class="co">:</span> <span class="q">&quot;different&quot;</span><span class="sc">;</span></li></ol></pre><p>This approach also works for comparing hashes.  Here
we'll demonstrate two different answers:</p>
<pre class="verbatim"><ol><li>    <a class="l_k" href="functions/use.html">use</a> <span class="w">FreezeThaw</span> <span class="q">qw(cmpStr cmpStrHard)</span><span class="sc">;</span></li><li></li><li>    <span class="i">%a</span> = <span class="i">%b</span> = <span class="s">(</span> <span class="q">&quot;this&quot;</span> <span class="cm">=&gt;</span> <span class="q">&quot;that&quot;</span><span class="cm">,</span> <span class="q">&quot;extra&quot;</span> <span class="cm">=&gt;</span> <span class="s">[</span> <span class="q">&quot;more&quot;</span><span class="cm">,</span> <span class="q">&quot;stuff&quot;</span> <span class="s">]</span> <span class="s">)</span><span class="sc">;</span></li><li>    <span class="i">$a</span>{<span class="w">EXTRA</span>} = \<span class="i">%b</span><span class="sc">;</span></li><li>    <span class="i">$b</span>{<span class="w">EXTRA</span>} = \<span class="i">%a</span><span class="sc">;</span></li><li></li><li>    <a class="l_k" href="functions/printf.html">printf</a> <span class="q">&quot;a and b contain %s hashes\n&quot;</span><span class="cm">,</span></li><li>	<span class="i">cmpStr</span><span class="s">(</span>\<span class="i">%a</span><span class="cm">,</span> \<span class="i">%b</span><span class="s">)</span> == <span class="n">0</span> ? <span class="q">&quot;the same&quot;</span> <span class="co">:</span> <span class="q">&quot;different&quot;</span><span class="sc">;</span></li><li></li><li>    <a class="l_k" href="functions/printf.html">printf</a> <span class="q">&quot;a and b contain %s hashes\n&quot;</span><span class="cm">,</span></li><li>	<span class="i">cmpStrHard</span><span class="s">(</span>\<span class="i">%a</span><span class="cm">,</span> \<span class="i">%b</span><span class="s">)</span> == <span class="n">0</span> ? <span class="q">&quot;the same&quot;</span> <span class="co">:</span> <span class="q">&quot;different&quot;</span><span class="sc">;</span></li></ol></pre><p>The first reports that both those the hashes contain the same data,
while the second reports that they do not.  Which you prefer is left as
an exercise to the reader.</p>
<a class='view-head2' id="How-do-I-find-the-first-array-element-for-which-a-condition-is-true%3f"></a><h3 class='h3' >How do I find the first array element for which a condition is true?</h3>
<p>To find the first array element which satisfies a condition, you can
use the first() function in the List::Util module, which comes with
Perl 5.8.  This example finds the first element that contains "Perl".</p>
<pre class="verbatim"><ol><li>	<a class="l_k" href="functions/use.html">use</a> <span class="w">List::Util</span> <span class="q">qw(first)</span><span class="sc">;</span></li><li></li><li>	<a class="l_k" href="functions/my.html">my</a> <span class="i">$element</span> = <span class="i">first</span> <span class="s">{</span> <span class="q">/Perl/</span> <span class="s">}</span> <span class="i">@array</span><span class="sc">;</span></li></ol></pre><p>If you cannot use List::Util, you can make your own loop to do the
same thing.  Once you find the element, you stop the loop with last.</p>
<pre class="verbatim"><ol><li>	<a class="l_k" href="functions/my.html">my</a> <span class="i">$found</span><span class="sc">;</span></li><li>	foreach <span class="s">(</span> <span class="i">@array</span> <span class="s">)</span></li><li>		<span class="s">{</span></li><li>		if<span class="s">(</span> <span class="q">/Perl/</span> <span class="s">)</span> <span class="s">{</span> <span class="i">$found</span> = <span class="i">$_</span><span class="sc">;</span> <a class="l_k" href="functions/last.html">last</a> <span class="s">}</span></li><li>		<span class="s">}</span></li></ol></pre><p>If you want the array index, you can iterate through the indices
and check the array element at each index until you find one
that satisfies the condition.</p>
<pre class="verbatim"><ol><li>	<a class="l_k" href="functions/my.html">my</a><span class="s">(</span> <span class="i">$found</span><span class="cm">,</span> <span class="i">$index</span> <span class="s">)</span> = <span class="s">(</span> <a class="l_k" href="functions/undef.html">undef</a><span class="cm">,</span> <span class="n">-1</span> <span class="s">)</span><span class="sc">;</span></li><li>	for<span class="s">(</span> <span class="i">$i</span> = <span class="n">0</span><span class="sc">;</span> <span class="i">$i</span> &lt; <span class="i">@array</span><span class="sc">;</span> <span class="i">$i</span>++ <span class="s">)</span></li><li>		<span class="s">{</span></li><li>		if<span class="s">(</span> <span class="i">$array</span>[<span class="i">$i</span>] =~ <span class="q">/Perl/</span> <span class="s">)</span></li><li>			<span class="s">{</span></li><li>			<span class="i">$found</span> = <span class="i">$array</span>[<span class="i">$i</span>]<span class="sc">;</span></li><li>			<span class="i">$index</span> = <span class="i">$i</span><span class="sc">;</span></li><li>			<a class="l_k" href="functions/last.html">last</a><span class="sc">;</span></li><li>			<span class="s">}</span></li><li>		<span class="s">}</span></li></ol></pre><a class='view-head2' id="How-do-I-handle-linked-lists%3f"></a><h3 class='h3' >How do I handle linked lists?</h3>
<p>In general, you usually don't need a linked list in Perl, since with
regular arrays, you can push and pop or shift and unshift at either end,
or you can use splice to add and/or remove arbitrary number of elements at
arbitrary points.  Both pop and shift are both O(1) operations on Perl's
dynamic arrays.  In the absence of shifts and pops, push in general
needs to reallocate on the order every log(N) times, and unshift will
need to copy pointers each time.</p>
<p>If you really, really wanted, you could use structures as described in
<a href="perldsc.html">perldsc</a> or <a href="perltoot.html">perltoot</a> and do just what the algorithm book tells you
to do.  For example, imagine a list node like this:</p>
<pre class="verbatim"><ol><li>    <span class="i">$node</span> = <span class="s">{</span></li><li>        <span class="w">VALUE</span> <span class="cm">=&gt;</span> <span class="n">42</span><span class="cm">,</span></li><li>        <span class="w">LINK</span>  <span class="cm">=&gt;</span> <a class="l_k" href="functions/undef.html">undef</a><span class="cm">,</span></li><li>    <span class="s">}</span><span class="sc">;</span></li></ol></pre><p>You could walk the list this way:</p>
<pre class="verbatim"><ol><li>    <a class="l_k" href="functions/print.html">print</a> <span class="q">&quot;List: &quot;</span><span class="sc">;</span></li><li>    for <span class="s">(</span><span class="i">$node</span> = <span class="i">$head</span><span class="sc">;</span>  <span class="i">$node</span><span class="sc">;</span> <span class="i">$node</span> = <span class="i">$node</span>-&gt;{<span class="w">LINK</span>}<span class="s">)</span> <span class="s">{</span></li><li>        <a class="l_k" href="functions/print.html">print</a> <span class="i">$node</span>-&gt;{<span class="w">VALUE</span>}<span class="cm">,</span> <span class="q">&quot; &quot;</span><span class="sc">;</span></li><li>    <span class="s">}</span></li><li>    <a class="l_k" href="functions/print.html">print</a> <span class="q">&quot;\n&quot;</span><span class="sc">;</span></li></ol></pre><p>You could add to the list this way:</p>
<pre class="verbatim"><ol><li>    <a class="l_k" href="functions/my.html">my</a> <span class="s">(</span><span class="i">$head</span><span class="cm">,</span> <span class="i">$tail</span><span class="s">)</span><span class="sc">;</span></li><li>    <span class="i">$tail</span> = <span class="i">append</span><span class="s">(</span><span class="i">$head</span><span class="cm">,</span> <span class="n">1</span><span class="s">)</span><span class="sc">;</span>       <span class="c"># grow a new head</span></li><li>    for <span class="i">$value</span> <span class="s">(</span> <span class="n">2</span> .. <span class="n">10</span> <span class="s">)</span> <span class="s">{</span></li><li>        <span class="i">$tail</span> = <span class="i">append</span><span class="s">(</span><span class="i">$tail</span><span class="cm">,</span> <span class="i">$value</span><span class="s">)</span><span class="sc">;</span></li><li>    <span class="s">}</span></li><li></li><li><a name="append"></a>    sub <span class="m">append</span> <span class="s">{</span></li><li>        <a class="l_k" href="functions/my.html">my</a><span class="s">(</span><span class="i">$list</span><span class="cm">,</span> <span class="i">$value</span><span class="s">)</span> = <span class="i">@_</span><span class="sc">;</span></li><li>        <a class="l_k" href="functions/my.html">my</a> <span class="i">$node</span> = <span class="s">{</span> <span class="w">VALUE</span> <span class="cm">=&gt;</span> <span class="i">$value</span> <span class="s">}</span><span class="sc">;</span></li><li>        if <span class="s">(</span><span class="i">$list</span><span class="s">)</span> <span class="s">{</span></li><li>            <span class="i">$node</span>-&gt;{<span class="w">LINK</span>} = <span class="i">$list</span>-&gt;{<span class="w">LINK</span>}<span class="sc">;</span></li><li>            <span class="i">$list</span>-&gt;{<span class="w">LINK</span>} = <span class="i">$node</span><span class="sc">;</span></li><li>        <span class="s">}</span> else <span class="s">{</span></li><li>            <span class="i">$_</span>[<span class="n">0</span>] = <span class="i">$node</span><span class="sc">;</span>      <span class="c"># replace caller&#39;s version</span></li><li>        <span class="s">}</span></li><li>        <a class="l_k" href="functions/return.html">return</a> <span class="i">$node</span><span class="sc">;</span></li><li>    <span class="s">}</span></li></ol></pre><p>But again, Perl's built-in are virtually always good enough.</p>
<a class='view-head2' id="How-do-I-handle-circular-lists%3f"></a><h3 class='h3' >How do I handle circular lists?</h3>
<p>Circular lists could be handled in the traditional fashion with linked
lists, or you could just do something like this with an array:</p>
<pre class="verbatim"><ol><li>    <a class="l_k" href="functions/unshift.html">unshift</a><span class="s">(</span><span class="i">@array</span><span class="cm">,</span> <a class="l_k" href="functions/pop.html">pop</a><span class="s">(</span><span class="i">@array</span><span class="s">)</span><span class="s">)</span><span class="sc">;</span>  <span class="c"># the last shall be first</span></li><li>    <a class="l_k" href="functions/push.html">push</a><span class="s">(</span><span class="i">@array</span><span class="cm">,</span> <a class="l_k" href="functions/shift.html">shift</a><span class="s">(</span><span class="i">@array</span><span class="s">)</span><span class="s">)</span><span class="sc">;</span>   <span class="c"># and vice versa</span></li></ol></pre><a class='view-head2' id="How-do-I-shuffle-an-array-randomly%3f"></a><h3 class='h3' >How do I shuffle an array randomly?</h3>
<p>If you either have Perl 5.8.0 or later installed, or if you have
Scalar-List-Utils 1.03 or later installed, you can say:</p>
<pre class="verbatim"><ol><li>    <a class="l_k" href="functions/use.html">use</a> <span class="w">List::Util</span> <span class="q">&#39;shuffle&#39;</span><span class="sc">;</span></li><li></li><li>	<span class="i">@shuffled</span> = <span class="i">shuffle</span><span class="s">(</span><span class="i">@list</span><span class="s">)</span><span class="sc">;</span></li></ol></pre><p>If not, you can use a Fisher-Yates shuffle.</p>
<pre class="verbatim"><ol><li><a name="fisher_yates_shuffle"></a>    sub <span class="m">fisher_yates_shuffle</span> <span class="s">{</span></li><li>        <a class="l_k" href="functions/my.html">my</a> <span class="i">$deck</span> = <a class="l_k" href="functions/shift.html">shift</a><span class="sc">;</span>  <span class="c"># $deck is a reference to an array</span></li><li>        <a class="l_k" href="functions/my.html">my</a> <span class="i">$i</span> = <span class="i">@$deck</span><span class="sc">;</span></li><li>        while <span class="s">(</span>--<span class="i">$i</span><span class="s">)</span> <span class="s">{</span></li><li>            <a class="l_k" href="functions/my.html">my</a> <span class="i">$j</span> = <a class="l_k" href="functions/int.html">int</a> <a class="l_k" href="functions/rand.html">rand</a> <span class="s">(</span><span class="i">$i</span>+<span class="n">1</span><span class="s">)</span><span class="sc">;</span></li><li>            <span class="i">@$deck</span>[<span class="i">$i</span><span class="cm">,</span><span class="i">$j</span>] = <span class="i">@$deck</span>[<span class="i">$j</span><span class="cm">,</span><span class="i">$i</span>]<span class="sc">;</span></li><li>        <span class="s">}</span></li><li>    <span class="s">}</span></li><li></li><li>    <span class="c"># shuffle my mpeg collection</span></li><li>    <span class="c">#</span></li><li>    <a class="l_k" href="functions/my.html">my</a> <span class="i">@mpeg</span> = <span class="q">&lt;audio/*/*.mp3&gt;</span><span class="sc">;</span></li><li>    <span class="i">fisher_yates_shuffle</span><span class="s">(</span> \<span class="i">@mpeg</span> <span class="s">)</span><span class="sc">;</span>    <span class="c"># randomize @mpeg in place</span></li><li>    <a class="l_k" href="functions/print.html">print</a> <span class="i">@mpeg</span><span class="sc">;</span></li></ol></pre><p>Note that the above implementation shuffles an array in place,
unlike the List::Util::shuffle() which takes a list and returns
a new shuffled list.</p>
<p>You've probably seen shuffling algorithms that work using splice,
randomly picking another element to swap the current element with</p>
<pre class="verbatim"><ol><li>    <a class="l_k" href="functions/srand.html">srand</a><span class="sc">;</span></li><li>    <span class="i">@new</span> = <span class="s">(</span><span class="s">)</span><span class="sc">;</span></li><li>    <span class="i">@old</span> = <span class="n">1</span> .. <span class="n">10</span><span class="sc">;</span>  <span class="c"># just a demo</span></li><li>    while <span class="s">(</span><span class="i">@old</span><span class="s">)</span> <span class="s">{</span></li><li>	<a class="l_k" href="functions/push.html">push</a><span class="s">(</span><span class="i">@new</span><span class="cm">,</span> <a class="l_k" href="functions/splice.html">splice</a><span class="s">(</span><span class="i">@old</span><span class="cm">,</span> <a class="l_k" href="functions/rand.html">rand</a> <span class="i">@old</span><span class="cm">,</span> <span class="n">1</span><span class="s">)</span><span class="s">)</span><span class="sc">;</span></li><li>    <span class="s">}</span></li></ol></pre><p>This is bad because splice is already O(N), and since you do it N times,
you just invented a quadratic algorithm; that is, O(N**2).  This does
not scale, although Perl is so efficient that you probably won't notice
this until you have rather largish arrays.</p>
<a class='view-head2' id="How-do-I-process%2fmodify-each-element-of-an-array%3f"></a><h3 class='h3' >How do I process/modify each element of an array?</h3>
<p>Use <code class="inline">for</code>
/<code class="inline">foreach</code>
:</p>
<pre class="verbatim"><ol><li>    for <span class="s">(</span><span class="i">@lines</span><span class="s">)</span> <span class="s">{</span></li><li>		<span class="q">s/foo/bar/</span><span class="sc">;</span>	<span class="c"># change that word</span></li><li>		<span class="q">tr/XZ/ZX/</span><span class="sc">;</span>	<span class="c"># swap those letters</span></li><li>    <span class="s">}</span></li></ol></pre><p>Here's another; let's compute spherical volumes:</p>
<pre class="verbatim"><ol><li>    for <span class="s">(</span><span class="i">@volumes</span> = <span class="i">@radii</span><span class="s">)</span> <span class="s">{</span>   <span class="c"># @volumes has changed parts</span></li><li>		<span class="i">$_</span> **= <span class="n">3</span><span class="sc">;</span></li><li>		<span class="i">$_</span> *= <span class="s">(</span><span class="n">4</span>/<span class="n">3</span><span class="s">)</span> * <span class="n">3.14159</span><span class="sc">;</span>  <span class="c"># this will be constant folded</span></li><li>    <span class="s">}</span></li></ol></pre><p>which can also be done with map() which is made to transform
one list into another:</p>
<pre class="verbatim"><ol><li>	<span class="i">@volumes</span> = <a class="l_k" href="functions/map.html">map</a> <span class="s">{</span><span class="i">$_</span> ** <span class="n">3</span> * <span class="s">(</span><span class="n">4</span>/<span class="n">3</span><span class="s">)</span> * <span class="n">3.14159</span><span class="s">}</span> <span class="i">@radii</span><span class="sc">;</span></li></ol></pre><p>If you want to do the same thing to modify the values of the
hash, you can use the <code class="inline"><a class="l_k" href="functions/values.html">values</a></code> function.  As of Perl 5.6
the values are not copied, so if you modify $orbit (in this
case), you modify the value.</p>
<pre class="verbatim"><ol><li>    for <span class="i">$orbit</span> <span class="s">(</span> <a class="l_k" href="functions/values.html">values</a> <span class="i">%orbits</span> <span class="s">)</span> <span class="s">{</span></li><li>		<span class="s">(</span><span class="i">$orbit</span> **= <span class="n">3</span><span class="s">)</span> *= <span class="s">(</span><span class="n">4</span>/<span class="n">3</span><span class="s">)</span> * <span class="n">3.14159</span><span class="sc">;</span></li><li>    <span class="s">}</span></li></ol></pre><p>Prior to perl 5.6 <code class="inline"><a class="l_k" href="functions/values.html">values</a></code> returned copies of the values,
so older perl code often contains constructions such as
<code class="inline"><span class="i">@orbits</span>{<a class="l_k" href="functions/keys.html">keys</a> <span class="i">%orbits</span>}</code>
 instead of <code class="inline"><a class="l_k" href="functions/values.html">values</a> <span class="i">%orbits</span></code>
 where
the hash is to be modified.</p>
<a class='view-head2' id="How-do-I-select-a-random-element-from-an-array%3f"></a><h3 class='h3' >How do I select a random element from an array?</h3>
<p>Use the rand() function (see <a class='function-name' href="functions/rand.html">rand</a>):</p>
<pre class="verbatim"><ol><li>    <span class="i">$index</span>   = <a class="l_k" href="functions/rand.html">rand</a> <span class="i">@array</span><span class="sc">;</span></li><li>    <span class="i">$element</span> = <span class="i">$array</span>[<span class="i">$index</span>]<span class="sc">;</span></li></ol></pre><p>Or, simply:
    my $element = $array[ rand @array ];</p>
<a class='view-head2' id="How-do-I-permute-N-elements-of-a-list%3f"></a><h3 class='h3' >How do I permute N elements of a list?</h3>
<p>Use the List::Permutor module on CPAN.  If the list is
actually an array, try the Algorithm::Permute module (also
on CPAN).  It's written in XS code and is very efficient.</p>
<pre class="verbatim"><ol><li>	<a class="l_k" href="functions/use.html">use</a> <span class="w">Algorithm::Permute</span><span class="sc">;</span></li><li>	<a class="l_k" href="functions/my.html">my</a> <span class="i">@array</span> = <span class="q">&#39;a&#39;</span>..<span class="q">&#39;d&#39;</span><span class="sc">;</span></li><li>	<a class="l_k" href="functions/my.html">my</a> <span class="i">$p_iterator</span> = <span class="w">Algorithm::Permute</span><span class="w">-&gt;new</span> <span class="s">(</span> \<span class="i">@array</span> <span class="s">)</span><span class="sc">;</span></li><li>	while <span class="s">(</span><a class="l_k" href="functions/my.html">my</a> <span class="i">@perm</span> = <span class="i">$p_iterator</span><span class="i">-&gt;next</span><span class="s">)</span> <span class="s">{</span></li><li>	   <a class="l_k" href="functions/print.html">print</a> <span class="q">&quot;next permutation: (@perm)\n&quot;</span><span class="sc">;</span></li><li>	<span class="s">}</span></li></ol></pre><p>For even faster execution, you could do:</p>
<pre class="verbatim"><ol><li>   <a class="l_k" href="functions/use.html">use</a> <span class="w">Algorithm::Permute</span><span class="sc">;</span></li><li>   <a class="l_k" href="functions/my.html">my</a> <span class="i">@array</span> = <span class="q">&#39;a&#39;</span>..<span class="q">&#39;d&#39;</span><span class="sc">;</span></li><li>   <span class="i">Algorithm::Permute::permute</span> <span class="s">{</span></li><li>      <a class="l_k" href="functions/print.html">print</a> <span class="q">&quot;next permutation: (@array)\n&quot;</span><span class="sc">;</span></li><li>   <span class="s">}</span> <span class="i">@array</span><span class="sc">;</span></li></ol></pre><p>Here's a little program that generates all permutations of
all the words on each line of input. The algorithm embodied
in the permute() function is discussed in Volume 4 (still
unpublished) of Knuth's <i>The Art of Computer Programming</i>
and will work on any list:</p>
<pre class="verbatim"><ol><li>	<span class="c">#!/usr/bin/perl -n</span></li><li>	<span class="c"># Fischer-Kause ordered permutation generator</span></li><li></li><li><a name="permute"></a>	sub <span class="m">permute (&amp;@)</span> <span class="s">{</span></li><li>		<a class="l_k" href="functions/my.html">my</a> <span class="i">$code</span> = <a class="l_k" href="functions/shift.html">shift</a><span class="sc">;</span></li><li>		<a class="l_k" href="functions/my.html">my</a> <span class="i">@idx</span> = <span class="n">0</span>..<span class="i">$#_</span><span class="sc">;</span></li><li>		while <span class="s">(</span> <span class="i">$code</span>-&gt;<span class="s">(</span><span class="i">@_</span>[<span class="i">@idx</span>]<span class="s">)</span> <span class="s">)</span> <span class="s">{</span></li><li>			<a class="l_k" href="functions/my.html">my</a> <span class="i">$p</span> = <span class="i">$#idx</span><span class="sc">;</span></li><li>			--<span class="i">$p</span> while <span class="i">$idx</span>[<span class="i">$p</span>-<span class="n">1</span>] &gt; <span class="i">$idx</span>[<span class="i">$p</span>]<span class="sc">;</span></li><li>			<a class="l_k" href="functions/my.html">my</a> <span class="i">$q</span> = <span class="i">$p</span> or <a class="l_k" href="functions/return.html">return</a><span class="sc">;</span></li><li>			<a class="l_k" href="functions/push.html">push</a> <span class="i">@idx</span><span class="cm">,</span> <a class="l_k" href="functions/reverse.html">reverse</a> <a class="l_k" href="functions/splice.html">splice</a> <span class="i">@idx</span><span class="cm">,</span> <span class="i">$p</span><span class="sc">;</span></li><li>			++<span class="i">$q</span> while <span class="i">$idx</span>[<span class="i">$p</span>-<span class="n">1</span>] &gt; <span class="i">$idx</span>[<span class="i">$q</span>]<span class="sc">;</span></li><li>			<span class="i">@idx</span>[<span class="i">$p</span>-<span class="n">1</span><span class="cm">,</span><span class="i">$q</span>]=<span class="i">@idx</span>[<span class="i">$q</span><span class="cm">,</span><span class="i">$p</span>-<span class="n">1</span>]<span class="sc">;</span></li><li>		<span class="s">}</span></li><li>	<span class="s">}</span></li><li></li><li>	<span class="i">permute</span> <span class="s">{</span><a class="l_k" href="functions/print.html">print</a><span class="q">&quot;@_\n&quot;</span><span class="s">}</span> <a class="l_k" href="functions/split.html">split</a><span class="sc">;</span></li></ol></pre><a class='view-head2' id="How-do-I-sort-an-array-by-(anything)%3f"></a><h3 class='h3' >How do I sort an array by (anything)?</h3>
<p>Supply a comparison function to sort() (described in <a class='function-name' href="functions/sort.html">sort</a>):</p>
<pre class="verbatim"><ol><li>    <span class="i">@list</span> = <a class="l_k" href="functions/sort.html">sort</a> <span class="s">{</span> <span class="i">$a</span> &lt;=&gt; <span class="i">$b</span> <span class="s">}</span> <span class="i">@list</span><span class="sc">;</span></li></ol></pre><p>The default sort function is cmp, string comparison, which would
sort <code class="inline"><span class="s">(</span><span class="n">1</span><span class="cm">,</span> <span class="n">2</span><span class="cm">,</span> <span class="n">10</span><span class="s">)</span></code>
 into <code class="inline"><span class="s">(</span><span class="n">1</span><span class="cm">,</span> <span class="n">10</span><span class="cm">,</span> <span class="n">2</span><span class="s">)</span></code>
.  <code class="inline">&lt;=&gt;</code>
, used above, is
the numerical comparison operator.</p>
<p>If you have a complicated function needed to pull out the part you
want to sort on, then don't do it inside the sort function.  Pull it
out first, because the sort BLOCK can be called many times for the
same element.  Here's an example of how to pull out the first word
after the first number on each item, and then sort those words
case-insensitively.</p>
<pre class="verbatim"><ol><li>    <span class="i">@idx</span> = <span class="s">(</span><span class="s">)</span><span class="sc">;</span></li><li>    for <span class="s">(</span><span class="i">@data</span><span class="s">)</span> <span class="s">{</span></li><li>	<span class="s">(</span><span class="i">$item</span><span class="s">)</span> = <span class="q">/\d+\s*(\S+)/</span><span class="sc">;</span></li><li>	<a class="l_k" href="functions/push.html">push</a> <span class="i">@idx</span><span class="cm">,</span> <a class="l_k" href="functions/uc.html">uc</a><span class="s">(</span><span class="i">$item</span><span class="s">)</span><span class="sc">;</span></li><li>    <span class="s">}</span></li><li>    <span class="i">@sorted</span> = <span class="i">@data</span>[ <a class="l_k" href="functions/sort.html">sort</a> <span class="s">{</span> <span class="i">$idx</span>[<span class="i">$a</span>] cmp <span class="i">$idx</span>[<span class="i">$b</span>] <span class="s">}</span> <span class="n">0</span> .. <span class="i">$#idx</span> ]<span class="sc">;</span></li></ol></pre><p>which could also be written this way, using a trick
that's come to be known as the Schwartzian Transform:</p>
<pre class="verbatim"><ol><li>    <span class="i">@sorted</span> = <a class="l_k" href="functions/map.html">map</a>  <span class="s">{</span> <span class="i">$_</span>-&gt;[<span class="n">0</span>] <span class="s">}</span></li><li>	      <a class="l_k" href="functions/sort.html">sort</a> <span class="s">{</span> <span class="i">$a</span>-&gt;[<span class="n">1</span>] cmp <span class="i">$b</span>-&gt;[<span class="n">1</span>] <span class="s">}</span></li><li>	      <a class="l_k" href="functions/map.html">map</a>  <span class="s">{</span> <span class="s">[</span> <span class="i">$_</span><span class="cm">,</span> <a class="l_k" href="functions/uc.html">uc</a><span class="s">(</span> <span class="s">(</span><span class="q">/\d+\s*(\S+)/</span><span class="s">)</span>[<span class="n">0</span>]<span class="s">)</span> <span class="s">]</span> <span class="s">}</span> <span class="i">@data</span><span class="sc">;</span></li></ol></pre><p>If you need to sort on several fields, the following paradigm is useful.</p>
<pre class="verbatim"><ol><li>    <span class="i">@sorted</span> = <a class="l_k" href="functions/sort.html">sort</a> <span class="s">{</span> <span class="i">field1</span><span class="s">(</span><span class="i">$a</span><span class="s">)</span> &lt;=&gt; <span class="i">field1</span><span class="s">(</span><span class="i">$b</span><span class="s">)</span> ||</li><li>                     <span class="i">field2</span><span class="s">(</span><span class="i">$a</span><span class="s">)</span> cmp <span class="i">field2</span><span class="s">(</span><span class="i">$b</span><span class="s">)</span> ||</li><li>                     <span class="i">field3</span><span class="s">(</span><span class="i">$a</span><span class="s">)</span> cmp <span class="i">field3</span><span class="s">(</span><span class="i">$b</span><span class="s">)</span></li><li>                   <span class="s">}</span>     <span class="i">@data</span><span class="sc">;</span></li></ol></pre><p>This can be conveniently combined with precalculation of keys as given
above.</p>
<p>See the <i>sort</i> article in the "Far More Than You Ever Wanted
To Know" collection in <a href="http://www.cpan.org/misc/olddoc/FMTEYEWTK.tgz">http://www.cpan.org/misc/olddoc/FMTEYEWTK.tgz</a> for
more about this approach.</p>
<p>See also the question below on sorting hashes.</p>
<a class='view-head2' id="How-do-I-manipulate-arrays-of-bits%3f"></a><h3 class='h3' >How do I manipulate arrays of bits?</h3>
<p>Use pack() and unpack(), or else vec() and the bitwise operations.</p>
<p>For example, this sets $vec to have bit N set if $ints[N] was set:</p>
<pre class="verbatim"><ol><li>    <span class="i">$vec</span> = <span class="q">&#39;&#39;</span><span class="sc">;</span></li><li>    foreach<span class="s">(</span><span class="i">@ints</span><span class="s">)</span> <span class="s">{</span> <a class="l_k" href="functions/vec.html">vec</a><span class="s">(</span><span class="i">$vec</span><span class="cm">,</span><span class="i">$_</span><span class="cm">,</span><span class="n">1</span><span class="s">)</span> = <span class="n">1</span> <span class="s">}</span></li></ol></pre><p>Here's how, given a vector in $vec, you can
get those bits into your @ints array:</p>
<pre class="verbatim"><ol><li><a name="bitvec_to_list"></a>    sub <span class="m">bitvec_to_list</span> <span class="s">{</span></li><li>	<a class="l_k" href="functions/my.html">my</a> <span class="i">$vec</span> = <a class="l_k" href="functions/shift.html">shift</a><span class="sc">;</span></li><li>	<a class="l_k" href="functions/my.html">my</a> <span class="i">@ints</span><span class="sc">;</span></li><li>	<span class="c"># Find null-byte density then select best algorithm</span></li><li>	if <span class="s">(</span><span class="i">$vec</span> =~ <span class="q">tr/\0//</span> / <a class="l_k" href="functions/length.html">length</a> <span class="i">$vec</span> &gt; <span class="n">0.95</span><span class="s">)</span> <span class="s">{</span></li><li>	    <a class="l_k" href="functions/use.html">use</a> <span class="w">integer</span><span class="sc">;</span></li><li>	    <a class="l_k" href="functions/my.html">my</a> <span class="i">$i</span><span class="sc">;</span></li><li>	    <span class="c"># This method is faster with mostly null-bytes</span></li><li>	    while<span class="s">(</span><span class="i">$vec</span> =~ <span class="q">/[^\0]/g</span> <span class="s">)</span> <span class="s">{</span></li><li>		<span class="i">$i</span> = <span class="n">-9</span> + <span class="n">8</span> * <a class="l_k" href="functions/pos.html">pos</a> <span class="i">$vec</span><span class="sc">;</span></li><li>		<a class="l_k" href="functions/push.html">push</a> <span class="i">@ints</span><span class="cm">,</span> <span class="i">$i</span> if <a class="l_k" href="functions/vec.html">vec</a><span class="s">(</span><span class="i">$vec</span><span class="cm">,</span> ++<span class="i">$i</span><span class="cm">,</span> <span class="n">1</span><span class="s">)</span><span class="sc">;</span></li><li>		<a class="l_k" href="functions/push.html">push</a> <span class="i">@ints</span><span class="cm">,</span> <span class="i">$i</span> if <a class="l_k" href="functions/vec.html">vec</a><span class="s">(</span><span class="i">$vec</span><span class="cm">,</span> ++<span class="i">$i</span><span class="cm">,</span> <span class="n">1</span><span class="s">)</span><span class="sc">;</span></li><li>		<a class="l_k" href="functions/push.html">push</a> <span class="i">@ints</span><span class="cm">,</span> <span class="i">$i</span> if <a class="l_k" href="functions/vec.html">vec</a><span class="s">(</span><span class="i">$vec</span><span class="cm">,</span> ++<span class="i">$i</span><span class="cm">,</span> <span class="n">1</span><span class="s">)</span><span class="sc">;</span></li><li>		<a class="l_k" href="functions/push.html">push</a> <span class="i">@ints</span><span class="cm">,</span> <span class="i">$i</span> if <a class="l_k" href="functions/vec.html">vec</a><span class="s">(</span><span class="i">$vec</span><span class="cm">,</span> ++<span class="i">$i</span><span class="cm">,</span> <span class="n">1</span><span class="s">)</span><span class="sc">;</span></li><li>		<a class="l_k" href="functions/push.html">push</a> <span class="i">@ints</span><span class="cm">,</span> <span class="i">$i</span> if <a class="l_k" href="functions/vec.html">vec</a><span class="s">(</span><span class="i">$vec</span><span class="cm">,</span> ++<span class="i">$i</span><span class="cm">,</span> <span class="n">1</span><span class="s">)</span><span class="sc">;</span></li><li>		<a class="l_k" href="functions/push.html">push</a> <span class="i">@ints</span><span class="cm">,</span> <span class="i">$i</span> if <a class="l_k" href="functions/vec.html">vec</a><span class="s">(</span><span class="i">$vec</span><span class="cm">,</span> ++<span class="i">$i</span><span class="cm">,</span> <span class="n">1</span><span class="s">)</span><span class="sc">;</span></li><li>		<a class="l_k" href="functions/push.html">push</a> <span class="i">@ints</span><span class="cm">,</span> <span class="i">$i</span> if <a class="l_k" href="functions/vec.html">vec</a><span class="s">(</span><span class="i">$vec</span><span class="cm">,</span> ++<span class="i">$i</span><span class="cm">,</span> <span class="n">1</span><span class="s">)</span><span class="sc">;</span></li><li>		<a class="l_k" href="functions/push.html">push</a> <span class="i">@ints</span><span class="cm">,</span> <span class="i">$i</span> if <a class="l_k" href="functions/vec.html">vec</a><span class="s">(</span><span class="i">$vec</span><span class="cm">,</span> ++<span class="i">$i</span><span class="cm">,</span> <span class="n">1</span><span class="s">)</span><span class="sc">;</span></li><li>	    <span class="s">}</span></li><li>	<span class="s">}</span> else <span class="s">{</span></li><li>	    <span class="c"># This method is a fast general algorithm</span></li><li>	    <a class="l_k" href="functions/use.html">use</a> <span class="w">integer</span><span class="sc">;</span></li><li>	    <a class="l_k" href="functions/my.html">my</a> <span class="i">$bits</span> = <a class="l_k" href="functions/unpack.html">unpack</a> <span class="q">&quot;b*&quot;</span><span class="cm">,</span> <span class="i">$vec</span><span class="sc">;</span></li><li>	    <a class="l_k" href="functions/push.html">push</a> <span class="i">@ints</span><span class="cm">,</span> <span class="n">0</span> if <span class="i">$bits</span> =~ <span class="q">s/^(\d)//</span> &amp;&amp; <span class="i">$1</span><span class="sc">;</span></li><li>	    <a class="l_k" href="functions/push.html">push</a> <span class="i">@ints</span><span class="cm">,</span> <a class="l_k" href="functions/pos.html">pos</a> <span class="i">$bits</span> while<span class="s">(</span><span class="i">$bits</span> =~ <span class="q">/1/g</span><span class="s">)</span><span class="sc">;</span></li><li>	<span class="s">}</span></li><li>	<a class="l_k" href="functions/return.html">return</a> \<span class="i">@ints</span><span class="sc">;</span></li><li>    <span class="s">}</span></li></ol></pre><p>This method gets faster the more sparse the bit vector is.
(Courtesy of Tim Bunce and Winfried Koenig.)</p>
<p>You can make the while loop a lot shorter with this suggestion
from Benjamin Goldberg:</p>
<pre class="verbatim"><ol><li>	while<span class="s">(</span><span class="i">$vec</span> =~ <span class="q">/[^\0]+/g</span> <span class="s">)</span> <span class="s">{</span></li><li>	   <a class="l_k" href="functions/push.html">push</a> <span class="i">@ints</span><span class="cm">,</span> <a class="l_k" href="functions/grep.html">grep</a> <a class="l_k" href="functions/vec.html">vec</a><span class="s">(</span><span class="i">$vec</span><span class="cm">,</span> <span class="i">$_</span><span class="cm">,</span> <span class="n">1</span><span class="s">)</span><span class="cm">,</span> <span class="i">$-</span>[<span class="n">0</span>] * <span class="n">8</span> .. <span class="i">$+</span>[<span class="n">0</span>] * <span class="n">8</span><span class="sc">;</span></li><li>	<span class="s">}</span></li></ol></pre><p>Or use the CPAN module Bit::Vector:</p>
<pre class="verbatim"><ol><li>    <span class="i">$vector</span> = <span class="w">Bit::Vector</span><span class="w">-&gt;new</span><span class="s">(</span><span class="i">$num_of_bits</span><span class="s">)</span><span class="sc">;</span></li><li>    <span class="i">$vector</span><span class="i">-&gt;Index_List_Store</span><span class="s">(</span><span class="i">@ints</span><span class="s">)</span><span class="sc">;</span></li><li>    <span class="i">@ints</span> = <span class="i">$vector</span><span class="i">-&gt;Index_List_Read</span><span class="s">(</span><span class="s">)</span><span class="sc">;</span></li></ol></pre><p>Bit::Vector provides efficient methods for bit vector, sets of small integers
and "big int" math.</p>
<p>Here's a more extensive illustration using vec():</p>
<pre class="verbatim"><ol><li>    <span class="c"># vec demo</span></li><li>    <span class="i">$vector</span> = <span class="q">&quot;\xff\x0f\xef\xfe&quot;</span><span class="sc">;</span></li><li>    <a class="l_k" href="functions/print.html">print</a> <span class="q">&quot;Ilya&#39;s string \\xff\\x0f\\xef\\xfe represents the number &quot;</span><span class="cm">,</span></li><li>	<a class="l_k" href="functions/unpack.html">unpack</a><span class="s">(</span><span class="q">&quot;N&quot;</span><span class="cm">,</span> <span class="i">$vector</span><span class="s">)</span><span class="cm">,</span> <span class="q">&quot;\n&quot;</span><span class="sc">;</span></li><li>    <span class="i">$is_set</span> = <a class="l_k" href="functions/vec.html">vec</a><span class="s">(</span><span class="i">$vector</span><span class="cm">,</span> <span class="n">23</span><span class="cm">,</span> <span class="n">1</span><span class="s">)</span><span class="sc">;</span></li><li>    <a class="l_k" href="functions/print.html">print</a> <span class="q">&quot;Its 23rd bit is &quot;</span><span class="cm">,</span> <span class="i">$is_set</span> ? <span class="q">&quot;set&quot;</span> <span class="co">:</span> <span class="q">&quot;clear&quot;</span><span class="cm">,</span> <span class="q">&quot;.\n&quot;</span><span class="sc">;</span></li><li>    <span class="i">pvec</span><span class="s">(</span><span class="i">$vector</span><span class="s">)</span><span class="sc">;</span></li><li></li><li>    <span class="i">set_vec</span><span class="s">(</span><span class="n">1</span><span class="cm">,</span><span class="n">1</span><span class="cm">,</span><span class="n">1</span><span class="s">)</span><span class="sc">;</span></li><li>    <span class="i">set_vec</span><span class="s">(</span><span class="n">3</span><span class="cm">,</span><span class="n">1</span><span class="cm">,</span><span class="n">1</span><span class="s">)</span><span class="sc">;</span></li><li>    <span class="i">set_vec</span><span class="s">(</span><span class="n">23</span><span class="cm">,</span><span class="n">1</span><span class="cm">,</span><span class="n">1</span><span class="s">)</span><span class="sc">;</span></li><li></li><li>    <span class="i">set_vec</span><span class="s">(</span><span class="n">3</span><span class="cm">,</span><span class="n">1</span><span class="cm">,</span><span class="n">3</span><span class="s">)</span><span class="sc">;</span></li><li>    <span class="i">set_vec</span><span class="s">(</span><span class="n">3</span><span class="cm">,</span><span class="n">2</span><span class="cm">,</span><span class="n">3</span><span class="s">)</span><span class="sc">;</span></li><li>    <span class="i">set_vec</span><span class="s">(</span><span class="n">3</span><span class="cm">,</span><span class="n">4</span><span class="cm">,</span><span class="n">3</span><span class="s">)</span><span class="sc">;</span></li><li>    <span class="i">set_vec</span><span class="s">(</span><span class="n">3</span><span class="cm">,</span><span class="n">4</span><span class="cm">,</span><span class="n">7</span><span class="s">)</span><span class="sc">;</span></li><li>    <span class="i">set_vec</span><span class="s">(</span><span class="n">3</span><span class="cm">,</span><span class="n">8</span><span class="cm">,</span><span class="n">3</span><span class="s">)</span><span class="sc">;</span></li><li>    <span class="i">set_vec</span><span class="s">(</span><span class="n">3</span><span class="cm">,</span><span class="n">8</span><span class="cm">,</span><span class="n">7</span><span class="s">)</span><span class="sc">;</span></li><li></li><li>    <span class="i">set_vec</span><span class="s">(</span><span class="n">0</span><span class="cm">,</span><span class="n">32</span><span class="cm">,</span><span class="n">17</span><span class="s">)</span><span class="sc">;</span></li><li>    <span class="i">set_vec</span><span class="s">(</span><span class="n">1</span><span class="cm">,</span><span class="n">32</span><span class="cm">,</span><span class="n">17</span><span class="s">)</span><span class="sc">;</span></li><li></li><li><a name="set_vec"></a>    sub <span class="m">set_vec</span> <span class="s">{</span></li><li>	<a class="l_k" href="functions/my.html">my</a> <span class="s">(</span><span class="i">$offset</span><span class="cm">,</span> <span class="i">$width</span><span class="cm">,</span> <span class="i">$value</span><span class="s">)</span> = <span class="i">@_</span><span class="sc">;</span></li><li>	<a class="l_k" href="functions/my.html">my</a> <span class="i">$vector</span> = <span class="q">&#39;&#39;</span><span class="sc">;</span></li><li>	<a class="l_k" href="functions/vec.html">vec</a><span class="s">(</span><span class="i">$vector</span><span class="cm">,</span> <span class="i">$offset</span><span class="cm">,</span> <span class="i">$width</span><span class="s">)</span> = <span class="i">$value</span><span class="sc">;</span></li><li>	<a class="l_k" href="functions/print.html">print</a> <span class="q">&quot;offset=$offset width=$width value=$value\n&quot;</span><span class="sc">;</span></li><li>	<span class="i">pvec</span><span class="s">(</span><span class="i">$vector</span><span class="s">)</span><span class="sc">;</span></li><li>    <span class="s">}</span></li><li></li><li><a name="pvec"></a>    sub <span class="m">pvec</span> <span class="s">{</span></li><li>	<a class="l_k" href="functions/my.html">my</a> <span class="i">$vector</span> = <a class="l_k" href="functions/shift.html">shift</a><span class="sc">;</span></li><li>	<a class="l_k" href="functions/my.html">my</a> <span class="i">$bits</span> = <a class="l_k" href="functions/unpack.html">unpack</a><span class="s">(</span><span class="q">&quot;b*&quot;</span><span class="cm">,</span> <span class="i">$vector</span><span class="s">)</span><span class="sc">;</span></li><li>	<a class="l_k" href="functions/my.html">my</a> <span class="i">$i</span> = <span class="n">0</span><span class="sc">;</span></li><li>	<a class="l_k" href="functions/my.html">my</a> <span class="i">$BASE</span> = <span class="n">8</span><span class="sc">;</span></li><li></li><li>	<a class="l_k" href="functions/print.html">print</a> <span class="q">&quot;vector length in bytes: &quot;</span><span class="cm">,</span> <a class="l_k" href="functions/length.html">length</a><span class="s">(</span><span class="i">$vector</span><span class="s">)</span><span class="cm">,</span> <span class="q">&quot;\n&quot;</span><span class="sc">;</span></li><li>	<span class="i">@bytes</span> = <a class="l_k" href="functions/unpack.html">unpack</a><span class="s">(</span><span class="q">&quot;A8&quot;</span> x <a class="l_k" href="functions/length.html">length</a><span class="s">(</span><span class="i">$vector</span><span class="s">)</span><span class="cm">,</span> <span class="i">$bits</span><span class="s">)</span><span class="sc">;</span></li><li>	<a class="l_k" href="functions/print.html">print</a> <span class="q">&quot;bits are: @bytes\n\n&quot;</span><span class="sc">;</span></li><li>    <span class="s">}</span></li></ol></pre><a class='view-head2' id="Why-does-defined()-return-true-on-empty-arrays-and-hashes%3f"></a><h3 class='h3' >Why does defined() return true on empty arrays and hashes?</h3>
<p>The short story is that you should probably only use defined on scalars or
functions, not on aggregates (arrays and hashes).  See <a class='function-name' href="functions/defined.html">defined</a>
in the 5.004 release or later of Perl for more detail.</p>
<a class='view-head1' id="Data%3a-Hashes-(Associative-Arrays)"></a><h2 class='h2' >Data: Hashes (Associative Arrays)</h2>
<a class='view-head2' id="How-do-I-process-an-entire-hash%3f"></a><h3 class='h3' >How do I process an entire hash?</h3>
<p>Use the each() function (see <a class='function-name' href="functions/each.html">each</a>) if you don't care
whether it's sorted:</p>
<pre class="verbatim"><ol><li>    while <span class="s">(</span> <span class="s">(</span><span class="i">$key</span><span class="cm">,</span> <span class="i">$value</span><span class="s">)</span> = <a class="l_k" href="functions/each.html">each</a> <span class="i">%hash</span><span class="s">)</span> <span class="s">{</span></li><li>	<a class="l_k" href="functions/print.html">print</a> <span class="q">&quot;$key = $value\n&quot;</span><span class="sc">;</span></li><li>    <span class="s">}</span></li></ol></pre><p>If you want it sorted, you'll have to use foreach() on the result of
sorting the keys as shown in an earlier question.</p>
<a class='view-head2' id="What-happens-if-I-add-or-remove-keys-from-a-hash-while-iterating-over-it%3f"></a><h3 class='h3' >What happens if I add or remove keys from a hash while iterating over it?</h3>
<p>(contributed by brian d foy)</p>
<p>The easy answer is "Don't do that!"</p>
<p>If you iterate through the hash with each(), you can delete the key
most recently returned without worrying about it.  If you delete or add
other keys, the iterator may skip or double up on them since perl
may rearrange the hash table.  See the
entry for <code class="inline"><a class="l_k" href="functions/each.html">each()</a></code> in <a href="perlfunc.html">perlfunc</a>.</p>
<a class='view-head2' id="How-do-I-look-up-a-hash-element-by-value%3f"></a><h3 class='h3' >How do I look up a hash element by value?</h3>
<p>Create a reverse hash:</p>
<pre class="verbatim"><ol><li>    <span class="i">%by_value</span> = <a class="l_k" href="functions/reverse.html">reverse</a> <span class="i">%by_key</span><span class="sc">;</span></li><li>    <span class="i">$key</span> = <span class="i">$by_value</span>{<span class="i">$value</span>}<span class="sc">;</span></li></ol></pre><p>That's not particularly efficient.  It would be more space-efficient
to use:</p>
<pre class="verbatim"><ol><li>    while <span class="s">(</span><span class="s">(</span><span class="i">$key</span><span class="cm">,</span> <span class="i">$value</span><span class="s">)</span> = <a class="l_k" href="functions/each.html">each</a> <span class="i">%by_key</span><span class="s">)</span> <span class="s">{</span></li><li>	<span class="i">$by_value</span>{<span class="i">$value</span>} = <span class="i">$key</span><span class="sc">;</span></li><li>    <span class="s">}</span></li></ol></pre><p>If your hash could have repeated values, the methods above will only find
one of the associated keys.   This may or may not worry you.  If it does
worry you, you can always reverse the hash into a hash of arrays instead:</p>
<pre class="verbatim"><ol><li>     while <span class="s">(</span><span class="s">(</span><span class="i">$key</span><span class="cm">,</span> <span class="i">$value</span><span class="s">)</span> = <a class="l_k" href="functions/each.html">each</a> <span class="i">%by_key</span><span class="s">)</span> <span class="s">{</span></li><li>	 <a class="l_k" href="functions/push.html">push</a> <span class="i">@</span>{<span class="i">$key_list_by_value</span>{<span class="i">$value</span>}}<span class="cm">,</span> <span class="i">$key</span><span class="sc">;</span></li><li>     <span class="s">}</span></li></ol></pre><a class='view-head2' id="How-can-I-know-how-many-entries-are-in-a-hash%3f"></a><h3 class='h3' >How can I know how many entries are in a hash?</h3>
<p>If you mean how many keys, then all you have to do is
use the keys() function in a scalar context:</p>
<pre class="verbatim"><ol><li>    <span class="i">$num_keys</span> = <a class="l_k" href="functions/keys.html">keys</a> <span class="i">%hash</span><span class="sc">;</span></li></ol></pre><p>The keys() function also resets the iterator, which means that you may
see strange results if you use this between uses of other hash operators
such as each().</p>
<a class='view-head2' id="How-do-I-sort-a-hash-(optionally-by-value-instead-of-key)%3f"></a><h3 class='h3' >How do I sort a hash (optionally by value instead of key)?</h3>
<p>(contributed by brian d foy)</p>
<p>To sort a hash, start with the keys. In this example, we give the list of
keys to the sort function which then compares them ASCIIbetically (which
might be affected by your locale settings). The output list has the keys
in ASCIIbetical order. Once we have the keys, we can go through them to
create a report which lists the keys in ASCIIbetical order.</p>
<pre class="verbatim"><ol><li>	<a class="l_k" href="functions/my.html">my</a> <span class="i">@keys</span> = <a class="l_k" href="functions/sort.html">sort</a> <span class="s">{</span> <span class="i">$a</span> cmp <span class="i">$b</span> <span class="s">}</span> <a class="l_k" href="functions/keys.html">keys</a> <span class="i">%hash</span><span class="sc">;</span></li><li></li><li>	foreach <a class="l_k" href="functions/my.html">my</a> <span class="i">$key</span> <span class="s">(</span> <span class="i">@keys</span> <span class="s">)</span></li><li>		<span class="s">{</span></li><li>		<a class="l_k" href="functions/printf.html">printf</a> <span class="q">&quot;%-20s %6d\n&quot;</span><span class="cm">,</span> <span class="i">$key</span><span class="cm">,</span> <span class="i">$hash</span>{<span class="i">$value</span>}<span class="sc">;</span></li><li>		<span class="s">}</span></li></ol></pre><p>We could get more fancy in the <code class="inline"><a class="l_k" href="functions/sort.html">sort()</a></code> block though. Instead of
comparing the keys, we can compute a value with them and use that
value as the comparison.</p>
<p>For instance, to make our report order case-insensitive, we use
the <code class="inline">\<span class="w">L</span></code>
 sequence in a double-quoted string to make everything
lowercase. The <code class="inline"><a class="l_k" href="functions/sort.html">sort()</a></code> block then compares the lowercased
values to determine in which order to put the keys.</p>
<pre class="verbatim"><ol><li>	<a class="l_k" href="functions/my.html">my</a> <span class="i">@keys</span> = <a class="l_k" href="functions/sort.html">sort</a> <span class="s">{</span> <span class="q">&quot;\L$a&quot;</span> cmp <span class="q">&quot;\L$b&quot;</span> <span class="s">}</span> <a class="l_k" href="functions/keys.html">keys</a> <span class="i">%hash</span><span class="sc">;</span></li></ol></pre><p>Note: if the computation is expensive or the hash has many elements,
you may want to look at the Schwartzian Transform to cache the
computation results.</p>
<p>If we want to sort by the hash value instead, we use the hash key
to look it up. We still get out a list of keys, but this time they
are ordered by their value.</p>
<pre class="verbatim"><ol><li>	<a class="l_k" href="functions/my.html">my</a> <span class="i">@keys</span> = <a class="l_k" href="functions/sort.html">sort</a> <span class="s">{</span> <span class="i">$hash</span>{<span class="i">$a</span>} &lt;=&gt; <span class="i">$hash</span>{<span class="i">$b</span>} <span class="s">}</span> <a class="l_k" href="functions/keys.html">keys</a> <span class="i">%hash</span><span class="sc">;</span></li></ol></pre><p>From there we can get more complex. If the hash values are the same,
we can provide a secondary sort on the hash key.</p>
<pre class="verbatim"><ol><li>	<a class="l_k" href="functions/my.html">my</a> <span class="i">@keys</span> = <a class="l_k" href="functions/sort.html">sort</a> <span class="s">{</span></li><li>		<span class="i">$hash</span>{<span class="i">$a</span>} &lt;=&gt; <span class="i">$hash</span>{<span class="i">$b</span>}</li><li>			or</li><li>		<span class="q">&quot;\L$a&quot;</span> cmp <span class="q">&quot;\L$b&quot;</span></li><li>		<span class="s">}</span> <a class="l_k" href="functions/keys.html">keys</a> <span class="i">%hash</span><span class="sc">;</span></li></ol></pre><a class='view-head2' id="How-can-I-always-keep-my-hash-sorted%3f"></a><h3 class='h3' >How can I always keep my hash sorted?</h3>
<p>You can look into using the DB_File module and tie() using the
$DB_BTREE hash bindings as documented in <a href="https://search.cpan.org/perldoc/DB_File#In-Memory-Databases">In Memory Databases in DB_File</a>.
The Tie::IxHash module from CPAN might also be instructive.</p>
<a class='view-head2' id="What's-the-difference-between-%22delete%22-and-%22undef%22-with-hashes%3f"></a><h3 class='h3' >What's the difference between "delete" and "undef" with hashes?</h3>
<p>Hashes contain pairs of scalars: the first is the key, the
second is the value.  The key will be coerced to a string,
although the value can be any kind of scalar: string,
number, or reference.  If a key $key is present in
%hash, <code class="inline"><a class="l_k" href="functions/exists.html">exists($hash{$key})</a></code> will return true.  The value
for a given key can be <code class="inline"><a class="l_k" href="functions/undef.html">undef</a></code>, in which case
<code class="inline"><span class="i">$hash</span>{<span class="i">$key</span>}</code>
 will be <code class="inline"><a class="l_k" href="functions/undef.html">undef</a></code> while <code class="inline"><a class="l_k" href="functions/exists.html">exists</a> <span class="i">$hash</span>{<span class="i">$key</span>}</code>

will return true.  This corresponds to (<code class="inline"><span class="i">$key</span></code>
, <code class="inline"><a class="l_k" href="functions/undef.html">undef</a></code>)
being in the hash.</p>
<p>Pictures help...  here's the %hash table:</p>
<pre class="verbatim"><ol><li>	  <a class="l_k" href="functions/keys.html">keys</a>  <a class="l_k" href="functions/values.html">values</a></li><li>	+------+------+</li><li>	|  <span class="w">a</span>   |  <span class="n">3</span>   |</li><li>	|  <span class="w">x</span>   |  <span class="n">7</span>   |</li><li>	|  <span class="w">d</span>   |  <span class="n">0</span>   |</li><li>	|  <span class="w">e</span>   |  <span class="n">2</span>   |</li><li>	+------+------+</li></ol></pre><p>And these conditions hold</p>
<pre class="verbatim"><ol><li>	<span class="i">$hash</span>{<span class="q">&#39;a&#39;</span>}                       <span class="w">is</span> <span class="w">true</span></li><li>	<span class="i">$hash</span>{<span class="q">&#39;d&#39;</span>}                       <span class="w">is</span> <span class="w">false</span></li><li>	<a class="l_k" href="functions/defined.html">defined</a> <span class="i">$hash</span>{<span class="q">&#39;d&#39;</span>}               <span class="w">is</span> <span class="w">true</span></li><li>	<a class="l_k" href="functions/defined.html">defined</a> <span class="i">$hash</span>{<span class="q">&#39;a&#39;</span>}               <span class="w">is</span> <span class="w">true</span></li><li>	<a class="l_k" href="functions/exists.html">exists</a> <span class="i">$hash</span>{<span class="q">&#39;a&#39;</span>}                <span class="w">is</span> <span class="w">true</span> <span class="s">(</span><span class="w">Perl5</span> <span class="w">only</span><span class="s">)</span></li><li>	<a class="l_k" href="functions/grep.html">grep</a> <span class="s">(</span><span class="i">$_</span> eq <span class="q">&#39;a&#39;</span><span class="cm">,</span> <a class="l_k" href="functions/keys.html">keys</a> <span class="i">%hash</span><span class="s">)</span>     <span class="w">is</span> <span class="w">true</span></li></ol></pre><p>If you now say</p>
<pre class="verbatim"><ol><li>	<a class="l_k" href="functions/undef.html">undef</a> <span class="i">$hash</span>{<span class="q">&#39;a&#39;</span>}</li></ol></pre><p>your table now reads:</p>
<pre class="verbatim"><ol><li>	  <a class="l_k" href="functions/keys.html">keys</a>  <a class="l_k" href="functions/values.html">values</a></li><li>	+------+------+</li><li>	|  <span class="w">a</span>   | <a class="l_k" href="functions/undef.html">undef</a>|</li><li>	|  <span class="w">x</span>   |  <span class="n">7</span>   |</li><li>	|  <span class="w">d</span>   |  <span class="n">0</span>   |</li><li>	|  <span class="w">e</span>   |  <span class="n">2</span>   |</li><li>	+------+------+</li></ol></pre><p>and these conditions now hold; changes in caps:</p>
<pre class="verbatim"><ol><li>	<span class="i">$hash</span>{<span class="q">&#39;a&#39;</span>}                       <span class="w">is</span> <span class="w">FALSE</span></li><li>	<span class="i">$hash</span>{<span class="q">&#39;d&#39;</span>}                       <span class="w">is</span> <span class="w">false</span></li><li>	<a class="l_k" href="functions/defined.html">defined</a> <span class="i">$hash</span>{<span class="q">&#39;d&#39;</span>}               <span class="w">is</span> <span class="w">true</span></li><li>	<a class="l_k" href="functions/defined.html">defined</a> <span class="i">$hash</span>{<span class="q">&#39;a&#39;</span>}               <span class="w">is</span> <span class="w">FALSE</span></li><li>	<a class="l_k" href="functions/exists.html">exists</a> <span class="i">$hash</span>{<span class="q">&#39;a&#39;</span>}                <span class="w">is</span> <span class="w">true</span> <span class="s">(</span><span class="w">Perl5</span> <span class="w">only</span><span class="s">)</span></li><li>	<a class="l_k" href="functions/grep.html">grep</a> <span class="s">(</span><span class="i">$_</span> eq <span class="q">&#39;a&#39;</span><span class="cm">,</span> <a class="l_k" href="functions/keys.html">keys</a> <span class="i">%hash</span><span class="s">)</span>     <span class="w">is</span> <span class="w">true</span></li></ol></pre><p>Notice the last two: you have an undef value, but a defined key!</p>
<p>Now, consider this:</p>
<pre class="verbatim"><ol><li>	<a class="l_k" href="functions/delete.html">delete</a> <span class="i">$hash</span>{<span class="q">&#39;a&#39;</span>}</li></ol></pre><p>your table now reads:</p>
<pre class="verbatim"><ol><li>	  <a class="l_k" href="functions/keys.html">keys</a>  <a class="l_k" href="functions/values.html">values</a></li><li>	+------+------+</li><li>	|  <span class="w">x</span>   |  <span class="n">7</span>   |</li><li>	|  <span class="w">d</span>   |  <span class="n">0</span>   |</li><li>	|  <span class="w">e</span>   |  <span class="n">2</span>   |</li><li>	+------+------+</li></ol></pre><p>and these conditions now hold; changes in caps:</p>
<pre class="verbatim"><ol><li>	<span class="i">$hash</span>{<span class="q">&#39;a&#39;</span>}                       <span class="w">is</span> <span class="w">false</span></li><li>	<span class="i">$hash</span>{<span class="q">&#39;d&#39;</span>}                       <span class="w">is</span> <span class="w">false</span></li><li>	<a class="l_k" href="functions/defined.html">defined</a> <span class="i">$hash</span>{<span class="q">&#39;d&#39;</span>}               <span class="w">is</span> <span class="w">true</span></li><li>	<a class="l_k" href="functions/defined.html">defined</a> <span class="i">$hash</span>{<span class="q">&#39;a&#39;</span>}               <span class="w">is</span> <span class="w">false</span></li><li>	<a class="l_k" href="functions/exists.html">exists</a> <span class="i">$hash</span>{<span class="q">&#39;a&#39;</span>}                <span class="w">is</span> <span class="w">FALSE</span> <span class="s">(</span><span class="w">Perl5</span> <span class="w">only</span><span class="s">)</span></li><li>	<a class="l_k" href="functions/grep.html">grep</a> <span class="s">(</span><span class="i">$_</span> eq <span class="q">&#39;a&#39;</span><span class="cm">,</span> <a class="l_k" href="functions/keys.html">keys</a> <span class="i">%hash</span><span class="s">)</span>     <span class="w">is</span> <span class="w">FALSE</span></li></ol></pre><p>See, the whole entry is gone!</p>
<a class='view-head2' id="Why-don't-my-tied-hashes-make-the-defined%2fexists-distinction%3f"></a><h3 class='h3' >Why don't my tied hashes make the defined/exists distinction?</h3>
<p>This depends on the tied hash's implementation of EXISTS().
For example, there isn't the concept of undef with hashes
that are tied to DBM* files. It also means that exists() and
defined() do the same thing with a DBM* file, and what they
end up doing is not what they do with ordinary hashes.</p>
<a class='view-head2' id="How-do-I-reset-an-each()-operation-part-way-through%3f"></a><h3 class='h3' >How do I reset an each() operation part-way through?</h3>
<p>Using <code class="inline"><a class="l_k" href="functions/keys.html">keys</a> <span class="i">%hash</span></code>
 in scalar context returns the number of keys in
the hash <i>and</i> resets the iterator associated with the hash.  You may
need to do this if you use <code class="inline"><a class="l_k" href="functions/last.html">last</a></code> to exit a loop early so that when you
re-enter it, the hash iterator has been reset.</p>
<a class='view-head2' id="How-can-I-get-the-unique-keys-from-two-hashes%3f"></a><h3 class='h3' >How can I get the unique keys from two hashes?</h3>
<p>First you extract the keys from the hashes into lists, then solve
the "removing duplicates" problem described above.  For example:</p>
<pre class="verbatim"><ol><li>    <span class="i">%seen</span> = <span class="s">(</span><span class="s">)</span><span class="sc">;</span></li><li>    for <span class="i">$element</span> <span class="s">(</span><a class="l_k" href="functions/keys.html">keys</a><span class="s">(</span><span class="i">%foo</span><span class="s">)</span><span class="cm">,</span> <a class="l_k" href="functions/keys.html">keys</a><span class="s">(</span><span class="i">%bar</span><span class="s">)</span><span class="s">)</span> <span class="s">{</span></li><li>	<span class="i">$seen</span>{<span class="i">$element</span>}++<span class="sc">;</span></li><li>    <span class="s">}</span></li><li>    <span class="i">@uniq</span> = <a class="l_k" href="functions/keys.html">keys</a> <span class="i">%seen</span><span class="sc">;</span></li></ol></pre><p>Or more succinctly:</p>
<pre class="verbatim"><ol><li>    <span class="i">@uniq</span> = <a class="l_k" href="functions/keys.html">keys</a> <span class="i">%</span>{<span class="s">{</span><span class="i">%foo</span><span class="cm">,</span><span class="i">%bar</span><span class="s">}</span>}<span class="sc">;</span></li></ol></pre><p>Or if you really want to save space:</p>
<pre class="verbatim"><ol><li>    <span class="i">%seen</span> = <span class="s">(</span><span class="s">)</span><span class="sc">;</span></li><li>    while <span class="s">(</span><a class="l_k" href="functions/defined.html">defined</a> <span class="s">(</span><span class="i">$key</span> = <a class="l_k" href="functions/each.html">each</a> <span class="i">%foo</span><span class="s">)</span><span class="s">)</span> <span class="s">{</span></li><li>        <span class="i">$seen</span>{<span class="i">$key</span>}++<span class="sc">;</span></li><li>    <span class="s">}</span></li><li>    while <span class="s">(</span><a class="l_k" href="functions/defined.html">defined</a> <span class="s">(</span><span class="i">$key</span> = <a class="l_k" href="functions/each.html">each</a> <span class="i">%bar</span><span class="s">)</span><span class="s">)</span> <span class="s">{</span></li><li>        <span class="i">$seen</span>{<span class="i">$key</span>}++<span class="sc">;</span></li><li>    <span class="s">}</span></li><li>    <span class="i">@uniq</span> = <a class="l_k" href="functions/keys.html">keys</a> <span class="i">%seen</span><span class="sc">;</span></li></ol></pre><a class='view-head2' id="How-can-I-store-a-multidimensional-array-in-a-DBM-file%3f"></a><h3 class='h3' >How can I store a multidimensional array in a DBM file?</h3>
<p>Either stringify the structure yourself (no fun), or else
get the MLDBM (which uses Data::Dumper) module from CPAN and layer
it on top of either DB_File or GDBM_File.</p>
<a class='view-head2' id="How-can-I-make-my-hash-remember-the-order-I-put-elements-into-it%3f"></a><h3 class='h3' >How can I make my hash remember the order I put elements into it?</h3>
<p>Use the Tie::IxHash from CPAN.</p>
<pre class="verbatim"><ol><li>    <a class="l_k" href="functions/use.html">use</a> <span class="w">Tie::IxHash</span><span class="sc">;</span></li><li>    <a class="l_k" href="functions/tie.html">tie</a> <a class="l_k" href="functions/my.html">my</a> <span class="i">%myhash</span><span class="cm">,</span> <span class="q">&#39;Tie::IxHash&#39;</span><span class="sc">;</span></li><li>    for <span class="s">(</span><a class="l_k" href="functions/my.html">my</a> <span class="i">$i</span>=<span class="n">0</span><span class="sc">;</span> <span class="i">$i</span>&lt;<span class="n">20</span><span class="sc">;</span> <span class="i">$i</span>++<span class="s">)</span> <span class="s">{</span></li><li>        <span class="i">$myhash</span>{<span class="i">$i</span>} = <span class="n">2</span>*<span class="i">$i</span><span class="sc">;</span></li><li>    <span class="s">}</span></li><li>    <a class="l_k" href="functions/my.html">my</a> <span class="i">@keys</span> = <a class="l_k" href="functions/keys.html">keys</a> <span class="i">%myhash</span><span class="sc">;</span></li><li>    <span class="c"># @keys = (0,1,2,3,...)</span></li></ol></pre><a class='view-head2' id="Why-does-passing-a-subroutine-an-undefined-element-in-a-hash-create-it%3f"></a><h3 class='h3' >Why does passing a subroutine an undefined element in a hash create it?</h3>
<p>If you say something like:</p>
<pre class="verbatim"><ol><li>    <span class="i">somefunc</span><span class="s">(</span><span class="i">$hash</span>{<span class="q">&quot;nonesuch key here&quot;</span>}<span class="s">)</span><span class="sc">;</span></li></ol></pre><p>Then that element "autovivifies"; that is, it springs into existence
whether you store something there or not.  That's because functions
get scalars passed in by reference.  If somefunc() modifies <code class="inline"><span class="i">$_</span>[<span class="n">0</span>]</code>
,
it has to be ready to write it back into the caller's version.</p>
<p>This has been fixed as of Perl5.004.</p>
<p>Normally, merely accessing a key's value for a nonexistent key does
<i>not</i> cause that key to be forever there.  This is different than
awk's behavior.</p>
<a class='view-head2' id="How-can-I-make-the-Perl-equivalent-of-a-C-structure%2fC%2b%2b-class%2fhash-or-array-of-hashes-or-arrays%3f"></a><h3 class='h3' >How can I make the Perl equivalent of a C structure/C++ class/hash or array of hashes or arrays?</h3>
<p>Usually a hash ref, perhaps like this:</p>
<pre class="verbatim"><ol><li>    <span class="i">$record</span> = <span class="s">{</span></li><li>        <span class="w">NAME</span>   <span class="cm">=&gt;</span> <span class="q">&quot;Jason&quot;</span><span class="cm">,</span></li><li>        <span class="w">EMPNO</span>  <span class="cm">=&gt;</span> <span class="n">132</span><span class="cm">,</span></li><li>        <span class="w">TITLE</span>  <span class="cm">=&gt;</span> <span class="q">&quot;deputy peon&quot;</span><span class="cm">,</span></li><li>        <span class="w">AGE</span>    <span class="cm">=&gt;</span> <span class="n">23</span><span class="cm">,</span></li><li>        <span class="w">SALARY</span> <span class="cm">=&gt;</span> <span class="n">37_000</span><span class="cm">,</span></li><li>        <span class="w">PALS</span>   <span class="cm">=&gt;</span> <span class="s">[</span> <span class="q">&quot;Norbert&quot;</span><span class="cm">,</span> <span class="q">&quot;Rhys&quot;</span><span class="cm">,</span> <span class="q">&quot;Phineas&quot;</span><span class="s">]</span><span class="cm">,</span></li><li>    <span class="s">}</span><span class="sc">;</span></li></ol></pre><p>References are documented in <a href="perlref.html">perlref</a> and the upcoming <a href="perlreftut.html">perlreftut</a>.
Examples of complex data structures are given in <a href="perldsc.html">perldsc</a> and
<a href="perllol.html">perllol</a>.  Examples of structures and object-oriented classes are
in <a href="perltoot.html">perltoot</a>.</p>
<a class='view-head2' id="How-can-I-use-a-reference-as-a-hash-key%3f"></a><h3 class='h3' >How can I use a reference as a hash key?</h3>
<p>(contributed by brian d foy)</p>
<p>Hash keys are strings, so you can't really use a reference as the key.
When you try to do that, perl turns the reference into its stringified
form (for instance, <code class="inline"><span class="i">HASH</span><span class="s">(</span><span class="n">0xDEADBEEF</span><span class="s">)</span></code>
). From there you can't get back
the reference from the stringified form, at least without doing some
extra work on your own. Also remember that hash keys must be unique, but
two different variables can store the same reference (and those variables
can change later).</p>
<p>The Tie::RefHash module, which is distributed with perl, might be what
you want. It handles that extra work.</p>
<a class='view-head1' id="Data%3a-Misc"></a><h2 class='h2' >Data: Misc</h2>
<a class='view-head2' id="How-do-I-handle-binary-data-correctly%3f"></a><h3 class='h3' >How do I handle binary data correctly?</h3>
<p>Perl is binary clean, so this shouldn't be a problem.  For example,
this works fine (assuming the files are found):</p>
<pre class="verbatim"><ol><li>    if <span class="s">(</span><span class="q">`cat /vmunix`</span> =~ <span class="q">/gzip/</span><span class="s">)</span> <span class="s">{</span></li><li>	<a class="l_k" href="functions/print.html">print</a> <span class="q">&quot;Your kernel is GNU-zip enabled!\n&quot;</span><span class="sc">;</span></li><li>    <span class="s">}</span></li></ol></pre><p>On less elegant (read: Byzantine) systems, however, you have
to play tedious games with "text" versus "binary" files.  See
<a class='function-name' href="functions/binmode.html">binmode</a> or <a href="perlopentut.html">perlopentut</a>.</p>
<p>If you're concerned about 8-bit ASCII data, then see <a href="perllocale.html">perllocale</a>.</p>
<p>If you want to deal with multibyte characters, however, there are
some gotchas.  See the section on Regular Expressions.</p>
<a class='view-head2' id="How-do-I-determine-whether-a-scalar-is-a-number%2fwhole%2finteger%2ffloat%3f"></a><h3 class='h3' >How do I determine whether a scalar is a number/whole/integer/float?</h3>
<p>Assuming that you don't care about IEEE notations like "NaN" or
"Infinity", you probably just want to use a regular expression.</p>
<pre class="verbatim"><ol><li>   if <span class="s">(</span><span class="q">/\D/</span><span class="s">)</span>            <span class="s">{</span> <a class="l_k" href="functions/print.html">print</a> <span class="q">&quot;has nondigits\n&quot;</span> <span class="s">}</span></li><li>   if <span class="s">(</span><span class="q">/^\d+$/</span><span class="s">)</span>         <span class="s">{</span> <a class="l_k" href="functions/print.html">print</a> <span class="q">&quot;is a whole number\n&quot;</span> <span class="s">}</span></li><li>   if <span class="s">(</span><span class="q">/^-?\d+$/</span><span class="s">)</span>       <span class="s">{</span> <a class="l_k" href="functions/print.html">print</a> <span class="q">&quot;is an integer\n&quot;</span> <span class="s">}</span></li><li>   if <span class="s">(</span><span class="q">/^[+-]?\d+$/</span><span class="s">)</span>    <span class="s">{</span> <a class="l_k" href="functions/print.html">print</a> <span class="q">&quot;is a +/- integer\n&quot;</span> <span class="s">}</span></li><li>   if <span class="s">(</span><span class="q">/^-?\d+\.?\d*$/</span><span class="s">)</span> <span class="s">{</span> <a class="l_k" href="functions/print.html">print</a> <span class="q">&quot;is a real number\n&quot;</span> <span class="s">}</span></li><li>   if <span class="s">(</span><span class="q">/^-?(?:\d+(?:\.\d*)?|\.\d+)$/</span><span class="s">)</span> <span class="s">{</span> <a class="l_k" href="functions/print.html">print</a> <span class="q">&quot;is a decimal number\n&quot;</span> <span class="s">}</span></li><li>   if <span class="s">(</span><span class="q">/^([+-]?)(?=\d|\.\d)\d*(\.\d*)?([Ee]([+-]?\d+))?$/</span><span class="s">)</span></li><li>			<span class="s">{</span> <a class="l_k" href="functions/print.html">print</a> <span class="q">&quot;a C float\n&quot;</span> <span class="s">}</span></li></ol></pre><p>There are also some commonly used modules for the task.
<a href="Scalar/Util.html">Scalar::Util</a> (distributed with 5.8) provides access to perl's
internal function <code class="inline"><span class="w">looks_like_number</span></code>
 for determining
whether a variable looks like a number.  <a href="https://search.cpan.org/perldoc/Data::Types">Data::Types</a>
exports functions that validate data types using both the
above and other regular expressions. Thirdly, there is
<code class="inline"><span class="w">Regexp::Common</span></code>
 which has regular expressions to match
various types of numbers. Those three modules are available
from the CPAN.</p>
<p>If you're on a POSIX system, Perl supports the <code class="inline"><span class="w">POSIX::strtod</span></code>

function.  Its semantics are somewhat cumbersome, so here's a <code class="inline"><span class="w">getnum</span></code>

wrapper function for more convenient access.  This function takes
a string and returns the number it found, or <code class="inline"><a class="l_k" href="functions/undef.html">undef</a></code> for input that
isn't a C float.  The <code class="inline"><span class="w">is_numeric</span></code>
 function is a front end to <code class="inline"><span class="w">getnum</span></code>

if you just want to say, "Is this a float?"</p>
<pre class="verbatim"><ol><li><a name="getnum"></a>    sub <span class="m">getnum</span> <span class="s">{</span></li><li>        <a class="l_k" href="functions/use.html">use</a> <span class="w">POSIX</span> <span class="q">qw(strtod)</span><span class="sc">;</span></li><li>        <a class="l_k" href="functions/my.html">my</a> <span class="i">$str</span> = <a class="l_k" href="functions/shift.html">shift</a><span class="sc">;</span></li><li>        <span class="i">$str</span> =~ <span class="q">s/^\s+//</span><span class="sc">;</span></li><li>        <span class="i">$str</span> =~ <span class="q">s/\s+$//</span><span class="sc">;</span></li><li>        <span class="i">$!</span> = <span class="n">0</span><span class="sc">;</span></li><li>        <a class="l_k" href="functions/my.html">my</a><span class="s">(</span><span class="i">$num</span><span class="cm">,</span> <span class="i">$unparsed</span><span class="s">)</span> = <span class="i">strtod</span><span class="s">(</span><span class="i">$str</span><span class="s">)</span><span class="sc">;</span></li><li>        if <span class="s">(</span><span class="s">(</span><span class="i">$str</span> eq <span class="q">&#39;&#39;</span><span class="s">)</span> || <span class="s">(</span><span class="i">$unparsed</span> != <span class="n">0</span><span class="s">)</span> || <span class="i">$!</span><span class="s">)</span> <span class="s">{</span></li><li>            <a class="l_k" href="functions/return.html">return</a> <a class="l_k" href="functions/undef.html">undef</a><span class="sc">;</span></li><li>        <span class="s">}</span> else <span class="s">{</span></li><li>            <a class="l_k" href="functions/return.html">return</a> <span class="i">$num</span><span class="sc">;</span></li><li>        <span class="s">}</span></li><li>    <span class="s">}</span></li><li></li><li><a name="is_numeric"></a>    sub <span class="m">is_numeric</span> <span class="s">{</span> <a class="l_k" href="functions/defined.html">defined</a> <span class="i">getnum</span><span class="s">(</span><span class="i">$_</span>[<span class="n">0</span>]<span class="s">)</span> <span class="s">}</span></li></ol></pre><p>Or you could check out the <a href="https://search.cpan.org/perldoc/String::Scanf">String::Scanf</a> module on the CPAN
instead. The POSIX module (part of the standard Perl distribution) provides
the <code class="inline"><span class="w">strtod</span></code>
 and <code class="inline"><span class="w">strtol</span></code>
 for converting strings to double and longs,
respectively.</p>
<a class='view-head2' id="How-do-I-keep-persistent-data-across-program-calls%3f"></a><h3 class='h3' >How do I keep persistent data across program calls?</h3>
<p>For some specific applications, you can use one of the DBM modules.
See <a href="AnyDBM_File.html">AnyDBM_File</a>.  More generically, you should consult the FreezeThaw
or Storable modules from CPAN.  Starting from Perl 5.8 Storable is part
of the standard distribution.  Here's one example using Storable's <code class="inline"><span class="w">store</span></code>

and <code class="inline"><span class="w">retrieve</span></code>
 functions:</p>
<pre class="verbatim"><ol><li>    <a class="l_k" href="functions/use.html">use</a> <span class="w">Storable</span><span class="sc">;</span></li><li>    <span class="i">store</span><span class="s">(</span>\<span class="i">%hash</span><span class="cm">,</span> <span class="q">&quot;filename&quot;</span><span class="s">)</span><span class="sc">;</span></li><li></li><li>    <span class="c"># later on...</span></li><li>    <span class="i">$href</span> = <span class="i">retrieve</span><span class="s">(</span><span class="q">&quot;filename&quot;</span><span class="s">)</span><span class="sc">;</span>        <span class="c"># by ref</span></li><li>    <span class="i">%hash</span> = <span class="i">%</span>{ <span class="i">retrieve</span><span class="s">(</span><span class="q">&quot;filename&quot;</span><span class="s">)</span> }<span class="sc">;</span>   <span class="c"># direct to hash</span></li></ol></pre><a class='view-head2' id="How-do-I-print-out-or-copy-a-recursive-data-structure%3f"></a><h3 class='h3' >How do I print out or copy a recursive data structure?</h3>
<p>The Data::Dumper module on CPAN (or the 5.005 release of Perl) is great
for printing out data structures.  The Storable module on CPAN (or the
5.8 release of Perl), provides a function called <code class="inline"><span class="w">dclone</span></code>
 that recursively
copies its argument.</p>
<pre class="verbatim"><ol><li>    <a class="l_k" href="functions/use.html">use</a> <span class="w">Storable</span> <span class="q">qw(dclone)</span><span class="sc">;</span></li><li>    <span class="i">$r2</span> = <span class="i">dclone</span><span class="s">(</span><span class="i">$r1</span><span class="s">)</span><span class="sc">;</span></li></ol></pre><p>Where $r1 can be a reference to any kind of data structure you'd like.
It will be deeply copied.  Because <code class="inline"><span class="w">dclone</span></code>
 takes and returns references,
you'd have to add extra punctuation if you had a hash of arrays that
you wanted to copy.</p>
<pre class="verbatim"><ol><li>    <span class="i">%newhash</span> = <span class="i">%</span>{ <span class="i">dclone</span><span class="s">(</span>\<span class="i">%oldhash</span><span class="s">)</span> }<span class="sc">;</span></li></ol></pre><a class='view-head2' id="How-do-I-define-methods-for-every-class%2fobject%3f"></a><h3 class='h3' >How do I define methods for every class/object?</h3>
<p>Use the UNIVERSAL class (see <a href="UNIVERSAL.html">UNIVERSAL</a>).</p>
<a class='view-head2' id="How-do-I-verify-a-credit-card-checksum%3f"></a><h3 class='h3' >How do I verify a credit card checksum?</h3>
<p>Get the Business::CreditCard module from CPAN.</p>
<a class='view-head2' id="How-do-I-pack-arrays-of-doubles-or-floats-for-XS-code%3f"></a><h3 class='h3' >How do I pack arrays of doubles or floats for XS code?</h3>
<p>The kgbpack.c code in the PGPLOT module on CPAN does just this.
If you're doing a lot of float or double processing, consider using
the PDL module from CPAN instead--it makes number-crunching easy.</p>
<a class='view-head1' id="AUTHOR-AND-COPYRIGHT"></a><h2 class='h2' >AUTHOR AND COPYRIGHT</h2>
<p>Copyright (c) 1997-2006 Tom Christiansen, Nathan Torkington, and
other authors as noted. All rights reserved.</p>
<p>This documentation is free; you can redistribute it and/or modify it
under the same terms as Perl itself.</p>
<p>Irrespective of its distribution, all code examples in this file
are hereby placed into the public domain.  You are permitted and
encouraged to use this code in your own programs for fun
or for profit as you see fit.  A simple comment in the code giving
credit would be courteous but is not required.</p>




      <ul><li><a href="#NAME">NAME</a></li><li><a href="#DESCRIPTION">DESCRIPTION</a></li><li><a href="#Data%3a-Numbers">Data: Numbers</a></li><ul><li><a href="#Why-am-I-getting-long-decimals-(eg%2c-19.9499999999999)-instead-of-the-numbers-I-should-be-getting-(eg%2c-19.95)%3f">Why am I getting long decimals (eg, 19.9499999999999) instead of the numbers I should be getting (eg, 19.95)?</a></li><li><a href="#Why-is-int()-broken%3f">Why is int() broken?</a></li><li><a href="#Why-isn't-my-octal-data-interpreted-correctly%3f">Why isn't my octal data interpreted correctly?</a></li><li><a href="#Does-Perl-have-a-round()-function%3f--What-about-ceil()-and-floor()%3f--Trig-functions%3f">Does Perl have a round() function?  What about ceil() and floor()?  Trig functions?</a></li><li><a href="#How-do-I-convert-between-numeric-representations%2fbases%2fradixes%3f">How do I convert between numeric representations/bases/radixes?</a></li><li><a href="#Why-doesn't-%26-work-the-way-I-want-it-to%3f">Why doesn't & work the way I want it to?</a></li><li><a href="#How-do-I-multiply-matrices%3f">How do I multiply matrices?</a></li><li><a href="#How-do-I-perform-an-operation-on-a-series-of-integers%3f">How do I perform an operation on a series of integers?</a></li><li><a href="#How-can-I-output-Roman-numerals%3f">How can I output Roman numerals?</a></li><li><a href="#Why-aren't-my-random-numbers-random%3f">Why aren't my random numbers random?</a></li><li><a href="#How-do-I-get-a-random-number-between-X-and-Y%3f">How do I get a random number between X and Y?</a></li></ul><li><a href="#Data%3a-Dates">Data: Dates</a></li><ul><li><a href="#How-do-I-find-the-day-or-week-of-the-year%3f">How do I find the day or week of the year?</a></li><li><a href="#How-do-I-find-the-current-century-or-millennium%3f">How do I find the current century or millennium?</a></li><li><a href="#How-can-I-compare-two-dates-and-find-the-difference%3f">How can I compare two dates and find the difference?</a></li><li><a href="#How-can-I-take-a-string-and-turn-it-into-epoch-seconds%3f">How can I take a string and turn it into epoch seconds?</a></li><li><a href="#How-can-I-find-the-Julian-Day%3f">How can I find the Julian Day?</a></li><li><a href="#How-do-I-find-yesterday's-date%3f">How do I find yesterday's date?</a></li><li><a href="#Does-Perl-have-a-Year-2000-problem%3f--Is-Perl-Y2K-compliant%3f">Does Perl have a Year 2000 problem?  Is Perl Y2K compliant?</a></li></ul><li><a href="#Data%3a-Strings">Data: Strings</a></li><ul><li><a href="#How-do-I-validate-input%3f">How do I validate input?</a></li><li><a href="#How-do-I-unescape-a-string%3f">How do I unescape a string?</a></li><li><a href="#How-do-I-remove-consecutive-pairs-of-characters%3f">How do I remove consecutive pairs of characters?</a></li><li><a href="#How-do-I-expand-function-calls-in-a-string%3f">How do I expand function calls in a string?</a></li><li><a href="#How-do-I-find-matching%2fnesting-anything%3f">How do I find matching/nesting anything?</a></li><li><a href="#How-do-I-reverse-a-string%3f">How do I reverse a string?</a></li><li><a href="#How-do-I-expand-tabs-in-a-string%3f">How do I expand tabs in a string?</a></li><li><a href="#How-do-I-reformat-a-paragraph%3f">How do I reformat a paragraph?</a></li><li><a href="#How-can-I-access-or-change-N-characters-of-a-string%3f">How can I access or change N characters of a string?</a></li><li><a href="#How-do-I-change-the-Nth-occurrence-of-something%3f">How do I change the Nth occurrence of something?</a></li><li><a href="#How-can-I-count-the-number-of-occurrences-of-a-substring-within-a-string%3f">How can I count the number of occurrences of a substring within a string?</a></li><li><a href="#How-do-I-capitalize-all-the-words-on-one-line%3f">How do I capitalize all the words on one line?</a></li><li><a href="#How-can-I-split-a-%5bcharacter%5d-delimited-string-except-when-inside-%5bcharacter%5d%3f">How can I split a [character] delimited string except when inside [character]?</a></li><li><a href="#How-do-I-strip-blank-space-from-the-beginning%2fend-of-a-string%3f">How do I strip blank space from the beginning/end of a string?</a></li><li><a href="#How-do-I-pad-a-string-with-blanks-or-pad-a-number-with-zeroes%3f">How do I pad a string with blanks or pad a number with zeroes?</a></li><li><a href="#How-do-I-extract-selected-columns-from-a-string%3f">How do I extract selected columns from a string?</a></li><li><a href="#How-do-I-find-the-soundex-value-of-a-string%3f">How do I find the soundex value of a string?</a></li><li><a href="#How-can-I-expand-variables-in-text-strings%3f">How can I expand variables in text strings?</a></li><li><a href="#What's-wrong-with-always-quoting-%22%24vars%22%3f">What's wrong with always quoting "$vars"?</a></li><li><a href="#Why-don't-my-%3c%3cHERE-documents-work%3f">Why don't my <<HERE documents work?</a></li></ul><li><a href="#Data%3a-Arrays">Data: Arrays</a></li><ul><li><a href="#What-is-the-difference-between-a-list-and-an-array%3f">What is the difference between a list and an array?</a></li><li><a href="#What-is-the-difference-between-%24array%5b1%5d-and-%40array%5b1%5d%3f">What is the difference between $array[1] and @array[1]?</a></li><li><a href="#How-can-I-remove-duplicate-elements-from-a-list-or-array%3f">How can I remove duplicate elements from a list or array?</a></li><li><a href="#How-can-I-tell-whether-a-certain-element-is-contained-in-a-list-or-array%3f">How can I tell whether a certain element is contained in a list or array?</a></li><li><a href="#How-do-I-compute-the-difference-of-two-arrays%3f--How-do-I-compute-the-intersection-of-two-arrays%3f">How do I compute the difference of two arrays?  How do I compute the intersection of two arrays?</a></li><li><a href="#How-do-I-test-whether-two-arrays-or-hashes-are-equal%3f">How do I test whether two arrays or hashes are equal?</a></li><li><a href="#How-do-I-find-the-first-array-element-for-which-a-condition-is-true%3f">How do I find the first array element for which a condition is true?</a></li><li><a href="#How-do-I-handle-linked-lists%3f">How do I handle linked lists?</a></li><li><a href="#How-do-I-handle-circular-lists%3f">How do I handle circular lists?</a></li><li><a href="#How-do-I-shuffle-an-array-randomly%3f">How do I shuffle an array randomly?</a></li><li><a href="#How-do-I-process%2fmodify-each-element-of-an-array%3f">How do I process/modify each element of an array?</a></li><li><a href="#How-do-I-select-a-random-element-from-an-array%3f">How do I select a random element from an array?</a></li><li><a href="#How-do-I-permute-N-elements-of-a-list%3f">How do I permute N elements of a list?</a></li><li><a href="#How-do-I-sort-an-array-by-(anything)%3f">How do I sort an array by (anything)?</a></li><li><a href="#How-do-I-manipulate-arrays-of-bits%3f">How do I manipulate arrays of bits?</a></li><li><a href="#Why-does-defined()-return-true-on-empty-arrays-and-hashes%3f">Why does defined() return true on empty arrays and hashes?</a></li></ul><li><a href="#Data%3a-Hashes-(Associative-Arrays)">Data: Hashes (Associative Arrays)</a></li><ul><li><a href="#How-do-I-process-an-entire-hash%3f">How do I process an entire hash?</a></li><li><a href="#What-happens-if-I-add-or-remove-keys-from-a-hash-while-iterating-over-it%3f">What happens if I add or remove keys from a hash while iterating over it?</a></li><li><a href="#How-do-I-look-up-a-hash-element-by-value%3f">How do I look up a hash element by value?</a></li><li><a href="#How-can-I-know-how-many-entries-are-in-a-hash%3f">How can I know how many entries are in a hash?</a></li><li><a href="#How-do-I-sort-a-hash-(optionally-by-value-instead-of-key)%3f">How do I sort a hash (optionally by value instead of key)?</a></li><li><a href="#How-can-I-always-keep-my-hash-sorted%3f">How can I always keep my hash sorted?</a></li><li><a href="#What's-the-difference-between-%22delete%22-and-%22undef%22-with-hashes%3f">What's the difference between "delete" and "undef" with hashes?</a></li><li><a href="#Why-don't-my-tied-hashes-make-the-defined%2fexists-distinction%3f">Why don't my tied hashes make the defined/exists distinction?</a></li><li><a href="#How-do-I-reset-an-each()-operation-part-way-through%3f">How do I reset an each() operation part-way through?</a></li><li><a href="#How-can-I-get-the-unique-keys-from-two-hashes%3f">How can I get the unique keys from two hashes?</a></li><li><a href="#How-can-I-store-a-multidimensional-array-in-a-DBM-file%3f">How can I store a multidimensional array in a DBM file?</a></li><li><a href="#How-can-I-make-my-hash-remember-the-order-I-put-elements-into-it%3f">How can I make my hash remember the order I put elements into it?</a></li><li><a href="#Why-does-passing-a-subroutine-an-undefined-element-in-a-hash-create-it%3f">Why does passing a subroutine an undefined element in a hash create it?</a></li><li><a href="#How-can-I-make-the-Perl-equivalent-of-a-C-structure%2fC%2b%2b-class%2fhash-or-array-of-hashes-or-arrays%3f">How can I make the Perl equivalent of a C structure/C++ class/hash or array of hashes or arrays?</a></li><li><a href="#How-can-I-use-a-reference-as-a-hash-key%3f">How can I use a reference as a hash key?</a></li></ul><li><a href="#Data%3a-Misc">Data: Misc</a></li><ul><li><a href="#How-do-I-handle-binary-data-correctly%3f">How do I handle binary data correctly?</a></li><li><a href="#How-do-I-determine-whether-a-scalar-is-a-number%2fwhole%2finteger%2ffloat%3f">How do I determine whether a scalar is a number/whole/integer/float?</a></li><li><a href="#How-do-I-keep-persistent-data-across-program-calls%3f">How do I keep persistent data across program calls?</a></li><li><a href="#How-do-I-print-out-or-copy-a-recursive-data-structure%3f">How do I print out or copy a recursive data structure?</a></li><li><a href="#How-do-I-define-methods-for-every-class%2fobject%3f">How do I define methods for every class/object?</a></li><li><a href="#How-do-I-verify-a-credit-card-checksum%3f">How do I verify a credit card checksum?</a></li><li><a href="#How-do-I-pack-arrays-of-doubles-or-floats-for-XS-code%3f">How do I pack arrays of doubles or floats for XS code?</a></li></ul><li><a href="#AUTHOR-AND-COPYRIGHT">AUTHOR AND COPYRIGHT</a></li></ul>


                  </div>
                </article>
              </div>
            </div>
          </main>
        </div>
           <footer class="footer row bg-light pt-5 pb-5">
       <div class="col-sm-10 offset-sm-1 col-xl-8 offset-xl-2">
           <div class="row">
               <div class="col-md-4">
                   <ul class="list-unstyled">
                       <li>
                           <h4>Site info</h4>
                       </li>
                       <li>Docs mantained by
                           <a href="//lists.perl.org/list/perl5-porters.html"
                               rel="noopener">Perl 5 Porters</a>
                       </li>
                       <li>Perldoc site development sponsored by
                           <a href="//opusvl.com" rel="noopener">
                           <img style="margin: 20px 20px 5px 10px" class="opus-logo" src="/public/img/opusvl_logo.svg" alt="OpusVL Logo">
                        </a>
                    <li><span class="about_perldoc"><a href="//about.html">About PerlDOC</a></span>
                    </li>
                       </li>
                   </ul>
               </div>
               <div class="col-md-8">
                   <div class="row">
                       <div class="col-md-6 col-lg-3">
                           <ul class=" list-unstyled">
                               <li>
                                   <h4>Manuals</h4>
                               </li>
                               <li>
                                   <a
                                       href="/5.8.8/index-overview.html">Overview</a>
                               </li>
                               <li>
                                   <a
                                       href="/5.8.8/index-tutorials.html">Tutorials</a>
                               </li>
                               <li>
                                   <a href="/5.8.8/index-faq.html">FAQs</a>
                               </li>
                               <li>
                                   <a
                                       href="/5.8.8/index-history.html">Changes</a>
                               </li>
                           </ul>
                       </div>
                       <div class="col-md-6 col-lg-3">
                           <ul class=" list-unstyled">
                               <li>
                                   <h4>Reference</h4>
                               </li>
                               <li>
                                   <a
                                       href="/5.8.8/index-language.html">Language</a>
                               </li>
                               <li>
                                   <a
                                       href="/5.8.8/index-functions.html">Functions</a>
                               </li>
                               <li>
                                   <a
                                       href="/5.8.8/perlop.html">Operators</a>
                               </li>
                               <li>
                                   <a
                                       href="/5.8.8/perlvar.html">Variables</a>
                               </li>
                           </ul>
                       </div>
                       <div class="col-md-6 col-lg-3">
                           <ul class=" list-unstyled">
                               <li>
                                   <h4>Modules</h4>
                               </li>
                               <li>
                                   <a
                                       href="/5.8.8/index-modules-A.html">Modules</a>
                               </li>
                               <li>
                                   <a
                                       href="/5.8.8/index-pragmas.html">Pragmas</a>
                               </li>
                               <li>
                                   <a
                                       href="/5.8.8/index-utilities.html">Utilities</a>
                               </li>
                           </ul>
                       </div>
                       <div class="col-md-6 col-lg-3">
                           <ul class=" list-unstyled">
                               <li>
                                   <h4>Misc</h4>
                               </li>
                               <li>
                                   <a
                                       href="/5.8.8/index-licence.html">License</a>
                               </li>
                               <li>
                                   <a
                                       href="/5.8.8/index-internals.html">Internals</a>
                               </li>
                               <li>
                                   <a
                                       href="/5.8.8/index-platforms.html">Platforms</a>
                               </li>
                            <li>
                                <a
                                    href="/5.8.8/index-about.html">About</a>
                            </li>
                           </ul>
                       </div>
                   </div>
               </div>
               <div class=" col-12 footer-inf text-center">
                   <small>perldoc.perl.org - Official documentation for the Perl
                       programming language</small>
               </div>
           </div>
       </div>
   </footer>

        	<div class="beta-wrapper beta-bottom-right ">
		<div class="beta beta-blue  ">
			<a class="beta-link "
				href="//github.com/OpusVL/perldoc.perl.org/issues/new" rel="noopener">
				<span class="beta-text">
					This website is a Beta release.
				</span>
				<span class="beta-text">
					For any issues please raise a ticket on GitHub
				</span>
			</a>
		</div>
	</div>

        <script src="/public/js/main.min.js"></script>
      </body>

      </html>
