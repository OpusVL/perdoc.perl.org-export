      
      
      
      

      <!DOCTYPE html>
      <html lang="en">

      <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="description" content="Test - perldoc.perl.org">
        <link rel="icon" href="/public/img/favicon.ico">
        <title>Test - perldoc.perl.org</title>
        <link href="/public/css/main.min.css" rel="stylesheet">
        <link rel="canonical" href="/Test.html">
        <link
          href='https://fonts.googleapis.com/css?family=Lato:400,100,300,700,900'
          rel='stylesheet' type='text/css'>
        <script>
          window.ga = window.ga || function () {
            (ga.q = ga.q || []).push(arguments)
          };
          ga.l = +new Date;
          ga('create', 'UA-1892152-2', 'auto'); // JJ's account
          ga('create', 'UA-50555-3', 'auto', 'perlOrg'); // perl.org account
          ga('require', 'outboundLinkTracker', {
            events: ['click', 'auxclick', 'contextmenu'],
          });
          ga('require', 'maxScrollTracker');
          ga('send', 'pageview');
          ga('perlOrg.send', 'pageview');
        </script>
        <script async src="https://www.google-analytics.com/analytics.js">
        </script>
        <script async src="/public/js/tracking.min.js"></script>
      </head>

      <body class="body container-fluid ">
        <div class="wrapper">

          <nav
    class="navbar navbar-dark bg-primary bg-perl fixed-top justify-content-between navbar-expand-lg">
    <a href="#content" class="skippy sr-only sr-only-focusable">
        <span class=' skippy-text'>Skip to main content</span>
    </a>
    <a class="navbar-brand" href="/">
        <img class="logo" src="/public/img/logo_perl_doc.svg"
            alt="Perl Documentation Logo" />
    </a>
    <button class="navbar-toggler" type="button" data-toggle="collapse"
        data-target="#navbar" aria-controls="navbar" aria-expanded="false"
        aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
    </button>
    <div id="navbar" class="collapse navbar-collapse ">
        <ul class="navbar-nav ml-auto navbar-right">
            <form class="nav-item dropdown search-wrapper">
                <input type="text" id='searchinput' aria-describedby='navbarDropdown5'
                    placeholder="Type query" class='search-input-field' value=''>

                <button href="#" data-toggle='dropdown' type="button"
                    aria-haspopup="true" aria-expanded='false' id="navbarDropdown5"
                    class="nav-link dropdown-toggle search-link">
                    <object tabindex='-1' focusable="false" class='search-icon'
                        data="/public/img/search.svg" type="image/svg+xml"
                        name='search icon'>search
                        icon</object>
                </button>
                <div class="dropdown-menu" aria-labelledby="navbarDropdown5"
                    id='search-results'>
                    <p class='dropdown-item major-version'>
                        No results
                    </p>
                </div>
            </form>
            <li class="nav-item dropdown">
                <a id="navbarDropdown" href="#" class="nav-link dropdown-toggle"
                    data-toggle="dropdown" role="button" aria-haspopup="true"
                    aria-expanded="false">Perl versions</a>
                <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                    
                        <p class='dropdown-item major-version'>
                            5.32
                        </p>
                        
                        <a class='dropdown-item minor-version' href="/5.32.0/">5.32.0</a>
                        
                        
                        <div class="dropdown-divider"></div>
                        
                    
                        <p class='dropdown-item major-version'>
                            5.30
                        </p>
                        
                        <a class='dropdown-item minor-version' href="/5.30.3/">5.30.3</a>
                        
                        <a class='dropdown-item minor-version' href="/5.30.2/">5.30.2</a>
                        
                        <a class='dropdown-item minor-version' href="/5.30.1/">5.30.1</a>
                        
                        <a class='dropdown-item minor-version' href="/5.30.0/">5.30.0</a>
                        
                        
                        <div class="dropdown-divider"></div>
                        
                    
                        <p class='dropdown-item major-version'>
                            5.28
                        </p>
                        
                        <a class='dropdown-item minor-version' href="/5.28.3/">5.28.3</a>
                        
                        <a class='dropdown-item minor-version' href="/5.28.2/">5.28.2</a>
                        
                        <a class='dropdown-item minor-version' href="/5.28.1/">5.28.1</a>
                        
                        <a class='dropdown-item minor-version' href="/5.28.0/">5.28.0</a>
                        
                        
                        <div class="dropdown-divider"></div>
                        
                    
                        <p class='dropdown-item major-version'>
                            5.26
                        </p>
                        
                        <a class='dropdown-item minor-version' href="/5.26.3/">5.26.3</a>
                        
                        <a class='dropdown-item minor-version' href="/5.26.2/">5.26.2</a>
                        
                        <a class='dropdown-item minor-version' href="/5.26.1/">5.26.1</a>
                        
                        <a class='dropdown-item minor-version' href="/5.26.0/">5.26.0</a>
                        
                        
                        <div class="dropdown-divider"></div>
                        
                    
                        <p class='dropdown-item major-version'>
                            5.24
                        </p>
                        
                        <a class='dropdown-item minor-version' href="/5.24.4/">5.24.4</a>
                        
                        <a class='dropdown-item minor-version' href="/5.24.3/">5.24.3</a>
                        
                        <a class='dropdown-item minor-version' href="/5.24.2/">5.24.2</a>
                        
                        <a class='dropdown-item minor-version' href="/5.24.1/">5.24.1</a>
                        
                        <a class='dropdown-item minor-version' href="/5.24.0/">5.24.0</a>
                        
                        
                        <div class="dropdown-divider"></div>
                        
                    
                        <p class='dropdown-item major-version'>
                            5.22
                        </p>
                        
                        <a class='dropdown-item minor-version' href="/5.22.4/">5.22.4</a>
                        
                        <a class='dropdown-item minor-version' href="/5.22.3/">5.22.3</a>
                        
                        <a class='dropdown-item minor-version' href="/5.22.2/">5.22.2</a>
                        
                        <a class='dropdown-item minor-version' href="/5.22.1/">5.22.1</a>
                        
                        <a class='dropdown-item minor-version' href="/5.22.0/">5.22.0</a>
                        
                        
                        <div class="dropdown-divider"></div>
                        
                    
                        <p class='dropdown-item major-version'>
                            5.20
                        </p>
                        
                        <a class='dropdown-item minor-version' href="/5.20.3/">5.20.3</a>
                        
                        <a class='dropdown-item minor-version' href="/5.20.2/">5.20.2</a>
                        
                        <a class='dropdown-item minor-version' href="/5.20.1/">5.20.1</a>
                        
                        <a class='dropdown-item minor-version' href="/5.20.0/">5.20.0</a>
                        
                        
                        <div class="dropdown-divider"></div>
                        
                    
                        <p class='dropdown-item major-version'>
                            5.18
                        </p>
                        
                        <a class='dropdown-item minor-version' href="/5.18.4/">5.18.4</a>
                        
                        <a class='dropdown-item minor-version' href="/5.18.3/">5.18.3</a>
                        
                        <a class='dropdown-item minor-version' href="/5.18.2/">5.18.2</a>
                        
                        <a class='dropdown-item minor-version' href="/5.18.1/">5.18.1</a>
                        
                        <a class='dropdown-item minor-version' href="/5.18.0/">5.18.0</a>
                        
                        
                        <div class="dropdown-divider"></div>
                        
                    
                        <p class='dropdown-item major-version'>
                            5.16
                        </p>
                        
                        <a class='dropdown-item minor-version' href="/5.16.3/">5.16.3</a>
                        
                        <a class='dropdown-item minor-version' href="/5.16.2/">5.16.2</a>
                        
                        <a class='dropdown-item minor-version' href="/5.16.1/">5.16.1</a>
                        
                        <a class='dropdown-item minor-version' href="/5.16.0/">5.16.0</a>
                        
                        
                        <div class="dropdown-divider"></div>
                        
                    
                        <p class='dropdown-item major-version'>
                            5.14
                        </p>
                        
                        <a class='dropdown-item minor-version' href="/5.14.4/">5.14.4</a>
                        
                        <a class='dropdown-item minor-version' href="/5.14.3/">5.14.3</a>
                        
                        <a class='dropdown-item minor-version' href="/5.14.2/">5.14.2</a>
                        
                        <a class='dropdown-item minor-version' href="/5.14.1/">5.14.1</a>
                        
                        <a class='dropdown-item minor-version' href="/5.14.0/">5.14.0</a>
                        
                        
                        <div class="dropdown-divider"></div>
                        
                    
                        <p class='dropdown-item major-version'>
                            5.12
                        </p>
                        
                        <a class='dropdown-item minor-version' href="/5.12.5/">5.12.5</a>
                        
                        <a class='dropdown-item minor-version' href="/5.12.4/">5.12.4</a>
                        
                        <a class='dropdown-item minor-version' href="/5.12.3/">5.12.3</a>
                        
                        <a class='dropdown-item minor-version' href="/5.12.2/">5.12.2</a>
                        
                        <a class='dropdown-item minor-version' href="/5.12.1/">5.12.1</a>
                        
                        <a class='dropdown-item minor-version' href="/5.12.0/">5.12.0</a>
                        
                        
                        <div class="dropdown-divider"></div>
                        
                    
                        <p class='dropdown-item major-version'>
                            5.10
                        </p>
                        
                        <a class='dropdown-item minor-version' href="/5.10.1/">5.10.1</a>
                        
                        <a class='dropdown-item minor-version' href="/5.10.0/">5.10.0</a>
                        
                        
                        <div class="dropdown-divider"></div>
                        
                    
                        <p class='dropdown-item major-version'>
                            5.8
                        </p>
                        
                        <a class='dropdown-item minor-version' href="/5.8.9/">5.8.9</a>
                        
                        <a class='dropdown-item minor-version' href="/5.8.8/">5.8.8</a>
                        
                        <a class='dropdown-item minor-version' href="/5.8.7/">5.8.7</a>
                        
                        <a class='dropdown-item minor-version' href="/5.8.6/">5.8.6</a>
                        
                        <a class='dropdown-item minor-version' href="/5.8.5/">5.8.5</a>
                        
                        <a class='dropdown-item minor-version' href="/5.8.4/">5.8.4</a>
                        
                        <a class='dropdown-item minor-version' href="/5.8.3/">5.8.3</a>
                        
                        <a class='dropdown-item minor-version' href="/5.8.2/">5.8.2</a>
                        
                        <a class='dropdown-item minor-version' href="/5.8.1/">5.8.1</a>
                        
                        <a class='dropdown-item minor-version' href="/5.8.0/">5.8.0</a>
                        
                        
                        <div class="dropdown-divider"></div>
                        
                    
                        <p class='dropdown-item major-version'>
                            5.6
                        </p>
                        
                        <a class='dropdown-item minor-version' href="/5.6.2/">5.6.2</a>
                        
                        <a class='dropdown-item minor-version' href="/5.6.1/">5.6.1</a>
                        
                        <a class='dropdown-item minor-version' href="/5.6.0/">5.6.0</a>
                        
                        
                    
                </div>
            </li>
            <li class="nav-item dropdown">
                <a id="navbarDropdown1" href="#" class="dropdown-toggle nav-link"
                    data-toggle="dropdown" role="button" aria-haspopup="true"
                    aria-expanded="false">Manuals</a>
                <div class="dropdown-menu" aria-labelledby="navbarDropdown1">
                    <a class="dropdown-item"
                        href="/5.20.1/index-overview.html">Overview</a>
                    <a class="dropdown-item"
                        href="/5.20.1/index-tutorials.html">Tutorials</a>
                    <a class="dropdown-item"
                        href="/5.20.1/index-faq.html">FAQs</a>
                    <a class="dropdown-item"
                        href="/5.20.1/index-history.html">Changes</a>
                    <a class="dropdown-item"
                        href="/5.20.1/index-licence.html">License</a>
                    <a class="dropdown-item"
                        href="/5.20.1/index-language.html">Language</a>
                    <a class="dropdown-item"
                        href="/5.20.1/index-functions.html">Functions</a>
                    <a class="dropdown-item"
                        href="/5.20.1/perlop.html">Operators</a>
                    <a class="dropdown-item"
                        href="/5.20.1/perlvar.html">Variables</a>
                    <a class="dropdown-item"
                        href="/5.20.1/index-pragmas.html">Pragmas</a>
                    <a class="dropdown-item"
                        href="/5.20.1/index-utilities.html">Utilities</a>
                    <a class="dropdown-item"
                        href="/5.20.1/index-internals.html">Internals</a>
                    <a class="dropdown-item"
                        href="/5.20.1/index-platforms.html">Platforms</a>
                </div>
            </li>
            <li class="nav-item dropdown">
                <a id="navbarDropdown3" href="#" class="nav-link dropdown-toggle "
                    data-toggle="dropdown" role="button" aria-haspopup="true"
                    aria-expanded="false">Modules</a>
                <div aria-labelledby="navbarDropdown3"
                    class="dropdown-menu letters-wrap">
                    <!--<a class="dropdown-item"
                        href="/5.20.1/index-modules.html">A-Z</a>
                    <a class="dropdown-item"
                        href="/5.20.1/index-modules-by-cat.html">By
                        Category</a>-->
                    <div class="dropdown-divider"></div>
                    <div class="letter-container">
                        <a class="dropdown-item letters"
                            href="/5.20.1/index-modules-A.html">A</a>
                        <a class="dropdown-item letters"
                            href="/5.20.1/index-modules-B.html">B</a>
                        <a class="dropdown-item letters"
                            href="/5.20.1/index-modules-C.html">C</a>
                        <a class="dropdown-item letters"
                            href="/5.20.1/index-modules-D.html">D</a>
                        <a class="dropdown-item letters"
                            href="/5.20.1/index-modules-E.html">E</a>
                        <a class="dropdown-item letters"
                            href="/5.20.1/index-modules-F.html">F</a>
                        <a class="dropdown-item letters"
                            href="/5.20.1/index-modules-G.html">G</a>
                        <a class="dropdown-item letters"
                            href="/5.20.1/index-modules-H.html">H</a>
                        <a class="dropdown-item letters"
                            href="/5.20.1/index-modules-I.html">I</a>
                        <a class="dropdown-item letters"
                            href="/5.20.1/index-modules-J.html">J</a>
                        <a class="dropdown-item letters"
                            href="/5.20.1/index-modules-K.html">K</a>
                        <a class="dropdown-item letters"
                            href="/5.20.1/index-modules-L.html">L</a>
                        <a class="dropdown-item letters"
                            href="/5.20.1/index-modules-M.html">M</a>
                        <a class="dropdown-item letters"
                            href="/5.20.1/index-modules-N.html">N</a>
                        <a class="dropdown-item letters"
                            href="/5.20.1/index-modules-O.html">O</a>
                        <a class="dropdown-item letters"
                            href="/5.20.1/index-modules-P.html">P</a>
                        <a class="dropdown-item letters"
                            href="/5.20.1/index-modules-Q.html">Q</a>
                        <a class="dropdown-item letters"
                            href="/5.20.1/index-modules-R.html">R</a>
                        <a class="dropdown-item letters"
                            href="/5.20.1/index-modules-S.html">S</a>
                        <a class="dropdown-item letters"
                            href="/5.20.1/index-modules-T.html">T</a>
                        <a class="dropdown-item letters"
                            href="/5.20.1/index-modules-U.html">U</a>
                        <a class="dropdown-item letters"
                            href="/5.20.1/index-modules-V.html">V</a>
                        <a class="dropdown-item letters"
                            href="/5.20.1/index-modules-W.html">W</a>
                        <a class="dropdown-item letters"
                            href="/5.20.1/index-modules-X.html">X</a>
                        <a class="dropdown-item letters"
                            href="/5.20.1/index-modules-Y.html">Y</a>
                        <a class="dropdown-item letters"
                            href="/5.20.1/index-modules-Z.html">Z</a>
                    </div>
                </div>
            </li>
            <li class="nav-item dropdown">
                <a id="navbarDropdown4" href="#" class="nav-link dropdown-toggle "
                    data-toggle="dropdown" role="button" aria-haspopup="true"
                    aria-expanded="false">Functions</a>
                <div aria-labelledby="navbarDropdown4"
                    class="dropdown-menu letters-wrap">
                    <a class="dropdown-item"
                        href="/5.20.1/index-functions.html">A-Z</a>
                    <a class="dropdown-item"
                        href="/5.20.1/index-functions-by-cat.html">By
                        Category</a>
                    <div class="dropdown-divider"></div>
                    <div class="letter-container">
                        <a class="dropdown-item letters"
                            href="/5.20.1/index-functions.html#A">A</a>
                        <a class="dropdown-item letters"
                            href="/5.20.1/index-functions.html#B">B</a>
                        <a class="dropdown-item letters"
                            href="/5.20.1/index-functions.html#C">C</a>
                        <a class="dropdown-item letters"
                            href="/5.20.1/index-functions.html#D">D</a>
                        <a class="dropdown-item letters"
                            href="/5.20.1/index-functions.html#E">E</a>
                        <a class="dropdown-item letters"
                            href="/5.20.1/index-functions.html#F">F</a>
                        <a class="dropdown-item letters"
                            href="/5.20.1/index-functions.html#G">G</a>
                        <a class="dropdown-item letters"
                            href="/5.20.1/index-functions.html#H">H</a>
                        <a class="dropdown-item letters"
                            href="/5.20.1/index-functions.html#I">I</a>
                        <a class="dropdown-item letters"
                            href="/5.20.1/index-functions.html#J">J</a>
                        <a class="dropdown-item letters"
                            href="/5.20.1/index-functions.html#K">K</a>
                        <a class="dropdown-item letters"
                            href="/5.20.1/index-functions.html#L">L</a>
                        <a class="dropdown-item letters"
                            href="/5.20.1/index-functions.html#M">M</a>
                        <a class="dropdown-item letters"
                            href="/5.20.1/index-functions.html#N">N</a>
                        <a class="dropdown-item letters"
                            href="/5.20.1/index-functions.html#O">O</a>
                        <a class="dropdown-item letters"
                            href="/5.20.1/index-functions.html#P">P</a>
                        <a class="dropdown-item letters"
                            href="/5.20.1/index-functions.html#Q">Q</a>
                        <a class="dropdown-item letters"
                            href="/5.20.1/index-functions.html#R">R</a>
                        <a class="dropdown-item letters"
                            href="/5.20.1/index-functions.html#S">S</a>
                        <a class="dropdown-item letters"
                            href="/5.20.1/index-functions.html#T">T</a>
                        <a class="dropdown-item letters"
                            href="/5.20.1/index-functions.html#U">U</a>
                        <a class="dropdown-item letters"
                            href="/5.20.1/index-functions.html#V">V</a>
                        <a class="dropdown-item letters"
                            href="/5.20.1/index-functions.html#W">W</a>
                        <a class="dropdown-item letters"
                            href="/5.20.1/index-functions.html#X">X</a>
                        <a class="dropdown-item letters"
                            href="/5.20.1/index-functions.html#Y">Y</a>
                        <a class="dropdown-item letters"
                            href="/5.20.1/index-functions.html#Z">Z</a>
                    </div>
                </div>
            </li>
        </ul>
    </div>
    <!--/.nav-collapse -->
</nav>


          <main class="row main-content pb-5 pt-5" id='content'>
            <div class="col-sm-10 offset-sm-1 col-xl-8 offset-xl-2">
              <div class="row">
                <div class="col-sm-12">
                  <div id="breadcrumbs">
                      
    <a href="index.html">Home</a>&nbsp; &gt;
    
      
        <a href="index-modules-T.html">Core modules (T)</a> &gt;
      
    
    Test
  

                  </div>
                </div>
              </div>
              <div class="row">
                <article class="col-sm-12 content">
                  <div class="documentation-wrapper">
                    <div id="perl_version">
                      <h7 class='page-title'> Perl 5 version 20.1
                        documentation</h7>
                    </div>
                    <h1>Test</h1>


  <!--    -->
<ul><li><a href="#NAME">NAME</a></li><li><a href="#SYNOPSIS">SYNOPSIS</a></li><li><a href="#DESCRIPTION">DESCRIPTION</a></li><li><a href="#QUICK-START-GUIDE">QUICK START GUIDE</a></li><ul><li><a href="#Functions">Functions</a></li></ul><li><a href="#TEST-TYPES">TEST TYPES</a></li><li><a href="#ONFAIL">ONFAIL</a></li><li><a href="#BUGS-and-CAVEATS">BUGS and CAVEATS</a></li><li><a href="#ENVIRONMENT">ENVIRONMENT</a></li><li><a href="#NOTE">NOTE</a></li><li><a href="#SEE-ALSO">SEE ALSO</a></li><li><a href="#AUTHOR">AUTHOR</a></li></ul><a class='view-head1' id="NAME"></a><h2 class='h2' >NAME</h2>
<p>Test - provides a simple framework for writing test scripts</p>
<a class='view-head1' id="SYNOPSIS"></a><h2 class='h2' >SYNOPSIS</h2>
<pre class="verbatim"><ol><li>  <a class="l_k" href="functions/use.html">use</a> <span class="w">strict</span><span class="sc">;</span></li><li>  <a class="l_k" href="functions/use.html">use</a> <span class="w">Test</span><span class="sc">;</span></li><li></li><li>  <span class="c"># use a BEGIN block so we print our plan before MyModule is loaded</span></li><li>  <a class="l_k" href="functions/BEGIN.html">BEGIN</a> <span class="s">{</span> <span class="w">plan</span> <span class="w">tests</span> <span class="cm">=&gt;</span> <span class="n">14</span><span class="cm">,</span> <span class="w">todo</span> <span class="cm">=&gt;</span> <span class="s">[</span><span class="n">3</span><span class="cm">,</span><span class="n">4</span><span class="s">]</span> <span class="s">}</span></li><li></li><li>  <span class="c"># load your module...</span></li><li>  <a class="l_k" href="functions/use.html">use</a> <span class="w">MyModule</span><span class="sc">;</span></li><li></li><li>  <span class="c"># Helpful notes.  All note-lines must start with a &quot;#&quot;.</span></li><li>  <a class="l_k" href="functions/print.html">print</a> <span class="q">&quot;# I&#39;m testing MyModule version $MyModule::VERSION\n&quot;</span><span class="sc">;</span></li><li></li><li>  <span class="i">ok</span><span class="s">(</span><span class="n">0</span><span class="s">)</span><span class="sc">;</span> <span class="c"># failure</span></li><li>  <span class="i">ok</span><span class="s">(</span><span class="n">1</span><span class="s">)</span><span class="sc">;</span> <span class="c"># success</span></li><li></li><li>  <span class="i">ok</span><span class="s">(</span><span class="n">0</span><span class="s">)</span><span class="sc">;</span> <span class="c"># ok, expected failure (see todo list, above)</span></li><li>  <span class="i">ok</span><span class="s">(</span><span class="n">1</span><span class="s">)</span><span class="sc">;</span> <span class="c"># surprise success!</span></li><li></li><li>  <span class="i">ok</span><span class="s">(</span><span class="n">0</span><span class="cm">,</span><span class="n">1</span><span class="s">)</span><span class="sc">;</span>             <span class="c"># failure: &#39;0&#39; ne &#39;1&#39;</span></li><li>  <span class="i">ok</span><span class="s">(</span><span class="q">&#39;broke&#39;</span><span class="cm">,</span><span class="q">&#39;fixed&#39;</span><span class="s">)</span><span class="sc">;</span> <span class="c"># failure: &#39;broke&#39; ne &#39;fixed&#39;</span></li><li>  <span class="i">ok</span><span class="s">(</span><span class="q">&#39;fixed&#39;</span><span class="cm">,</span><span class="q">&#39;fixed&#39;</span><span class="s">)</span><span class="sc">;</span> <span class="c"># success: &#39;fixed&#39; eq &#39;fixed&#39;</span></li><li>  <span class="i">ok</span><span class="s">(</span><span class="q">&#39;fixed&#39;</span><span class="cm">,</span><span class="q">qr/x/</span><span class="s">)</span><span class="sc">;</span>   <span class="c"># success: &#39;fixed&#39; =~ qr/x/</span></li><li></li><li>  <span class="i">ok</span><span class="s">(</span><a class="l_k" href="functions/sub.html">sub</a> <span class="s">{</span> <span class="n">1</span>+<span class="n">1</span> <span class="s">}</span><span class="cm">,</span> <span class="n">2</span><span class="s">)</span><span class="sc">;</span>  <span class="c"># success: &#39;2&#39; eq &#39;2&#39;</span></li><li>  <span class="i">ok</span><span class="s">(</span><a class="l_k" href="functions/sub.html">sub</a> <span class="s">{</span> <span class="n">1</span>+<span class="n">1</span> <span class="s">}</span><span class="cm">,</span> <span class="n">3</span><span class="s">)</span><span class="sc">;</span>  <span class="c"># failure: &#39;2&#39; ne &#39;3&#39;</span></li><li></li><li>  <a class="l_k" href="functions/my.html">my</a> <span class="i">@list</span> = <span class="s">(</span><span class="n">0</span><span class="cm">,</span><span class="n">0</span><span class="s">)</span><span class="sc">;</span></li><li>  <span class="w">ok</span> <span class="i">@list</span><span class="cm">,</span> <span class="n">3</span><span class="cm">,</span> <span class="q">&quot;\@list=&quot;</span>.<a class="l_k" href="functions/join.html">join</a><span class="s">(</span><span class="q">&#39;,&#39;</span><span class="cm">,</span><span class="i">@list</span><span class="s">)</span><span class="sc">;</span>      <span class="c">#extra notes</span></li><li>  <span class="w">ok</span> <span class="q">&#39;segmentation fault&#39;</span><span class="cm">,</span> <span class="q">&#39;/(?i)success/&#39;</span><span class="sc">;</span>    <span class="c">#regex match</span></li><li></li><li>  <span class="i">skip</span><span class="s">(</span></li><li>    <span class="i">$^O</span> =~ <span class="q">m/MSWin/</span> ? <span class="q">&quot;Skip if MSWin&quot;</span> <span class="co">:</span> <span class="n">0</span><span class="cm">,</span>  <span class="c"># whether to skip</span></li><li>    <span class="i">$foo</span><span class="cm">,</span> <span class="i">$bar</span>  <span class="c"># arguments just like for ok(...)</span></li><li>  <span class="s">)</span><span class="sc">;</span></li><li>  <span class="i">skip</span><span class="s">(</span></li><li>    <span class="i">$^O</span> =~ <span class="q">m/MSWin/</span> ? <span class="n">0</span> <span class="co">:</span> <span class="q">&quot;Skip unless MSWin&quot;</span><span class="cm">,</span>  <span class="c"># whether to skip</span></li><li>    <span class="i">$foo</span><span class="cm">,</span> <span class="i">$bar</span>  <span class="c"># arguments just like for ok(...)</span></li><li>  <span class="s">)</span><span class="sc">;</span></li></ol></pre><a class='view-head1' id="DESCRIPTION"></a><h2 class='h2' >DESCRIPTION</h2>
<p>This module simplifies the task of writing test files for Perl modules,
such that their output is in the format that
<a href="Test/Harness.html">Test::Harness</a> expects to see.</p>
<a class='view-head1' id="QUICK-START-GUIDE"></a><h2 class='h2' >QUICK START GUIDE</h2>
<p>To write a test for your new (and probably not even done) module, create
a new file called <i>t/test.t</i> (in a new <i>t</i> directory). If you have
multiple test files, to test the "foo", "bar", and "baz" feature sets,
then feel free to call your files <i>t/foo.t</i>, <i>t/bar.t</i>, and
<i>t/baz.t</i></p>
<a class='view-head2' id="Functions"></a><h3 class='h3' >Functions</h3>
<p>This module defines three public functions, <code class="inline"><span class="i">plan</span><span class="s">(</span>...<span class="s">)</span></code>
, <code class="inline"><span class="i">ok</span><span class="s">(</span>...<span class="s">)</span></code>
,
and <code class="inline"><span class="i">skip</span><span class="s">(</span>...<span class="s">)</span></code>
.  By default, all three are exported by
the <code class="inline"><a class="l_k" href="functions/use.html">use</a> <span class="w">Test</span><span class="sc">;</span></code>
 statement.</p>
<ul>
<li><a class='view-title' id="plan(...)"></a><strong><code class="inline"><span class="i">plan</span><span class="s">(</span>...<span class="s">)</span></code>
</strong>
<pre class="verbatim"><ol><li>     <a class="l_k" href="functions/BEGIN.html">BEGIN</a> <span class="s">{</span> <span class="w">plan</span> <span class="i">%theplan</span><span class="sc">;</span> <span class="s">}</span></li></ol></pre><p>This should be the first thing you call in your test script.  It
declares your testing plan, how many there will be, if any of them
should be allowed to fail, and so on.</p>
<p>Typical usage is just:</p>
<pre class="verbatim"><ol><li>     <a class="l_k" href="functions/use.html">use</a> <span class="w">Test</span><span class="sc">;</span></li><li>     <a class="l_k" href="functions/BEGIN.html">BEGIN</a> <span class="s">{</span> <span class="w">plan</span> <span class="w">tests</span> <span class="cm">=&gt;</span> <span class="n">23</span> <span class="s">}</span></li></ol></pre><p>These are the things that you can put in the parameters to plan:</p>
<ul>
<li><a class='view-title' id="tests-%3d%3e-_number_"></a><strong><code class="inline">tests =&gt; <i>number</i></code></strong>
<p>The number of tests in your script.
This means all ok() and skip() calls.</p>
</li>
<li><a class='view-title' id="todo-%3d%3e-%5b_1%2c5%2c14_%5d"></a><strong><code class="inline">todo =&gt; [<i>1,5,14</i>]</code></strong>
<p>A reference to a list of tests which are allowed to fail.
See <a href="#TODO-TESTS">TODO TESTS</a>.</p>
</li>
<li><a class='view-title' id="onfail-%3d%3e-sub-%7b-...-%7d"></a><strong><code class="inline"><span class="w">onfail</span> <span class="cm">=&gt;</span> <a class="l_k" href="functions/sub.html">sub</a> <span class="s">{</span> ... <span class="s">}</span></code>
</strong>
</li>
<li><a class='view-title' id="onfail-%3d%3e-%5c%26some_sub"></a><strong><code class="inline"><span class="w">onfail</span> <span class="cm">=&gt;</span> \<span class="i">&amp;some_sub</span></code>
</strong>
<p>A subroutine reference to be run at the end of the test script, if
any of the tests fail.  See <a href="#ONFAIL">ONFAIL</a>.</p>
</li>
</ul>
<p>You must call <code class="inline"><span class="i">plan</span><span class="s">(</span>...<span class="s">)</span></code>
 once and only once.  You should call it
in a <code class="inline"><a class="l_k" href="functions/BEGIN.html">BEGIN</a> <span class="s">{</span>...<span class="s">}</span></code>
 block, like so:</p>
<pre class="verbatim"><ol><li>     <a class="l_k" href="functions/BEGIN.html">BEGIN</a> <span class="s">{</span> <span class="w">plan</span> <span class="w">tests</span> <span class="cm">=&gt;</span> <span class="n">23</span> <span class="s">}</span></li></ol></pre></li>
<li><a class='view-title' id="ok(...)"></a><strong><code class="inline"><span class="i">ok</span><span class="s">(</span>...<span class="s">)</span></code>
</strong>
<pre class="verbatim"><ol><li>  <span class="i">ok</span><span class="s">(</span><span class="n">1</span> + <span class="n">1</span> == <span class="n">2</span><span class="s">)</span><span class="sc">;</span></li><li>  <span class="i">ok</span><span class="s">(</span><span class="i">$have</span><span class="cm">,</span> <span class="i">$expect</span><span class="s">)</span><span class="sc">;</span></li><li>  <span class="i">ok</span><span class="s">(</span><span class="i">$have</span><span class="cm">,</span> <span class="i">$expect</span><span class="cm">,</span> <span class="i">$diagnostics</span><span class="s">)</span><span class="sc">;</span></li></ol></pre><p>This function is the reason for <code class="inline"><span class="w">Test</span></code>
's existence.  It's
the basic function that
handles printing "<code class="inline"><span class="w">ok</span></code>
" or "<code class="inline"><a class="l_k" href="functions/not.html">not</a> <span class="w">ok</span></code>
", along with the
current test number.  (That's what <code class="inline"><span class="w">Test::Harness</span></code>
 wants to see.)</p>
<p>In its most basic usage, <code class="inline"><span class="i">ok</span><span class="s">(</span>...<span class="s">)</span></code>
 simply takes a single scalar
expression.  If its value is true, the test passes; if false,
the test fails.  Examples:</p>
<pre class="verbatim"><ol><li>    <span class="c"># Examples of ok(scalar)</span></li><li></li><li>    <span class="i">ok</span><span class="s">(</span> <span class="n">1</span> + <span class="n">1</span> == <span class="n">2</span> <span class="s">)</span><span class="sc">;</span>           <span class="c"># ok if 1 + 1 == 2</span></li><li>    <span class="i">ok</span><span class="s">(</span> <span class="i">$foo</span> =~ <span class="q">/bar/</span> <span class="s">)</span><span class="sc">;</span>        <span class="c"># ok if $foo contains &#39;bar&#39;</span></li><li>    <span class="i">ok</span><span class="s">(</span> <span class="i">baz</span><span class="s">(</span><span class="i">$x</span> + <span class="i">$y</span><span class="s">)</span> <a class="l_k" href="functions/eq.html">eq</a> <span class="q">&#39;Armondo&#39;</span> <span class="s">)</span><span class="sc">;</span>    <span class="c"># ok if baz($x + $y) returns</span></li><li>                                        <span class="c"># &#39;Armondo&#39;</span></li><li>    <span class="i">ok</span><span class="s">(</span> <span class="i">@a</span> == <span class="i">@b</span> <span class="s">)</span><span class="sc">;</span>             <span class="c"># ok if @a and @b are the same length</span></li></ol></pre><p>The expression is evaluated in scalar context.  So the following will
work:</p>
<pre class="verbatim"><ol><li>    <span class="i">ok</span><span class="s">(</span> <span class="i">@stuff</span> <span class="s">)</span><span class="sc">;</span>                       <span class="c"># ok if @stuff has any elements</span></li><li>    <span class="i">ok</span><span class="s">(</span> !<a class="l_k" href="functions/grep.html">grep</a> !<a class="l_k" href="functions/defined.html">defined</a> <span class="i">$_</span><span class="cm">,</span> <span class="i">@stuff</span> <span class="s">)</span><span class="sc">;</span>    <span class="c"># ok if everything in @stuff is</span></li><li>                                        <span class="c"># defined.</span></li></ol></pre><p>A special case is if the expression is a subroutine reference (in either
<code class="inline"><a class="l_k" href="functions/sub.html">sub</a> <span class="s">{</span>...<span class="s">}</span></code>
 syntax or <code class="inline">\<span class="i">&amp;foo</span></code>
 syntax).  In
that case, it is executed and its value (true or false) determines if
the test passes or fails.  For example,</p>
<pre class="verbatim"><ol><li>    <span class="i">ok</span><span class="s">(</span> <a class="l_k" href="functions/sub.html">sub</a> <span class="s">{</span>   <span class="c"># See whether sleep works at least passably</span></li><li>      <a class="l_k" href="functions/my.html">my</a> <span class="i">$start_time</span> = <a class="l_k" href="functions/time.html">time</a><span class="sc">;</span></li><li>      <a class="l_k" href="functions/sleep.html">sleep</a> <span class="n">5</span><span class="sc">;</span></li><li>      <a class="l_k" href="functions/time.html">time</a><span class="s">(</span><span class="s">)</span> - <span class="i">$start_time</span>  &gt;= <span class="n">4</span></li><li>    <span class="s">}</span><span class="s">)</span><span class="sc">;</span></li></ol></pre><p>In its two-argument form, <code class="inline">ok(<i>arg1</i>, <i>arg2</i>)</code> compares the two
scalar values to see if they match.  They match if both are undefined,
or if <i>arg2</i> is a regex that matches <i>arg1</i>, or if they compare equal
with <code class="inline"><a class="l_k" href="functions/eq.html">eq</a></code>.</p>
<pre class="verbatim"><ol><li>    <span class="c"># Example of ok(scalar, scalar)</span></li><li></li><li>    <span class="i">ok</span><span class="s">(</span> <span class="q">&quot;this&quot;</span><span class="cm">,</span> <span class="q">&quot;that&quot;</span> <span class="s">)</span><span class="sc">;</span>               <span class="c"># not ok, &#39;this&#39; ne &#39;that&#39;</span></li><li>    <span class="i">ok</span><span class="s">(</span> <span class="q">&quot;&quot;</span><span class="cm">,</span> <a class="l_k" href="functions/undef.html">undef</a> <span class="s">)</span><span class="sc">;</span>                    <span class="c"># not ok, &quot;&quot; is defined</span></li></ol></pre><p>The second argument is considered a regex if it is either a regex
object or a string that looks like a regex.  Regex objects are
constructed with the qr// operator in recent versions of perl.  A
string is considered to look like a regex if its first and last
characters are "/", or if the first character is "m"
and its second and last characters are both the
same non-alphanumeric non-whitespace character.  These regexp</p>
<p>Regex examples:</p>
<pre class="verbatim"><ol><li>    <span class="i">ok</span><span class="s">(</span> <span class="q">&#39;JaffO&#39;</span><span class="cm">,</span> <span class="q">&#39;/Jaff/&#39;</span> <span class="s">)</span><span class="sc">;</span>    <span class="c"># ok, &#39;JaffO&#39; =~ /Jaff/</span></li><li>    <span class="i">ok</span><span class="s">(</span> <span class="q">&#39;JaffO&#39;</span><span class="cm">,</span> <span class="q">&#39;m|Jaff|&#39;</span> <span class="s">)</span><span class="sc">;</span>   <span class="c"># ok, &#39;JaffO&#39; =~ m|Jaff|</span></li><li>    <span class="i">ok</span><span class="s">(</span> <span class="q">&#39;JaffO&#39;</span><span class="cm">,</span> <span class="q">qr/Jaff/</span> <span class="s">)</span><span class="sc">;</span>    <span class="c"># ok, &#39;JaffO&#39; =~ qr/Jaff/;</span></li><li>    <span class="i">ok</span><span class="s">(</span> <span class="q">&#39;JaffO&#39;</span><span class="cm">,</span> <span class="q">&#39;/(?i)jaff/ ); # ok, &#39;</span><span class="w">JaffO</span><span class="q">&#39; =~ /jaff/i;</span></li></ol></pre><p>If either (or both!) is a subroutine reference, it is run and used
as the value for comparing.  For example:</p>
<pre class="verbatim"><ol><li>    <span class="w">ok</span> <a class="l_k" href="functions/sub.html">sub</a> <span class="s">{</span></li><li>        <a class="l_k" href="functions/open.html">open</a><span class="s">(</span><span class="w">OUT</span><span class="cm">,</span> <span class="q">&quot;&gt;x.dat&quot;</span><span class="s">)</span> || <a class="l_k" href="functions/die.html">die</a> <span class="i">$!</span><span class="sc">;</span></li><li>        <a class="l_k" href="functions/print.html">print</a> <span class="i">OUT</span> <span class="q">&quot;\x{e000}&quot;</span><span class="sc">;</span></li><li>        <a class="l_k" href="functions/close.html">close</a> <span class="w">OUT</span><span class="sc">;</span></li><li>        <a class="l_k" href="functions/my.html">my</a> <span class="i">$bytecount</span> = -s <span class="q">&#39;x.dat&#39;</span><span class="sc">;</span></li><li>        <a class="l_k" href="functions/unlink.html">unlink</a> <span class="q">&#39;x.dat&#39;</span> <a class="l_k" href="functions/or.html">or</a> <a class="l_k" href="functions/warn.html">warn</a> <span class="q">&quot;Can&#39;t unlink : $!&quot;</span><span class="sc">;</span></li><li>        <a class="l_k" href="functions/return.html">return</a> <span class="i">$bytecount</span><span class="sc">;</span></li><li>      <span class="s">}</span><span class="cm">,</span></li><li>      <span class="n">4</span></li><li>    <span class="sc">;</span></li></ol></pre><p>The above test passes two values to <code class="inline"><span class="i">ok</span><span class="s">(</span><span class="w">arg1</span><span class="cm">,</span> <span class="w">arg2</span><span class="s">)</span></code>
 -- the first 
a coderef, and the second is the number 4.  Before <code class="inline"><span class="w">ok</span></code>
 compares them,
it calls the coderef, and uses its return value as the real value of
this parameter. Assuming that <code class="inline"><span class="i">$bytecount</span></code>
 returns 4, <code class="inline"><span class="w">ok</span></code>
 ends up
testing <code class="inline"><span class="n">4</span> <a class="l_k" href="functions/eq.html">eq</a> <span class="n">4</span></code>
.  Since that's true, this test passes.</p>
<p>Finally, you can append an optional third argument, in
<code class="inline">ok(<i>arg1</i>,<i>arg2</i>, <i>note</i>)</code>, where <i>note</i> is a string value that
will be printed if the test fails.  This should be some useful
information about the test, pertaining to why it failed, and/or
a description of the test.  For example:</p>
<pre class="verbatim"><ol><li>    <span class="i">ok</span><span class="s">(</span> <a class="l_k" href="functions/grep.html">grep</a><span class="s">(</span><span class="i">$_</span> <a class="l_k" href="functions/eq.html">eq</a> <span class="q">&#39;something unique&#39;</span><span class="cm">,</span> <span class="i">@stuff</span><span class="s">)</span><span class="cm">,</span> <span class="n">1</span><span class="cm">,</span></li><li>        <span class="q">&quot;Something that should be unique isn&#39;t!\n&quot;</span>.</li><li>        <span class="q">&#39;@stuff = &#39;</span>.<a class="l_k" href="functions/join.html">join</a> <span class="q">&#39;, &#39;</span><span class="cm">,</span> <span class="i">@stuff</span></li><li>      <span class="s">)</span><span class="sc">;</span></li></ol></pre><p>Unfortunately, a note cannot be used with the single argument
style of <code class="inline"><span class="i">ok</span><span class="s">(</span><span class="s">)</span></code>
.  That is, if you try <code class="inline">ok(<i>arg1</i>, <i>note</i>)</code>, then
<code class="inline"><span class="w">Test</span></code>
 will interpret this as <code class="inline">ok(<i>arg1</i>, <i>arg2</i>)</code>, and probably
end up testing <code class="inline"><i>arg1</i> eq <i>arg2</i></code> -- and that's not what you want!</p>
<p>All of the above special cases can occasionally cause some
problems.  See <a href="#BUGS-and-CAVEATS">BUGS and CAVEATS</a>.</p>
</li>
<li><a class='view-title' id="skip(_skip_if_true_%2c-_args..._)"></a><strong><code class="inline">skip(<i>skip_if_true</i>, <i>args...</i>)</code></strong>
<p>This is used for tests that under some conditions can be skipped.  It's
basically equivalent to:</p>
<pre class="verbatim"><ol><li>  <a class="l_k" href="functions/if.html">if</a><span class="s">(</span> <span class="i">$skip_if_true</span> <span class="s">)</span> <span class="s">{</span></li><li>    <span class="i">ok</span><span class="s">(</span><span class="n">1</span><span class="s">)</span><span class="sc">;</span></li><li>  <span class="s">}</span> <a class="l_k" href="functions/else.html">else</a> <span class="s">{</span></li><li>    <span class="i">ok</span><span class="s">(</span> <span class="w">args</span>... <span class="s">)</span><span class="sc">;</span></li><li>  <span class="s">}</span></li></ol></pre><p>...except that the <code class="inline"><span class="i">ok</span><span class="s">(</span><span class="n">1</span><span class="s">)</span></code>
 emits not just "<code class="inline">ok <i>testnum</i></code>" but
actually "<code class="inline">ok <i>testnum</i> # <i>skip_if_true_value</i></code>".</p>
<p>The arguments after the <i>skip_if_true</i> are what is fed to <code class="inline"><span class="i">ok</span><span class="s">(</span>...<span class="s">)</span></code>
 if
this test isn't skipped.</p>
<p>Example usage:</p>
<pre class="verbatim"><ol><li>  <a class="l_k" href="functions/my.html">my</a> <span class="i">$if_MSWin</span> =</li><li>    <span class="i">$^O</span> =~ <span class="q">m/MSWin/</span> ? <span class="q">&#39;Skip if under MSWin&#39;</span> <span class="co">:</span> <span class="q">&#39;&#39;</span><span class="sc">;</span></li><li></li><li>  <span class="c"># A test to be skipped if under MSWin (i.e., run except under MSWin)</span></li><li>  <span class="i">skip</span><span class="s">(</span><span class="i">$if_MSWin</span><span class="cm">,</span> <span class="i">thing</span><span class="s">(</span><span class="i">$foo</span><span class="s">)</span><span class="cm">,</span> <span class="i">thing</span><span class="s">(</span><span class="i">$bar</span><span class="s">)</span> <span class="s">)</span><span class="sc">;</span></li></ol></pre><p>Or, going the other way:</p>
<pre class="verbatim"><ol><li>  <a class="l_k" href="functions/my.html">my</a> <span class="i">$unless_MSWin</span> =</li><li>    <span class="i">$^O</span> =~ <span class="q">m/MSWin/</span> ? <span class="q">&#39;&#39;</span> <span class="co">:</span> <span class="q">&#39;Skip unless under MSWin&#39;</span><span class="sc">;</span></li><li></li><li>  <span class="c"># A test to be skipped unless under MSWin (i.e., run only under MSWin)</span></li><li>  <span class="i">skip</span><span class="s">(</span><span class="i">$unless_MSWin</span><span class="cm">,</span> <span class="i">thing</span><span class="s">(</span><span class="i">$foo</span><span class="s">)</span><span class="cm">,</span> <span class="i">thing</span><span class="s">(</span><span class="i">$bar</span><span class="s">)</span> <span class="s">)</span><span class="sc">;</span></li></ol></pre><p>The tricky thing to remember is that the first parameter is true if
you want to <i>skip</i> the test, not <i>run</i> it; and it also doubles as a
note about why it's being skipped. So in the first codeblock above, read
the code as "skip if MSWin -- (otherwise) test whether <code class="inline"><span class="i">thing</span><span class="s">(</span><span class="i">$foo</span><span class="s">)</span></code>
 is
<code class="inline"><span class="i">thing</span><span class="s">(</span><span class="i">$bar</span><span class="s">)</span></code>
" or for the second case, "skip unless MSWin...".</p>
<p>Also, when your <i>skip_if_reason</i> string is true, it really should (for
backwards compatibility with older Test.pm versions) start with the
string "Skip", as shown in the above examples.</p>
<p>Note that in the above cases, <code class="inline"><span class="i">thing</span><span class="s">(</span><span class="i">$foo</span><span class="s">)</span></code>
 and <code class="inline"><span class="i">thing</span><span class="s">(</span><span class="i">$bar</span><span class="s">)</span></code>

<i>are</i> evaluated -- but as long as the <code class="inline"><span class="w">skip_if_true</span></code>
 is true,
then we <code class="inline"><span class="i">skip</span><span class="s">(</span>...<span class="s">)</span></code>
 just tosses out their value (i.e., not
bothering to treat them like values to <code class="inline"><span class="i">ok</span><span class="s">(</span>...<span class="s">)</span></code>
.  But if
you need to <i>not</i> eval the arguments when skipping the
test, use
this format:</p>
<pre class="verbatim"><ol><li>  <span class="i">skip</span><span class="s">(</span> <span class="i">$unless_MSWin</span><span class="cm">,</span></li><li>    <a class="l_k" href="functions/sub.html">sub</a> <span class="s">{</span></li><li>      <span class="c"># This code returns true if the test passes.</span></li><li>      <span class="c"># (But it doesn&#39;t even get called if the test is skipped.)</span></li><li>      <span class="i">thing</span><span class="s">(</span><span class="i">$foo</span><span class="s">)</span> <a class="l_k" href="functions/eq.html">eq</a> <span class="i">thing</span><span class="s">(</span><span class="i">$bar</span><span class="s">)</span></li><li>    <span class="s">}</span></li><li>  <span class="s">)</span><span class="sc">;</span></li></ol></pre><p>or even this, which is basically equivalent:</p>
<pre class="verbatim"><ol><li>  <span class="i">skip</span><span class="s">(</span> <span class="i">$unless_MSWin</span><span class="cm">,</span></li><li>    <a class="l_k" href="functions/sub.html">sub</a> <span class="s">{</span> <span class="i">thing</span><span class="s">(</span><span class="i">$foo</span><span class="s">)</span> <span class="s">}</span><span class="cm">,</span> <a class="l_k" href="functions/sub.html">sub</a> <span class="s">{</span> <span class="i">thing</span><span class="s">(</span><span class="i">$bar</span><span class="s">)</span> <span class="s">}</span></li><li>  <span class="s">)</span><span class="sc">;</span></li></ol></pre><p>That is, both are like this:</p>
<pre class="verbatim"><ol><li>  <a class="l_k" href="functions/if.html">if</a><span class="s">(</span> <span class="i">$unless_MSWin</span> <span class="s">)</span> <span class="s">{</span></li><li>    <span class="i">ok</span><span class="s">(</span><span class="n">1</span><span class="s">)</span><span class="sc">;</span>  <span class="c"># but it actually appends &quot;# $unless_MSWin&quot;</span></li><li>            <span class="c">#  so that Test::Harness can tell it&#39;s a skip</span></li><li>  <span class="s">}</span> <a class="l_k" href="functions/else.html">else</a> <span class="s">{</span></li><li>    <span class="c"># Not skipping, so actually call and evaluate...</span></li><li>    <span class="i">ok</span><span class="s">(</span> <a class="l_k" href="functions/sub.html">sub</a> <span class="s">{</span> <span class="i">thing</span><span class="s">(</span><span class="i">$foo</span><span class="s">)</span> <span class="s">}</span><span class="cm">,</span> <a class="l_k" href="functions/sub.html">sub</a> <span class="s">{</span> <span class="i">thing</span><span class="s">(</span><span class="i">$bar</span><span class="s">)</span> <span class="s">}</span> <span class="s">)</span><span class="sc">;</span></li><li>  <span class="s">}</span></li></ol></pre></li>
</ul>
<a class='view-head1' id="TEST-TYPES"></a><h2 class='h2' >TEST TYPES</h2>
<ul>
<li><a class='view-title' id="*-NORMAL-TESTS"></a><strong>NORMAL TESTS</strong>
<p>These tests are expected to succeed.  Usually, most or all of your tests
are in this category.  If a normal test doesn't succeed, then that
means that something is <i>wrong</i>.</p>
</li>
<li><a class='view-title' id="*-SKIPPED-TESTS"></a><strong>SKIPPED TESTS</strong>
<p>The <code class="inline"><span class="i">skip</span><span class="s">(</span>...<span class="s">)</span></code>
 function is for tests that might or might not be
possible to run, depending
on the availability of platform-specific features.  The first argument
should evaluate to true (think "yes, please skip") if the required
feature is <i>not</i> available.  After the first argument, <code class="inline"><span class="i">skip</span><span class="s">(</span>...<span class="s">)</span></code>
 works
exactly the same way as <code class="inline"><span class="i">ok</span><span class="s">(</span>...<span class="s">)</span></code>
 does.</p>
</li>
<li><a class='view-title' id="*-TODO-TESTS"></a><strong>TODO TESTS</strong>
<p>TODO tests are designed for maintaining an <strong>executable TODO list</strong>.
These tests are <i>expected to fail.</i>  If a TODO test does succeed,
then the feature in question shouldn't be on the TODO list, now
should it?</p>
<p>Packages should NOT be released with succeeding TODO tests.  As soon
as a TODO test starts working, it should be promoted to a normal test,
and the newly working feature should be documented in the release
notes or in the change log.</p>
</li>
</ul>
<a class='view-head1' id="ONFAIL"></a><h2 class='h2' >ONFAIL</h2>
<pre class="verbatim"><ol><li>  <a class="l_k" href="functions/BEGIN.html">BEGIN</a> <span class="s">{</span> <span class="w">plan</span> <span class="w">test</span> <span class="cm">=&gt;</span> <span class="n">4</span><span class="cm">,</span> <span class="w">onfail</span> <span class="cm">=&gt;</span> <a class="l_k" href="functions/sub.html">sub</a> <span class="s">{</span> <a class="l_k" href="functions/warn.html">warn</a> <span class="q">&quot;CALL 911!&quot;</span> <span class="s">}</span> <span class="s">}</span></li></ol></pre><p>Although test failures should be enough, extra diagnostics can be
triggered at the end of a test run.  <code class="inline"><span class="w">onfail</span></code>
 is passed an array ref
of hash refs that describe each test failure.  Each hash will contain
at least the following fields: <code class="inline"><a class="l_k" href="functions/package.html">package</a></code>, <code class="inline"><span class="w">repetition</span></code>
, and
<code class="inline"><span class="w">result</span></code>
.  (You shouldn't rely on any other fields being present.)  If the test
had an expected value or a diagnostic (or "note") string, these will also be
included.</p>
<p>The <i>optional</i> <code class="inline"><span class="w">onfail</span></code>
 hook might be used simply to print out the
version of your package and/or how to report problems.  It might also
be used to generate extremely sophisticated diagnostics for a
particularly bizarre test failure.  However it's not a panacea.  Core
dumps or other unrecoverable errors prevent the <code class="inline"><span class="w">onfail</span></code>
 hook from
running.  (It is run inside an <code class="inline"><a class="l_k" href="functions/END.html">END</a></code> block.)  Besides, <code class="inline"><span class="w">onfail</span></code>
 is
probably over-kill in most cases.  (Your test code should be simpler
than the code it is testing, yes?)</p>
<a class='view-head1' id="BUGS-and-CAVEATS"></a><h2 class='h2' >BUGS and CAVEATS</h2>
<ul>
<li>
<p><code class="inline"><span class="i">ok</span><span class="s">(</span>...<span class="s">)</span></code>
's special handing of strings which look like they might be
regexes can also cause unexpected behavior.  An innocent:</p>
<pre class="verbatim"><ol><li>    <span class="i">ok</span><span class="s">(</span> <span class="i">$fileglob</span><span class="cm">,</span> <span class="q">&#39;/path/to/some/*stuff/&#39;</span> <span class="s">)</span><span class="sc">;</span></li></ol></pre><p>will fail, since Test.pm considers the second argument to be a regex!
The best bet is to use the one-argument form:</p>
<pre class="verbatim"><ol><li>    <span class="i">ok</span><span class="s">(</span> <span class="i">$fileglob</span> <a class="l_k" href="functions/eq.html">eq</a> <span class="q">&#39;/path/to/some/*stuff/&#39;</span> <span class="s">)</span><span class="sc">;</span></li></ol></pre></li>
<li>
<p><code class="inline"><span class="i">ok</span><span class="s">(</span>...<span class="s">)</span></code>
's use of string <code class="inline"><a class="l_k" href="functions/eq.html">eq</a></code> can sometimes cause odd problems
when comparing
numbers, especially if you're casting a string to a number:</p>
<pre class="verbatim"><ol><li>    <span class="i">$foo</span> = <span class="q">&quot;1.0&quot;</span><span class="sc">;</span></li><li>    <span class="i">ok</span><span class="s">(</span> <span class="i">$foo</span><span class="cm">,</span> <span class="n">1</span> <span class="s">)</span><span class="sc">;</span>      <span class="c"># not ok, &quot;1.0&quot; ne 1</span></li></ol></pre><p>Your best bet is to use the single argument form:</p>
<pre class="verbatim"><ol><li>    <span class="i">ok</span><span class="s">(</span> <span class="i">$foo</span> == <span class="n">1</span> <span class="s">)</span><span class="sc">;</span>    <span class="c"># ok &quot;1.0&quot; == 1</span></li></ol></pre></li>
<li>
<p>As you may have inferred from the above documentation and examples,
<code class="inline"><span class="w">ok</span></code>
's prototype is <code class="inline"><span class="s">(</span><span class="i">$;</span><span class="i">$$</span><span class="s">)</span></code>
 (and, incidentally, <code class="inline"><span class="w">skip</span></code>
's is
<code class="inline"><span class="s">(</span><span class="i">$;</span><span class="i">$$$</span><span class="s">)</span></code>
). This means, for example, that you can do <code class="inline"><span class="w">ok</span> <span class="i">@foo</span><span class="cm">,</span> <span class="i">@bar</span></code>

to compare the <i>size</i> of the two arrays. But don't be fooled into
thinking that <code class="inline"><span class="w">ok</span> <span class="i">@foo</span><span class="cm">,</span> <span class="i">@bar</span></code>
 means a comparison of the contents of two
arrays -- you're comparing <i>just</i> the number of elements of each. It's
so easy to make that mistake in reading <code class="inline"><span class="w">ok</span> <span class="i">@foo</span><span class="cm">,</span> <span class="i">@bar</span></code>
 that you might
want to be very explicit about it, and instead write <code class="inline"><span class="w">ok</span> <a class="l_k" href="functions/scalar.html">scalar</a><span class="s">(</span><span class="i">@foo</span><span class="s">)</span><span class="cm">,</span>
<a class="l_k" href="functions/scalar.html">scalar</a><span class="s">(</span><span class="i">@bar</span><span class="s">)</span></code>
.</p>
</li>
<li>
<p>This almost definitely doesn't do what you expect:</p>
<pre class="verbatim"><ol><li>     <span class="w">ok</span> <span class="i">$thingy</span><span class="i">-&gt;can</span><span class="s">(</span><span class="q">&#39;some_method&#39;</span><span class="s">)</span><span class="sc">;</span></li></ol></pre><p>Why?  Because <code class="inline"><span class="w">can</span></code>
 returns a coderef to mean "yes it can (and the
method is this...)", and then <code class="inline"><span class="w">ok</span></code>
 sees a coderef and thinks you're
passing a function that you want it to call and consider the truth of
the result of!  I.e., just like:</p>
<pre class="verbatim"><ol><li>     <span class="w">ok</span> <span class="i">$thingy</span><span class="i">-&gt;can</span><span class="s">(</span><span class="q">&#39;some_method&#39;</span><span class="s">)</span>-&gt;<span class="s">(</span><span class="s">)</span><span class="sc">;</span></li></ol></pre><p>What you probably want instead is this:</p>
<pre class="verbatim"><ol><li>     <span class="w">ok</span> <span class="i">$thingy</span><span class="i">-&gt;can</span><span class="s">(</span><span class="q">&#39;some_method&#39;</span><span class="s">)</span> &amp;&amp; <span class="n">1</span><span class="sc">;</span></li></ol></pre><p>If the <code class="inline"><span class="w">can</span></code>
 returns false, then that is passed to <code class="inline"><span class="w">ok</span></code>
.  If it
returns true, then the larger expression <code class="inline"><span class="i">$thingy</span><span class="i">-&gt;can</span><span class="s">(</span><span class="q">&#39;some_method&#39;</span><span class="s">)</span> &amp;&amp; <span class="n">1</span></code>
 returns 1, which <code class="inline"><span class="w">ok</span></code>
 sees as
a simple signal of success, as you would expect.</p>
</li>
<li>
<p>The syntax for <code class="inline"><span class="w">skip</span></code>
 is about the only way it can be, but it's still
quite confusing.  Just start with the above examples and you'll
be okay.</p>
<p>Moreover, users may expect this:</p>
<pre class="verbatim"><ol><li>  <span class="w">skip</span> <span class="i">$unless_mswin</span><span class="cm">,</span> <span class="i">foo</span><span class="s">(</span><span class="i">$bar</span><span class="s">)</span><span class="cm">,</span> <span class="i">baz</span><span class="s">(</span><span class="i">$quux</span><span class="s">)</span><span class="sc">;</span></li></ol></pre><p>to not evaluate <code class="inline"><span class="i">foo</span><span class="s">(</span><span class="i">$bar</span><span class="s">)</span></code>
 and <code class="inline"><span class="i">baz</span><span class="s">(</span><span class="i">$quux</span><span class="s">)</span></code>
 when the test is being
skipped.  But in reality, they <i>are</i> evaluated, but <code class="inline"><span class="w">skip</span></code>
 just won't
bother comparing them if <code class="inline"><span class="i">$unless_mswin</span></code>
 is true.</p>
<p>You could do this:</p>
<pre class="verbatim"><ol><li>  <span class="w">skip</span> <span class="i">$unless_mswin</span><span class="cm">,</span> <a class="l_k" href="functions/sub.html">sub</a><span class="s">{</span><span class="i">foo</span><span class="s">(</span><span class="i">$bar</span><span class="s">)</span><span class="s">}</span><span class="cm">,</span> <a class="l_k" href="functions/sub.html">sub</a><span class="s">{</span><span class="i">baz</span><span class="s">(</span><span class="i">$quux</span><span class="s">)</span><span class="s">}</span><span class="sc">;</span></li></ol></pre><p>But that's not terribly pretty.  You may find it simpler or clearer in
the long run to just do things like this:</p>
<pre class="verbatim"><ol><li>  <a class="l_k" href="functions/if.html">if</a><span class="s">(</span> <span class="i">$^O</span> =~ <span class="q">m/MSWin/</span> <span class="s">)</span> <span class="s">{</span></li><li>    <a class="l_k" href="functions/print.html">print</a> <span class="q">&quot;# Yay, we&#39;re under $^O\n&quot;</span><span class="sc">;</span></li><li>    <span class="w">ok</span> <span class="i">foo</span><span class="s">(</span><span class="i">$bar</span><span class="s">)</span><span class="cm">,</span> <span class="i">baz</span><span class="s">(</span><span class="i">$quux</span><span class="s">)</span><span class="sc">;</span></li><li>    <span class="w">ok</span> <span class="i">thing</span><span class="s">(</span><span class="i">$whatever</span><span class="s">)</span><span class="cm">,</span> <span class="i">baz</span><span class="s">(</span><span class="i">$stuff</span><span class="s">)</span><span class="sc">;</span></li><li>    <span class="w">ok</span> <span class="i">blorp</span><span class="s">(</span><span class="i">$quux</span><span class="cm">,</span> <span class="i">$whatever</span><span class="s">)</span><span class="sc">;</span></li><li>    <span class="w">ok</span> <span class="i">foo</span><span class="s">(</span><span class="i">$barzbarz</span><span class="s">)</span><span class="cm">,</span> <span class="i">thang</span><span class="s">(</span><span class="i">$quux</span><span class="s">)</span><span class="sc">;</span></li><li>  <span class="s">}</span> <a class="l_k" href="functions/else.html">else</a> <span class="s">{</span></li><li>    <a class="l_k" href="functions/print.html">print</a> <span class="q">&quot;# Feh, we&#39;re under $^O.  Watch me skip some tests...\n&quot;</span><span class="sc">;</span></li><li>    <a class="l_k" href="functions/for.html">for</a><span class="s">(</span><span class="n">1</span> .. <span class="n">4</span><span class="s">)</span> <span class="s">{</span> <span class="w">skip</span> <span class="q">&quot;Skip unless under MSWin&quot;</span> <span class="s">}</span></li><li>  <span class="s">}</span></li></ol></pre><p>But be quite sure that <code class="inline"><span class="w">ok</span></code>
 is called exactly as many times in the
first block as <code class="inline"><span class="w">skip</span></code>
 is called in the second block.</p>
</li>
</ul>
<a class='view-head1' id="ENVIRONMENT"></a><h2 class='h2' >ENVIRONMENT</h2>
<p>If <code class="inline"><span class="w">PERL_TEST_DIFF</span></code>
 environment variable is set, it will be used as a
command for comparing unexpected multiline results.  If you have GNU
diff installed, you might want to set <code class="inline"><span class="w">PERL_TEST_DIFF</span></code>
 to <code class="inline"><span class="w">diff</span> -u</code>
.
If you don't have a suitable program, you might install the
<code class="inline"><span class="w">Text::Diff</span></code>
 module and then set <code class="inline"><span class="w">PERL_TEST_DIFF</span></code>
 to be <code class="inline"><span class="w">perl</span>
-<span class="w">MText::Diff</span> -e <span class="q">&#39;print diff(@ARGV)&#39;</span></code>
.  If <code class="inline"><span class="w">PERL_TEST_DIFF</span></code>
 isn't set
but the <code class="inline"><span class="w">Algorithm::Diff</span></code>
 module is available, then it will be used
to show the differences in multiline results.</p>
<a class='view-head1' id="NOTE"></a><h2 class='h2' >NOTE</h2>
<p>A past developer of this module once said that it was no longer being
actively developed.  However, rumors of its demise were greatly
exaggerated.  Feedback and suggestions are quite welcome.</p>
<p>Be aware that the main value of this module is its simplicity.  Note
that there are already more ambitious modules out there, such as
<a href="Test/More.html">Test::More</a> and <a href="https://search.cpan.org/perldoc/Test::Unit">Test::Unit</a>.</p>
<p>Some earlier versions of this module had docs with some confusing
typos in the description of <code class="inline"><span class="i">skip</span><span class="s">(</span>...<span class="s">)</span></code>
.</p>
<a class='view-head1' id="SEE-ALSO"></a><h2 class='h2' >SEE ALSO</h2>
<p><a href="Test/Harness.html">Test::Harness</a></p>
<p><a href="Test/Simple.html">Test::Simple</a>, <a href="Test/More.html">Test::More</a>, <a href="https://search.cpan.org/perldoc/Devel::Cover">Devel::Cover</a></p>
<p><a href="Test/Builder.html">Test::Builder</a> for building your own testing library.</p>
<p><a href="https://search.cpan.org/perldoc/Test::Unit">Test::Unit</a> is an interesting XUnit-style testing library.</p>
<p><a href="https://search.cpan.org/perldoc/Test::Inline">Test::Inline</a> and <a href="https://search.cpan.org/perldoc/SelfTest">SelfTest</a> let you embed tests in code.</p>
<a class='view-head1' id="AUTHOR"></a><h2 class='h2' >AUTHOR</h2>
<p>Copyright (c) 1998-2000 Joshua Nathaniel Pritikin.</p>
<p>Copyright (c) 2001-2002 Michael G. Schwern.</p>
<p>Copyright (c) 2002-2004 Sean M. Burke.</p>
<p>Current maintainer: Jesse Vincent. &lt;jesse@bestpractical.com&gt;</p>
<p>This package is free software and is provided "as is" without express
or implied warranty.  It may be used, redistributed and/or modified
under the same terms as Perl itself.</p>




      <ul><li><a href="#NAME">NAME</a></li><li><a href="#SYNOPSIS">SYNOPSIS</a></li><li><a href="#DESCRIPTION">DESCRIPTION</a></li><li><a href="#QUICK-START-GUIDE">QUICK START GUIDE</a></li><ul><li><a href="#Functions">Functions</a></li></ul><li><a href="#TEST-TYPES">TEST TYPES</a></li><li><a href="#ONFAIL">ONFAIL</a></li><li><a href="#BUGS-and-CAVEATS">BUGS and CAVEATS</a></li><li><a href="#ENVIRONMENT">ENVIRONMENT</a></li><li><a href="#NOTE">NOTE</a></li><li><a href="#SEE-ALSO">SEE ALSO</a></li><li><a href="#AUTHOR">AUTHOR</a></li></ul>


                  </div>
                </article>
              </div>
            </div>
          </main>
        </div>
           <footer class="footer row bg-light pt-5 pb-5">
       <div class="col-sm-10 offset-sm-1 col-xl-8 offset-xl-2">
           <div class="row">
               <div class="col-md-4">
                   <ul class="list-unstyled">
                       <li>
                           <h4>Site info</h4>
                       </li>
                       <li>Docs mantained by
                           <a href="//lists.perl.org/list/perl5-porters.html"
                               rel="noopener">Perl 5 Porters</a>
                       </li>
                       <li>Perldoc site development sponsored by
                           <a href="//opusvl.com" rel="noopener">
                           <img style="margin: 20px 20px 5px 10px" class="opus-logo" src="/public/img/opusvl_logo.svg" alt="OpusVL Logo">
                        </a>
                    <li><span class="about_perldoc"><a href="//about.html">About PerlDOC</a></span>
                    </li>
                       </li>
                   </ul>
               </div>
               <div class="col-md-8">
                   <div class="row">
                       <div class="col-md-6 col-lg-3">
                           <ul class=" list-unstyled">
                               <li>
                                   <h4>Manuals</h4>
                               </li>
                               <li>
                                   <a
                                       href="/5.20.1/index-overview.html">Overview</a>
                               </li>
                               <li>
                                   <a
                                       href="/5.20.1/index-tutorials.html">Tutorials</a>
                               </li>
                               <li>
                                   <a href="/5.20.1/index-faq.html">FAQs</a>
                               </li>
                               <li>
                                   <a
                                       href="/5.20.1/index-history.html">Changes</a>
                               </li>
                           </ul>
                       </div>
                       <div class="col-md-6 col-lg-3">
                           <ul class=" list-unstyled">
                               <li>
                                   <h4>Reference</h4>
                               </li>
                               <li>
                                   <a
                                       href="/5.20.1/index-language.html">Language</a>
                               </li>
                               <li>
                                   <a
                                       href="/5.20.1/index-functions.html">Functions</a>
                               </li>
                               <li>
                                   <a
                                       href="/5.20.1/perlop.html">Operators</a>
                               </li>
                               <li>
                                   <a
                                       href="/5.20.1/perlvar.html">Variables</a>
                               </li>
                           </ul>
                       </div>
                       <div class="col-md-6 col-lg-3">
                           <ul class=" list-unstyled">
                               <li>
                                   <h4>Modules</h4>
                               </li>
                               <li>
                                   <a
                                       href="/5.20.1/index-modules-A.html">Modules</a>
                               </li>
                               <li>
                                   <a
                                       href="/5.20.1/index-pragmas.html">Pragmas</a>
                               </li>
                               <li>
                                   <a
                                       href="/5.20.1/index-utilities.html">Utilities</a>
                               </li>
                           </ul>
                       </div>
                       <div class="col-md-6 col-lg-3">
                           <ul class=" list-unstyled">
                               <li>
                                   <h4>Misc</h4>
                               </li>
                               <li>
                                   <a
                                       href="/5.20.1/index-licence.html">License</a>
                               </li>
                               <li>
                                   <a
                                       href="/5.20.1/index-internals.html">Internals</a>
                               </li>
                               <li>
                                   <a
                                       href="/5.20.1/index-platforms.html">Platforms</a>
                               </li>
                            <li>
                                <a
                                    href="/5.20.1/index-about.html">About</a>
                            </li>
                           </ul>
                       </div>
                   </div>
               </div>
               <div class=" col-12 footer-inf text-center">
                   <small>perldoc.perl.org - Official documentation for the Perl
                       programming language</small>
               </div>
           </div>
       </div>
   </footer>

        	<div class="beta-wrapper beta-bottom-right ">
		<div class="beta beta-blue  ">
			<a class="beta-link "
				href="//github.com/OpusVL/perldoc.perl.org/issues/new" rel="noopener">
				<span class="beta-text">
					This website is a Beta release.
				</span>
				<span class="beta-text">
					For any issues please raise a ticket on GitHub
				</span>
			</a>
		</div>
	</div>

        <script src="/public/js/main.min.js"></script>
      </body>

      </html>
