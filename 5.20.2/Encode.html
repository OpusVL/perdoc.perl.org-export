      
      
      
      

      <!DOCTYPE html>
      <html lang="en">

      <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="description" content="Encode - perldoc.perl.org">
        <link rel="icon" href="/public/img/favicon.ico">
        <title>Encode - perldoc.perl.org</title>
        <link href="/public/css/main.min.css" rel="stylesheet">
        <link rel="canonical" href="/Encode.html">
        <link
          href='https://fonts.googleapis.com/css?family=Lato:400,100,300,700,900'
          rel='stylesheet' type='text/css'>
        <script>
          window.ga = window.ga || function () {
            (ga.q = ga.q || []).push(arguments)
          };
          ga.l = +new Date;
          ga('create', 'UA-1892152-2', 'auto'); // JJ's account
          ga('create', 'UA-50555-3', 'auto', 'perlOrg'); // perl.org account
          ga('require', 'outboundLinkTracker', {
            events: ['click', 'auxclick', 'contextmenu'],
          });
          ga('require', 'maxScrollTracker');
          ga('send', 'pageview');
          ga('perlOrg.send', 'pageview');
        </script>
        <script async src="https://www.google-analytics.com/analytics.js">
        </script>
        <script async src="/public/js/tracking.min.js"></script>
      </head>

      <body class="body container-fluid ">
        <div class="wrapper">

          <nav
    class="navbar navbar-dark bg-primary bg-perl fixed-top justify-content-between navbar-expand-lg">
    <a href="#content" class="skippy sr-only sr-only-focusable">
        <span class=' skippy-text'>Skip to main content</span>
    </a>
    <a class="navbar-brand" href="/">
        <img class="logo" src="/public/img/logo_perl_doc.svg"
            alt="Perl Documentation Logo" />
    </a>
    <button class="navbar-toggler" type="button" data-toggle="collapse"
        data-target="#navbar" aria-controls="navbar" aria-expanded="false"
        aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
    </button>
    <div id="navbar" class="collapse navbar-collapse ">
        <ul class="navbar-nav ml-auto navbar-right">
            <form class="nav-item dropdown search-wrapper">
                <input type="text" id='searchinput' aria-describedby='navbarDropdown5'
                    placeholder="Type query" class='search-input-field' value=''>

                <button href="#" data-toggle='dropdown' type="button"
                    aria-haspopup="true" aria-expanded='false' id="navbarDropdown5"
                    class="nav-link dropdown-toggle search-link">
                    <object tabindex='-1' focusable="false" class='search-icon'
                        data="/public/img/search.svg" type="image/svg+xml"
                        name='search icon'>search
                        icon</object>
                </button>
                <div class="dropdown-menu" aria-labelledby="navbarDropdown5"
                    id='search-results'>
                    <p class='dropdown-item major-version'>
                        No results
                    </p>
                </div>
            </form>
            <li class="nav-item dropdown">
                <a id="navbarDropdown" href="#" class="nav-link dropdown-toggle"
                    data-toggle="dropdown" role="button" aria-haspopup="true"
                    aria-expanded="false">Perl versions</a>
                <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                    
                        <p class='dropdown-item major-version'>
                            5.32
                        </p>
                        
                        <a class='dropdown-item minor-version' href="/5.32.0/">5.32.0</a>
                        
                        
                        <div class="dropdown-divider"></div>
                        
                    
                        <p class='dropdown-item major-version'>
                            5.30
                        </p>
                        
                        <a class='dropdown-item minor-version' href="/5.30.3/">5.30.3</a>
                        
                        <a class='dropdown-item minor-version' href="/5.30.2/">5.30.2</a>
                        
                        <a class='dropdown-item minor-version' href="/5.30.1/">5.30.1</a>
                        
                        <a class='dropdown-item minor-version' href="/5.30.0/">5.30.0</a>
                        
                        
                        <div class="dropdown-divider"></div>
                        
                    
                        <p class='dropdown-item major-version'>
                            5.28
                        </p>
                        
                        <a class='dropdown-item minor-version' href="/5.28.3/">5.28.3</a>
                        
                        <a class='dropdown-item minor-version' href="/5.28.2/">5.28.2</a>
                        
                        <a class='dropdown-item minor-version' href="/5.28.1/">5.28.1</a>
                        
                        <a class='dropdown-item minor-version' href="/5.28.0/">5.28.0</a>
                        
                        
                        <div class="dropdown-divider"></div>
                        
                    
                        <p class='dropdown-item major-version'>
                            5.26
                        </p>
                        
                        <a class='dropdown-item minor-version' href="/5.26.3/">5.26.3</a>
                        
                        <a class='dropdown-item minor-version' href="/5.26.2/">5.26.2</a>
                        
                        <a class='dropdown-item minor-version' href="/5.26.1/">5.26.1</a>
                        
                        <a class='dropdown-item minor-version' href="/5.26.0/">5.26.0</a>
                        
                        
                        <div class="dropdown-divider"></div>
                        
                    
                        <p class='dropdown-item major-version'>
                            5.24
                        </p>
                        
                        <a class='dropdown-item minor-version' href="/5.24.4/">5.24.4</a>
                        
                        <a class='dropdown-item minor-version' href="/5.24.3/">5.24.3</a>
                        
                        <a class='dropdown-item minor-version' href="/5.24.2/">5.24.2</a>
                        
                        <a class='dropdown-item minor-version' href="/5.24.1/">5.24.1</a>
                        
                        <a class='dropdown-item minor-version' href="/5.24.0/">5.24.0</a>
                        
                        
                        <div class="dropdown-divider"></div>
                        
                    
                        <p class='dropdown-item major-version'>
                            5.22
                        </p>
                        
                        <a class='dropdown-item minor-version' href="/5.22.4/">5.22.4</a>
                        
                        <a class='dropdown-item minor-version' href="/5.22.3/">5.22.3</a>
                        
                        <a class='dropdown-item minor-version' href="/5.22.2/">5.22.2</a>
                        
                        <a class='dropdown-item minor-version' href="/5.22.1/">5.22.1</a>
                        
                        <a class='dropdown-item minor-version' href="/5.22.0/">5.22.0</a>
                        
                        
                        <div class="dropdown-divider"></div>
                        
                    
                        <p class='dropdown-item major-version'>
                            5.20
                        </p>
                        
                        <a class='dropdown-item minor-version' href="/5.20.3/">5.20.3</a>
                        
                        <a class='dropdown-item minor-version' href="/5.20.2/">5.20.2</a>
                        
                        <a class='dropdown-item minor-version' href="/5.20.1/">5.20.1</a>
                        
                        <a class='dropdown-item minor-version' href="/5.20.0/">5.20.0</a>
                        
                        
                        <div class="dropdown-divider"></div>
                        
                    
                        <p class='dropdown-item major-version'>
                            5.18
                        </p>
                        
                        <a class='dropdown-item minor-version' href="/5.18.4/">5.18.4</a>
                        
                        <a class='dropdown-item minor-version' href="/5.18.3/">5.18.3</a>
                        
                        <a class='dropdown-item minor-version' href="/5.18.2/">5.18.2</a>
                        
                        <a class='dropdown-item minor-version' href="/5.18.1/">5.18.1</a>
                        
                        <a class='dropdown-item minor-version' href="/5.18.0/">5.18.0</a>
                        
                        
                        <div class="dropdown-divider"></div>
                        
                    
                        <p class='dropdown-item major-version'>
                            5.16
                        </p>
                        
                        <a class='dropdown-item minor-version' href="/5.16.3/">5.16.3</a>
                        
                        <a class='dropdown-item minor-version' href="/5.16.2/">5.16.2</a>
                        
                        <a class='dropdown-item minor-version' href="/5.16.1/">5.16.1</a>
                        
                        <a class='dropdown-item minor-version' href="/5.16.0/">5.16.0</a>
                        
                        
                        <div class="dropdown-divider"></div>
                        
                    
                        <p class='dropdown-item major-version'>
                            5.14
                        </p>
                        
                        <a class='dropdown-item minor-version' href="/5.14.4/">5.14.4</a>
                        
                        <a class='dropdown-item minor-version' href="/5.14.3/">5.14.3</a>
                        
                        <a class='dropdown-item minor-version' href="/5.14.2/">5.14.2</a>
                        
                        <a class='dropdown-item minor-version' href="/5.14.1/">5.14.1</a>
                        
                        <a class='dropdown-item minor-version' href="/5.14.0/">5.14.0</a>
                        
                        
                        <div class="dropdown-divider"></div>
                        
                    
                        <p class='dropdown-item major-version'>
                            5.12
                        </p>
                        
                        <a class='dropdown-item minor-version' href="/5.12.5/">5.12.5</a>
                        
                        <a class='dropdown-item minor-version' href="/5.12.4/">5.12.4</a>
                        
                        <a class='dropdown-item minor-version' href="/5.12.3/">5.12.3</a>
                        
                        <a class='dropdown-item minor-version' href="/5.12.2/">5.12.2</a>
                        
                        <a class='dropdown-item minor-version' href="/5.12.1/">5.12.1</a>
                        
                        <a class='dropdown-item minor-version' href="/5.12.0/">5.12.0</a>
                        
                        
                        <div class="dropdown-divider"></div>
                        
                    
                        <p class='dropdown-item major-version'>
                            5.10
                        </p>
                        
                        <a class='dropdown-item minor-version' href="/5.10.1/">5.10.1</a>
                        
                        <a class='dropdown-item minor-version' href="/5.10.0/">5.10.0</a>
                        
                        
                        <div class="dropdown-divider"></div>
                        
                    
                        <p class='dropdown-item major-version'>
                            5.8
                        </p>
                        
                        <a class='dropdown-item minor-version' href="/5.8.9/">5.8.9</a>
                        
                        <a class='dropdown-item minor-version' href="/5.8.8/">5.8.8</a>
                        
                        <a class='dropdown-item minor-version' href="/5.8.7/">5.8.7</a>
                        
                        <a class='dropdown-item minor-version' href="/5.8.6/">5.8.6</a>
                        
                        <a class='dropdown-item minor-version' href="/5.8.5/">5.8.5</a>
                        
                        <a class='dropdown-item minor-version' href="/5.8.4/">5.8.4</a>
                        
                        <a class='dropdown-item minor-version' href="/5.8.3/">5.8.3</a>
                        
                        <a class='dropdown-item minor-version' href="/5.8.2/">5.8.2</a>
                        
                        <a class='dropdown-item minor-version' href="/5.8.1/">5.8.1</a>
                        
                        <a class='dropdown-item minor-version' href="/5.8.0/">5.8.0</a>
                        
                        
                        <div class="dropdown-divider"></div>
                        
                    
                        <p class='dropdown-item major-version'>
                            5.6
                        </p>
                        
                        <a class='dropdown-item minor-version' href="/5.6.2/">5.6.2</a>
                        
                        <a class='dropdown-item minor-version' href="/5.6.1/">5.6.1</a>
                        
                        <a class='dropdown-item minor-version' href="/5.6.0/">5.6.0</a>
                        
                        
                    
                </div>
            </li>
            <li class="nav-item dropdown">
                <a id="navbarDropdown1" href="#" class="dropdown-toggle nav-link"
                    data-toggle="dropdown" role="button" aria-haspopup="true"
                    aria-expanded="false">Manuals</a>
                <div class="dropdown-menu" aria-labelledby="navbarDropdown1">
                    <a class="dropdown-item"
                        href="/5.20.2/index-overview.html">Overview</a>
                    <a class="dropdown-item"
                        href="/5.20.2/index-tutorials.html">Tutorials</a>
                    <a class="dropdown-item"
                        href="/5.20.2/index-faq.html">FAQs</a>
                    <a class="dropdown-item"
                        href="/5.20.2/index-history.html">Changes</a>
                    <a class="dropdown-item"
                        href="/5.20.2/index-licence.html">License</a>
                    <a class="dropdown-item"
                        href="/5.20.2/index-language.html">Language</a>
                    <a class="dropdown-item"
                        href="/5.20.2/index-functions.html">Functions</a>
                    <a class="dropdown-item"
                        href="/5.20.2/perlop.html">Operators</a>
                    <a class="dropdown-item"
                        href="/5.20.2/perlvar.html">Variables</a>
                    <a class="dropdown-item"
                        href="/5.20.2/index-pragmas.html">Pragmas</a>
                    <a class="dropdown-item"
                        href="/5.20.2/index-utilities.html">Utilities</a>
                    <a class="dropdown-item"
                        href="/5.20.2/index-internals.html">Internals</a>
                    <a class="dropdown-item"
                        href="/5.20.2/index-platforms.html">Platforms</a>
                </div>
            </li>
            <li class="nav-item dropdown">
                <a id="navbarDropdown3" href="#" class="nav-link dropdown-toggle "
                    data-toggle="dropdown" role="button" aria-haspopup="true"
                    aria-expanded="false">Modules</a>
                <div aria-labelledby="navbarDropdown3"
                    class="dropdown-menu letters-wrap">
                    <!--<a class="dropdown-item"
                        href="/5.20.2/index-modules.html">A-Z</a>
                    <a class="dropdown-item"
                        href="/5.20.2/index-modules-by-cat.html">By
                        Category</a>-->
                    <div class="dropdown-divider"></div>
                    <div class="letter-container">
                        <a class="dropdown-item letters"
                            href="/5.20.2/index-modules-A.html">A</a>
                        <a class="dropdown-item letters"
                            href="/5.20.2/index-modules-B.html">B</a>
                        <a class="dropdown-item letters"
                            href="/5.20.2/index-modules-C.html">C</a>
                        <a class="dropdown-item letters"
                            href="/5.20.2/index-modules-D.html">D</a>
                        <a class="dropdown-item letters"
                            href="/5.20.2/index-modules-E.html">E</a>
                        <a class="dropdown-item letters"
                            href="/5.20.2/index-modules-F.html">F</a>
                        <a class="dropdown-item letters"
                            href="/5.20.2/index-modules-G.html">G</a>
                        <a class="dropdown-item letters"
                            href="/5.20.2/index-modules-H.html">H</a>
                        <a class="dropdown-item letters"
                            href="/5.20.2/index-modules-I.html">I</a>
                        <a class="dropdown-item letters"
                            href="/5.20.2/index-modules-J.html">J</a>
                        <a class="dropdown-item letters"
                            href="/5.20.2/index-modules-K.html">K</a>
                        <a class="dropdown-item letters"
                            href="/5.20.2/index-modules-L.html">L</a>
                        <a class="dropdown-item letters"
                            href="/5.20.2/index-modules-M.html">M</a>
                        <a class="dropdown-item letters"
                            href="/5.20.2/index-modules-N.html">N</a>
                        <a class="dropdown-item letters"
                            href="/5.20.2/index-modules-O.html">O</a>
                        <a class="dropdown-item letters"
                            href="/5.20.2/index-modules-P.html">P</a>
                        <a class="dropdown-item letters"
                            href="/5.20.2/index-modules-Q.html">Q</a>
                        <a class="dropdown-item letters"
                            href="/5.20.2/index-modules-R.html">R</a>
                        <a class="dropdown-item letters"
                            href="/5.20.2/index-modules-S.html">S</a>
                        <a class="dropdown-item letters"
                            href="/5.20.2/index-modules-T.html">T</a>
                        <a class="dropdown-item letters"
                            href="/5.20.2/index-modules-U.html">U</a>
                        <a class="dropdown-item letters"
                            href="/5.20.2/index-modules-V.html">V</a>
                        <a class="dropdown-item letters"
                            href="/5.20.2/index-modules-W.html">W</a>
                        <a class="dropdown-item letters"
                            href="/5.20.2/index-modules-X.html">X</a>
                        <a class="dropdown-item letters"
                            href="/5.20.2/index-modules-Y.html">Y</a>
                        <a class="dropdown-item letters"
                            href="/5.20.2/index-modules-Z.html">Z</a>
                    </div>
                </div>
            </li>
            <li class="nav-item dropdown">
                <a id="navbarDropdown4" href="#" class="nav-link dropdown-toggle "
                    data-toggle="dropdown" role="button" aria-haspopup="true"
                    aria-expanded="false">Functions</a>
                <div aria-labelledby="navbarDropdown4"
                    class="dropdown-menu letters-wrap">
                    <a class="dropdown-item"
                        href="/5.20.2/index-functions.html">A-Z</a>
                    <a class="dropdown-item"
                        href="/5.20.2/index-functions-by-cat.html">By
                        Category</a>
                    <div class="dropdown-divider"></div>
                    <div class="letter-container">
                        <a class="dropdown-item letters"
                            href="/5.20.2/index-functions.html#A">A</a>
                        <a class="dropdown-item letters"
                            href="/5.20.2/index-functions.html#B">B</a>
                        <a class="dropdown-item letters"
                            href="/5.20.2/index-functions.html#C">C</a>
                        <a class="dropdown-item letters"
                            href="/5.20.2/index-functions.html#D">D</a>
                        <a class="dropdown-item letters"
                            href="/5.20.2/index-functions.html#E">E</a>
                        <a class="dropdown-item letters"
                            href="/5.20.2/index-functions.html#F">F</a>
                        <a class="dropdown-item letters"
                            href="/5.20.2/index-functions.html#G">G</a>
                        <a class="dropdown-item letters"
                            href="/5.20.2/index-functions.html#H">H</a>
                        <a class="dropdown-item letters"
                            href="/5.20.2/index-functions.html#I">I</a>
                        <a class="dropdown-item letters"
                            href="/5.20.2/index-functions.html#J">J</a>
                        <a class="dropdown-item letters"
                            href="/5.20.2/index-functions.html#K">K</a>
                        <a class="dropdown-item letters"
                            href="/5.20.2/index-functions.html#L">L</a>
                        <a class="dropdown-item letters"
                            href="/5.20.2/index-functions.html#M">M</a>
                        <a class="dropdown-item letters"
                            href="/5.20.2/index-functions.html#N">N</a>
                        <a class="dropdown-item letters"
                            href="/5.20.2/index-functions.html#O">O</a>
                        <a class="dropdown-item letters"
                            href="/5.20.2/index-functions.html#P">P</a>
                        <a class="dropdown-item letters"
                            href="/5.20.2/index-functions.html#Q">Q</a>
                        <a class="dropdown-item letters"
                            href="/5.20.2/index-functions.html#R">R</a>
                        <a class="dropdown-item letters"
                            href="/5.20.2/index-functions.html#S">S</a>
                        <a class="dropdown-item letters"
                            href="/5.20.2/index-functions.html#T">T</a>
                        <a class="dropdown-item letters"
                            href="/5.20.2/index-functions.html#U">U</a>
                        <a class="dropdown-item letters"
                            href="/5.20.2/index-functions.html#V">V</a>
                        <a class="dropdown-item letters"
                            href="/5.20.2/index-functions.html#W">W</a>
                        <a class="dropdown-item letters"
                            href="/5.20.2/index-functions.html#X">X</a>
                        <a class="dropdown-item letters"
                            href="/5.20.2/index-functions.html#Y">Y</a>
                        <a class="dropdown-item letters"
                            href="/5.20.2/index-functions.html#Z">Z</a>
                    </div>
                </div>
            </li>
        </ul>
    </div>
    <!--/.nav-collapse -->
</nav>


          <main class="row main-content pb-5 pt-5" id='content'>
            <div class="col-sm-10 offset-sm-1 col-xl-8 offset-xl-2">
              <div class="row">
                <div class="col-sm-12">
                  <div id="breadcrumbs">
                      
    <a href="index.html">Home</a>&nbsp; &gt;
    
      
        <a href="index-modules-E.html">Core modules (E)</a> &gt;
      
    
    Encode
  

                  </div>
                </div>
              </div>
              <div class="row">
                <article class="col-sm-12 content">
                  <div class="documentation-wrapper">
                    <div id="perl_version">
                      <h7 class='page-title'> Perl 5 version 20.2
                        documentation</h7>
                    </div>
                    <h1>Encode</h1>


  <!--    -->
<ul><li><a href="#NAME">NAME</a></li><li><a href="#SYNOPSIS">SYNOPSIS</a></li><ul><li><a href="#Table-of-Contents">Table of Contents</a></li></ul><li><a href="#DESCRIPTION">DESCRIPTION</a></li><ul><li><a href="#TERMINOLOGY">TERMINOLOGY</a></li></ul><li><a href="#THE-PERL-ENCODING-API">THE PERL ENCODING API</a></li><ul><li><a href="#Basic-methods">Basic methods</a></li><li><a href="#Listing-available-encodings">Listing available encodings</a></li><li><a href="#Defining-Aliases">Defining Aliases</a></li><li><a href="#Finding-IANA-Character-Set-Registry-names">Finding IANA Character Set Registry names</a></li></ul><li><a href="#Encoding-via-PerlIO">Encoding via PerlIO</a></li><li><a href="#Handling-Malformed-Data">Handling Malformed Data</a></li><ul><li><a href="#List-of-_CHECK_-values">List of _CHECK_ values</a></li><li><a href="#coderef-for-CHECK">coderef for CHECK</a></li></ul><li><a href="#Defining-Encodings">Defining Encodings</a></li><li><a href="#The-UTF8-flag">The UTF8 flag</a></li><ul><li><a href="#Messing-with-Perl's-Internals">Messing with Perl's Internals</a></li></ul><li><a href="#UTF-8-vs.-utf8-vs.-UTF8">UTF-8 vs. utf8 vs. UTF8</a></li><li><a href="#SEE-ALSO">SEE ALSO</a></li><li><a href="#MAINTAINER">MAINTAINER</a></li><li><a href="#COPYRIGHT">COPYRIGHT</a></li></ul><a class='view-head1' id="NAME"></a><h2 class='h2' >NAME</h2>
<p>Encode - character encodings in Perl</p>
<a class='view-head1' id="SYNOPSIS"></a><h2 class='h2' >SYNOPSIS</h2>
<pre class="verbatim"><ol><li>    <a class="l_k" href="functions/use.html">use</a> <span class="w">Encode</span> <span class="q">qw(decode encode)</span><span class="sc">;</span></li><li>    <span class="i">$characters</span> = <span class="i">decode</span><span class="s">(</span><span class="q">&#39;UTF-8&#39;</span><span class="cm">,</span> <span class="i">$octets</span><span class="cm">,</span>     <span class="w">Encode::FB_CROAK</span><span class="s">)</span><span class="sc">;</span></li><li>    <span class="i">$octets</span>     = <span class="i">encode</span><span class="s">(</span><span class="q">&#39;UTF-8&#39;</span><span class="cm">,</span> <span class="i">$characters</span><span class="cm">,</span> <span class="w">Encode::FB_CROAK</span><span class="s">)</span><span class="sc">;</span></li></ol></pre><a class='view-head2' id="Table-of-Contents"></a><h3 class='h3' >Table of Contents</h3>
<p>Encode consists of a collection of modules whose details are too extensive
to fit in one document.  This one itself explains the top-level APIs
and general topics at a glance.  For other topics and more details,
see the documentation for these modules:</p>
<ul>
<li><a class='view-title' id="the-Encode%3a%3aAlias-manpage---Alias-definitions-to-encodings"></a><strong><a href="Encode/Alias.html">Encode::Alias</a> - Alias definitions to encodings</strong>
</li>
<li><a class='view-title' id="the-Encode%3a%3aEncoding-manpage---Encode-Implementation-Base-Class"></a><strong><a href="Encode/Encoding.html">Encode::Encoding</a> - Encode Implementation Base Class</strong>
</li>
<li><a class='view-title' id="the-Encode%3a%3aSupported-manpage---List-of-Supported-Encodings"></a><strong><a href="Encode/Supported.html">Encode::Supported</a> - List of Supported Encodings</strong>
</li>
<li><a class='view-title' id="the-Encode%3a%3aCN-manpage---Simplified-Chinese-Encodings"></a><strong><a href="Encode/CN.html">Encode::CN</a> - Simplified Chinese Encodings</strong>
</li>
<li><a class='view-title' id="the-Encode%3a%3aJP-manpage---Japanese-Encodings"></a><strong><a href="Encode/JP.html">Encode::JP</a> - Japanese Encodings</strong>
</li>
<li><a class='view-title' id="the-Encode%3a%3aKR-manpage---Korean-Encodings"></a><strong><a href="Encode/KR.html">Encode::KR</a> - Korean Encodings</strong>
</li>
<li><a class='view-title' id="the-Encode%3a%3aTW-manpage---Traditional-Chinese-Encodings"></a><strong><a href="Encode/TW.html">Encode::TW</a> - Traditional Chinese Encodings</strong>
</li>
</ul>
<a class='view-head1' id="DESCRIPTION"></a><h2 class='h2' >DESCRIPTION</h2>
<p>The <code class="inline"><span class="w">Encode</span></code>
 module provides the interface between Perl strings
and the rest of the system.  Perl strings are sequences of
<i>characters</i>.</p>
<p>The repertoire of characters that Perl can represent is a superset of those
defined by the Unicode Consortium. On most platforms the ordinal
values of a character as returned by <code class="inline">ord(<i>S</i>)</code> is the <i>Unicode
codepoint</i> for that character. The exceptions are platforms where
the legacy encoding is some variant of EBCDIC rather than a superset
of ASCII; see <a href="perlebcdic.html">perlebcdic</a>.</p>
<p>During recent history, data is moved around a computer in 8-bit chunks,
often called "bytes" but also known as "octets" in standards documents.
Perl is widely used to manipulate data of many types: not only strings of
characters representing human or computer languages, but also "binary"
data, being the machine's representation of numbers, pixels in an image, or
just about anything.</p>
<p>When Perl is processing "binary data", the programmer wants Perl to
process "sequences of bytes". This is not a problem for Perl: because a
byte has 256 possible values, it easily fits in Perl's much larger
"logical character".</p>
<p>This document mostly explains the <i>how</i>. <a href="perlunitut.html">perlunitut</a> and <a href="perlunifaq.html">perlunifaq</a>
explain the <i>why</i>.</p>
<a class='view-head2' id="TERMINOLOGY"></a><h3 class='h3' >TERMINOLOGY</h3>
<a class='view-head3' id="character"></a><h4 class='h4' >character</h4>
<p>A character in the range 0 .. 2**32-1 (or more);
what Perl's strings are made of.</p>
<a class='view-head3' id="byte"></a><h4 class='h4' >byte</h4>
<p>A character in the range 0..255;
a special case of a Perl character.</p>
<a class='view-head3' id="octet"></a><h4 class='h4' >octet</h4>
<p>8 bits of data, with ordinal values 0..255;
term for bytes passed to or from a non-Perl context, such as a disk file,
standard I/O stream, database, command-line argument, environment variable,
socket etc.</p>
<a class='view-head1' id="THE-PERL-ENCODING-API"></a><h2 class='h2' >THE PERL ENCODING API</h2>
<a class='view-head2' id="Basic-methods"></a><h3 class='h3' >Basic methods</h3>
<a class='view-head3' id="encode"></a><h4 class='h4' >encode</h4>
<pre class="verbatim"><ol><li>  <span class="i">$octets</span>  = <span class="i">encode</span><span class="s">(</span><span class="w">ENCODING</span><span class="cm">,</span> <span class="w">STRING</span><span class="s">[</span><span class="cm">,</span> <a class="l_k" href="functions/CHECK.html">CHECK</a><span class="s">]</span><span class="s">)</span></li></ol></pre><p>Encodes the scalar value <i>STRING</i> from Perl's internal form into
<i>ENCODING</i> and returns a sequence of octets.  <i>ENCODING</i> can be either a
canonical name or an alias.  For encoding names and aliases, see
<a href="#Defining-Aliases">Defining Aliases</a>.  For CHECK, see <a href="#Handling-Malformed-Data">Handling Malformed Data</a>.</p>
<p>For example, to convert a string from Perl's internal format into
ISO-8859-1, also known as Latin1:</p>
<pre class="verbatim"><ol><li>  <span class="i">$octets</span> = <span class="i">encode</span><span class="s">(</span><span class="q">&quot;iso-8859-1&quot;</span><span class="cm">,</span> <span class="i">$string</span><span class="s">)</span><span class="sc">;</span></li></ol></pre><p><strong>CAVEAT</strong>: When you run <code class="inline"><span class="i">$octets</span> = <span class="i">encode</span><span class="s">(</span><span class="q">&quot;utf8&quot;</span><span class="cm">,</span> <span class="i">$string</span><span class="s">)</span></code>
, then
$octets <i>might not be equal to</i> $string.  Though both contain the
same data, the UTF8 flag for $octets is <i>always</i> off.  When you
encode anything, the UTF8 flag on the result is always off, even when it
contains a completely valid utf8 string. See <a href="#The-UTF8-flag">The UTF8 flag</a> below.</p>
<p>If the $string is <code class="inline"><a class="l_k" href="functions/undef.html">undef</a></code>, then <code class="inline"><a class="l_k" href="functions/undef.html">undef</a></code> is returned.</p>
<a class='view-head3' id="decode"></a><h4 class='h4' >decode</h4>
<pre class="verbatim"><ol><li>  <span class="i">$string</span> = <span class="i">decode</span><span class="s">(</span><span class="w">ENCODING</span><span class="cm">,</span> <span class="w">OCTETS</span><span class="s">[</span><span class="cm">,</span> <a class="l_k" href="functions/CHECK.html">CHECK</a><span class="s">]</span><span class="s">)</span></li></ol></pre><p>This function returns the string that results from decoding the scalar
value <i>OCTETS</i>, assumed to be a sequence of octets in <i>ENCODING</i>, into
Perl's internal form.  The returns the resulting string.  As with encode(),
<i>ENCODING</i> can be either a canonical name or an alias. For encoding names
and aliases, see <a href="#Defining-Aliases">Defining Aliases</a>; for <i>CHECK</i>, see <a href="#Handling-Malformed-Data">Handling Malformed Data</a>.</p>
<p>For example, to convert ISO-8859-1 data into a string in Perl's
internal format:</p>
<pre class="verbatim"><ol><li>  <span class="i">$string</span> = <span class="i">decode</span><span class="s">(</span><span class="q">&quot;iso-8859-1&quot;</span><span class="cm">,</span> <span class="i">$octets</span><span class="s">)</span><span class="sc">;</span></li></ol></pre><p><strong>CAVEAT</strong>: When you run <code class="inline"><span class="i">$string</span> = <span class="i">decode</span><span class="s">(</span><span class="q">&quot;utf8&quot;</span><span class="cm">,</span> <span class="i">$octets</span><span class="s">)</span></code>
, then $string
<i>might not be equal to</i> $octets.  Though both contain the same data, the
UTF8 flag for $string is on.  See <a href="#The-UTF8-flag">The UTF8 flag</a>
below.</p>
<p>If the $string is <code class="inline"><a class="l_k" href="functions/undef.html">undef</a></code>, then <code class="inline"><a class="l_k" href="functions/undef.html">undef</a></code> is returned.</p>
<a class='view-head3' id="find_encoding"></a><h4 class='h4' >find_encoding</h4>
<pre class="verbatim"><ol><li>  <span class="s">[</span><span class="i">$obj</span> =<span class="s">]</span> <span class="i">find_encoding</span><span class="s">(</span><span class="w">ENCODING</span><span class="s">)</span></li></ol></pre><p>Returns the <i>encoding object</i> corresponding to <i>ENCODING</i>.  Returns
<code class="inline"><a class="l_k" href="functions/undef.html">undef</a></code> if no matching <i>ENCODING</i> is find.  The returned object is
what does the actual encoding or decoding.</p>
<pre class="verbatim"><ol><li>  <span class="i">$utf8</span> = <span class="i">decode</span><span class="s">(</span><span class="i">$name</span><span class="cm">,</span> <span class="i">$bytes</span><span class="s">)</span><span class="sc">;</span></li></ol></pre><p>is in fact</p>
<pre class="verbatim"><ol><li>    <span class="i">$utf8</span> = <a class="l_k" href="functions/do.html">do</a> <span class="s">{</span></li><li>        <span class="i">$obj</span> = <span class="i">find_encoding</span><span class="s">(</span><span class="i">$name</span><span class="s">)</span><span class="sc">;</span></li><li>        <span class="w">croak</span> <span class="q">qq(encoding &quot;$name&quot; not found)</span> <a class="l_k" href="functions/unless.html">unless</a> <a class="l_k" href="functions/ref.html">ref</a> <span class="i">$obj</span><span class="sc">;</span></li><li>        <span class="i">$obj</span><span class="i">-&gt;decode</span><span class="s">(</span><span class="i">$bytes</span><span class="s">)</span><span class="sc">;</span></li><li>    <span class="s">}</span><span class="sc">;</span></li></ol></pre><p>with more error checking.</p>
<p>You can therefore save time by reusing this object as follows;</p>
<pre class="verbatim"><ol><li>    <a class="l_k" href="functions/my.html">my</a> <span class="i">$enc</span> = <span class="i">find_encoding</span><span class="s">(</span><span class="q">&quot;iso-8859-1&quot;</span><span class="s">)</span><span class="sc">;</span></li><li>    <a class="l_k" href="functions/while.html">while</a><span class="s">(</span>&lt;&gt;<span class="s">)</span> <span class="s">{</span></li><li>        <a class="l_k" href="functions/my.html">my</a> <span class="i">$utf8</span> = <span class="i">$enc</span><span class="i">-&gt;decode</span><span class="s">(</span><span class="i">$_</span><span class="s">)</span><span class="sc">;</span></li><li>        ... <span class="c"># now do something with $utf8;</span></li><li>    <span class="s">}</span></li></ol></pre><p>Besides <a href="#decode">decode</a> and <a href="#encode">encode</a>, other methods are
available as well.  For instance, <code class="inline"><span class="i">name</span><span class="s">(</span><span class="s">)</span></code>
 returns the canonical
name of the encoding object.</p>
<pre class="verbatim"><ol><li>  <span class="i">find_encoding</span><span class="s">(</span><span class="q">&quot;latin1&quot;</span><span class="s">)</span><span class="i">-&gt;name</span><span class="sc">;</span> <span class="c"># iso-8859-1</span></li></ol></pre><p>See <a href="Encode/Encoding.html">Encode::Encoding</a> for details.</p>
<a class='view-head3' id="from_to"></a><h4 class='h4' >from_to</h4>
<pre class="verbatim"><ol><li>  <span class="s">[</span><span class="i">$length</span> =<span class="s">]</span> <span class="i">from_to</span><span class="s">(</span><span class="i">$octets</span><span class="cm">,</span> <span class="w">FROM_ENC</span><span class="cm">,</span> <span class="w">TO_ENC</span> <span class="s">[</span><span class="cm">,</span> <a class="l_k" href="functions/CHECK.html">CHECK</a><span class="s">]</span><span class="s">)</span></li></ol></pre><p>Converts <i>in-place</i> data between two encodings. The data in $octets
must be encoded as octets and <i>not</i> as characters in Perl's internal
format. For example, to convert ISO-8859-1 data into Microsoft's CP1250
encoding:</p>
<pre class="verbatim"><ol><li>  <span class="i">from_to</span><span class="s">(</span><span class="i">$octets</span><span class="cm">,</span> <span class="q">&quot;iso-8859-1&quot;</span><span class="cm">,</span> <span class="q">&quot;cp1250&quot;</span><span class="s">)</span><span class="sc">;</span></li></ol></pre><p>and to convert it back:</p>
<pre class="verbatim"><ol><li>  <span class="i">from_to</span><span class="s">(</span><span class="i">$octets</span><span class="cm">,</span> <span class="q">&quot;cp1250&quot;</span><span class="cm">,</span> <span class="q">&quot;iso-8859-1&quot;</span><span class="s">)</span><span class="sc">;</span></li></ol></pre><p>Because the conversion happens in place, the data to be
converted cannot be a string constant: it must be a scalar variable.</p>
<p><code class="inline"><span class="i">from_to</span><span class="s">(</span><span class="s">)</span></code>
 returns the length of the converted string in octets on success,
and <code class="inline"><a class="l_k" href="functions/undef.html">undef</a></code> on error.</p>
<p><strong>CAVEAT</strong>: The following operations may look the same, but are not:</p>
<pre class="verbatim"><ol><li>  <span class="i">from_to</span><span class="s">(</span><span class="i">$data</span><span class="cm">,</span> <span class="q">&quot;iso-8859-1&quot;</span><span class="cm">,</span> <span class="q">&quot;utf8&quot;</span><span class="s">)</span><span class="sc">;</span> <span class="c">#1</span></li><li>  <span class="i">$data</span> = <span class="i">decode</span><span class="s">(</span><span class="q">&quot;iso-8859-1&quot;</span><span class="cm">,</span> <span class="i">$data</span><span class="s">)</span><span class="sc">;</span>  <span class="c">#2</span></li></ol></pre><p>Both #1 and #2 make $data consist of a completely valid UTF-8 string,
but only #2 turns the UTF8 flag on.  #1 is equivalent to:</p>
<pre class="verbatim"><ol><li>  <span class="i">$data</span> = <span class="i">encode</span><span class="s">(</span><span class="q">&quot;utf8&quot;</span><span class="cm">,</span> <span class="i">decode</span><span class="s">(</span><span class="q">&quot;iso-8859-1&quot;</span><span class="cm">,</span> <span class="i">$data</span><span class="s">)</span><span class="s">)</span><span class="sc">;</span></li></ol></pre><p>See <a href="#The-UTF8-flag">The UTF8 flag</a> below.</p>
<p>Also note that:</p>
<pre class="verbatim"><ol><li>  <span class="i">from_to</span><span class="s">(</span><span class="i">$octets</span><span class="cm">,</span> <span class="i">$from</span><span class="cm">,</span> <span class="i">$to</span><span class="cm">,</span> <span class="i">$check</span><span class="s">)</span><span class="sc">;</span></li></ol></pre><p>is equivalent t:o</p>
<pre class="verbatim"><ol><li>  <span class="i">$octets</span> = <span class="i">encode</span><span class="s">(</span><span class="i">$to</span><span class="cm">,</span> <span class="i">decode</span><span class="s">(</span><span class="i">$from</span><span class="cm">,</span> <span class="i">$octets</span><span class="s">)</span><span class="cm">,</span> <span class="i">$check</span><span class="s">)</span><span class="sc">;</span></li></ol></pre><p>Yes, it does <i>not</i> respect the $check during decoding.  It is
deliberately done that way.  If you need minute control, use <code class="inline"><span class="w">decode</span></code>

followed by <code class="inline"><span class="w">encode</span></code>
 as follows:</p>
<pre class="verbatim"><ol><li>  <span class="i">$octets</span> = <span class="i">encode</span><span class="s">(</span><span class="i">$to</span><span class="cm">,</span> <span class="i">decode</span><span class="s">(</span><span class="i">$from</span><span class="cm">,</span> <span class="i">$octets</span><span class="cm">,</span> <span class="i">$check_from</span><span class="s">)</span><span class="cm">,</span> <span class="i">$check_to</span><span class="s">)</span><span class="sc">;</span></li></ol></pre><a class='view-head3' id="encode_utf8"></a><h4 class='h4' >encode_utf8</h4>
<pre class="verbatim"><ol><li>  <span class="i">$octets</span> = <span class="i">encode_utf8</span><span class="s">(</span><span class="i">$string</span><span class="s">)</span><span class="sc">;</span></li></ol></pre><p>Equivalent to <code class="inline"><span class="i">$octets</span> = <span class="i">encode</span><span class="s">(</span><span class="q">&quot;utf8&quot;</span><span class="cm">,</span> <span class="i">$string</span><span class="s">)</span></code>
.  The characters in
$string are encoded in Perl's internal format, and the result is returned
as a sequence of octets.  Because all possible characters in Perl have a
(loose, not strict) UTF-8 representation, this function cannot fail.</p>
<a class='view-head3' id="decode_utf8"></a><h4 class='h4' >decode_utf8</h4>
<pre class="verbatim"><ol><li>  <span class="i">$string</span> = <span class="i">decode_utf8</span><span class="s">(</span><span class="i">$octets</span> [<span class="cm">,</span> <a class="l_k" href="functions/CHECK.html">CHECK</a>]<span class="s">)</span><span class="sc">;</span></li></ol></pre><p>Equivalent to <code class="inline"><span class="i">$string</span> = <span class="i">decode</span><span class="s">(</span><span class="q">&quot;utf8&quot;</span><span class="cm">,</span> <span class="i">$octets</span> [<span class="cm">,</span> <a class="l_k" href="functions/CHECK.html">CHECK</a>]<span class="s">)</span></code>
.
The sequence of octets represented by $octets is decoded
from UTF-8 into a sequence of logical characters.
Because not all sequences of octets are valid UTF-8,
it is quite possible for this function to fail.
For CHECK, see <a href="#Handling-Malformed-Data">Handling Malformed Data</a>.</p>
<a class='view-head2' id="Listing-available-encodings"></a><h3 class='h3' >Listing available encodings</h3>
<pre class="verbatim"><ol><li>  <a class="l_k" href="functions/use.html">use</a> <span class="w">Encode</span><span class="sc">;</span></li><li>  <span class="i">@list</span> = <span class="w">Encode</span><span class="w">-&gt;encodings</span><span class="s">(</span><span class="s">)</span><span class="sc">;</span></li></ol></pre><p>Returns a list of canonical names of available encodings that have already
been loaded.  To get a list of all available encodings including those that
have not yet been loaded, say:</p>
<pre class="verbatim"><ol><li>  <span class="i">@all_encodings</span> = <span class="w">Encode</span><span class="w">-&gt;encodings</span><span class="s">(</span><span class="q">&quot;:all&quot;</span><span class="s">)</span><span class="sc">;</span></li></ol></pre><p>Or you can give the name of a specific module:</p>
<pre class="verbatim"><ol><li>  <span class="i">@with_jp</span> = <span class="w">Encode</span><span class="w">-&gt;encodings</span><span class="s">(</span><span class="q">&quot;Encode::JP&quot;</span><span class="s">)</span><span class="sc">;</span></li></ol></pre><p>When "<code class="inline"><span class="w">::</span></code>
" is not in the name, "<code class="inline"><span class="w">Encode::</span></code>
" is assumed.</p>
<pre class="verbatim"><ol><li>  <span class="i">@ebcdic</span> = <span class="w">Encode</span><span class="w">-&gt;encodings</span><span class="s">(</span><span class="q">&quot;EBCDIC&quot;</span><span class="s">)</span><span class="sc">;</span></li></ol></pre><p>To find out in detail which encodings are supported by this package,
see <a href="Encode/Supported.html">Encode::Supported</a>.</p>
<a class='view-head2' id="Defining-Aliases"></a><h3 class='h3' >Defining Aliases</h3>
<p>To add a new alias to a given encoding, use:</p>
<pre class="verbatim"><ol><li>  <a class="l_k" href="functions/use.html">use</a> <span class="w">Encode</span><span class="sc">;</span></li><li>  <a class="l_k" href="functions/use.html">use</a> <span class="w">Encode::Alias</span><span class="sc">;</span></li><li>  <span class="i">define_alias</span><span class="s">(</span><span class="w">NEWNAME</span> <span class="cm">=&gt;</span> <span class="w">ENCODING</span><span class="s">)</span><span class="sc">;</span></li></ol></pre><p>After that, <i>NEWNAME</i> can be used as an alias for <i>ENCODING</i>.
<i>ENCODING</i> may be either the name of an encoding or an
<i>encoding object</i>.</p>
<p>Before you do that, first make sure the alias is nonexistent using
<code class="inline"><span class="i">resolve_alias</span><span class="s">(</span><span class="s">)</span></code>
, which returns the canonical name thereof.
For example:</p>
<pre class="verbatim"><ol><li>  <span class="i">Encode::resolve_alias</span><span class="s">(</span><span class="q">&quot;latin1&quot;</span><span class="s">)</span> <a class="l_k" href="functions/eq.html">eq</a> <span class="q">&quot;iso-8859-1&quot;</span> <span class="c"># true</span></li><li>  <span class="i">Encode::resolve_alias</span><span class="s">(</span><span class="q">&quot;iso-8859-12&quot;</span><span class="s">)</span>   <span class="c"># false; nonexistent</span></li><li>  <span class="i">Encode::resolve_alias</span><span class="s">(</span><span class="i">$name</span><span class="s">)</span> <a class="l_k" href="functions/eq.html">eq</a> <span class="i">$name</span>  <span class="c"># true if $name is canonical</span></li></ol></pre><p><code class="inline"><span class="i">resolve_alias</span><span class="s">(</span><span class="s">)</span></code>
 does not need <code class="inline"><a class="l_k" href="functions/use.html">use</a> <span class="w">Encode::Alias</span></code>
; it can be
imported via <code class="inline"><a class="l_k" href="functions/use.html">use</a> <span class="w">Encode</span> <span class="q">qw(resolve_alias)</span></code>
.</p>
<p>See <a href="Encode/Alias.html">Encode::Alias</a> for details.</p>
<a class='view-head2' id="Finding-IANA-Character-Set-Registry-names"></a><h3 class='h3' >Finding IANA Character Set Registry names</h3>
<p>The canonical name of a given encoding does not necessarily agree with
IANA Character Set Registry, commonly seen as <code class="inline">Content-Type:
text/plain; charset=<i>WHATEVER</i></code>.  For most cases, the canonical name
works, but sometimes it does not, most notably with "utf-8-strict".</p>
<p>As of <code class="inline"><span class="w">Encode</span></code>
 version 2.21, a new method <code class="inline"><span class="i">mime_name</span><span class="s">(</span><span class="s">)</span></code>
 is therefore added.</p>
<pre class="verbatim"><ol><li>  <a class="l_k" href="functions/use.html">use</a> <span class="w">Encode</span><span class="sc">;</span></li><li>  <a class="l_k" href="functions/my.html">my</a> <span class="i">$enc</span> = <span class="i">find_encoding</span><span class="s">(</span><span class="q">&quot;UTF-8&quot;</span><span class="s">)</span><span class="sc">;</span></li><li>  <a class="l_k" href="functions/warn.html">warn</a> <span class="i">$enc</span><span class="i">-&gt;name</span><span class="sc">;</span>      <span class="c"># utf-8-strict</span></li><li>  <a class="l_k" href="functions/warn.html">warn</a> <span class="i">$enc</span><span class="i">-&gt;mime_name</span><span class="sc">;</span> <span class="c"># UTF-8</span></li></ol></pre><p>See also:  <a href="Encode/Encoding.html">Encode::Encoding</a></p>
<a class='view-head1' id="Encoding-via-PerlIO"></a><h2 class='h2' >Encoding via PerlIO</h2>
<p>If your perl supports <code class="inline"><span class="w">PerlIO</span></code>
 (which is the default), you can use a
<code class="inline"><span class="w">PerlIO</span></code>
 layer to decode and encode directly via a filehandle.  The
following two examples are fully identical in functionality:</p>
<pre class="verbatim"><ol><li>  <span class="c">### Version 1 via PerlIO</span></li><li>    <a class="l_k" href="functions/open.html">open</a><span class="s">(</span><span class="w">INPUT</span><span class="cm">,</span>  <span class="q">&quot;&lt; :encoding(shiftjis)&quot;</span><span class="cm">,</span> <span class="i">$infile</span><span class="s">)</span></li><li>        || <a class="l_k" href="functions/die.html">die</a> <span class="q">&quot;Can&#39;t open &lt; $infile for reading: $!&quot;</span><span class="sc">;</span></li><li>    <a class="l_k" href="functions/open.html">open</a><span class="s">(</span><span class="w">OUTPUT</span><span class="cm">,</span> <span class="q">&quot;&gt; :encoding(euc-jp)&quot;</span><span class="cm">,</span>  <span class="i">$outfile</span><span class="s">)</span></li><li>        || <a class="l_k" href="functions/die.html">die</a> <span class="q">&quot;Can&#39;t open &gt; $output for writing: $!&quot;</span><span class="sc">;</span></li><li>    <a class="l_k" href="functions/while.html">while</a> <span class="s">(</span><span class="q">&lt;INPUT&gt;</span><span class="s">)</span> <span class="s">{</span>   <span class="c"># auto decodes $_</span></li><li>        <a class="l_k" href="functions/print.html">print</a> <span class="i">OUTPUT</span><span class="sc">;</span>   <span class="c"># auto encodes $_</span></li><li>    <span class="s">}</span></li><li>    <a class="l_k" href="functions/close.html">close</a><span class="s">(</span><span class="w">INPUT</span><span class="s">)</span>   || <a class="l_k" href="functions/die.html">die</a> <span class="q">&quot;can&#39;t close $infile: $!&quot;</span><span class="sc">;</span></li><li>    <a class="l_k" href="functions/close.html">close</a><span class="s">(</span><span class="w">OUTPUT</span><span class="s">)</span>  || <a class="l_k" href="functions/die.html">die</a> <span class="q">&quot;can&#39;t close $outfile: $!&quot;</span><span class="sc">;</span></li><li></li><li>  <span class="c">### Version 2 via from_to()</span></li><li>    <a class="l_k" href="functions/open.html">open</a><span class="s">(</span><span class="w">INPUT</span><span class="cm">,</span>  <span class="q">&quot;&lt; :raw&quot;</span><span class="cm">,</span> <span class="i">$infile</span><span class="s">)</span></li><li>        || <a class="l_k" href="functions/die.html">die</a> <span class="q">&quot;Can&#39;t open &lt; $infile for reading: $!&quot;</span><span class="sc">;</span></li><li>    <a class="l_k" href="functions/open.html">open</a><span class="s">(</span><span class="w">OUTPUT</span><span class="cm">,</span> <span class="q">&quot;&gt; :raw&quot;</span><span class="cm">,</span>  <span class="i">$outfile</span><span class="s">)</span></li><li>        || <a class="l_k" href="functions/die.html">die</a> <span class="q">&quot;Can&#39;t open &gt; $output for writing: $!&quot;</span><span class="sc">;</span></li><li></li><li>    <a class="l_k" href="functions/while.html">while</a> <span class="s">(</span><span class="q">&lt;INPUT&gt;</span><span class="s">)</span> <span class="s">{</span></li><li>        <span class="i">from_to</span><span class="s">(</span><span class="i">$_</span><span class="cm">,</span> <span class="q">&quot;shiftjis&quot;</span><span class="cm">,</span> <span class="q">&quot;euc-jp&quot;</span><span class="cm">,</span> <span class="n">1</span><span class="s">)</span><span class="sc">;</span>  <span class="c"># switch encoding</span></li><li>        <a class="l_k" href="functions/print.html">print</a> <span class="i">OUTPUT</span><span class="sc">;</span>   <span class="c"># emit raw (but properly encoded) data</span></li><li>    <span class="s">}</span></li><li>    <a class="l_k" href="functions/close.html">close</a><span class="s">(</span><span class="w">INPUT</span><span class="s">)</span>   || <a class="l_k" href="functions/die.html">die</a> <span class="q">&quot;can&#39;t close $infile: $!&quot;</span><span class="sc">;</span></li><li>    <a class="l_k" href="functions/close.html">close</a><span class="s">(</span><span class="w">OUTPUT</span><span class="s">)</span>  || <a class="l_k" href="functions/die.html">die</a> <span class="q">&quot;can&#39;t close $outfile: $!&quot;</span><span class="sc">;</span></li></ol></pre><p>In the first version above, you let the appropriate encoding layer
handle the conversion.  In the second, you explicitly translate
from one encoding to the other.</p>
<p>Unfortunately, it may be that encodings are <code class="inline"><span class="w">PerlIO</span></code>
-savvy.  You can check
to see whether your encoding is supported by <code class="inline"><span class="w">PerlIO</span></code>
 by invoking the
<code class="inline"><span class="w">perlio_ok</span></code>
 method on it:</p>
<pre class="verbatim"><ol><li>  <span class="i">Encode::perlio_ok</span><span class="s">(</span><span class="q">&quot;hz&quot;</span><span class="s">)</span><span class="sc">;</span>             <span class="c"># false</span></li><li>  <span class="i">find_encoding</span><span class="s">(</span><span class="q">&quot;euc-cn&quot;</span><span class="s">)</span><span class="i">-&gt;perlio_ok</span><span class="sc">;</span>  <span class="c"># true wherever PerlIO is available</span></li><li></li><li>  <a class="l_k" href="functions/use.html">use</a> <span class="w">Encode</span> <span class="q">qw(perlio_ok)</span><span class="sc">;</span>            <span class="c"># imported upon request</span></li><li>  <span class="i">perlio_ok</span><span class="s">(</span><span class="q">&quot;euc-jp&quot;</span><span class="s">)</span></li></ol></pre><p>Fortunately, all encodings that come with <code class="inline"><span class="w">Encode</span></code>
 core are <code class="inline"><span class="w">PerlIO</span></code>
-savvy
except for <code class="inline"><span class="w">hz</span></code>
 and <code class="inline"><span class="w">ISO</span>-<span class="n">2022</span>-<span class="w">kr</span></code>
.  For the gory details, see
<a href="Encode/Encoding.html">Encode::Encoding</a> and <a href="Encode/PerlIO.html">Encode::PerlIO</a>.</p>
<a class='view-head1' id="Handling-Malformed-Data"></a><h2 class='h2' >Handling Malformed Data</h2>
<p>The optional <i>CHECK</i> argument tells <code class="inline"><span class="w">Encode</span></code>
 what to do when
encountering malformed data.  Without <i>CHECK</i>, <code class="inline"><span class="w">Encode::FB_DEFAULT</span></code>

(== 0) is assumed.</p>
<p>As of version 2.12, <code class="inline"><span class="w">Encode</span></code>
 supports coderef values for <code class="inline"><a class="l_k" href="functions/CHECK.html">CHECK</a></code>;
see below.</p>
<p><strong>NOTE:</strong> Not all encodings support this feature.
Some encodings ignore the <i>CHECK</i> argument.  For example,
<a href="Encode/Unicode.html">Encode::Unicode</a> ignores <i>CHECK</i> and it always croaks on error.</p>
<a class='view-head2' id="List-of-_CHECK_-values"></a><h3 class='h3' >List of <i>CHECK</i> values</h3>
<a class='view-head3' id="FB_DEFAULT"></a><h4 class='h4' >FB_DEFAULT</h4>
<pre class="verbatim"><ol><li>  <span class="w">I</span><span class="q">&lt;CHECK&gt;</span> = <span class="w">Encode::FB_DEFAULT</span> <span class="s">(</span> == <span class="n">0</span><span class="s">)</span></li></ol></pre><p>If <i>CHECK</i> is 0, encoding and decoding replace any malformed character
with a <i>substitution character</i>.  When you encode, <i>SUBCHAR</i> is used.
When you decode, the Unicode REPLACEMENT CHARACTER, code point U+FFFD, is
used.  If the data is supposed to be UTF-8, an optional lexical warning of
warning category <code class="inline"><span class="q">&quot;utf8&quot;</span></code>
 is given.</p>
<a class='view-head3' id="FB_CROAK"></a><h4 class='h4' >FB_CROAK</h4>
<pre class="verbatim"><ol><li>  <span class="w">I</span><span class="q">&lt;CHECK&gt;</span> = <span class="w">Encode::FB_CROAK</span> <span class="s">(</span> == <span class="n">1</span><span class="s">)</span></li></ol></pre><p>If <i>CHECK</i> is 1, methods immediately die with an error
message.  Therefore, when <i>CHECK</i> is 1, you should trap
exceptions with <code class="inline"><a class="l_k" href="functions/eval.html">eval{}</a></code>, unless you really want to let it <code class="inline"><a class="l_k" href="functions/die.html">die</a></code>.</p>
<a class='view-head3' id="FB_QUIET"></a><h4 class='h4' >FB_QUIET</h4>
<pre class="verbatim"><ol><li>  <span class="w">I</span><span class="q">&lt;CHECK&gt;</span> = <span class="w">Encode::FB_QUIET</span></li></ol></pre><p>If <i>CHECK</i> is set to <code class="inline"><span class="w">Encode::FB_QUIET</span></code>
, encoding and decoding immediately
return the portion of the data that has been processed so far when an
error occurs. The data argument is overwritten with everything
after that point; that is, the unprocessed portion of the data.  This is
handy when you have to call <code class="inline"><span class="w">decode</span></code>
 repeatedly in the case where your
source data may contain partial multi-byte character sequences,
(that is, you are reading with a fixed-width buffer). Here's some sample
code to do exactly that:</p>
<pre class="verbatim"><ol><li>    <a class="l_k" href="functions/my.html">my</a><span class="s">(</span><span class="i">$buffer</span><span class="cm">,</span> <span class="i">$string</span><span class="s">)</span> = <span class="s">(</span><span class="q">&quot;&quot;</span><span class="cm">,</span> <span class="q">&quot;&quot;</span><span class="s">)</span><span class="sc">;</span></li><li>    <a class="l_k" href="functions/while.html">while</a> <span class="s">(</span><a class="l_k" href="functions/read.html">read</a><span class="s">(</span><span class="i">$fh</span><span class="cm">,</span> <span class="i">$buffer</span><span class="cm">,</span> <span class="n">256</span><span class="cm">,</span> <a class="l_k" href="functions/length.html">length</a><span class="s">(</span><span class="i">$buffer</span><span class="s">)</span><span class="s">)</span><span class="s">)</span> <span class="s">{</span></li><li>        <span class="i">$string</span> .= <span class="i">decode</span><span class="s">(</span><span class="i">$encoding</span><span class="cm">,</span> <span class="i">$buffer</span><span class="cm">,</span> <span class="w">Encode::FB_QUIET</span><span class="s">)</span><span class="sc">;</span></li><li>        <span class="c"># $buffer now contains the unprocessed partial character</span></li><li>    <span class="s">}</span></li></ol></pre><a class='view-head3' id="FB_WARN"></a><h4 class='h4' >FB_WARN</h4>
<pre class="verbatim"><ol><li>  <span class="w">I</span><span class="q">&lt;CHECK&gt;</span> = <span class="w">Encode::FB_WARN</span></li></ol></pre><p>This is the same as <code class="inline"><span class="w">FB_QUIET</span></code>
 above, except that instead of being silent
on errors, it issues a warning.  This is handy for when you are debugging.</p>
<a class='view-head3' id="FB_PERLQQ-FB_HTMLCREF-FB_XMLCREF"></a><h4 class='h4' >FB_PERLQQ FB_HTMLCREF FB_XMLCREF</h4>
<ul>
<li><a class='view-title' id="perlqq-mode-(_CHECK_-%3d-Encode%3a%3aFB_PERLQQ)"></a><strong>perlqq mode (<i>CHECK</i> = Encode::FB_PERLQQ)</strong>
</li>
<li><a class='view-title' id="HTML-charref-mode-(_CHECK_-%3d-Encode%3a%3aFB_HTMLCREF)"></a><strong>HTML charref mode (<i>CHECK</i> = Encode::FB_HTMLCREF)</strong>
</li>
<li><a class='view-title' id="XML-charref-mode-(_CHECK_-%3d-Encode%3a%3aFB_XMLCREF)"></a><strong>XML charref mode (<i>CHECK</i> = Encode::FB_XMLCREF)</strong>
</li>
</ul>
<p>For encodings that are implemented by the <code class="inline"><span class="w">Encode::XS</span></code>
 module, <code class="inline"><a class="l_k" href="functions/CHECK.html">CHECK</a></code> <code class="inline">==</code>

<code class="inline"><span class="w">Encode::FB_PERLQQ</span></code>
 puts <code class="inline"><span class="w">encode</span></code>
 and <code class="inline"><span class="w">decode</span></code>
 into <code class="inline"><span class="w">perlqq</span></code>
 fallback mode.</p>
<p>When you decode, <code class="inline">\x<i>HH</i></code> is inserted for a malformed character, where
<i>HH</i> is the hex representation of the octet that could not be decoded to
utf8.  When you encode, <code class="inline">\x{<i>HHHH</i>}</code> will be inserted, where <i>HHHH</i> is
the Unicode code point (in any number of hex digits) of the character that
cannot be found in the character repertoire of the encoding.</p>
<p>The HTML/XML character reference modes are about the same. In place of
<code class="inline">\x{<i>HHHH</i>}</code>, HTML uses <code class="inline">&amp;#<i>NNN</i>;</code> where <i>NNN</i> is a decimal number, and
XML uses <code class="inline">&amp;#x<i>HHHH</i>;</code> where <i>HHHH</i> is the hexadecimal number.</p>
<p>In <code class="inline"><span class="w">Encode</span></code>
 2.10 or later, <code class="inline"><span class="w">LEAVE_SRC</span></code>
 is also implied.</p>
<a class='view-head3' id="The-bitmask"></a><h4 class='h4' >The bitmask</h4>
<p>These modes are all actually set via a bitmask.  Here is how the <code class="inline">FB_<i>XXX</i></code>
constants are laid out.  You can import the <code class="inline">FB_<i>XXX</i></code> constants via
<code class="inline"><a class="l_k" href="functions/use.html">use</a> <span class="w">Encode</span> <span class="q">qw(:fallbacks)</span></code>
, and you can import the generic bitmask
constants via <code class="inline"><a class="l_k" href="functions/use.html">use</a> <span class="w">Encode</span> <span class="q">qw(:fallback_all)</span></code>
.</p>
<pre class="verbatim"><ol><li>                     <span class="w">FB_DEFAULT</span> <span class="w">FB_CROAK</span> <span class="w">FB_QUIET</span> <span class="w">FB_WARN</span>  <span class="w">FB_PERLQQ</span></li><li> <span class="w">DIE_ON_ERR</span>    <span class="n">0x0001</span>             <span class="w">X</span></li><li> <span class="w">WARN_ON_ERR</span>   <span class="n">0x0002</span>                               <span class="w">X</span></li><li> <span class="w">RETURN_ON_ERR</span> <span class="n">0x0004</span>                      <span class="w">X</span>        <span class="w">X</span></li><li> <span class="w">LEAVE_SRC</span>     <span class="n">0x0008</span>                                        <span class="w">X</span></li><li> <span class="w">PERLQQ</span>        <span class="n">0x0100</span>                                        <span class="w">X</span></li><li> <span class="w">HTMLCREF</span>      <span class="n">0x0200</span></li><li> <span class="w">XMLCREF</span>       <span class="n">0x0400</span></li></ol></pre><a class='view-head3' id="LEAVE_SRC"></a><h4 class='h4' >LEAVE_SRC</h4>
<pre class="verbatim"><ol><li>  <span class="w">Encode::LEAVE_SRC</span></li></ol></pre><p>If the <code class="inline"><span class="w">Encode::LEAVE_SRC</span></code>
 bit is <i>not</i> set but <i>CHECK</i> is set, then the
source string to encode() or decode() will be overwritten in place.
If you're not interested in this, then bitwise-OR it with the bitmask.</p>
<a class='view-head2' id="coderef-for-CHECK"></a><h3 class='h3' >coderef for CHECK</h3>
<p>As of <code class="inline"><span class="w">Encode</span></code>
 2.12, <code class="inline"><a class="l_k" href="functions/CHECK.html">CHECK</a></code> can also be a code reference which takes the
ordinal value of the unmapped character as an argument and returns
octets that represent the fallback character.  For instance:</p>
<pre class="verbatim"><ol><li>  <span class="i">$ascii</span> = <span class="i">encode</span><span class="s">(</span><span class="q">&quot;ascii&quot;</span><span class="cm">,</span> <span class="i">$utf8</span><span class="cm">,</span> <a class="l_k" href="functions/sub.html">sub</a><span class="s">{</span> <a class="l_k" href="functions/sprintf.html">sprintf</a> <span class="q">&quot;&lt;U+%04X&gt;&quot;</span><span class="cm">,</span> <a class="l_k" href="functions/shift.html">shift</a> <span class="s">}</span><span class="s">)</span><span class="sc">;</span></li></ol></pre><p>Acts like <code class="inline"><span class="w">FB_PERLQQ</span></code>
 but U+<i>XXXX</i> is used instead of <code class="inline">\x{<i>XXXX</i>}</code>.</p>
<p>Even the fallback for <code class="inline"><span class="w">decode</span></code>
 must return octets, which are
then decoded with the character encoding that <code class="inline"><span class="w">decode</span></code>
 accepts. So for
example if you wish to decode octests as UTF-8, and use ISO-8859-15 as
a fallback for bytes that are not valid UTF-8, you could write</p>
<pre class="verbatim"><ol><li>    <span class="i">$str</span> = <span class="w">decode</span> <span class="q">&#39;UTF-8&#39;</span><span class="cm">,</span> <span class="i">$octets</span><span class="cm">,</span> <a class="l_k" href="functions/sub.html">sub</a> <span class="s">{</span></li><li>        <a class="l_k" href="functions/my.html">my</a> <span class="i">$tmp</span> = <a class="l_k" href="functions/chr.html">chr</a> <a class="l_k" href="functions/shift.html">shift</a><span class="sc">;</span></li><li>        <span class="w">from_to</span> <span class="i">$tmp</span><span class="cm">,</span> <span class="q">&#39;ISO-8859-15&#39;</span><span class="cm">,</span> <span class="q">&#39;UTF-8&#39;</span><span class="sc">;</span></li><li>        <a class="l_k" href="functions/return.html">return</a> <span class="i">$tmp</span><span class="sc">;</span></li><li>    <span class="s">}</span><span class="sc">;</span></li></ol></pre><a class='view-head1' id="Defining-Encodings"></a><h2 class='h2' >Defining Encodings</h2>
<p>To define a new encoding, use:</p>
<pre class="verbatim"><ol><li>    <a class="l_k" href="functions/use.html">use</a> <span class="w">Encode</span> <span class="q">qw(define_encoding)</span><span class="sc">;</span></li><li>    <span class="i">define_encoding</span><span class="s">(</span><span class="i">$object</span><span class="cm">,</span> <span class="w">CANONICAL_NAME</span> <span class="s">[</span><span class="cm">,</span> <span class="w">alias</span>...<span class="s">]</span><span class="s">)</span><span class="sc">;</span></li></ol></pre><p><i>CANONICAL_NAME</i> will be associated with <i>$object</i>.  The object
should provide the interface described in <a href="Encode/Encoding.html">Encode::Encoding</a>.
If more than two arguments are provided, additional
arguments are considered aliases for <i>$object</i>.</p>
<p>See <a href="Encode/Encoding.html">Encode::Encoding</a> for details.</p>
<a class='view-head1' id="The-UTF8-flag"></a><h2 class='h2' >The UTF8 flag</h2>
<p>Before the introduction of Unicode support in Perl, The <code class="inline"><a class="l_k" href="functions/eq.html">eq</a></code> operator
just compared the strings represented by two scalars. Beginning with
Perl 5.8, <code class="inline"><a class="l_k" href="functions/eq.html">eq</a></code> compares two strings with simultaneous consideration of
<i>the UTF8 flag</i>. To explain why we made it so, I quote from page 402 of
<i>Programming Perl, 3rd ed.</i></p>
<ul>
<li><a class='view-title' id="Goal-%231%3a"></a><strong>Goal #1:</strong>
<p>Old byte-oriented programs should not spontaneously break on the old
byte-oriented data they used to work on.</p>
</li>
<li><a class='view-title' id="Goal-%232%3a"></a><strong>Goal #2:</strong>
<p>Old byte-oriented programs should magically start working on the new
character-oriented data when appropriate.</p>
</li>
<li><a class='view-title' id="Goal-%233%3a"></a><strong>Goal #3:</strong>
<p>Programs should run just as fast in the new character-oriented mode
as in the old byte-oriented mode.</p>
</li>
<li><a class='view-title' id="Goal-%234%3a"></a><strong>Goal #4:</strong>
<p>Perl should remain one language, rather than forking into a
byte-oriented Perl and a character-oriented Perl.</p>
</li>
</ul>
<p>When <i>Programming Perl, 3rd ed.</i> was written, not even Perl 5.6.0 had been
born yet, many features documented in the book remained unimplemented for a
long time.  Perl 5.8 corrected much of this, and the introduction of the
UTF8 flag is one of them.  You can think of there being two fundamentally
different kinds of strings and string-operations in Perl: one a
byte-oriented mode  for when the internal UTF8 flag is off, and the other a
character-oriented mode for when the internal UTF8 flag is on.</p>
<p>Here is how <code class="inline"><span class="w">Encode</span></code>
 handles the UTF8 flag.</p>
<ul>
<li>
<p>When you <i>encode</i>, the resulting UTF8 flag is always <strong>off</strong>.</p>
</li>
<li>
<p>When you <i>decode</i>, the resulting UTF8 flag is <strong>on</strong>--<i>unless</i> you can
unambiguously represent data.  Here is what we mean by "unambiguously".
After <code class="inline"><span class="i">$utf8</span> = <span class="i">decode</span><span class="s">(</span><span class="q">&quot;foo&quot;</span><span class="cm">,</span> <span class="i">$octet</span><span class="s">)</span></code>
,</p>
<pre class="verbatim"><ol><li>  <span class="w">When</span> <span class="i">$octet</span> <span class="w">is</span>...   <span class="w">The</span> <span class="w">UTF8</span> <span class="w">flag</span> <span class="w">in</span> <span class="i">$utf8</span> <span class="w">is</span></li><li>  ---------------------------------------------</li><li>  <span class="w">In</span> <span class="w">ASCII</span> <span class="w">only</span> <span class="s">(</span><a class="l_k" href="functions/or.html">or</a> <span class="w">EBCDIC</span> <span class="w">only</span><span class="s">)</span>            <span class="w">OFF</span></li><li>  <span class="w">In</span> <span class="w">ISO</span>-<span class="n">8859</span>-<span class="n">1</span>                              <span class="w">ON</span></li><li>  <span class="w">In</span> <span class="w">any</span> <span class="w">other</span> <span class="w">Encoding</span>                      <span class="w">ON</span></li><li>  ---------------------------------------------</li></ol></pre><p>As you see, there is one exception: in ASCII.  That way you can assume
Goal #1.  And with <code class="inline"><span class="w">Encode</span></code>
, Goal #2 is assumed but you still have to be
careful in the cases mentioned in the <strong>CAVEAT</strong> paragraphs above.</p>
<p>This UTF8 flag is not visible in Perl scripts, exactly for the same reason
you cannot (or rather, you <i>don't have to</i>) see whether a scalar contains
a string, an integer, or a floating-point number.   But you can still peek
and poke these if you will.  See the next section.</p>
</li>
</ul>
<a class='view-head2' id="Messing-with-Perl's-Internals"></a><h3 class='h3' >Messing with Perl's Internals</h3>
<p>The following API uses parts of Perl's internals in the current
implementation.  As such, they are efficient but may change in a future
release.</p>
<a class='view-head3' id="is_utf8"></a><h4 class='h4' >is_utf8</h4>
<pre class="verbatim"><ol><li>  <span class="i">is_utf8</span><span class="s">(</span><span class="w">STRING</span> <span class="s">[</span><span class="cm">,</span> <a class="l_k" href="functions/CHECK.html">CHECK</a><span class="s">]</span><span class="s">)</span></li></ol></pre><p>[INTERNAL] Tests whether the UTF8 flag is turned on in the <i>STRING</i>.
If <i>CHECK</i> is true, also checks whether <i>STRING</i> contains well-formed
UTF-8.  Returns true if successful, false otherwise.</p>
<p>As of Perl 5.8.1, <a href="utf8.html">utf8</a> also has the <code class="inline"><span class="w">utf8::is_utf8</span></code>
 function.</p>
<a class='view-head3' id="_utf8_on"></a><h4 class='h4' >_utf8_on</h4>
<pre class="verbatim"><ol><li>  <span class="i">_utf8_on</span><span class="s">(</span><span class="w">STRING</span><span class="s">)</span></li></ol></pre><p>[INTERNAL] Turns the <i>STRING</i>'s internal UTF8 flag <strong>on</strong>.  The <i>STRING</i>
is <i>not</i> checked for containing only well-formed UTF-8.  Do not use this
unless you <i>know with absolute certainty</i> that the STRING holds only
well-formed UTF-8.  Returns the previous state of the UTF8 flag (so please
don't treat the return value as indicating success or failure), or <code class="inline"><a class="l_k" href="functions/undef.html">undef</a></code>
if <i>STRING</i> is not a string.</p>
<p><strong>NOTE</strong>: For security reasons, this function does not work on tainted values.</p>
<a class='view-head3' id="_utf8_off"></a><h4 class='h4' >_utf8_off</h4>
<pre class="verbatim"><ol><li>  <span class="i">_utf8_off</span><span class="s">(</span><span class="w">STRING</span><span class="s">)</span></li></ol></pre><p>[INTERNAL] Turns the <i>STRING</i>'s internal UTF8 flag <strong>off</strong>.  Do not use
frivolously.  Returns the previous state of the UTF8 flag, or <code class="inline"><a class="l_k" href="functions/undef.html">undef</a></code> if
<i>STRING</i> is not a string.  Do not treat the return value as indicative of
success or failure, because that isn't what it means: it is only the
previous setting.</p>
<p><strong>NOTE</strong>: For security reasons, this function does not work on tainted values.</p>
<a class='view-head1' id="UTF-8-vs.-utf8-vs.-UTF8"></a><h2 class='h2' >UTF-8 vs. utf8 vs. UTF8</h2>
<pre class="verbatim"><ol><li>  ....<span class="w">We</span> <span class="w">now</span> <span class="w">view</span> <span class="w">strings</span> <a class="l_k" href="functions/not.html">not</a> <span class="w">as</span> <span class="w">sequences</span> <span class="w">of</span> <span class="w">bytes</span><span class="cm">,</span> <span class="w">but</span> <span class="w">as</span> <span class="w">sequences</span></li><li>  <span class="w">of</span> <span class="w">numbers</span> <span class="w">in</span> <span class="w">the</span> <span class="w">range</span> <span class="n">0</span> .. <span class="n">2</span>**<span class="n">32</span>-<span class="n">1</span> <span class="s">(</span><a class="l_k" href="functions/or.html">or</a> <span class="w">in</span> <span class="w">the</span> case <span class="w">of</span> <span class="n">64</span>-<span class="w">bit</span></li><li>  <span class="w">computers</span><span class="cm">,</span> <span class="n">0</span> .. <span class="n">2</span>**<span class="n">64</span>-<span class="n">1</span><span class="s">)</span> -- <span class="w">Programming</span> <span class="w">Perl</span><span class="cm">,</span> <span class="n">3</span><span class="w">rd</span> <span class="w">ed</span>.</li></ol></pre><p>That has historically been Perl's notion of UTF-8, as that is how UTF-8 was
first conceived by Ken Thompson when he invented it. However, thanks to
later revisions to the applicable standards, official UTF-8 is now rather
stricter than that. For example, its range is much narrower (0 .. 0x10_FFFF
to cover only 21 bits instead of 32 or 64 bits) and some sequences
are not allowed, like those used in surrogate pairs, the 31 non-character
code points 0xFDD0 .. 0xFDEF, the last two code points in <i>any</i> plane
(0x<i>XX</i>_FFFE and 0x<i>XX</i>_FFFF), all non-shortest encodings, etc.</p>
<p>The former default in which Perl would always use a loose interpretation of
UTF-8 has now been overruled:</p>
<pre class="verbatim"><ol><li>  <span class="j">From:</span> <span class="w">Larry</span> <span class="w">Wall</span> <span class="q">&lt;larry@wall.org&gt;</span></li><li>  <span class="w">Date</span><span class="co">:</span> <span class="w">December</span> <span class="n">04</span><span class="cm">,</span> <span class="n">2004</span> <span class="n">11</span><span class="co">:</span><span class="n">51</span><span class="co">:</span><span class="n">58</span> <span class="w">JST</span></li><li>  <span class="w">To</span><span class="co">:</span> <span class="w">perl</span>-<span class="w">unicode</span><span class="i">@perl</span>.<span class="w">org</span></li><li>  <span class="w">Subject</span><span class="co">:</span> <span class="w">Re</span><span class="co">:</span> <span class="w">Make</span> <span class="w">Encode</span>.<span class="w">pm</span> <span class="w">support</span> <span class="w">the</span> <span class="w">real</span> <span class="w">UTF</span>-<span class="n">8</span></li><li>  <span class="w">Message</span>-<span class="w">Id</span><span class="co">:</span> <span class="q">&lt;20041204025158.GA28754@wall.org&gt;</span></li><li></li><li>  <span class="w">On</span> <span class="w">Fri</span><span class="cm">,</span> <span class="w">Dec</span> <span class="n">03</span><span class="cm">,</span> <span class="n">2004</span> <span class="w">at</span> <span class="n">10</span><span class="co">:</span><span class="n">12</span><span class="co">:</span><span class="n">12</span><span class="w">PM</span> +<span class="n">0000</span><span class="cm">,</span> <span class="w">Tim</span> <span class="w">Bunce</span> <span class="w">wrote</span><span class="co">:</span></li><li>  <span class="co">:</span> <span class="w">I&#39;ve</span> <a class="l_k" href="functions/no.html">no</a> <span class="w">problem</span> <span class="w">with</span> <span class="q">&#39;utf8&#39;</span> <span class="w">being</span> <span class="w">perl&#39;s</span> <span class="w">unrestricted</span> <span class="w">uft8</span> <span class="w">encoding</span><span class="cm">,</span></li><li>  <span class="co">:</span> <span class="w">but</span> <span class="q">&quot;UTF-8&quot;</span> <span class="w">is</span> <span class="w">the</span> <span class="w">name</span> <span class="w">of</span> <span class="w">the</span> <span class="w">standard</span> <a class="l_k" href="functions/and.html">and</a> <span class="w">should</span> <span class="w">give</span> <span class="w">the</span></li><li>  <span class="co">:</span> <span class="w">corresponding</span> <span class="w">behaviour</span>.</li><li></li><li>  <span class="w">For</span> <span class="w">what</span> <span class="w">it&#39;s</span> <span class="w">worth</span><span class="cm">,</span> <span class="w">that&#39;s</span> <span class="w">how</span> <span class="w">I&#39;ve</span> <span class="w">always</span> <span class="w">kept</span> <span class="w">them</span> <span class="w">straight</span> <span class="w">in</span> <a class="l_k" href="functions/my.html">my</a></li><li>  <span class="w">head</span>.</li><li></li><li>  <span class="w">Also</span> <a class="l_k" href="functions/for.html">for</a> <span class="w">what</span> <span class="w">it&#39;s</span> <span class="w">worth</span><span class="cm">,</span> <span class="w">Perl</span> <span class="n">6</span> <span class="w">will</span> <span class="w">mostly</span> <span class="w">default</span> <span class="w">to</span> <span class="w">strict</span> <span class="w">but</span></li><li>  <span class="w">make</span> <span class="w">it</span> <span class="w">easy</span> <span class="w">to</span> switch <span class="w">back</span> <span class="w">to</span> <span class="w">lax</span>.</li><li></li><li>  <span class="w">Larry</span></li></ol></pre><p>Got that?  As of Perl 5.8.7, <strong>"UTF-8"</strong> means UTF-8 in its current
sense, which is conservative and strict and security-conscious, whereas
<strong>"utf8"</strong> means UTF-8 in its former sense, which was liberal and loose and
lax.  <code class="inline"><span class="w">Encode</span></code>
 version 2.10 or later thus groks this subtle but critically
important distinction between <code class="inline"><span class="q">&quot;UTF-8&quot;</span></code>
 and <code class="inline"><span class="q">&quot;utf8&quot;</span></code>
.</p>
<pre class="verbatim"><ol><li>  <span class="i">encode</span><span class="s">(</span><span class="q">&quot;utf8&quot;</span><span class="cm">,</span>  <span class="q">&quot;\x{FFFF_FFFF}&quot;</span><span class="cm">,</span> <span class="n">1</span><span class="s">)</span><span class="sc">;</span> <span class="c"># okay</span></li><li>  <span class="i">encode</span><span class="s">(</span><span class="q">&quot;UTF-8&quot;</span><span class="cm">,</span> <span class="q">&quot;\x{FFFF_FFFF}&quot;</span><span class="cm">,</span> <span class="n">1</span><span class="s">)</span><span class="sc">;</span> <span class="c"># croaks</span></li></ol></pre><p>In the <code class="inline"><span class="w">Encode</span></code>
 module, <code class="inline"><span class="q">&quot;UTF-8&quot;</span></code>
 is actually a canonical name for
<code class="inline"><span class="q">&quot;utf-8-strict&quot;</span></code>
.  That hyphen between the <code class="inline"><span class="q">&quot;UTF&quot;</span></code>
 and the <code class="inline"><span class="q">&quot;8&quot;</span></code>
 is
critical; without it, <code class="inline"><span class="w">Encode</span></code>
 goes "liberal" and (perhaps overly-)permissive:</p>
<pre class="verbatim"><ol><li>  <span class="i">find_encoding</span><span class="s">(</span><span class="q">&quot;UTF-8&quot;</span><span class="s">)</span><span class="i">-&gt;name</span> <span class="c"># is &#39;utf-8-strict&#39;</span></li><li>  <span class="i">find_encoding</span><span class="s">(</span><span class="q">&quot;utf-8&quot;</span><span class="s">)</span><span class="i">-&gt;name</span> <span class="c"># ditto. names are case insensitive</span></li><li>  <span class="i">find_encoding</span><span class="s">(</span><span class="q">&quot;utf_8&quot;</span><span class="s">)</span><span class="i">-&gt;name</span> <span class="c"># ditto. &quot;_&quot; are treated as &quot;-&quot;</span></li><li>  <span class="i">find_encoding</span><span class="s">(</span><span class="q">&quot;UTF8&quot;</span><span class="s">)</span><span class="i">-&gt;name</span>  <span class="c"># is &#39;utf8&#39;.</span></li></ol></pre><p>Perl's internal UTF8 flag is called "UTF8", without a hyphen. It indicates
whether a string is internally encoded as "utf8", also without a hyphen.</p>
<a class='view-head1' id="SEE-ALSO"></a><h2 class='h2' >SEE ALSO</h2>
<p><a href="Encode/Encoding.html">Encode::Encoding</a>,
<a href="Encode/Supported.html">Encode::Supported</a>,
<a href="Encode/PerlIO.html">Encode::PerlIO</a>,
<a href="encoding.html">encoding</a>,
<a href="perlebcdic.html">perlebcdic</a>,
<a class='function-name' href="functions/open.html">open</a>,
<a href="perlunicode.html">perlunicode</a>, <a href="perluniintro.html">perluniintro</a>, <a href="perlunifaq.html">perlunifaq</a>, <a href="perlunitut.html">perlunitut</a>
<a href="utf8.html">utf8</a>,
the Perl Unicode Mailing List <a href="http://lists.perl.org/list/perl-unicode.html">http://lists.perl.org/list/perl-unicode.html</a></p>
<a class='view-head1' id="MAINTAINER"></a><h2 class='h2' >MAINTAINER</h2>
<p>This project was originated by the late Nick Ing-Simmons and later
maintained by Dan Kogai <i>&lt;dankogai@cpan.org&gt;</i>.  See AUTHORS
for a full list of people involved.  For any questions, send mail to
<i>&lt;perl-unicode@perl.org&gt;</i> so that we can all share.</p>
<p>While Dan Kogai retains the copyright as a maintainer, credit
should go to all those involved.  See AUTHORS for a list of those
who submitted code to the project.</p>
<a class='view-head1' id="COPYRIGHT"></a><h2 class='h2' >COPYRIGHT</h2>
<p>Copyright 2002-2013 Dan Kogai <i>&lt;dankogai@cpan.org&gt;</i>.</p>
<p>This library is free software; you can redistribute it and/or modify
it under the same terms as Perl itself.</p>




      <ul><li><a href="#NAME">NAME</a></li><li><a href="#SYNOPSIS">SYNOPSIS</a></li><ul><li><a href="#Table-of-Contents">Table of Contents</a></li></ul><li><a href="#DESCRIPTION">DESCRIPTION</a></li><ul><li><a href="#TERMINOLOGY">TERMINOLOGY</a></li></ul><li><a href="#THE-PERL-ENCODING-API">THE PERL ENCODING API</a></li><ul><li><a href="#Basic-methods">Basic methods</a></li><li><a href="#Listing-available-encodings">Listing available encodings</a></li><li><a href="#Defining-Aliases">Defining Aliases</a></li><li><a href="#Finding-IANA-Character-Set-Registry-names">Finding IANA Character Set Registry names</a></li></ul><li><a href="#Encoding-via-PerlIO">Encoding via PerlIO</a></li><li><a href="#Handling-Malformed-Data">Handling Malformed Data</a></li><ul><li><a href="#List-of-_CHECK_-values">List of _CHECK_ values</a></li><li><a href="#coderef-for-CHECK">coderef for CHECK</a></li></ul><li><a href="#Defining-Encodings">Defining Encodings</a></li><li><a href="#The-UTF8-flag">The UTF8 flag</a></li><ul><li><a href="#Messing-with-Perl's-Internals">Messing with Perl's Internals</a></li></ul><li><a href="#UTF-8-vs.-utf8-vs.-UTF8">UTF-8 vs. utf8 vs. UTF8</a></li><li><a href="#SEE-ALSO">SEE ALSO</a></li><li><a href="#MAINTAINER">MAINTAINER</a></li><li><a href="#COPYRIGHT">COPYRIGHT</a></li></ul>


                  </div>
                </article>
              </div>
            </div>
          </main>
        </div>
           <footer class="footer row bg-light pt-5 pb-5">
       <div class="col-sm-10 offset-sm-1 col-xl-8 offset-xl-2">
           <div class="row">
               <div class="col-md-4">
                   <ul class="list-unstyled">
                       <li>
                           <h4>Site info</h4>
                       </li>
                       <li>Docs mantained by
                           <a href="//lists.perl.org/list/perl5-porters.html"
                               rel="noopener">Perl 5 Porters</a>
                       </li>
                       <li>Perldoc site development sponsored by
                           <a href="//opusvl.com" rel="noopener">
                           <img style="margin: 20px 20px 5px 10px" class="opus-logo" src="/public/img/opusvl_logo.svg" alt="OpusVL Logo">
                        </a>
                    <li><span class="about_perldoc"><a href="//about.html">About PerlDOC</a></span>
                    </li>
                       </li>
                   </ul>
               </div>
               <div class="col-md-8">
                   <div class="row">
                       <div class="col-md-6 col-lg-3">
                           <ul class=" list-unstyled">
                               <li>
                                   <h4>Manuals</h4>
                               </li>
                               <li>
                                   <a
                                       href="/5.20.2/index-overview.html">Overview</a>
                               </li>
                               <li>
                                   <a
                                       href="/5.20.2/index-tutorials.html">Tutorials</a>
                               </li>
                               <li>
                                   <a href="/5.20.2/index-faq.html">FAQs</a>
                               </li>
                               <li>
                                   <a
                                       href="/5.20.2/index-history.html">Changes</a>
                               </li>
                           </ul>
                       </div>
                       <div class="col-md-6 col-lg-3">
                           <ul class=" list-unstyled">
                               <li>
                                   <h4>Reference</h4>
                               </li>
                               <li>
                                   <a
                                       href="/5.20.2/index-language.html">Language</a>
                               </li>
                               <li>
                                   <a
                                       href="/5.20.2/index-functions.html">Functions</a>
                               </li>
                               <li>
                                   <a
                                       href="/5.20.2/perlop.html">Operators</a>
                               </li>
                               <li>
                                   <a
                                       href="/5.20.2/perlvar.html">Variables</a>
                               </li>
                           </ul>
                       </div>
                       <div class="col-md-6 col-lg-3">
                           <ul class=" list-unstyled">
                               <li>
                                   <h4>Modules</h4>
                               </li>
                               <li>
                                   <a
                                       href="/5.20.2/index-modules-A.html">Modules</a>
                               </li>
                               <li>
                                   <a
                                       href="/5.20.2/index-pragmas.html">Pragmas</a>
                               </li>
                               <li>
                                   <a
                                       href="/5.20.2/index-utilities.html">Utilities</a>
                               </li>
                           </ul>
                       </div>
                       <div class="col-md-6 col-lg-3">
                           <ul class=" list-unstyled">
                               <li>
                                   <h4>Misc</h4>
                               </li>
                               <li>
                                   <a
                                       href="/5.20.2/index-licence.html">License</a>
                               </li>
                               <li>
                                   <a
                                       href="/5.20.2/index-internals.html">Internals</a>
                               </li>
                               <li>
                                   <a
                                       href="/5.20.2/index-platforms.html">Platforms</a>
                               </li>
                            <li>
                                <a
                                    href="/5.20.2/index-about.html">About</a>
                            </li>
                           </ul>
                       </div>
                   </div>
               </div>
               <div class=" col-12 footer-inf text-center">
                   <small>perldoc.perl.org - Official documentation for the Perl
                       programming language</small>
               </div>
           </div>
       </div>
   </footer>

        	<div class="beta-wrapper beta-bottom-right ">
		<div class="beta beta-blue  ">
			<a class="beta-link "
				href="//github.com/OpusVL/perldoc.perl.org/issues/new" rel="noopener">
				<span class="beta-text">
					This website is a Beta release.
				</span>
				<span class="beta-text">
					For any issues please raise a ticket on GitHub
				</span>
			</a>
		</div>
	</div>

        <script src="/public/js/main.min.js"></script>
      </body>

      </html>
