      
      
      
      

      <!DOCTYPE html>
      <html lang="en">

      <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="description" content="File::Temp - perldoc.perl.org">
        <link rel="icon" href="/public/img/favicon.ico">
        <title>File::Temp - perldoc.perl.org</title>
        <link href="/public/css/main.min.css" rel="stylesheet">
        <link rel="canonical" href="/File/Temp.html">
        <link
          href='https://fonts.googleapis.com/css?family=Lato:400,100,300,700,900'
          rel='stylesheet' type='text/css'>
        <script>
          window.ga = window.ga || function () {
            (ga.q = ga.q || []).push(arguments)
          };
          ga.l = +new Date;
          ga('create', 'UA-1892152-2', 'auto'); // JJ's account
          ga('create', 'UA-50555-3', 'auto', 'perlOrg'); // perl.org account
          ga('require', 'outboundLinkTracker', {
            events: ['click', 'auxclick', 'contextmenu'],
          });
          ga('require', 'maxScrollTracker');
          ga('send', 'pageview');
          ga('perlOrg.send', 'pageview');
        </script>
        <script async src="https://www.google-analytics.com/analytics.js">
        </script>
        <script async src="/public/js/tracking.min.js"></script>
      </head>

      <body class="body container-fluid ">
        <div class="wrapper">

          <nav
    class="navbar navbar-dark bg-primary bg-perl fixed-top justify-content-between navbar-expand-lg">
    <a href="#content" class="skippy sr-only sr-only-focusable">
        <span class=' skippy-text'>Skip to main content</span>
    </a>
    <a class="navbar-brand" href="/">
        <img class="logo" src="/public/img/logo_perl_doc.svg"
            alt="Perl Documentation Logo" />
    </a>
    <button class="navbar-toggler" type="button" data-toggle="collapse"
        data-target="#navbar" aria-controls="navbar" aria-expanded="false"
        aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
    </button>
    <div id="navbar" class="collapse navbar-collapse ">
        <ul class="navbar-nav ml-auto navbar-right">
            <form class="nav-item dropdown search-wrapper">
                <input type="text" id='searchinput' aria-describedby='navbarDropdown5'
                    placeholder="Type query" class='search-input-field' value=''>

                <button href="#" data-toggle='dropdown' type="button"
                    aria-haspopup="true" aria-expanded='false' id="navbarDropdown5"
                    class="nav-link dropdown-toggle search-link">
                    <object tabindex='-1' focusable="false" class='search-icon'
                        data="/public/img/search.svg" type="image/svg+xml"
                        name='search icon'>search
                        icon</object>
                </button>
                <div class="dropdown-menu" aria-labelledby="navbarDropdown5"
                    id='search-results'>
                    <p class='dropdown-item major-version'>
                        No results
                    </p>
                </div>
            </form>
            <li class="nav-item dropdown">
                <a id="navbarDropdown" href="#" class="nav-link dropdown-toggle"
                    data-toggle="dropdown" role="button" aria-haspopup="true"
                    aria-expanded="false">Perl versions</a>
                <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                    
                        <p class='dropdown-item major-version'>
                            5.32
                        </p>
                        
                        <a class='dropdown-item minor-version' href="/5.32.0/">5.32.0</a>
                        
                        
                        <div class="dropdown-divider"></div>
                        
                    
                        <p class='dropdown-item major-version'>
                            5.30
                        </p>
                        
                        <a class='dropdown-item minor-version' href="/5.30.3/">5.30.3</a>
                        
                        <a class='dropdown-item minor-version' href="/5.30.2/">5.30.2</a>
                        
                        <a class='dropdown-item minor-version' href="/5.30.1/">5.30.1</a>
                        
                        <a class='dropdown-item minor-version' href="/5.30.0/">5.30.0</a>
                        
                        
                        <div class="dropdown-divider"></div>
                        
                    
                        <p class='dropdown-item major-version'>
                            5.28
                        </p>
                        
                        <a class='dropdown-item minor-version' href="/5.28.3/">5.28.3</a>
                        
                        <a class='dropdown-item minor-version' href="/5.28.2/">5.28.2</a>
                        
                        <a class='dropdown-item minor-version' href="/5.28.1/">5.28.1</a>
                        
                        <a class='dropdown-item minor-version' href="/5.28.0/">5.28.0</a>
                        
                        
                        <div class="dropdown-divider"></div>
                        
                    
                        <p class='dropdown-item major-version'>
                            5.26
                        </p>
                        
                        <a class='dropdown-item minor-version' href="/5.26.3/">5.26.3</a>
                        
                        <a class='dropdown-item minor-version' href="/5.26.2/">5.26.2</a>
                        
                        <a class='dropdown-item minor-version' href="/5.26.1/">5.26.1</a>
                        
                        <a class='dropdown-item minor-version' href="/5.26.0/">5.26.0</a>
                        
                        
                        <div class="dropdown-divider"></div>
                        
                    
                        <p class='dropdown-item major-version'>
                            5.24
                        </p>
                        
                        <a class='dropdown-item minor-version' href="/5.24.4/">5.24.4</a>
                        
                        <a class='dropdown-item minor-version' href="/5.24.3/">5.24.3</a>
                        
                        <a class='dropdown-item minor-version' href="/5.24.2/">5.24.2</a>
                        
                        <a class='dropdown-item minor-version' href="/5.24.1/">5.24.1</a>
                        
                        <a class='dropdown-item minor-version' href="/5.24.0/">5.24.0</a>
                        
                        
                        <div class="dropdown-divider"></div>
                        
                    
                        <p class='dropdown-item major-version'>
                            5.22
                        </p>
                        
                        <a class='dropdown-item minor-version' href="/5.22.4/">5.22.4</a>
                        
                        <a class='dropdown-item minor-version' href="/5.22.3/">5.22.3</a>
                        
                        <a class='dropdown-item minor-version' href="/5.22.2/">5.22.2</a>
                        
                        <a class='dropdown-item minor-version' href="/5.22.1/">5.22.1</a>
                        
                        <a class='dropdown-item minor-version' href="/5.22.0/">5.22.0</a>
                        
                        
                        <div class="dropdown-divider"></div>
                        
                    
                        <p class='dropdown-item major-version'>
                            5.20
                        </p>
                        
                        <a class='dropdown-item minor-version' href="/5.20.3/">5.20.3</a>
                        
                        <a class='dropdown-item minor-version' href="/5.20.2/">5.20.2</a>
                        
                        <a class='dropdown-item minor-version' href="/5.20.1/">5.20.1</a>
                        
                        <a class='dropdown-item minor-version' href="/5.20.0/">5.20.0</a>
                        
                        
                        <div class="dropdown-divider"></div>
                        
                    
                        <p class='dropdown-item major-version'>
                            5.18
                        </p>
                        
                        <a class='dropdown-item minor-version' href="/5.18.4/">5.18.4</a>
                        
                        <a class='dropdown-item minor-version' href="/5.18.3/">5.18.3</a>
                        
                        <a class='dropdown-item minor-version' href="/5.18.2/">5.18.2</a>
                        
                        <a class='dropdown-item minor-version' href="/5.18.1/">5.18.1</a>
                        
                        <a class='dropdown-item minor-version' href="/5.18.0/">5.18.0</a>
                        
                        
                        <div class="dropdown-divider"></div>
                        
                    
                        <p class='dropdown-item major-version'>
                            5.16
                        </p>
                        
                        <a class='dropdown-item minor-version' href="/5.16.3/">5.16.3</a>
                        
                        <a class='dropdown-item minor-version' href="/5.16.2/">5.16.2</a>
                        
                        <a class='dropdown-item minor-version' href="/5.16.1/">5.16.1</a>
                        
                        <a class='dropdown-item minor-version' href="/5.16.0/">5.16.0</a>
                        
                        
                        <div class="dropdown-divider"></div>
                        
                    
                        <p class='dropdown-item major-version'>
                            5.14
                        </p>
                        
                        <a class='dropdown-item minor-version' href="/5.14.4/">5.14.4</a>
                        
                        <a class='dropdown-item minor-version' href="/5.14.3/">5.14.3</a>
                        
                        <a class='dropdown-item minor-version' href="/5.14.2/">5.14.2</a>
                        
                        <a class='dropdown-item minor-version' href="/5.14.1/">5.14.1</a>
                        
                        <a class='dropdown-item minor-version' href="/5.14.0/">5.14.0</a>
                        
                        
                        <div class="dropdown-divider"></div>
                        
                    
                        <p class='dropdown-item major-version'>
                            5.12
                        </p>
                        
                        <a class='dropdown-item minor-version' href="/5.12.5/">5.12.5</a>
                        
                        <a class='dropdown-item minor-version' href="/5.12.4/">5.12.4</a>
                        
                        <a class='dropdown-item minor-version' href="/5.12.3/">5.12.3</a>
                        
                        <a class='dropdown-item minor-version' href="/5.12.2/">5.12.2</a>
                        
                        <a class='dropdown-item minor-version' href="/5.12.1/">5.12.1</a>
                        
                        <a class='dropdown-item minor-version' href="/5.12.0/">5.12.0</a>
                        
                        
                        <div class="dropdown-divider"></div>
                        
                    
                        <p class='dropdown-item major-version'>
                            5.10
                        </p>
                        
                        <a class='dropdown-item minor-version' href="/5.10.1/">5.10.1</a>
                        
                        <a class='dropdown-item minor-version' href="/5.10.0/">5.10.0</a>
                        
                        
                        <div class="dropdown-divider"></div>
                        
                    
                        <p class='dropdown-item major-version'>
                            5.8
                        </p>
                        
                        <a class='dropdown-item minor-version' href="/5.8.9/">5.8.9</a>
                        
                        <a class='dropdown-item minor-version' href="/5.8.8/">5.8.8</a>
                        
                        <a class='dropdown-item minor-version' href="/5.8.7/">5.8.7</a>
                        
                        <a class='dropdown-item minor-version' href="/5.8.6/">5.8.6</a>
                        
                        <a class='dropdown-item minor-version' href="/5.8.5/">5.8.5</a>
                        
                        <a class='dropdown-item minor-version' href="/5.8.4/">5.8.4</a>
                        
                        <a class='dropdown-item minor-version' href="/5.8.3/">5.8.3</a>
                        
                        <a class='dropdown-item minor-version' href="/5.8.2/">5.8.2</a>
                        
                        <a class='dropdown-item minor-version' href="/5.8.1/">5.8.1</a>
                        
                        <a class='dropdown-item minor-version' href="/5.8.0/">5.8.0</a>
                        
                        
                        <div class="dropdown-divider"></div>
                        
                    
                        <p class='dropdown-item major-version'>
                            5.6
                        </p>
                        
                        <a class='dropdown-item minor-version' href="/5.6.2/">5.6.2</a>
                        
                        <a class='dropdown-item minor-version' href="/5.6.1/">5.6.1</a>
                        
                        <a class='dropdown-item minor-version' href="/5.6.0/">5.6.0</a>
                        
                        
                    
                </div>
            </li>
            <li class="nav-item dropdown">
                <a id="navbarDropdown1" href="#" class="dropdown-toggle nav-link"
                    data-toggle="dropdown" role="button" aria-haspopup="true"
                    aria-expanded="false">Manuals</a>
                <div class="dropdown-menu" aria-labelledby="navbarDropdown1">
                    <a class="dropdown-item"
                        href="/5.8.1/index-overview.html">Overview</a>
                    <a class="dropdown-item"
                        href="/5.8.1/index-tutorials.html">Tutorials</a>
                    <a class="dropdown-item"
                        href="/5.8.1/index-faq.html">FAQs</a>
                    <a class="dropdown-item"
                        href="/5.8.1/index-history.html">Changes</a>
                    <a class="dropdown-item"
                        href="/5.8.1/index-licence.html">License</a>
                    <a class="dropdown-item"
                        href="/5.8.1/index-language.html">Language</a>
                    <a class="dropdown-item"
                        href="/5.8.1/index-functions.html">Functions</a>
                    <a class="dropdown-item"
                        href="/5.8.1/perlop.html">Operators</a>
                    <a class="dropdown-item"
                        href="/5.8.1/perlvar.html">Variables</a>
                    <a class="dropdown-item"
                        href="/5.8.1/index-pragmas.html">Pragmas</a>
                    <a class="dropdown-item"
                        href="/5.8.1/index-utilities.html">Utilities</a>
                    <a class="dropdown-item"
                        href="/5.8.1/index-internals.html">Internals</a>
                    <a class="dropdown-item"
                        href="/5.8.1/index-platforms.html">Platforms</a>
                </div>
            </li>
            <li class="nav-item dropdown">
                <a id="navbarDropdown3" href="#" class="nav-link dropdown-toggle "
                    data-toggle="dropdown" role="button" aria-haspopup="true"
                    aria-expanded="false">Modules</a>
                <div aria-labelledby="navbarDropdown3"
                    class="dropdown-menu letters-wrap">
                    <!--<a class="dropdown-item"
                        href="/5.8.1/index-modules.html">A-Z</a>
                    <a class="dropdown-item"
                        href="/5.8.1/index-modules-by-cat.html">By
                        Category</a>-->
                    <div class="dropdown-divider"></div>
                    <div class="letter-container">
                        <a class="dropdown-item letters"
                            href="/5.8.1/index-modules-A.html">A</a>
                        <a class="dropdown-item letters"
                            href="/5.8.1/index-modules-B.html">B</a>
                        <a class="dropdown-item letters"
                            href="/5.8.1/index-modules-C.html">C</a>
                        <a class="dropdown-item letters"
                            href="/5.8.1/index-modules-D.html">D</a>
                        <a class="dropdown-item letters"
                            href="/5.8.1/index-modules-E.html">E</a>
                        <a class="dropdown-item letters"
                            href="/5.8.1/index-modules-F.html">F</a>
                        <a class="dropdown-item letters"
                            href="/5.8.1/index-modules-G.html">G</a>
                        <a class="dropdown-item letters"
                            href="/5.8.1/index-modules-H.html">H</a>
                        <a class="dropdown-item letters"
                            href="/5.8.1/index-modules-I.html">I</a>
                        <a class="dropdown-item letters"
                            href="/5.8.1/index-modules-J.html">J</a>
                        <a class="dropdown-item letters"
                            href="/5.8.1/index-modules-K.html">K</a>
                        <a class="dropdown-item letters"
                            href="/5.8.1/index-modules-L.html">L</a>
                        <a class="dropdown-item letters"
                            href="/5.8.1/index-modules-M.html">M</a>
                        <a class="dropdown-item letters"
                            href="/5.8.1/index-modules-N.html">N</a>
                        <a class="dropdown-item letters"
                            href="/5.8.1/index-modules-O.html">O</a>
                        <a class="dropdown-item letters"
                            href="/5.8.1/index-modules-P.html">P</a>
                        <a class="dropdown-item letters"
                            href="/5.8.1/index-modules-Q.html">Q</a>
                        <a class="dropdown-item letters"
                            href="/5.8.1/index-modules-R.html">R</a>
                        <a class="dropdown-item letters"
                            href="/5.8.1/index-modules-S.html">S</a>
                        <a class="dropdown-item letters"
                            href="/5.8.1/index-modules-T.html">T</a>
                        <a class="dropdown-item letters"
                            href="/5.8.1/index-modules-U.html">U</a>
                        <a class="dropdown-item letters"
                            href="/5.8.1/index-modules-V.html">V</a>
                        <a class="dropdown-item letters"
                            href="/5.8.1/index-modules-W.html">W</a>
                        <a class="dropdown-item letters"
                            href="/5.8.1/index-modules-X.html">X</a>
                        <a class="dropdown-item letters"
                            href="/5.8.1/index-modules-Y.html">Y</a>
                        <a class="dropdown-item letters"
                            href="/5.8.1/index-modules-Z.html">Z</a>
                    </div>
                </div>
            </li>
            <li class="nav-item dropdown">
                <a id="navbarDropdown4" href="#" class="nav-link dropdown-toggle "
                    data-toggle="dropdown" role="button" aria-haspopup="true"
                    aria-expanded="false">Functions</a>
                <div aria-labelledby="navbarDropdown4"
                    class="dropdown-menu letters-wrap">
                    <a class="dropdown-item"
                        href="/5.8.1/index-functions.html">A-Z</a>
                    <a class="dropdown-item"
                        href="/5.8.1/index-functions-by-cat.html">By
                        Category</a>
                    <div class="dropdown-divider"></div>
                    <div class="letter-container">
                        <a class="dropdown-item letters"
                            href="/5.8.1/index-functions.html#A">A</a>
                        <a class="dropdown-item letters"
                            href="/5.8.1/index-functions.html#B">B</a>
                        <a class="dropdown-item letters"
                            href="/5.8.1/index-functions.html#C">C</a>
                        <a class="dropdown-item letters"
                            href="/5.8.1/index-functions.html#D">D</a>
                        <a class="dropdown-item letters"
                            href="/5.8.1/index-functions.html#E">E</a>
                        <a class="dropdown-item letters"
                            href="/5.8.1/index-functions.html#F">F</a>
                        <a class="dropdown-item letters"
                            href="/5.8.1/index-functions.html#G">G</a>
                        <a class="dropdown-item letters"
                            href="/5.8.1/index-functions.html#H">H</a>
                        <a class="dropdown-item letters"
                            href="/5.8.1/index-functions.html#I">I</a>
                        <a class="dropdown-item letters"
                            href="/5.8.1/index-functions.html#J">J</a>
                        <a class="dropdown-item letters"
                            href="/5.8.1/index-functions.html#K">K</a>
                        <a class="dropdown-item letters"
                            href="/5.8.1/index-functions.html#L">L</a>
                        <a class="dropdown-item letters"
                            href="/5.8.1/index-functions.html#M">M</a>
                        <a class="dropdown-item letters"
                            href="/5.8.1/index-functions.html#N">N</a>
                        <a class="dropdown-item letters"
                            href="/5.8.1/index-functions.html#O">O</a>
                        <a class="dropdown-item letters"
                            href="/5.8.1/index-functions.html#P">P</a>
                        <a class="dropdown-item letters"
                            href="/5.8.1/index-functions.html#Q">Q</a>
                        <a class="dropdown-item letters"
                            href="/5.8.1/index-functions.html#R">R</a>
                        <a class="dropdown-item letters"
                            href="/5.8.1/index-functions.html#S">S</a>
                        <a class="dropdown-item letters"
                            href="/5.8.1/index-functions.html#T">T</a>
                        <a class="dropdown-item letters"
                            href="/5.8.1/index-functions.html#U">U</a>
                        <a class="dropdown-item letters"
                            href="/5.8.1/index-functions.html#V">V</a>
                        <a class="dropdown-item letters"
                            href="/5.8.1/index-functions.html#W">W</a>
                        <a class="dropdown-item letters"
                            href="/5.8.1/index-functions.html#X">X</a>
                        <a class="dropdown-item letters"
                            href="/5.8.1/index-functions.html#Y">Y</a>
                        <a class="dropdown-item letters"
                            href="/5.8.1/index-functions.html#Z">Z</a>
                    </div>
                </div>
            </li>
        </ul>
    </div>
    <!--/.nav-collapse -->
</nav>


          <main class="row main-content pb-5 pt-5" id='content'>
            <div class="col-sm-10 offset-sm-1 col-xl-8 offset-xl-2">
              <div class="row">
                <div class="col-sm-12">
                  <div id="breadcrumbs">
                      
    <a href="../index.html">Home</a>&nbsp; &gt;
    
      
        <a href="../index-modules-F.html">Core modules (F)</a> &gt;
      
    
    File::Temp
  

                  </div>
                </div>
              </div>
              <div class="row">
                <article class="col-sm-12 content">
                  <div class="documentation-wrapper">
                    <div id="perl_version">
                      <h7 class='page-title'> Perl 5 version 8.1
                        documentation</h7>
                    </div>
                    <h1>File::Temp</h1>


  <!--    -->
<ul><li><a href="#NAME">NAME</a></li><li><a href="#SYNOPSIS">SYNOPSIS</a></li><li><a href="#DESCRIPTION">DESCRIPTION</a></li><li><a href="#OO-INTERFACE">OO INTERFACE</a></li><li><a href="#FUNCTIONS">FUNCTIONS</a></li><li><a href="#MKTEMP-FUNCTIONS">MKTEMP FUNCTIONS</a></li><li><a href="#POSIX-FUNCTIONS">POSIX FUNCTIONS</a></li><li><a href="#ADDITIONAL-FUNCTIONS">ADDITIONAL FUNCTIONS</a></li><li><a href="#UTILITY-FUNCTIONS">UTILITY FUNCTIONS</a></li><li><a href="#PACKAGE-VARIABLES">PACKAGE VARIABLES</a></li><li><a href="#WARNING">WARNING</a></li><ul><li><a href="#Temporary-files-and-NFS">Temporary files and NFS</a></li></ul><li><a href="#HISTORY">HISTORY</a></li><li><a href="#SEE-ALSO">SEE ALSO</a></li><li><a href="#AUTHOR">AUTHOR</a></li></ul><a class='view-head1' id="NAME"></a><h2 class='h2' >NAME</h2>
<p>File::Temp - return name and handle of a temporary file safely</p>
<a class='view-head1' id="SYNOPSIS"></a><h2 class='h2' >SYNOPSIS</h2>
<pre class="verbatim"><ol><li>  <a class="l_k" href="../functions/use.html">use</a> <span class="w">File::Temp</span> <span class="q">qw/ tempfile tempdir /</span><span class="sc">;</span></li><li></li><li>  <span class="i">$dir</span> = <span class="i">tempdir</span><span class="s">(</span> <span class="w">CLEANUP</span> <span class="cm">=&gt;</span> <span class="n">1</span> <span class="s">)</span><span class="sc">;</span></li><li>  <span class="s">(</span><span class="i">$fh</span><span class="cm">,</span> <span class="i">$filename</span><span class="s">)</span> = <span class="i">tempfile</span><span class="s">(</span> <span class="w">DIR</span> <span class="cm">=&gt;</span> <span class="i">$dir</span> <span class="s">)</span><span class="sc">;</span></li><li></li><li>  <span class="s">(</span><span class="i">$fh</span><span class="cm">,</span> <span class="i">$filename</span><span class="s">)</span> = <span class="i">tempfile</span><span class="s">(</span> <span class="i">$template</span><span class="cm">,</span> <span class="w">DIR</span> <span class="cm">=&gt;</span> <span class="i">$dir</span><span class="s">)</span><span class="sc">;</span></li><li>  <span class="s">(</span><span class="i">$fh</span><span class="cm">,</span> <span class="i">$filename</span><span class="s">)</span> = <span class="i">tempfile</span><span class="s">(</span> <span class="i">$template</span><span class="cm">,</span> <span class="w">SUFFIX</span> <span class="cm">=&gt;</span> <span class="q">&#39;.dat&#39;</span><span class="s">)</span><span class="sc">;</span></li><li></li><li>  <span class="i">$fh</span> = <span class="i">tempfile</span><span class="s">(</span><span class="s">)</span><span class="sc">;</span></li></ol></pre><p>Object interface:</p>
<pre class="verbatim"><ol><li>  <a class="l_k" href="../functions/require.html">require</a> <span class="w">File::Temp</span><span class="sc">;</span></li><li>  <a class="l_k" href="../functions/use.html">use</a> <span class="w">File::Temp</span> <span class="s">(</span><span class="s">)</span><span class="sc">;</span></li><li></li><li>  <span class="i">$fh</span> = <span class="w">new</span> <span class="i">File::Temp</span><span class="s">(</span><span class="i">$template</span><span class="s">)</span><span class="sc">;</span></li><li>  <span class="i">$fname</span> = <span class="i">$fh</span><span class="i">-&gt;filename</span><span class="sc">;</span></li><li></li><li>  <span class="i">$tmp</span> = <span class="w">new</span> <span class="i">File::Temp</span><span class="s">(</span> <span class="w">UNLINK</span> <span class="cm">=&gt;</span> <span class="n">0</span><span class="cm">,</span> <span class="w">SUFFIX</span> <span class="cm">=&gt;</span> <span class="q">&#39;.dat&#39;</span> <span class="s">)</span><span class="sc">;</span></li><li>  <a class="l_k" href="../functions/print.html">print</a> <span class="i">$tmp</span> <span class="q">&quot;Some data\n&quot;</span><span class="sc">;</span></li><li>  <a class="l_k" href="../functions/print.html">print</a> <span class="q">&quot;Filename is $tmp\n&quot;</span><span class="sc">;</span></li></ol></pre><p>MkTemp family:</p>
<pre class="verbatim"><ol><li>  <a class="l_k" href="../functions/use.html">use</a> <span class="w">File::Temp</span> <span class="q">qw/ :mktemp  /</span><span class="sc">;</span></li><li></li><li>  <span class="s">(</span><span class="i">$fh</span><span class="cm">,</span> <span class="i">$file</span><span class="s">)</span> = <span class="i">mkstemp</span><span class="s">(</span> <span class="q">&quot;tmpfileXXXXX&quot;</span> <span class="s">)</span><span class="sc">;</span></li><li>  <span class="s">(</span><span class="i">$fh</span><span class="cm">,</span> <span class="i">$file</span><span class="s">)</span> = <span class="i">mkstemps</span><span class="s">(</span> <span class="q">&quot;tmpfileXXXXXX&quot;</span><span class="cm">,</span> <span class="i">$suffix</span><span class="s">)</span><span class="sc">;</span></li><li></li><li>  <span class="i">$tmpdir</span> = <span class="i">mkdtemp</span><span class="s">(</span> <span class="i">$template</span> <span class="s">)</span><span class="sc">;</span></li><li></li><li>  <span class="i">$unopened_file</span> = <span class="i">mktemp</span><span class="s">(</span> <span class="i">$template</span> <span class="s">)</span><span class="sc">;</span></li></ol></pre><p>POSIX functions:</p>
<pre class="verbatim"><ol><li>  <a class="l_k" href="../functions/use.html">use</a> <span class="w">File::Temp</span> <span class="q">qw/ :POSIX /</span><span class="sc">;</span></li><li></li><li>  <span class="i">$file</span> = <span class="i">tmpnam</span><span class="s">(</span><span class="s">)</span><span class="sc">;</span></li><li>  <span class="i">$fh</span> = <span class="i">tmpfile</span><span class="s">(</span><span class="s">)</span><span class="sc">;</span></li><li></li><li>  <span class="s">(</span><span class="i">$fh</span><span class="cm">,</span> <span class="i">$file</span><span class="s">)</span> = <span class="i">tmpnam</span><span class="s">(</span><span class="s">)</span><span class="sc">;</span></li><li>  <span class="i">$fh</span> = <span class="i">tmpfile</span><span class="s">(</span><span class="s">)</span><span class="sc">;</span></li></ol></pre><p>Compatibility functions:</p>
<pre class="verbatim"><ol><li>  <span class="i">$unopened_file</span> = <span class="i">File::Temp::tempnam</span><span class="s">(</span> <span class="i">$dir</span><span class="cm">,</span> <span class="i">$pfx</span> <span class="s">)</span><span class="sc">;</span></li></ol></pre><a class='view-head1' id="DESCRIPTION"></a><h2 class='h2' >DESCRIPTION</h2>
<p><code class="inline"><span class="w">File::Temp</span></code>
 can be used to create and open temporary files in a safe
way.  There is both a function interface and an object-oriented
interface.  The File::Temp constructor or the tempfile() function can
be used to return the name and the open filehandle of a temporary
file.  The tempdir() function can be used to create a temporary
directory.</p>
<p>The security aspect of temporary file creation is emphasized such that
a filehandle and filename are returned together.  This helps guarantee
that a race condition can not occur where the temporary file is
created by another process between checking for the existence of the
file and its opening.  Additional security levels are provided to
check, for example, that the sticky bit is set on world writable
directories.  See <a href="#safe_level">safe_level</a> for more information.</p>
<p>For compatibility with popular C library functions, Perl implementations of
the mkstemp() family of functions are provided. These are, mkstemp(),
mkstemps(), mkdtemp() and mktemp().</p>
<p>Additionally, implementations of the standard <a href="../POSIX.html">POSIX</a>
tmpnam() and tmpfile() functions are provided if required.</p>
<p>Implementations of mktemp(), tmpnam(), and tempnam() are provided,
but should be used with caution since they return only a filename
that was valid when function was called, so cannot guarantee
that the file will not exist by the time the caller opens the filename.</p>
<a class='view-head1' id="OO-INTERFACE"></a><h2 class='h2' >OO INTERFACE</h2>
<p>This is the primary interface for interacting with
<code class="inline"><span class="w">File::Temp</span></code>
. Using the OO interface a temporary file can be created
when the object is constructed and the file can be removed when the
object is no longer required.</p>
<p>Note that there is no method to obtain the filehandle from the
<code class="inline"><span class="w">File::Temp</span></code>
 object. The object itself acts as a filehandle. Also,
the object is configured such that it stringifies to the name of the
temporary file.</p>
<ul>
<li><a class='view-title' id="*new*"></a><strong><strong>new</strong></strong>
<p>Create a temporary file object.</p>
<pre class="verbatim"><ol><li>  <a class="l_k" href="../functions/my.html">my</a> <span class="i">$tmp</span> = <span class="w">new</span> <span class="i">File::Temp</span><span class="s">(</span><span class="s">)</span><span class="sc">;</span></li></ol></pre><p>by default the object is constructed as if <code class="inline"><span class="w">tempfile</span></code>

was called without options, but with the additional behaviour
that the temporary file is removed by the object destructor
if UNLINK is set to true (the default).</p>
<p>Supported arguments are the same as for <code class="inline"><span class="w">tempfile</span></code>
: UNLINK
(defaulting to true), DIR and SUFFIX. Additionally, the filename
template is specified using the TEMPLATE option. The OPEN option
is not supported (the file is always opened).</p>
<pre class="verbatim"><ol><li> <span class="i">$tmp</span> = <span class="w">new</span> <span class="i">File::Temp</span><span class="s">(</span> <span class="w">TEMPLATE</span> <span class="cm">=&gt;</span> <span class="q">&#39;tempXXXXX&#39;</span><span class="cm">,</span></li><li>                        <span class="w">DIR</span> <span class="cm">=&gt;</span> <span class="q">&#39;mydir&#39;</span><span class="cm">,</span></li><li>                        <span class="w">SUFFIX</span> <span class="cm">=&gt;</span> <span class="q">&#39;.dat&#39;</span><span class="s">)</span><span class="sc">;</span></li></ol></pre><p>Arguments are case insensitive.</p>
</li>
<li><a class='view-title' id="*filename*"></a><strong><strong>filename</strong></strong>
<p>Return the name of the temporary file associated with this object.</p>
<pre class="verbatim"><ol><li>  <span class="i">$filename</span> = <span class="i">$tmp</span><span class="i">-&gt;filename</span><span class="sc">;</span></li></ol></pre><p>This method is called automatically when the object is used as
a string.</p>
</li>
<li><a class='view-title' id="*DESTROY*"></a><strong><strong>DESTROY</strong></strong>
<p>When the object goes out of scope, the destructor is called. This
destructor will attempt to unlink the file (using <code class="inline"><span class="w">unlink1</span></code>
)
if the constructor was called with UNLINK set to 1 (the default state
if UNLINK is not specified).</p>
<p>No error is given if the unlink fails.</p>
</li>
</ul>
<a class='view-head1' id="FUNCTIONS"></a><h2 class='h2' >FUNCTIONS</h2>
<p>This section describes the recommended interface for generating
temporary files and directories.</p>
<ul>
<li><a class='view-title' id="*tempfile*"></a><strong><strong>tempfile</strong></strong>
<p>This is the basic function to generate temporary files.
The behaviour of the file can be changed using various options:</p>
<pre class="verbatim"><ol><li>  <span class="s">(</span><span class="i">$fh</span><span class="cm">,</span> <span class="i">$filename</span><span class="s">)</span> = <span class="i">tempfile</span><span class="s">(</span><span class="s">)</span><span class="sc">;</span></li></ol></pre><p>Create a temporary file in  the directory specified for temporary
files, as specified by the tmpdir() function in <a href="../File/Spec.html">File::Spec</a>.</p>
<pre class="verbatim"><ol><li>  <span class="s">(</span><span class="i">$fh</span><span class="cm">,</span> <span class="i">$filename</span><span class="s">)</span> = <span class="i">tempfile</span><span class="s">(</span><span class="i">$template</span><span class="s">)</span><span class="sc">;</span></li></ol></pre><p>Create a temporary file in the current directory using the supplied
template.  Trailing `X' characters are replaced with random letters to
generate the filename.  At least four `X' characters must be present
at the end of the template.</p>
<pre class="verbatim"><ol><li>  <span class="s">(</span><span class="i">$fh</span><span class="cm">,</span> <span class="i">$filename</span><span class="s">)</span> = <span class="i">tempfile</span><span class="s">(</span><span class="i">$template</span><span class="cm">,</span> <span class="w">SUFFIX</span> <span class="cm">=&gt;</span> <span class="i">$suffix</span><span class="s">)</span></li></ol></pre><p>Same as previously, except that a suffix is added to the template
after the `X' translation.  Useful for ensuring that a temporary
filename has a particular extension when needed by other applications.
But see the WARNING at the end.</p>
<pre class="verbatim"><ol><li>  <span class="s">(</span><span class="i">$fh</span><span class="cm">,</span> <span class="i">$filename</span><span class="s">)</span> = <span class="i">tempfile</span><span class="s">(</span><span class="i">$template</span><span class="cm">,</span> <span class="w">DIR</span> <span class="cm">=&gt;</span> <span class="i">$dir</span><span class="s">)</span><span class="sc">;</span></li></ol></pre><p>Translates the template as before except that a directory name
is specified.</p>
<pre class="verbatim"><ol><li>  <span class="s">(</span><span class="i">$fh</span><span class="cm">,</span> <span class="i">$filename</span><span class="s">)</span> = <span class="i">tempfile</span><span class="s">(</span><span class="i">$template</span><span class="cm">,</span> <span class="w">UNLINK</span> <span class="cm">=&gt;</span> <span class="n">1</span><span class="s">)</span><span class="sc">;</span></li></ol></pre><p>Return the filename and filehandle as before except that the file is
automatically removed when the program exits. Default is for the file
to be removed if a file handle is requested and to be kept if the
filename is requested. In a scalar context (where no filename is
returned) the file is always deleted either on exit or when it is closed.</p>
<p>If the template is not specified, a template is always
automatically generated. This temporary file is placed in tmpdir()
(<a href="../File/Spec.html">File::Spec</a>) unless a directory is specified explicitly with the
DIR option.</p>
<pre class="verbatim"><ol><li>  <span class="i">$fh</span> = <span class="i">tempfile</span><span class="s">(</span> <span class="i">$template</span><span class="cm">,</span> <span class="w">DIR</span> <span class="cm">=&gt;</span> <span class="i">$dir</span> <span class="s">)</span><span class="sc">;</span></li></ol></pre><p>If called in scalar context, only the filehandle is returned
and the file will automatically be deleted when closed (see
the description of tmpfile() elsewhere in this document).
This is the preferred mode of operation, as if you only
have a filehandle, you can never create a race condition
by fumbling with the filename. On systems that can not unlink
an open file or can not mark a file as temporary when it is opened
(for example, Windows NT uses the <code class="inline"><span class="w">O_TEMPORARY</span></code>
 flag)
the file is marked for deletion when the program ends (equivalent
to setting UNLINK to 1). The <code class="inline"><span class="w">UNLINK</span></code>
 flag is ignored if present.</p>
<pre class="verbatim"><ol><li>  <span class="s">(</span><a class="l_k" href="../functions/undef.html">undef</a><span class="cm">,</span> <span class="i">$filename</span><span class="s">)</span> = <span class="i">tempfile</span><span class="s">(</span><span class="i">$template</span><span class="cm">,</span> <span class="w">OPEN</span> <span class="cm">=&gt;</span> <span class="n">0</span><span class="s">)</span><span class="sc">;</span></li></ol></pre><p>This will return the filename based on the template but
will not open this file.  Cannot be used in conjunction with
UNLINK set to true. Default is to always open the file
to protect from possible race conditions. A warning is issued
if warnings are turned on. Consider using the tmpnam()
and mktemp() functions described elsewhere in this document
if opening the file is not required.</p>
<p>Options can be combined as required.</p>
</li>
<li><a class='view-title' id="*tempdir*"></a><strong><strong>tempdir</strong></strong>
<p>This is the recommended interface for creation of temporary directories.
The behaviour of the function depends on the arguments:</p>
<pre class="verbatim"><ol><li>  <span class="i">$tempdir</span> = <span class="i">tempdir</span><span class="s">(</span><span class="s">)</span><span class="sc">;</span></li></ol></pre><p>Create a directory in tmpdir() (see <a href="../File/Spec.html">File::Spec</a>).</p>
<pre class="verbatim"><ol><li>  <span class="i">$tempdir</span> = <span class="i">tempdir</span><span class="s">(</span> <span class="i">$template</span> <span class="s">)</span><span class="sc">;</span></li></ol></pre><p>Create a directory from the supplied template. This template is
similar to that described for tempfile(). `X' characters at the end
of the template are replaced with random letters to construct the
directory name. At least four `X' characters must be in the template.</p>
<pre class="verbatim"><ol><li>  <span class="i">$tempdir</span> = <span class="w">tempdir</span> <span class="s">(</span> <span class="w">DIR</span> <span class="cm">=&gt;</span> <span class="i">$dir</span> <span class="s">)</span><span class="sc">;</span></li></ol></pre><p>Specifies the directory to use for the temporary directory.
The temporary directory name is derived from an internal template.</p>
<pre class="verbatim"><ol><li>  <span class="i">$tempdir</span> = <span class="w">tempdir</span> <span class="s">(</span> <span class="i">$template</span><span class="cm">,</span> <span class="w">DIR</span> <span class="cm">=&gt;</span> <span class="i">$dir</span> <span class="s">)</span><span class="sc">;</span></li></ol></pre><p>Prepend the supplied directory name to the template. The template
should not include parent directory specifications itself. Any parent
directory specifications are removed from the template before
prepending the supplied directory.</p>
<pre class="verbatim"><ol><li>  <span class="i">$tempdir</span> = <span class="w">tempdir</span> <span class="s">(</span> <span class="i">$template</span><span class="cm">,</span> <span class="w">TMPDIR</span> <span class="cm">=&gt;</span> <span class="n">1</span> <span class="s">)</span><span class="sc">;</span></li></ol></pre><p>Using the supplied template, create the temporary directory in
a standard location for temporary files. Equivalent to doing</p>
<pre class="verbatim"><ol><li>  <span class="i">$tempdir</span> = <span class="w">tempdir</span> <span class="s">(</span> <span class="i">$template</span><span class="cm">,</span> <span class="w">DIR</span> <span class="cm">=&gt;</span> <span class="w">File::Spec</span><span class="w">-&gt;tmpdir</span><span class="s">)</span><span class="sc">;</span></li></ol></pre><p>but shorter. Parent directory specifications are stripped from the
template itself. The <code class="inline"><span class="w">TMPDIR</span></code>
 option is ignored if <code class="inline"><span class="w">DIR</span></code>
 is set
explicitly.  Additionally, <code class="inline"><span class="w">TMPDIR</span></code>
 is implied if neither a template
nor a directory are supplied.</p>
<pre class="verbatim"><ol><li>  <span class="i">$tempdir</span> = <span class="i">tempdir</span><span class="s">(</span> <span class="i">$template</span><span class="cm">,</span> <span class="w">CLEANUP</span> <span class="cm">=&gt;</span> <span class="n">1</span><span class="s">)</span><span class="sc">;</span></li></ol></pre><p>Create a temporary directory using the supplied template, but
attempt to remove it (and all files inside it) when the program
exits. Note that an attempt will be made to remove all files from
the directory even if they were not created by this module (otherwise
why ask to clean it up?). The directory removal is made with
the rmtree() function from the <a href="../File/Path.html">File::Path</a> module.
Of course, if the template is not specified, the temporary directory
will be created in tmpdir() and will also be removed at program exit.</p>
</li>
</ul>
<a class='view-head1' id="MKTEMP-FUNCTIONS"></a><h2 class='h2' >MKTEMP FUNCTIONS</h2>
<p>The following functions are Perl implementations of the
mktemp() family of temp file generation system calls.</p>
<ul>
<li><a class='view-title' id="*mkstemp*"></a><strong><strong>mkstemp</strong></strong>
<p>Given a template, returns a filehandle to the temporary file and the name
of the file.</p>
<pre class="verbatim"><ol><li>  <span class="s">(</span><span class="i">$fh</span><span class="cm">,</span> <span class="i">$name</span><span class="s">)</span> = <span class="i">mkstemp</span><span class="s">(</span> <span class="i">$template</span> <span class="s">)</span><span class="sc">;</span></li></ol></pre><p>In scalar context, just the filehandle is returned.</p>
<p>The template may be any filename with some number of X's appended
to it, for example <i>/tmp/temp.XXXX</i>. The trailing X's are replaced
with unique alphanumeric combinations.</p>
</li>
<li><a class='view-title' id="*mkstemps*"></a><strong><strong>mkstemps</strong></strong>
<p>Similar to mkstemp(), except that an extra argument can be supplied
with a suffix to be appended to the template.</p>
<pre class="verbatim"><ol><li>  <span class="s">(</span><span class="i">$fh</span><span class="cm">,</span> <span class="i">$name</span><span class="s">)</span> = <span class="i">mkstemps</span><span class="s">(</span> <span class="i">$template</span><span class="cm">,</span> <span class="i">$suffix</span> <span class="s">)</span><span class="sc">;</span></li></ol></pre><p>For example a template of <code class="inline"><span class="w">testXXXXXX</span></code>
 and suffix of <code class="inline">.<span class="w">dat</span></code>

would generate a file similar to <i>testhGji_w.dat</i>.</p>
<p>Returns just the filehandle alone when called in scalar context.</p>
</li>
<li><a class='view-title' id="*mkdtemp*"></a><strong><strong>mkdtemp</strong></strong>
<p>Create a directory from a template. The template must end in
X's that are replaced by the routine.</p>
<pre class="verbatim"><ol><li>  <span class="i">$tmpdir_name</span> = <span class="i">mkdtemp</span><span class="s">(</span><span class="i">$template</span><span class="s">)</span><span class="sc">;</span></li></ol></pre><p>Returns the name of the temporary directory created.
Returns undef on failure.</p>
<p>Directory must be removed by the caller.</p>
</li>
<li><a class='view-title' id="*mktemp*"></a><strong><strong>mktemp</strong></strong>
<p>Returns a valid temporary filename but does not guarantee
that the file will not be opened by someone else.</p>
<pre class="verbatim"><ol><li>  <span class="i">$unopened_file</span> = <span class="i">mktemp</span><span class="s">(</span><span class="i">$template</span><span class="s">)</span><span class="sc">;</span></li></ol></pre><p>Template is the same as that required by mkstemp().</p>
</li>
</ul>
<a class='view-head1' id="POSIX-FUNCTIONS"></a><h2 class='h2' >POSIX FUNCTIONS</h2>
<p>This section describes the re-implementation of the tmpnam()
and tmpfile() functions described in <a href="../POSIX.html">POSIX</a>
using the mkstemp() from this module.</p>
<p>Unlike the <a href="../POSIX.html">POSIX</a> implementations, the directory used
for the temporary file is not specified in a system include
file (<code class="inline"><span class="w">P_tmpdir</span></code>
) but simply depends on the choice of tmpdir()
returned by <a href="../File/Spec.html">File::Spec</a>. On some implementations this
location can be set using the <code class="inline"><span class="w">TMPDIR</span></code>
 environment variable, which
may not be secure.
If this is a problem, simply use mkstemp() and specify a template.</p>
<ul>
<li><a class='view-title' id="*tmpnam*"></a><strong><strong>tmpnam</strong></strong>
<p>When called in scalar context, returns the full name (including path)
of a temporary file (uses mktemp()). The only check is that the file does
not already exist, but there is no guarantee that that condition will
continue to apply.</p>
<pre class="verbatim"><ol><li>  <span class="i">$file</span> = <span class="i">tmpnam</span><span class="s">(</span><span class="s">)</span><span class="sc">;</span></li></ol></pre><p>When called in list context, a filehandle to the open file and
a filename are returned. This is achieved by calling mkstemp()
after constructing a suitable template.</p>
<pre class="verbatim"><ol><li>  <span class="s">(</span><span class="i">$fh</span><span class="cm">,</span> <span class="i">$file</span><span class="s">)</span> = <span class="i">tmpnam</span><span class="s">(</span><span class="s">)</span><span class="sc">;</span></li></ol></pre><p>If possible, this form should be used to prevent possible
race conditions.</p>
<p>See <a href="../File/Spec.html#tmpdir">tmpdir in File::Spec</a> for information on the choice of temporary
directory for a particular operating system.</p>
</li>
<li><a class='view-title' id="*tmpfile*"></a><strong><strong>tmpfile</strong></strong>
<p>Returns the filehandle of a temporary file.</p>
<pre class="verbatim"><ol><li>  <span class="i">$fh</span> = <span class="i">tmpfile</span><span class="s">(</span><span class="s">)</span><span class="sc">;</span></li></ol></pre><p>The file is removed when the filehandle is closed or when the program
exits. No access to the filename is provided.</p>
<p>If the temporary file can not be created undef is returned.
Currently this command will probably not work when the temporary
directory is on an NFS file system.</p>
</li>
</ul>
<a class='view-head1' id="ADDITIONAL-FUNCTIONS"></a><h2 class='h2' >ADDITIONAL FUNCTIONS</h2>
<p>These functions are provided for backwards compatibility
with common tempfile generation C library functions.</p>
<p>They are not exported and must be addressed using the full package
name.</p>
<ul>
<li><a class='view-title' id="*tempnam*"></a><strong><strong>tempnam</strong></strong>
<p>Return the name of a temporary file in the specified directory
using a prefix. The file is guaranteed not to exist at the time
the function was called, but such guarantees are good for one
clock tick only.  Always use the proper form of <code class="inline"><a class="l_k" href="../functions/sysopen.html">sysopen</a></code>
with <code class="inline"><span class="w">O_CREAT</span> | <span class="w">O_EXCL</span></code>
 if you must open such a filename.</p>
<pre class="verbatim"><ol><li>  <span class="i">$filename</span> = <span class="i">File::Temp::tempnam</span><span class="s">(</span> <span class="i">$dir</span><span class="cm">,</span> <span class="i">$prefix</span> <span class="s">)</span><span class="sc">;</span></li></ol></pre><p>Equivalent to running mktemp() with $dir/$prefixXXXXXXXX
(using unix file convention as an example)</p>
<p>Because this function uses mktemp(), it can suffer from race conditions.</p>
</li>
</ul>
<a class='view-head1' id="UTILITY-FUNCTIONS"></a><h2 class='h2' >UTILITY FUNCTIONS</h2>
<p>Useful functions for dealing with the filehandle and filename.</p>
<ul>
<li><a class='view-title' id="*unlink0*"></a><strong><strong>unlink0</strong></strong>
<p>Given an open filehandle and the associated filename, make a safe
unlink. This is achieved by first checking that the filename and
filehandle initially point to the same file and that the number of
links to the file is 1 (all fields returned by stat() are compared).
Then the filename is unlinked and the filehandle checked once again to
verify that the number of links on that file is now 0.  This is the
closest you can come to making sure that the filename unlinked was the
same as the file whose descriptor you hold.</p>
<pre class="verbatim"><ol><li>  <span class="i">unlink0</span><span class="s">(</span><span class="i">$fh</span><span class="cm">,</span> <span class="i">$path</span><span class="s">)</span> or <a class="l_k" href="../functions/die.html">die</a> <span class="q">&quot;Error unlinking file $path safely&quot;</span><span class="sc">;</span></li></ol></pre><p>Returns false on error. The filehandle is not closed since on some
occasions this is not required.</p>
<p>On some platforms, for example Windows NT, it is not possible to
unlink an open file (the file must be closed first). On those
platforms, the actual unlinking is deferred until the program ends and
good status is returned. A check is still performed to make sure that
the filehandle and filename are pointing to the same thing (but not at
the time the end block is executed since the deferred removal may not
have access to the filehandle).</p>
<p>Additionally, on Windows NT not all the fields returned by stat() can
be compared. For example, the <code class="inline"><span class="w">dev</span></code>
 and <code class="inline"><span class="w">rdev</span></code>
 fields seem to be
different.  Also, it seems that the size of the file returned by stat()
does not always agree, with <code class="inline"><a class="l_k" href="../functions/stat.html">stat(FH)</a></code> being more accurate than
<code class="inline"><a class="l_k" href="../functions/stat.html">stat(filename)</a></code>, presumably because of caching issues even when
using autoflush (this is usually overcome by waiting a while after
writing to the tempfile before attempting to <code class="inline"><span class="w">unlink0</span></code>
 it).</p>
<p>Finally, on NFS file systems the link count of the file handle does
not always go to zero immediately after unlinking. Currently, this
command is expected to fail on NFS disks.</p>
</li>
<li><a class='view-title' id="*cmpstat*"></a><strong><strong>cmpstat</strong></strong>
<p>Compare <code class="inline"><a class="l_k" href="../functions/stat.html">stat</a></code> of filehandle with <code class="inline"><a class="l_k" href="../functions/stat.html">stat</a></code> of provided filename.  This
can be used to check that the filename and filehandle initially point
to the same file and that the number of links to the file is 1 (all
fields returned by stat() are compared).</p>
<pre class="verbatim"><ol><li>  <span class="i">cmpstat</span><span class="s">(</span><span class="i">$fh</span><span class="cm">,</span> <span class="i">$path</span><span class="s">)</span> or <a class="l_k" href="../functions/die.html">die</a> <span class="q">&quot;Error comparing handle with file&quot;</span><span class="sc">;</span></li></ol></pre><p>Returns false if the stat information differs or if the link count is
greater than 1.</p>
<p>On certain platofms, eg Windows, not all the fields returned by stat()
can be compared. For example, the <code class="inline"><span class="w">dev</span></code>
 and <code class="inline"><span class="w">rdev</span></code>
 fields seem to be
different in Windows.  Also, it seems that the size of the file
returned by stat() does not always agree, with <code class="inline"><a class="l_k" href="../functions/stat.html">stat(FH)</a></code> being more
accurate than <code class="inline"><a class="l_k" href="../functions/stat.html">stat(filename)</a></code>, presumably because of caching issues
even when using autoflush (this is usually overcome by waiting a while
after writing to the tempfile before attempting to <code class="inline"><span class="w">unlink0</span></code>
 it).</p>
<p>Not exported by default.</p>
</li>
<li><a class='view-title' id="*unlink1*"></a><strong><strong>unlink1</strong></strong>
<p>Similar to <code class="inline"><span class="w">unlink0</span></code>
 except after file comparison using cmpstat, the
filehandle is closed prior to attempting to unlink the file. This
allows the file to be removed without using an END block, but does
mean that the post-unlink comparison of the filehandle state provided
by <code class="inline"><span class="w">unlink0</span></code>
 is not available.</p>
<pre class="verbatim"><ol><li>  <span class="i">unlink1</span><span class="s">(</span><span class="i">$fh</span><span class="cm">,</span> <span class="i">$path</span><span class="s">)</span> or <a class="l_k" href="../functions/die.html">die</a> <span class="q">&quot;Error closing and unlinking file&quot;</span><span class="sc">;</span></li></ol></pre><p>Usually called from the object destructor when using the OO interface.</p>
<p>Not exported by default.</p>
</li>
</ul>
<a class='view-head1' id="PACKAGE-VARIABLES"></a><h2 class='h2' >PACKAGE VARIABLES</h2>
<p>These functions control the global state of the package.</p>
<ul>
<li><a class='view-title' id="*safe_level*"></a><strong><strong>safe_level</strong></strong>
<p>Controls the lengths to which the module will go to check the safety of the
temporary file or directory before proceeding.
Options are:</p>
<ul>
<li><a class='view-title' id="STANDARD"></a><strong>STANDARD</strong>
<p>Do the basic security measures to ensure the directory exists and
is writable, that the umask() is fixed before opening of the file,
that temporary files are opened only if they do not already exist, and
that possible race conditions are avoided.  Finally the <a href="#unlink0">unlink0</a>
function is used to remove files safely.</p>
</li>
<li><a class='view-title' id="MEDIUM"></a><strong>MEDIUM</strong>
<p>In addition to the STANDARD security, the output directory is checked
to make sure that it is owned either by root or the user running the
program. If the directory is writable by group or by other, it is then
checked to make sure that the sticky bit is set.</p>
<p>Will not work on platforms that do not support the <code class="inline">-k</code>
 test
for sticky bit.</p>
</li>
<li><a class='view-title' id="HIGH"></a><strong>HIGH</strong>
<p>In addition to the MEDIUM security checks, also check for the
possibility of ``chown() giveaway'' using the <a href="../POSIX.html">POSIX</a>
sysconf() function. If this is a possibility, each directory in the
path is checked in turn for safeness, recursively walking back to the
root directory.</p>
<p>For platforms that do not support the <a href="../POSIX.html">POSIX</a>
<code class="inline"><span class="w">_PC_CHOWN_RESTRICTED</span></code>
 symbol (for example, Windows NT) it is
assumed that ``chown() giveaway'' is possible and the recursive test
is performed.</p>
</li>
</ul>
<p>The level can be changed as follows:</p>
<pre class="verbatim"><ol><li>  <span class="w">File::Temp</span><span class="w">-&gt;safe_level</span><span class="s">(</span> <span class="w">File::Temp::HIGH</span> <span class="s">)</span><span class="sc">;</span></li></ol></pre><p>The level constants are not exported by the module.</p>
<p>Currently, you must be running at least perl v5.6.0 in order to
run with MEDIUM or HIGH security. This is simply because the
safety tests use functions from <a href="../Fcntl.html">Fcntl</a> that are not
available in older versions of perl. The problem is that the version
number for Fcntl is the same in perl 5.6.0 and in 5.005_03 even though
they are different versions.</p>
<p>On systems that do not support the HIGH or MEDIUM safety levels
(for example Win NT or OS/2) any attempt to change the level will
be ignored. The decision to ignore rather than raise an exception
allows portable programs to be written with high security in mind
for the systems that can support this without those programs failing
on systems where the extra tests are irrelevant.</p>
<p>If you really need to see whether the change has been accepted
simply examine the return value of <code class="inline"><span class="w">safe_level</span></code>
.</p>
<pre class="verbatim"><ol><li>  <span class="i">$newlevel</span> = <span class="w">File::Temp</span><span class="w">-&gt;safe_level</span><span class="s">(</span> <span class="w">File::Temp::HIGH</span> <span class="s">)</span><span class="sc">;</span></li><li>  <a class="l_k" href="../functions/die.html">die</a> <span class="q">&quot;Could not change to high security&quot;</span></li><li>      if <span class="i">$newlevel</span> != <span class="w">File::Temp::HIGH</span><span class="sc">;</span></li></ol></pre></li>
<li><a class='view-title' id="TopSystemUID"></a><strong>TopSystemUID</strong>
<p>This is the highest UID on the current system that refers to a root
UID. This is used to make sure that the temporary directory is
owned by a system UID (<code class="inline"><span class="w">root</span></code>
, <code class="inline"><span class="w">bin</span></code>
, <code class="inline"><span class="w">sys</span></code>
 etc) rather than
simply by root.</p>
<p>This is required since on many unix systems <code class="inline"><span class="q">/tmp</span></code>
 is not owned
by root.</p>
<p>Default is to assume that any UID less than or equal to 10 is a root
UID.</p>
<pre class="verbatim"><ol><li>  <span class="w">File::Temp</span><span class="w">-&gt;top_system_uid</span><span class="s">(</span><span class="n">10</span><span class="s">)</span><span class="sc">;</span></li><li>  <a class="l_k" href="../functions/my.html">my</a> <span class="i">$topid</span> = <span class="w">File::Temp</span><span class="w">-&gt;top_system_uid</span><span class="sc">;</span></li></ol></pre><p>This value can be adjusted to reduce security checking if required.
The value is only relevant when <code class="inline"><span class="w">safe_level</span></code>
 is set to MEDIUM or higher.</p>
</li>
</ul>
<a class='view-head1' id="WARNING"></a><h2 class='h2' >WARNING</h2>
<p>For maximum security, endeavour always to avoid ever looking at,
touching, or even imputing the existence of the filename.  You do not
know that that filename is connected to the same file as the handle
you have, and attempts to check this can only trigger more race
conditions.  It's far more secure to use the filehandle alone and
dispense with the filename altogether.</p>
<p>If you need to pass the handle to something that expects a filename
then, on a unix system, use <code class="inline"><span class="q">&quot;/dev/fd/&quot;</span> . <a class="l_k" href="../functions/fileno.html">fileno</a><span class="s">(</span><span class="i">$fh</span><span class="s">)</span></code>
 for arbitrary
programs, or more generally <code class="inline"><span class="q">&quot;+&lt;=&amp;&quot;</span> . <a class="l_k" href="../functions/fileno.html">fileno</a><span class="s">(</span><span class="i">$fh</span><span class="s">)</span></code>
 for Perl
programs.  You will have to clear the close-on-exec bit on that file
descriptor before passing it to another process.</p>
<pre class="verbatim"><ol><li>    <a class="l_k" href="../functions/use.html">use</a> <span class="w">Fcntl</span> <span class="q">qw/F_SETFD F_GETFD/</span><span class="sc">;</span></li><li>    <a class="l_k" href="../functions/fcntl.html">fcntl</a><span class="s">(</span><span class="i">$tmpfh</span><span class="cm">,</span> <span class="w">F_SETFD</span><span class="cm">,</span> <span class="n">0</span><span class="s">)</span></li><li>        or <a class="l_k" href="../functions/die.html">die</a> <span class="q">&quot;Can&#39;t clear close-on-exec flag on temp fh: $!\n&quot;</span><span class="sc">;</span></li></ol></pre><a class='view-head2' id="Temporary-files-and-NFS"></a><h3 class='h3' >Temporary files and NFS</h3>
<p>Some problems are associated with using temporary files that reside
on NFS file systems and it is recommended that a local filesystem
is used whenever possible. Some of the security tests will most probably
fail when the temp file is not local. Additionally, be aware that
the performance of I/O operations over NFS will not be as good as for
a local disk.</p>
<a class='view-head1' id="HISTORY"></a><h2 class='h2' >HISTORY</h2>
<p>Originally began life in May 1999 as an XS interface to the system
mkstemp() function. In March 2000, the OpenBSD mkstemp() code was
translated to Perl for total control of the code's
security checking, to ensure the presence of the function regardless of
operating system and to help with portability.</p>
<a class='view-head1' id="SEE-ALSO"></a><h2 class='h2' >SEE ALSO</h2>
<p><a href="../POSIX.html#tmpnam">tmpnam in POSIX</a>, <a href="../POSIX.html#tmpfile">tmpfile in POSIX</a>, <a href="../File/Spec.html">File::Spec</a>, <a href="../File/Path.html">File::Path</a></p>
<p>See <a href="../IO/File.html">IO::File</a> and <a href="https://search.cpan.org/perldoc/File::MkTemp">File::MkTemp</a> for different implementations of
temporary file handling.</p>
<a class='view-head1' id="AUTHOR"></a><h2 class='h2' >AUTHOR</h2>
<p>Tim Jenness &lt;tjenness@cpan.org&gt;</p>
<p>Copyright (C) 1999-2003 Tim Jenness and the UK Particle Physics and
Astronomy Research Council. All Rights Reserved.  This program is free
software; you can redistribute it and/or modify it under the same
terms as Perl itself.</p>
<p>Original Perl implementation loosely based on the OpenBSD C code for
mkstemp(). Thanks to Tom Christiansen for suggesting that this module
should be written and providing ideas for code improvements and
security enhancements.</p>




      <ul><li><a href="#NAME">NAME</a></li><li><a href="#SYNOPSIS">SYNOPSIS</a></li><li><a href="#DESCRIPTION">DESCRIPTION</a></li><li><a href="#OO-INTERFACE">OO INTERFACE</a></li><li><a href="#FUNCTIONS">FUNCTIONS</a></li><li><a href="#MKTEMP-FUNCTIONS">MKTEMP FUNCTIONS</a></li><li><a href="#POSIX-FUNCTIONS">POSIX FUNCTIONS</a></li><li><a href="#ADDITIONAL-FUNCTIONS">ADDITIONAL FUNCTIONS</a></li><li><a href="#UTILITY-FUNCTIONS">UTILITY FUNCTIONS</a></li><li><a href="#PACKAGE-VARIABLES">PACKAGE VARIABLES</a></li><li><a href="#WARNING">WARNING</a></li><ul><li><a href="#Temporary-files-and-NFS">Temporary files and NFS</a></li></ul><li><a href="#HISTORY">HISTORY</a></li><li><a href="#SEE-ALSO">SEE ALSO</a></li><li><a href="#AUTHOR">AUTHOR</a></li></ul>


                  </div>
                </article>
              </div>
            </div>
          </main>
        </div>
           <footer class="footer row bg-light pt-5 pb-5">
       <div class="col-sm-10 offset-sm-1 col-xl-8 offset-xl-2">
           <div class="row">
               <div class="col-md-4">
                   <ul class="list-unstyled">
                       <li>
                           <h4>Site info</h4>
                       </li>
                       <li>Docs mantained by
                           <a href="//lists.perl.org/list/perl5-porters.html"
                               rel="noopener">Perl 5 Porters</a>
                       </li>
                       <li>Perldoc site development sponsored by
                           <a href="//opusvl.com" rel="noopener">
                           <img style="margin: 20px 20px 5px 10px" class="opus-logo" src="/public/img/opusvl_logo.svg" alt="OpusVL Logo">
                        </a>
                    <li><span class="about_perldoc"><a href="//about.html">About PerlDOC</a></span>
                    </li>
                       </li>
                   </ul>
               </div>
               <div class="col-md-8">
                   <div class="row">
                       <div class="col-md-6 col-lg-3">
                           <ul class=" list-unstyled">
                               <li>
                                   <h4>Manuals</h4>
                               </li>
                               <li>
                                   <a
                                       href="/5.8.1/index-overview.html">Overview</a>
                               </li>
                               <li>
                                   <a
                                       href="/5.8.1/index-tutorials.html">Tutorials</a>
                               </li>
                               <li>
                                   <a href="/5.8.1/index-faq.html">FAQs</a>
                               </li>
                               <li>
                                   <a
                                       href="/5.8.1/index-history.html">Changes</a>
                               </li>
                           </ul>
                       </div>
                       <div class="col-md-6 col-lg-3">
                           <ul class=" list-unstyled">
                               <li>
                                   <h4>Reference</h4>
                               </li>
                               <li>
                                   <a
                                       href="/5.8.1/index-language.html">Language</a>
                               </li>
                               <li>
                                   <a
                                       href="/5.8.1/index-functions.html">Functions</a>
                               </li>
                               <li>
                                   <a
                                       href="/5.8.1/perlop.html">Operators</a>
                               </li>
                               <li>
                                   <a
                                       href="/5.8.1/perlvar.html">Variables</a>
                               </li>
                           </ul>
                       </div>
                       <div class="col-md-6 col-lg-3">
                           <ul class=" list-unstyled">
                               <li>
                                   <h4>Modules</h4>
                               </li>
                               <li>
                                   <a
                                       href="/5.8.1/index-modules-A.html">Modules</a>
                               </li>
                               <li>
                                   <a
                                       href="/5.8.1/index-pragmas.html">Pragmas</a>
                               </li>
                               <li>
                                   <a
                                       href="/5.8.1/index-utilities.html">Utilities</a>
                               </li>
                           </ul>
                       </div>
                       <div class="col-md-6 col-lg-3">
                           <ul class=" list-unstyled">
                               <li>
                                   <h4>Misc</h4>
                               </li>
                               <li>
                                   <a
                                       href="/5.8.1/index-licence.html">License</a>
                               </li>
                               <li>
                                   <a
                                       href="/5.8.1/index-internals.html">Internals</a>
                               </li>
                               <li>
                                   <a
                                       href="/5.8.1/index-platforms.html">Platforms</a>
                               </li>
                            <li>
                                <a
                                    href="/5.8.1/index-about.html">About</a>
                            </li>
                           </ul>
                       </div>
                   </div>
               </div>
               <div class=" col-12 footer-inf text-center">
                   <small>perldoc.perl.org - Official documentation for the Perl
                       programming language</small>
               </div>
           </div>
       </div>
   </footer>

        	<div class="beta-wrapper beta-bottom-right ">
		<div class="beta beta-blue  ">
			<a class="beta-link "
				href="//github.com/OpusVL/perldoc.perl.org/issues/new" rel="noopener">
				<span class="beta-text">
					This website is a Beta release.
				</span>
				<span class="beta-text">
					For any issues please raise a ticket on GitHub
				</span>
			</a>
		</div>
	</div>

        <script src="/public/js/main.min.js"></script>
      </body>

      </html>
